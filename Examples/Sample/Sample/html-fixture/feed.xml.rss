<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
  <channel>
    <title>NSHipster</title>
    <description>NSHipster is a journal of the overlooked bits in Objective-C and Cocoa. Updated weekly.</description>
    <link>http://nshipster.com</link>
    <pubDate>Mon, 31 Mar 2014 00:00:00 -0700</pubDate>
    
      <item>
        <title>AVSpeechSynthesizer</title>
        <description>&lt;p&gt;Though we&amp;#39;re a long way off from &lt;a href=&quot;https://www.youtube.com/watch?v=ARJ8cAGm6JE&quot;&gt;&lt;em&gt;Hal&lt;/em&gt;&lt;/a&gt; or &lt;a href=&quot;https://www.youtube.com/watch?v=WzV6mXIOVl4&quot;&gt;&lt;em&gt;Her&lt;/em&gt;&lt;/a&gt;, we should never forget about the billions of other people out there for us to talk to.&lt;/p&gt;

&lt;p&gt;Of the thousands of languages in existence, an individual is fortunate to gain a command of just two within their lifetime. And yet, over several millennia of human co-existence, civilization has managed to make things work, more or less, through an ad-hoc network of interpreters, translators, scholars, and children raised in the mixed linguistic traditions of their parents. We&amp;#39;ve seen that mutual understanding fosters peace, and that conversely, mutual unintelligibility destabilizes human relations.&lt;/p&gt;

&lt;p&gt;It is fitting that the development of computational linguistics should coincide with the emergence of the international community we have today. Working towards mutual understanding, intergovernmental organizations like the United Nations and European Union have produced a substantial corpora of &lt;a href=&quot;http://en.wikipedia.org/wiki/Parallel_text&quot;&gt;parallel texts&lt;/a&gt;, which form the foundation of modern language translation technologies.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Another related linguistic development is the &lt;a href=&quot;http://en.wikipedia.org/wiki/Esperanto&quot;&gt;Esperanto&lt;/a&gt; language, created by L. L. Zamenhof in an effort to promote harmony between people of different countries.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;And while automatic text translation has reached an acceptable level for everyday communication, there is still a divide when we venture out into unfamiliar places. There is still much work to be done in order to augment our ability to communicate with one another in person.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Introduced in iOS 7, &lt;code&gt;AVSpeechSynthesizer&lt;/code&gt; produces synthesized speech from a given &lt;code&gt;AVSpeechUtterance&lt;/code&gt;. Each utterance can adjust its rate of speech and pitch, and be configured to use any one of the available &lt;code&gt;AVSpeechSynthesisVoice&lt;/code&gt;s:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Hello, World!&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;AVSpeechUtterance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utterance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechUtterance&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;utterance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;voice&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechSynthesisVoice&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;voiceWithLanguage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;en-US&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;AVSpeechSynthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speechSynthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechSynthesizer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speechSynthesizer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speakUtterance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utterance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When speaking, a synthesizer can either be paused immediately or on the next word boundary, which makes for a less jarring user experience.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speechSynthesizer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pauseSpeakingAtBoundary&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechBoundaryWord&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Supported Languages&lt;/h2&gt;

&lt;p&gt;Mac OS 9 users will no doubt have fond memories of the old system voices: Bubbles, Cellos, Pipe Organ, Bad News.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;These can still be installed on Mac OS X. Just look under the &amp;quot;English (United States) - Novelty&amp;quot; voices in the &amp;quot;Dictation &amp;amp; Speech&amp;quot; preference pane.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In the name of quality over quantity, each language is provided a voice for each major locale region. So instead of asking for &amp;quot;Fred&amp;quot; and &amp;quot;Markus&amp;quot;, &lt;code&gt;AVSpeechSynthesisVoice&lt;/code&gt; asks for &lt;code&gt;en-US&lt;/code&gt; and &lt;code&gt;de-DE&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;As of iOS 7.1, &lt;code&gt;[AVSpeechSynthesisVoice speechVoices]&lt;/code&gt; the following languages and locales are support:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Arabic (&lt;code&gt;ar-SA&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Chinese (&lt;code&gt;zh-CN&lt;/code&gt;, &lt;code&gt;zh-HK&lt;/code&gt;, &lt;code&gt;zh-TW&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Czech (&lt;code&gt;cs-CZ&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Danish (&lt;code&gt;da-DK&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Dutch (&lt;code&gt;nl-BE&lt;/code&gt;, &lt;code&gt;nl-NL&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;English (&lt;code&gt;en-AU&lt;/code&gt;, &lt;code&gt;en-GB&lt;/code&gt;, &lt;code&gt;en-IE&lt;/code&gt;, &lt;code&gt;en-US&lt;/code&gt;, &lt;code&gt;en-ZA&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Finnish (&lt;code&gt;fi-FI&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;French (&lt;code&gt;fr-CA&lt;/code&gt;, &lt;code&gt;fr-FR&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;German (&lt;code&gt;de-DE&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Greek (&lt;code&gt;el-GR&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Hindi (&lt;code&gt;hi-IN&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Hungarian (&lt;code&gt;hu-HU&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Indonesian (&lt;code&gt;id-ID&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Italian (&lt;code&gt;it-IT&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Japanese (&lt;code&gt;ja-JP&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Korean (&lt;code&gt;ko-KR&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Norwegian (&lt;code&gt;no-NO&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Polish (&lt;code&gt;pl-PL&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Portuguese (&lt;code&gt;pt-BR&lt;/code&gt;, &lt;code&gt;pt-PT&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Romanian (&lt;code&gt;ro-RO&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Russian (&lt;code&gt;ru-RU&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Slovak (&lt;code&gt;sk-SK&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Spanish (&lt;code&gt;es-ES&lt;/code&gt;, &lt;code&gt;es-MX&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Swedish (&lt;code&gt;sv-SE&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Thai (&lt;code&gt;th-TH&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Turkish (&lt;code&gt;tr-TR&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;NSLocale&lt;/code&gt; and &lt;code&gt;NSLinguisticTagger&lt;/code&gt; both use ISO 681 codes to identify languages. &lt;code&gt;AVSpeechSynthesisVoice&lt;/code&gt;, however, takes an &lt;a href=&quot;http://en.wikipedia.org/wiki/IETF_language_tag&quot;&gt;IETF Language Tag&lt;/a&gt;, as specified &lt;a href=&quot;http://tools.ietf.org/html/bcp47&quot;&gt;BCP 47 Document Series&lt;/a&gt;. If an utterance string and voice aren&amp;#39;t in the same language, speech synthesis will fail.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://gist.github.com/mattt/9892187&quot;&gt;This gist&lt;/a&gt; shows how to detect an ISO 681 language code from an arbitrary string, and convert that to an IETF language tag.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Delegate Methods&lt;/h2&gt;

&lt;p&gt;What makes &lt;code&gt;AVSpeechSynthesizer&lt;/code&gt; really amazing for developers is the ability to hook into speech events. An object conforming to &lt;code&gt;AVSpeechSynthesizerDelegate&lt;/code&gt; can be called when its speech synthesizer either starts or finishes, pauses or continues, and as each range of the utterance is spoken.&lt;/p&gt;

&lt;p&gt;For example, an app, in addition to synthesizing a voice utterance, could show that utterance in a label, and highlight the word currently being spoken:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#pragma mark - AVSpeechSynthesizerDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;speechSynthesizer:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechSynthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;synthesizer&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;willSpeakRangeOfSpeechString:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;characterRange&lt;/span&gt;
                &lt;span class=&quot;nl&quot;&gt;utterance:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechUtterance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;utterance&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSMutableAttributedString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableAttributedString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableAttributedString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utterance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speechString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableAttributedString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSForegroundColorAttributeName&lt;/span&gt;
                                    &lt;span class=&quot;nl&quot;&gt;value:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIColor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;characterRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utteranceLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attributedText&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutableAttributedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;speechSynthesizer:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechSynthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;synthesizer&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;didStartSpeechUtterance:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechUtterance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;utterance&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utteranceLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attributedText&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSAttributedString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utteranceString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;speechSynthesizer:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechSynthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;synthesizer&lt;/span&gt;
 &lt;span class=&quot;nl&quot;&gt;didFinishSpeechUtterance:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechUtterance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;utterance&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utteranceLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attributedText&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSAttributedString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utteranceString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/avspeechsynthesizer-example.gif&quot; alt=&quot;AVSpeechSynthesizer Example&quot;&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;See &lt;a href=&quot;https://github.com/mattt/AVSpeechSynthesizer-Example&quot;&gt;this example app&lt;/a&gt; for a demonstration of live text-highlighting for all of the supported languages.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;Anyone who travels to an unfamiliar place returns with a profound understanding of what it means to communicate. It&amp;#39;s totally different from how one is taught a language in High School: instead of genders and cases, it&amp;#39;s about emotions and patience and clinging onto every shred of understanding. One is astounded by the extent to which two humans can communicate with hand gestures and facial expressions. One is also humbled by how frustrating it can be when pantomiming breaks down.&lt;/p&gt;

&lt;p&gt;In our modern age, we have the opportunity to go out in a world augmented by a collective computational infrastructure. Armed with &lt;code&gt;AVSpeechSynthesizer&lt;/code&gt; and the myriad other linguistic technologies on iOS and elsewhere, we have never been more capable of breaking down the forces that most divide our species.&lt;/p&gt;

&lt;p&gt;If that isn&amp;#39;t universe-denting, then I don&amp;#39;t know what is.&lt;/p&gt;
</description>
        <pubDate>Mon, 31 Mar 2014 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/avspeechsynthesizer/</link>
        <guid>http://nshipster.com/avspeechsynthesizer/</guid>
      </item>
    
      <item>
        <title>NSURL /&lt;br/&gt;NSURLComponents</title>
        <description>&lt;p&gt;There is a simple beauty to—let&amp;#39;s call them &amp;quot;one-dimensional data types&amp;quot;: numbers or strings formatted to contain multiple values, retrievable through a mathematical operator or parsing routine. Like how the hexadecimal color &lt;tt style=&quot;color: #EE8262;&quot;&gt;#EE8262&lt;/tt&gt; can have &lt;a href=&quot;http://en.wikipedia.org/wiki/Web_colors&quot;&gt;red, green, and blue components&lt;/a&gt; extracted by masking and shifting its bits, or how &lt;a href=&quot;http://en.wikipedia.org/wiki/Regular_expression&quot;&gt;regular expressions&lt;/a&gt; can match and capture complex patterns in just a few characters.&lt;/p&gt;

&lt;p&gt;Of all the one-dimensional data types out there, &lt;a href=&quot;http://en.wikipedia.org/wiki/URI_scheme&quot;&gt;URIs&lt;/a&gt; reign supreme. Here, in a single, human-parsable string, is every conceivable piece of information necessary to encode the location of any piece of information that has, does, and will ever exist on a computer.&lt;/p&gt;

&lt;p&gt;In its most basic form, a URI is comprised of a scheme name and a hierarchical part, with an optional query and fragment:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;    &amp;lt;scheme name&amp;gt; : &amp;lt;hierarchical part&amp;gt; [ ? &amp;lt;query&amp;gt; ] [ # &amp;lt;fragment&amp;gt; ]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Many protocols, including HTTP, specify a regular structure for information like the username, password, port, and path in the hierarchical part:&lt;/p&gt;

&lt;table style=&quot;font-family:Menlo,monospace;&quot;&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;td&gt;foo&lt;/td&gt;
            &lt;td&gt;://&lt;/td&gt;
            &lt;td&gt;username&lt;/td&gt;
            &lt;td&gt;:&lt;/td&gt;
            &lt;td&gt;password&lt;/td&gt;
            &lt;td&gt;@&lt;/td&gt;
            &lt;td&gt;example.com&lt;/td&gt;
            &lt;td&gt;:&lt;/td&gt;
            &lt;td&gt;8042&lt;/td&gt;
            &lt;td&gt;/over/there/index&lt;/td&gt;
            &lt;td&gt;.&lt;/td&gt;
            &lt;td&gt;dtb&lt;/td&gt;
            &lt;td&gt;?&lt;/td&gt;
            &lt;td&gt;type=animal&amp;amp;name=narwhal&lt;/td&gt;
            &lt;td&gt;#&lt;/td&gt;
            &lt;td&gt;nose&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr style=&quot;text-align:center&quot;&gt;
            &lt;td colspan=&quot;2&quot;&gt;scheme&lt;/td&gt;
            &lt;td&gt;username&lt;/td&gt;
            &lt;td&gt;&lt;/td&gt;
            &lt;td&gt;password&lt;/td&gt;
            &lt;td&gt;&lt;/td&gt;
            &lt;td&gt;hostname&lt;/td&gt;
            &lt;td&gt;&lt;/td&gt;
            &lt;td&gt;port&lt;/td&gt;
            &lt;td&gt;path&lt;/td&gt;
            &lt;td&gt;&lt;/td&gt;
            &lt;td&gt;extension&lt;/td&gt;
            &lt;td&gt;&lt;/td&gt;
            &lt;td&gt;query&lt;/td&gt;
            &lt;td&gt;&lt;/td&gt;
            &lt;td&gt;fragment&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A solid grasp of network programming is rooted in an unshakeable familiarity with URL components. As a software developer, this means having a command over the URI functionality in your programming language&amp;#39;s standard library.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If a programming language does not have a URI module in its standard library, run, don&amp;#39;t walk, to a real language that does.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;In Foundation, URLs are represented by &lt;code&gt;NSURL&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSURL&lt;/code&gt; instances are created using the class method &lt;code&gt;URLWithString:&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http://example.com&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If the passed string is not a valid URL, this method will return &lt;code&gt;nil&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSString&lt;/code&gt; also has some vestigial functionality for path manipulation, &lt;a href=&quot;http://nshipster.com/nstemporarydirectory/&quot;&gt;as described a few weeks back&lt;/a&gt;, but that&amp;#39;s being slowly migrated over to &lt;code&gt;NSURL&lt;/code&gt;. While the extra conversion from &lt;code&gt;NSString&lt;/code&gt; to &lt;code&gt;NSURL&lt;/code&gt; is not the most convenient step, it&amp;#39;s always worthwhile. If a value is a URL, it should be stored and passed as an &lt;code&gt;NSURL&lt;/code&gt;; conflating the two types is reckless and lazy API design.&lt;/p&gt;

&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;As a side note, &lt;code&gt;@@&lt;/code&gt; would be a nice literal for &lt;code&gt;NSURL&lt;/code&gt;, (e.g. &lt;code&gt;@@&amp;quot;http://example.com&amp;quot;&lt;/code&gt;), don&amp;#39;t you think?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;NSURL&lt;/code&gt; also has the class method &lt;code&gt;+URLWithString:relativeToURL:&lt;/code&gt;, which can be used to construct a URL from a string relative to a base URL. The behavior of this method can be a source of confusion, because of how it treats leading &lt;code&gt;/&lt;/code&gt;&amp;#39;s in relative paths.&lt;/p&gt;

&lt;p&gt;For reference, here are representative examples of how this method works:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http://example.com/v1/&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relativeToURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// http://example.com/v1/foo&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo?bar=baz&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relativeToURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// http://example.com/v1/foo?bar=baz&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/foo&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relativeToURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// http://example.com/foo&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo/&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relativeToURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// http://example.com/v1/foo&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/foo/&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relativeToURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// http://example.com/foo/&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http://example2.com/&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relativeToURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// http://example2.com/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;URL Components&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSURL&lt;/code&gt; provides accessor methods for each of the URL components as defined by &lt;a href=&quot;http://www.ietf.org/rfc/rfc2396.txt&quot;&gt;RFC 2396&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;– &lt;code&gt;absoluteString&lt;/code&gt;
– &lt;code&gt;absoluteURL&lt;/code&gt;
– &lt;code&gt;baseURL&lt;/code&gt;
– &lt;code&gt;fileSystemRepresentation&lt;/code&gt;
– &lt;code&gt;fragment&lt;/code&gt;
– &lt;code&gt;host&lt;/code&gt;
– &lt;code&gt;lastPathComponent&lt;/code&gt;
– &lt;code&gt;parameterString&lt;/code&gt;
– &lt;code&gt;password&lt;/code&gt;
– &lt;code&gt;path&lt;/code&gt;
– &lt;code&gt;pathComponents&lt;/code&gt;
– &lt;code&gt;pathExtension&lt;/code&gt;
– &lt;code&gt;port&lt;/code&gt;
– &lt;code&gt;query&lt;/code&gt;
– &lt;code&gt;relativePath&lt;/code&gt;
– &lt;code&gt;relativeString&lt;/code&gt;
– &lt;code&gt;resourceSpecifier&lt;/code&gt;
– &lt;code&gt;scheme&lt;/code&gt;
– &lt;code&gt;standardizedURL&lt;/code&gt;
– &lt;code&gt;user&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The documentation and examples found in &lt;a href=&quot;https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html&quot;&gt;&lt;code&gt;NSURL&lt;/code&gt;&amp;#39;s documentation&lt;/a&gt; are a great way to familiarize yourself with all of the different components.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Although username &amp;amp; password &lt;em&gt;can&lt;/em&gt; be stored in a URL, consider using &lt;code&gt;NSURLCredential&lt;/code&gt; when representing user credentials, or persisting them to the keychain.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;NSURLComponents&lt;/h2&gt;

&lt;p&gt;Quietly added in iOS 7 and Mac OS X 10.9 Mavericks was &lt;code&gt;NSURLComponents&lt;/code&gt;, which can best be described by what it could have been named instead: &lt;code&gt;NSMutableURL&lt;/code&gt;. Still lacking documentation, this class remains one of the more obscure recent additions to Foundation.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSURLComponents&lt;/code&gt; instances are constructed much in the same way as &lt;code&gt;NSURL&lt;/code&gt;, with a provided &lt;code&gt;NSString&lt;/code&gt; and optional base URL to resolve against (&lt;code&gt;+componentsWithString:&lt;/code&gt; &amp;amp; &lt;code&gt;+componentsWithString:resolvingAgainstBaseURL:&lt;/code&gt;). It can also be &lt;code&gt;alloc init&lt;/code&gt;&amp;#39;d without any arguments to create an empty storage container, similar to &lt;a href=&quot;http://nshipster.com/nsdatecomponents/&quot;&gt;&lt;code&gt;NSDateComponents&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The difference here, between &lt;code&gt;NSURL&lt;/code&gt; and &lt;code&gt;NSURLComponents&lt;/code&gt;, is that component properties are &lt;code&gt;readwrite&lt;/code&gt;. This provides a safe and direct way to modify individual components of a URL:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;scheme&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;user&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;password&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;host&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;port&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;path&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;query&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fragment&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Attempting to set an invalid scheme string or negative port number will throw an exception.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In addition, &lt;code&gt;NSURLComponents&lt;/code&gt; also has &lt;code&gt;readwrite&lt;/code&gt; properties for &lt;a href=&quot;http://en.wikipedia.org/wiki/Percent-encoding&quot;&gt;percent-encoded&lt;/a&gt; versions of each component.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;percentEncodedUser&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;percentEncodedPassword&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;percentEncodedHost&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;percentEncodedPath&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;percentEncodedQuery&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;percentEncodedFragment&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Getting these properties retains any percent encoding these components may have. Setting these properties assumes the component string is already correctly percent encoded. Attempting to set an incorrectly percent encoded string will cause an exception. Although &amp;#39;;&amp;#39; is a legal path character, it is recommended that it be percent-encoded for best compatibility with NSURL (&lt;code&gt;-stringByAddingPercentEncodingWithAllowedCharacters:&lt;/code&gt; will percent-encode any &amp;#39;;&amp;#39; characters if you pass the &lt;code&gt;URLPathAllowedCharacterSet&lt;/code&gt;).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Percent-Encoding&lt;/h2&gt;

&lt;p&gt;Speaking of percent-encoding...&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSURL&lt;/code&gt; is &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/CoreFoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html&quot;&gt;toll-free bridged&lt;/a&gt; to &lt;code&gt;CFURLRef&lt;/code&gt;. This lower-level C API effectively mirrors the functionality of &lt;code&gt;NSURL&lt;/code&gt;, with the exception of &lt;code&gt;CFURLCreateStringByAddingPercentEscapes&lt;/code&gt; and &lt;code&gt;CFURLCreateStringByReplacingPercentEscapesUsingEncoding&lt;/code&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;CFURLCreateStringByAddingPercentEscapes&lt;/code&gt;: Creates a copy of a string, replacing certain characters with the equivalent percent escape sequence based on the specified encoding.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CFURLCreateStringByAddingPercentEscapes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFAllocatorRef&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;allocator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;originalString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;charactersToLeaveUnescaped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;legalURLCharactersToBeEscaped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFStringEncoding&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encoding&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;CFURLCreateStringByReplacingPercentEscapesUsingEncoding&lt;/code&gt;: Creates a new string by replacing any percent escape sequences with their character equivalent.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CFURLCreateStringByReplacingPercentEscapesUsingEncoding&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFAllocatorRef&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;allocator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;origString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;charsToLeaveEscaped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFStringEncoding&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encoding&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Bookmark URLs&lt;/h2&gt;

&lt;p&gt;One final topic worth mentioning are bookmark URLs, which can be used to safely reference files between application launches. Think of them as a persistent &lt;a href=&quot;http://en.wikipedia.org/wiki/File_descriptor&quot;&gt;file descriptor&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A bookmark is an opaque data structure, enclosed in an &lt;code&gt;NSData&lt;/code&gt; object, that describes the location of a file. Whereas path- and file reference URLs are potentially fragile between launches of your app, a bookmark can usually be used to re-create a URL to a file even in cases where the file was moved or renamed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You can read more about bookmark URLs in &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/AccessingFilesandDirectories/AccessingFilesandDirectories.html&quot;&gt;&amp;quot;Locating Files Using Bookmarks&amp;quot; from Apple&amp;#39;s File System Programming Guide&lt;/a&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Forget jet packs and flying cars—my idea of an exciting future is one where everything has a URL, is encoded in Markdown, and stored in Git. If your mind isn&amp;#39;t blown by the implications of a &lt;em&gt;universal&lt;/em&gt; resource locator, then I would invite you to reconsider.&lt;/p&gt;

&lt;p&gt;Like &lt;a href=&quot;http://en.wikipedia.org/wiki/Hypertext&quot;&gt;hypertext&lt;/a&gt;, universal identification is a philosophical concept that both pre-dates and transcends computers. Together, they form the fabric of our information age: a framework for encoding our collective understanding of the universe as a network of individual facts, in a fashion that is hauntingly similar to how the neurons in our brains do much the same.&lt;/p&gt;

&lt;p&gt;We are just now crossing the precipice of a &lt;a href=&quot;http://en.wikipedia.org/wiki/Cambrian_explosion&quot;&gt;Cambrian Explosion&lt;/a&gt; in physical computing. In an internet of things, where &lt;a href=&quot;http://en.wikipedia.org/wiki/IPv6#Larger_address_space&quot;&gt;every object of our lives has a URL&lt;/a&gt; and embeds an electronic soul, a digital consciousness will emerge. Not to say, necessarily, that &lt;a href=&quot;http://en.wikipedia.org/wiki/The_Singularity_Is_Near&quot;&gt;the singularity is near&lt;/a&gt;, but we&amp;#39;re on the verge of something incredible.&lt;/p&gt;

&lt;p&gt;Quite lofty implications for a technology used most often to exchange pictures of cats.&lt;/p&gt;
</description>
        <pubDate>Mon, 24 Mar 2014 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nsurl/</link>
        <guid>http://nshipster.com/nsurl/</guid>
      </item>
    
      <item>
        <title>Empathy</title>
        <description>&lt;p&gt;Great software is created to scratch one&amp;#39;s own itch. Being close to a problem provides not only insight for how to solve it, but the motivation to actually follow through.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s the better angels of our nature that compel us to share these solutions with one other. And in the open source world, we do so freely, with only a karmic expectation of paying the favor forward.&lt;/p&gt;

&lt;p&gt;We naturally want to help one another, to explain ideas, to be generous and patient. However, on the Internet, human nature seems to drop a few packets. Practicing empathy online becomes a feat of moral athleticism. Lacking many of the faculties to humanize and understand one another (facial expressions, voice tonality, non-verbal cues) we can lose sight of who we&amp;#39;re talking to, and become less human ourselves.&lt;/p&gt;

&lt;p&gt;Before engaging with someone, take a moment to visualize how that encounter would play out in real life. Would you be proud of how you conducted yourself?&lt;/p&gt;

&lt;p&gt;Rather than responding defensively to snark or aggression, stop to consider what could have motivated that reaction. Is there something you could be doing better as a programmer or community member? Or are they just having a bad day? (We&amp;#39;ve all had our bad days).&lt;/p&gt;

&lt;p&gt;And let it never be that someone is marginalized for their ability to communicate in English. Be patient and ask questions. Respond simply and clearly.&lt;/p&gt;

&lt;p&gt;Everything you need to succeed as a software developer extends from a conscious practice of empathy.&lt;/p&gt;
</description>
        <pubDate>Mon, 17 Mar 2014 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/empathy/</link>
        <guid>http://nshipster.com/empathy/</guid>
      </item>
    
      <item>
        <title>UIReferenceLibraryViewController /&lt;br/&gt;DCSDictionaryRef/&lt;br/&gt;/usr/share/dict/words</title>
        <description>&lt;p&gt;This week&amp;#39;s article is about dictionaries. Not the &lt;code&gt;NSDictionary&lt;/code&gt; / &lt;code&gt;CFDictionaryRef&lt;/code&gt; we encounter everyday, but those distant lexicographic vestiges of school days past.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;But seriously, why are dictionaries called that, anyway? Why can&amp;#39;t we just settle on &lt;code&gt;Hash&lt;/code&gt;, like those nice Ruby folks? What&amp;#39;s that? Semantic overlap with hashing functions and cryptographic digests? Well, dictionary isn&amp;#39;t &lt;em&gt;that&lt;/em&gt; bad. Anything other than &amp;quot;associative arrays&amp;quot;, I reckon.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Though widely usurped of their &amp;quot;go-to reference&amp;quot; status by the Internet, dictionaries and word lists serve an important role behind the scenes of functionality ranging from spell check, grammar check, and auto-correct to auto-summarization and semantic analysis. So, for your reference, here&amp;#39;s a look at the ways and means by which computers give meaning to the world through words, in Unix, Mac OS X, and iOS.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;Unix&lt;/h2&gt;

&lt;p&gt;Nearly all Unix distributions include a small collection newline-delimited list of words. On Mac OS X, these can be found at &lt;code&gt;/usr/share/dict&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;$ ls /usr/share/dict
    README
    connectives
    propernames
    web2
    web2a
    words@ -&amp;gt; web2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Symlinked to &lt;code&gt;words&lt;/code&gt; is the &lt;code&gt;web2&lt;/code&gt; word list, which, though not exhaustive, is still a sizable corpus:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;$ wc /usr/share/dict/words
    235886  235886 2493109
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Skimming with &lt;code&gt;head&lt;/code&gt; shows what fun lies herein. Such excitement is rarely so palpable as it is among words beginning with &amp;quot;a&amp;quot;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;$ head /usr/share/dict/words
    A
    a
    aa
    aal
    aalii
    aam
    Aani
    aardvark
    aardwolf
    Aaron
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;These giant, system-provided text files make it easy to &lt;code&gt;grep&lt;/code&gt; crossword puzzle clues, generate mnemonic pass phrases, and seed databases, but from a user perspective, &lt;code&gt;/usr/share/dict&lt;/code&gt;&amp;#39;s monolingualism and lack of associated meaning make it less than useful for everyday use.&lt;/p&gt;

&lt;p&gt;Mac OS X builds upon this with its own system dictionaries. Never one to disappoint, the operating system&amp;#39;s penchant for extending Unix functionality through strategically placed bundles and plist files is in full force with how dictionaries are distributed.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;OS X&lt;/h2&gt;

&lt;p&gt;The Mac OS X analog to &lt;code&gt;/usr/share/dict&lt;/code&gt; can be found in &lt;code&gt;/Library/Dictionaries&lt;/code&gt;.
A quick peek into the shared system dictionaries demonstrates one immediate improvement over Unix, by acknowledging the existence of languages other than English:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;$ ls /Library/Dictionaries/

    Apple Dictionary.dictionary/
    Diccionario General de la Lengua Española Vox.dictionary/
    Duden Dictionary Data Set I.dictionary/
    Dutch.dictionary/
    Italian.dictionary/
    Korean - English.dictionary/
    Korean.dictionary/
    Multidictionnaire de la langue française.dictionary/
    New Oxford American Dictionary.dictionary/
    Oxford American Writer&amp;#39;s Thesaurus.dictionary/
    Oxford Dictionary of English.dictionary/
    Oxford Thesaurus of English.dictionary/
    Sanseido Super Daijirin.dictionary/
    Sanseido The WISDOM English-Japanese Japanese-English Dictionary.dictionary/
    Simplified Chinese - English.dictionary/
    The Standard Dictionary of Contemporary Chinese.dictionary/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Mac OS X ships with dictionaries in Chinese, English, French, Dutch, Italian, Japanese, Korean, as well as an English thesaurus and a special dictionary for Apple-specific terminology.&lt;/p&gt;

&lt;p&gt;Diving deeper into the rabbit hole, we peruse the &lt;code&gt;.dictionary&lt;/code&gt; bundles to see them for what they really are:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;$ ls &amp;quot;/Library/Dictionaries/New Oxford American Dictionary.dictionary/Contents&amp;quot;

    Body.data
    DefaultStyle.css
    EntryID.data
    EntryID.index
    Images/
    Info.plist
    KeyText.data
    KeyText.index
    Resources/
    _CodeSignature/
    version.plist
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A filesystem autopsy reveals some interesting implementation details. In the case of the New Oxford American Dictionary in particular, contents include:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Binary-encoded &lt;code&gt;KeyText.data&lt;/code&gt;, &lt;code&gt;KeyText.index&lt;/code&gt;, &amp;amp; &lt;code&gt;Content.data&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;CSS for styling entries&lt;/li&gt;
&lt;li&gt;1207 images, from A-Frame to Zither.&lt;/li&gt;
&lt;li&gt;Preference to switch between &lt;a href=&quot;http://en.wikipedia.org/wiki/Pronunciation_respelling_for_English&quot;&gt;US English Diacritical Pronunciation&lt;/a&gt; and &lt;a href=&quot;http://en.wikipedia.org/wiki/International_Phonetic_Alphabet&quot;&gt;IPA&lt;/a&gt; (International Phonetic Alphabet)&lt;/li&gt;
&lt;li&gt;Manifest &amp;amp; signature for dictionary contents&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Normally, proprietary binary encoding would be the end of the road in terms of what one could reasonably do with data, but luckily, Core Services provides APIs to read this information.&lt;/p&gt;

&lt;h4&gt;Getting Definition of Word&lt;/h4&gt;

&lt;p&gt;To get the definition of a word on Mac OS X, one can use the &lt;code&gt;DCSCopyTextDefinition&lt;/code&gt; function, found in the Core Services framework:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#import &amp;lt;CoreServices/CoreServices.h&amp;gt;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;apple&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;definition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge_transfer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSCopyTextDefinition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRangeMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;definition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Wait, where did all of those great dictionaries go?&lt;/p&gt;

&lt;p&gt;Well, they all disappeared into that first &lt;code&gt;NULL&lt;/code&gt; argument. One might expect to provide a &lt;code&gt;DCSCopyTextDefinition&lt;/code&gt; type here, as prescribed by the function definition. However, there are no public functions to construct or copy such a type, making &lt;code&gt;NULL&lt;/code&gt; the only available option. The documentation is as clear as it is stern:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This parameter is reserved for future use, so pass &lt;code&gt;NULL&lt;/code&gt;. Dictionary Services searches in all active dictionaries.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&amp;quot;Dictionary Services searches in &lt;strong&gt;all active dictionaries&lt;/strong&gt;&amp;quot;, you say? Sounds like a loophole!&lt;/p&gt;

&lt;h4&gt;Setting Active Dictionaries&lt;/h4&gt;

&lt;p&gt;Now, there&amp;#39;s nothing programmers love to hate to love more than the practice of exploiting loopholes to side-step Apple platform restrictions. Behold: an entirely error-prone approach to getting, say, thesaurus results instead of the first definition available in the standard dictionary:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSUserDefaults&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userDefaults&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUserDefaults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;standardUserDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionaryPreferences&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userDefaults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;persistentDomainForName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;com.apple.DictionaryServices&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutableCopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;activeDictionaries&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionaryPreferences&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;DCSActiveDictionaries&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dictionaryPreferences&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;DCSActiveDictionaries&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/Library/Dictionaries/Oxford American Writer&amp;#39;s Thesaurus.dictionary&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userDefaults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setPersistentDomain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionaryPreferences&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;com.apple.DictionaryServices&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;apple&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;definition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge_transfer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSCopyTextDefinition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRangeMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;definition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dictionaryPreferences&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;DCSActiveDictionaries&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activeDictionaries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userDefaults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setPersistentDomain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionaryPreferences&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;com.apple.DictionaryServices&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&amp;quot;But this is Mac OS X, a platform whose manifest destiny cannot be contained by meager sandboxing attempts from Cupertino!&amp;quot;, you cry. &amp;quot;Isn&amp;#39;t there a more civilized approach? Like, say, private APIs?&amp;quot;&lt;/p&gt;

&lt;p&gt;Why yes, yes there are.&lt;/p&gt;

&lt;h3&gt;Private APIs&lt;/h3&gt;

&lt;p&gt;Not publicly exposed, but still available through Core Services are a number of functions that cut closer to the dictionary services functionality that we crave:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFArrayRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSCopyAvailableDictionaries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSDictionaryGetName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSDictionaryGetShortName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSDictionaryCreate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFURLRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSDictionaryGetName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFArrayRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSCopyRecordsForSearchString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFDictionaryRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSCopyDefinitionMarkup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSRecordCopyData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFTypeRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSRecordCopyDataURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFTypeRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSRecordGetAnchor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFTypeRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSRecordGetAssociatedObj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFTypeRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSRecordGetHeadword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFTypeRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSRecordGetRawHeadword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFTypeRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSRecordGetString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFTypeRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSRecordGetTitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFTypeRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DCSRecordGetSubDictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFTypeRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Private as they are, these functions aren&amp;#39;t about to start documenting themselves, so let&amp;#39;s take a look at how they&amp;#39;re used:&lt;/p&gt;

&lt;h4&gt;Getting Available Dictionaries&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSMapTable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;availableDictionariesKeyedByName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMapTable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mapTableWithKeyOptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPointerFunctionsCopyIn&lt;/span&gt;
                          &lt;span class=&quot;nl&quot;&gt;valueOptions:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPointerFunctionsObjectPointerPersonality&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge_transfer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSCopyAvailableDictionaries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSDictionaryGetName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;availableDictionariesKeyedByName&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Getting Definition for Word&lt;/h4&gt;

&lt;p&gt;With instances of the elusive &lt;code&gt;DCSDictionaryRef&lt;/code&gt; type available at our disposal, we can now see what all of the fuss is about with that first argument in &lt;code&gt;DCSCopyTextDefinition&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;apple&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;availableDictionariesKeyedByName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;availableDictionariesKeyedByName&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;CFRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;termRange&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DCSGetTermRangeInString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;termRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kCFNotFound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;term&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;substringWithRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;termRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;termRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;records&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge_transfer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSCopyRecordsForSearchString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;term&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;records&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;records&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headword&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSRecordGetHeadword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFTypeRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;definition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge_transfer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSCopyTextDefinition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRangeMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headword&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]));&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;definition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

                &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HTML&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge_transfer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DCSRecordCopyData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DCSDictionaryRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRangeMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headword&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]));&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;definition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Most surprising from this experimentation is the ability to access the raw HTML for entries, which  combined with a dictionary&amp;#39;s bundled CSS, produces the result seen in Dictionary.app.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/dictionary.png&quot; alt=&quot;Entry for &amp;quot;apple&amp;quot; in Dictionary.app&quot;&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For any fellow linguistics nerds or markup curious folks out there, here&amp;#39;s &lt;a href=&quot;https://gist.github.com/mattt/9453538&quot;&gt;the HTML of the entry for the word &amp;quot;apple&amp;quot;&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In the process of writing this article, I &lt;em&gt;accidentally&lt;/em&gt; created &lt;a href=&quot;https://github.com/mattt/DictionaryKit&quot;&gt;an Objective-C wrapper&lt;/a&gt; around this forbidden fruit (so forbidden by our favorite fruit company, so don&amp;#39;t try submitting this to the App Store).&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;iOS&lt;/h2&gt;

&lt;p&gt;iOS development is a decidedly more by-the-books affair, so attempting to reverse-engineer the platform would be little more than an academic exercise. Fortunately, a good chunk of functionality is available (as of iOS 5) through the obscure UIKit class &lt;code&gt;UIReferenceLibraryViewController&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;UIReferenceLibraryViewController&lt;/code&gt; is similar to an &lt;code&gt;MFMessageComposeViewController&lt;/code&gt;, in that provides a minimally-configurable view controller around system functionality, intended to be presented modally.&lt;/p&gt;

&lt;p&gt;Simply initialize with the desired term:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;UIReferenceLibraryViewController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;referenceLibraryViewController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIReferenceLibraryViewController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithTerm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;apple&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;presentViewController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;referenceLibraryViewController&lt;/span&gt;
                             &lt;span class=&quot;nl&quot;&gt;animated:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;
                           &lt;span class=&quot;nl&quot;&gt;completion:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/uireferencelibraryviewcontroller-1.png&quot; alt=&quot;Presenting a UIReferenceLibraryViewController&quot;&gt;&lt;/p&gt;

&lt;p&gt;This is the same behavior that one might encounter by tapping the &amp;quot;Define&amp;quot; &lt;code&gt;UIMenuItem&lt;/code&gt; on a highlighted word in a &lt;code&gt;UITextView&lt;/code&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Tapping on &amp;quot;Manage&amp;quot; brings up a view to download additional dictionaries.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/uireferencelibraryviewcontroller-2.png&quot; alt=&quot;Presenting a UIReferenceLibraryViewController&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;UIReferenceLibraryViewController&lt;/code&gt; also provides the class method &lt;code&gt;dictionaryHasDefinitionForTerm:&lt;/code&gt;. A developer would do well to call this before presenting a dictionary view controller that will inevitably have nothing to display.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIReferenceLibraryViewController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionaryHasDefinitionForTerm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;apple&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;In both cases, it appears that &lt;code&gt;UIReferenceLibraryViewController&lt;/code&gt; will do its best to normalize the search term, so stripping whitespace or changing to lowercase should not be necessary.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;From Unix word lists to their evolved &lt;code&gt;.dictionary&lt;/code&gt; bundles on OS X (and presumably iOS), words are as essential to application programming as mathematical constants and the &amp;quot;Sosumi&amp;quot; alert noise. Consider how the aforementioned APIs can be integrated into your own app, or used to create a kind of app you hadn&amp;#39;t previously considered. There are a &lt;a href=&quot;http://nshipster.com/nslocalizedstring/&quot;&gt;wealth&lt;/a&gt; &lt;a href=&quot;http://nshipster.com/nslinguistictagger/&quot;&gt;of&lt;/a&gt; &lt;a href=&quot;http://nshipster.com/search-kit/&quot;&gt;linguistic&lt;/a&gt; &lt;a href=&quot;http://nshipster.com/uilocalizedindexedcollation/&quot;&gt;technologies&lt;/a&gt; baked into Apple&amp;#39;s platforms, so take advantage of them.&lt;/p&gt;
</description>
        <pubDate>Mon, 10 Mar 2014 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/dictionary-services/</link>
        <guid>http://nshipster.com/dictionary-services/</guid>
      </item>
    
      <item>
        <title>NSTemporaryDirectory /&lt;br/&gt;NSItemReplacementDirectory /&lt;br/&gt;mktemp(3)</title>
        <description>&lt;p&gt;Volumes have been written about persisting data, but when it comes to short-lived, temporary files, there is very little to go on for Objective-C. (Or if there has, perhaps it was poetically ephemeral itself).&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Temporary files are used to write a buffer to disk, to either be atomically moved to a permanent location, or processed in some manner and then discarded. Creating a temporary file involves finding the appropriate part of the filesystem, generating a unique name, and moving or deleting the file after you&amp;#39;re finished using it.&lt;/p&gt;

&lt;h2&gt;Finding an Enclosing Directory&lt;/h2&gt;

&lt;p&gt;The first step to creating temporary files or directories is to find a reasonable, out-of-the-way place to write to—somewhere that won&amp;#39;t be backed up by Time Machine or synced to iCloud or the like.&lt;/p&gt;

&lt;p&gt;On Unix systems, the &lt;code&gt;/tmp&lt;/code&gt; directory was the de facto scratch space, but with the sandboxed containers of iOS and Mac OS X apps today, a hard-coded path just won&amp;#39;t cut it.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSTemporaryDirectory&lt;/code&gt; is a Foundation function that returns the directory designated for writing short-lived files on the targeted platform.&lt;/p&gt;

&lt;h3&gt;A Wild Goose Chase&lt;/h3&gt;

&lt;p&gt;In recent years, Apple has pushed to extricate filesystem path operations from &lt;code&gt;NSString&lt;/code&gt; APIs, recommending that users switch to using &lt;code&gt;NSURL&lt;/code&gt; and &lt;code&gt;NSURL&lt;/code&gt;-based APIs for classes like &lt;code&gt;NSFileManager&lt;/code&gt;. Unfortunately, the migration has not been entirely smooth.&lt;/p&gt;

&lt;p&gt;Consider the documentation for &lt;code&gt;NSTemporaryDirectory&lt;/code&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;See the &lt;code&gt;NSFileManager&lt;/code&gt; method &lt;code&gt;URLForDirectory:inDomain:appropriateForURL:create:error:&lt;/code&gt; for the preferred means of finding the correct temporary directory.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Alright, fair enough. Let&amp;#39;s see what&amp;#39;s going on with &lt;code&gt;NSFileManager -URLForDirectory:inDomain:appropriateForURL:create:error:&lt;/code&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;You can also use this method to create a new temporary directory for storing things like autosave files; to do so, specify &lt;code&gt;NSItemReplacementDirectory&lt;/code&gt; for the directory parameter, &lt;code&gt;NSUserDomainMask&lt;/code&gt; for the &lt;code&gt;domain&lt;/code&gt; parameter, and a valid parent directory for the &lt;code&gt;url&lt;/code&gt; parameter. After locating (or creating) the desired directory, this method returns the URL for that directory.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Huh? Even after reading through that a few times, it&amp;#39;s still unclear how to use this, or what the expected behavior. A quick search through the mailing lists &lt;a href=&quot;http://lists.apple.com/archives/cocoa-dev/2012/Apr/msg00117.html&quot;&gt;reaffirms&lt;/a&gt; this &lt;a href=&quot;(http://lists.apple.com/archives/cocoa-dev/2012/Feb/msg00186.html&quot;&gt;confusion&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Actually&lt;/em&gt;, this method appears to be intended for moving &lt;em&gt;existing&lt;/em&gt; temporary files to a permanent location on disk with &lt;code&gt;-replaceItemAtURL:withItemAtURL:backupItemName:options:resultingItemURL:error:&lt;/code&gt;. Not exactly what we&amp;#39;re looking for.&lt;/p&gt;

&lt;p&gt;So much for the &lt;code&gt;NSString&lt;/code&gt; filesystem API migration. Let&amp;#39;s stick to something that works:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileURLWithPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSTemporaryDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Generating a Unique Directory or File Name&lt;/h2&gt;

&lt;p&gt;With a place to call home (temporarily), the next step is to figure out what to name our temporary file. We don&amp;#39;t really care what temporary files are named—the only real concern is that they&amp;#39;re unique, so as to not interfere with, or be interfered by, any other temporary files.&lt;/p&gt;

&lt;p&gt;The best way to generate a unique identifier is to use the &lt;code&gt;globallyUniqueString&lt;/code&gt; method on &lt;code&gt;NSProcessInfo&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;identifier&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSProcessInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;processInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;globallyUniqueString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will return a string in the format: &lt;code&gt;5BD255F4-CA55-4B82-A555-0F4BC5CA2AD6-479-0000018E14D059CC&lt;/code&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Other sources advise the direct invocation of the &lt;code&gt;mktemp(3)&lt;/code&gt; system command in order to mitigate potential conflicts. However,  using &lt;code&gt;NSProcessInfo -globallyUniqueString&lt;/code&gt; to generate unique names is extremely unlikely to result in a collision.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Alternatively, &lt;code&gt;NSUUID&lt;/code&gt; (&lt;a href=&quot;http://nshipster.com/uuid-udid-unique-identifier&quot;&gt;discussed previously&lt;/a&gt;) also produces workable results, assuming that you&amp;#39;re not doing anything &lt;em&gt;too&lt;/em&gt; crazy.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUUID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UUID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UUIDString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This produces a string in the format: &lt;code&gt;22361D15-E17B-4C48-AEA6-C73BBEA17011&lt;/code&gt;&lt;/p&gt;

&lt;h2&gt;Creating a Temporary File Path&lt;/h2&gt;

&lt;p&gt;Using the aforementioned technique for generating unique identifiers, we can create unique temporary file paths:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@_%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSProcessInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;processInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;globallyUniqueString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;file.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileURLWithPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSTemporaryDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringByAppendingPathComponent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Creating a Temporary Directory&lt;/h2&gt;

&lt;p&gt;In situations where many temporary files might be created by a process, it may be a good idea to create a temporary sub-directory, which could then be removed for easy cleanup.&lt;/p&gt;

&lt;p&gt;Creating a temporary directory is no different than any other invocation of &lt;code&gt;NSFileManager -createDirectoryAtURL:withIntermediateDirectories:attributes:error:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;directoryURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileURLWithPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSTemporaryDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringByAppendingPathComponent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSProcessInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;processInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;globallyUniqueString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;createDirectoryAtURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;directoryURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;withIntermediateDirectories&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attributes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And, of course, temporary file paths relative to this directory can be created with &lt;code&gt;URLByAppendingPathComponent:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;directoryURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLByAppendingPathComponent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Writing to a Temporary File&lt;/h2&gt;

&lt;p&gt;Files don&amp;#39;t exist on the file system until a particular file path is either touched or written to.&lt;/p&gt;

&lt;h3&gt;NSData -writeToURL:options:error&lt;/h3&gt;

&lt;p&gt;There are several ways in which data is written to disk in Foundation. The most straightforward of which is &lt;code&gt;NSData -writeToURL:options:error&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;writeToURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDataWritingAtomic&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;NSOutputStream&lt;/h3&gt;

&lt;p&gt;For more advanced APIs, it is not uncommon to pass an &lt;code&gt;NSOutputStream&lt;/code&gt; instance to direct the flow of data. Again, creating an output stream to a temporary file path is no different than any other kind of file path:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSOutputStream&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outputStream&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSOutputStream&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outputStreamToFileAtPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;absoluteString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Cleaning Up&lt;/h3&gt;

&lt;p&gt;The final step is what makes a temporary file &lt;em&gt;actually temporary&lt;/em&gt;: clean up.&lt;/p&gt;

&lt;p&gt;Although files in a system-designated temporary directory make no guarantees about how long they&amp;#39;ll exist before being deleted automatically by the operating system (up to a few days, according to scattered reports), it&amp;#39;s still good practice to take care of it yourself once you&amp;#39;re finished.&lt;/p&gt;

&lt;p&gt;Do that with &lt;code&gt;NSFileManager -removeItemAtURL:&lt;/code&gt;, which works for both a temporary file and a temporary directory:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;removeItemAtURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;&amp;quot;This too shall pass&amp;quot; is a mantra that acknowledges that all things are indeed temporary. Within the context of the application lifecycle, some things are more temporary than others, and it is in that knowledge that we act appropriately, seeking to find the right place, make a unique impact, and leave without a trace.&lt;/p&gt;

&lt;p&gt;Perhaps we can learn something from this cycle in our own, brief and glorious lifecycle.&lt;/p&gt;
</description>
        <pubDate>Mon, 03 Mar 2014 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nstemporarydirectory/</link>
        <guid>http://nshipster.com/nstemporarydirectory/</guid>
      </item>
    
      <item>
        <title>Namespacing</title>
        <description>&lt;blockquote&gt;
&lt;p&gt;Why the hell is everything &lt;code&gt;NS&lt;/code&gt;-whatever?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You&amp;#39;ll hear that within the first minute of introducing someone to Objective-C. Guaranteed.&lt;/p&gt;

&lt;p&gt;Like a parent faced with the task of explaining the concept of death or the non-existence of Santa, you do your best to be forthcoming with facts, so that they might arrive at a conclusion themselves.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Why, Jimmy, &lt;code&gt;NS&lt;/code&gt; stands for &lt;code&gt;NeXTSTEP&lt;/code&gt; (well, actually, &lt;code&gt;NeXTSTEP/Sun&lt;/code&gt;, but we&amp;#39;ll cover that with &amp;quot;the birds &amp;amp; the bees&amp;quot; talk), and it&amp;#39;s used to...&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;...but by the time the words have left your mouth, you can already sense the disappointment in their face. Their innocence has been lost, and with an audible &lt;em&gt;sigh&lt;/em&gt; of resignation, they start to ask uncomfortable questions about &lt;a href=&quot;http://nshipster.com/at-compiler-directives/&quot;&gt;@&lt;/a&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Namespacing is the preeminent bugbear of Objective-C. A cosmetic quirk with global implications, the language&amp;#39;s lack of identifier containers remains a source of prodigious quantities of caremad for armchair language critics.&lt;/p&gt;

&lt;p&gt;This is all to say: unlike many other languages that are popular today, Objective-C does not provide a module-like mechanism for avoiding class and method name collisions.&lt;/p&gt;

&lt;p&gt;Instead, Objective-C relies on prefixes to ensure that functionality in one part of the app doesn&amp;#39;t interfere with similarly named code somewhere else.&lt;/p&gt;

&lt;p&gt;We&amp;#39;ll jump into those right after a quick digression into type systems:&lt;/p&gt;

&lt;h2&gt;Types in C &amp;amp; Objective-C&lt;/h2&gt;

&lt;p&gt;As noted many times in this publication, Objective-C is built directly on top of the C language. One consequence of this is that Objective-C and C share a type system, requiring that identifiers are globally unique.&lt;/p&gt;

&lt;p&gt;You can see this for yourself—try defining a new static variable with the same name as an existing &lt;code&gt;@interface&lt;/code&gt;, and the compiler will generate an error:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;XXObject&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XXObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Redefinition of &amp;quot;XXObject&amp;quot; as different kind of symbol&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That said, the Objective-C runtime creates a layer of abstraction on top of the C type system, allowing the following code to compile without even a snicker:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(Foo)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@synthesize&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Within the context of the Objective-C runtime, a program is able to differentiate between a class, a protocol, a category, an instance variable, an instance method, and a class method all having the same name.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;That a variable can reappropriate the name of an existing method is a consequence of the C type system (which similarly allows for a variable to shadow the name of its containing function)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Prefixes&lt;/h2&gt;

&lt;p&gt;All classes in an Objective-C application must be globally unique. Since many different frameworks are likely have some conceptual overlap—and therefore an overlap in names (users, views, requests / responses, etc.)—convention dictates that class names use 2 or 3 letter prefix.&lt;/p&gt;

&lt;h3&gt;Class Prefixes&lt;/h3&gt;

&lt;p&gt;Apple &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/Conventions/Conventions.html&quot;&gt;recommends&lt;/a&gt; that 2-letter prefixes be reserved for first-party libraries and frameworks, while third-party developers (that&amp;#39;s us) opt for 3 letters or more.&lt;/p&gt;

&lt;p&gt;A veteran Mac or iOS developer will have likely memorized most if not all of the following abbreviated identifiers:&lt;/p&gt;

&lt;table&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Prefix&lt;/th&gt;
            &lt;th&gt;Frameworks&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;AB&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;AddressBook / AddressBookUI&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;AC&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;Accounts&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;AD&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;iAd&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;AL&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;AssetsLibrary&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;AU&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;AudioUnit&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;AV&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;AVFoundation&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;CA&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;CoreAnimation&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;CB&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;CoreBluetooth&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;CF&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;CoreFoundation / CFNetwork&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;CG&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;CoreGraphics / QuartzCore / ImageIO&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;CI&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;CoreImage&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;CL&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;CoreLocation&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;CM&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;CoreMedia / CoreMotion&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;CV&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;CoreVideo&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;EA&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;ExternalAccessory&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;EK&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;EventKit / EventKitUI&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;GC&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;GameController&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;GLK&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;&lt;td&gt;GLKit&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;JS&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;JavaScriptCore&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;MA&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;MediaAccessibility&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;MC&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;MultipeerConnectivity&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;MF&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;MessageUI*&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;MIDI&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;&lt;td&gt;CoreMIDI&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;MK&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;MapKit&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;MP&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;MediaPlayer&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;NK&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;NewsstandKit&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;NS&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;Foundation, AppKit, CoreData&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;PK&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;PassKit&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;QL&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;QuickLook&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;SC&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;SystemConfiguration&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;Sec&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;&lt;td&gt;Security*&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;SK&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;StoreKit / SpriteKit&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;SL&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;Social&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;SS&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;Safari Services&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;TW&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;Twitter&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;UI&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;UIKit&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;UT&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;MobileCoreServices&lt;/td&gt;&lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4&gt;3rd-Party Class Prefixes&lt;/h4&gt;

&lt;p&gt;Until recently, with the advent of &lt;a href=&quot;http://cocoapods.org&quot;&gt;CocoaPods&lt;/a&gt; and a surge of new iOS developers, the distribution of open source, 3rd-party code had been largely a non-issue for Apple and the rest of the Objective-C community. Apple&amp;#39;s naming guidelines came about recently enough that the advice to adopt 3-letter prefixes is only &lt;em&gt;just&lt;/em&gt; becoming accepted practice.&lt;/p&gt;

&lt;p&gt;Because of this, many established libraries still use 2-letter prefixes. Consider some of these &lt;a href=&quot;https://github.com/search?l=Objective-C&amp;amp;q=stars%3A%3E1&amp;amp;s=stars&amp;amp;type=Repositories&quot;&gt;most-starred Objective-C repositories on GitHub&lt;/a&gt;.&lt;/p&gt;

&lt;table&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Prefix&lt;/th&gt;
            &lt;th&gt;Frameworks&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;AF&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/AFNetworking/AFNetworking&quot;&gt;AFNetworking&lt;/a&gt; (&quot;&lt;a href=&quot;http://en.wikipedia.org/wiki/Gowalla&quot;&gt;Alamofire&lt;/a&gt;&quot;)&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;RK&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/RestKit/RestKit&quot;&gt;RestKit&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;GPU&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/BradLarson/GPUImage&quot;&gt;GPUImage&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;SD&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/rs/SDWebImage&quot;&gt;SDWebImage&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;MB&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/jdg/MBProgressHUD&quot;&gt;MBProgressHUD&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;FB&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/facebook/facebook-ios-sdk&quot;&gt;Facebook SDK&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;FM&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/ccgus/fmdb&quot;&gt;FMDB&lt;/a&gt; (&quot;&lt;a href=&quot;http://flyingmeat.com&quot;&gt;Flying Meat&lt;/a&gt;&quot;)&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;JK&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/johnezang/JSONKit&quot;&gt;JSONKit&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;FUI&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/Grouper/FlatUIKit&quot;&gt;FlatUI&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;NI&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/jverkoey/nimbus&quot;&gt;Nimbus&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;tt&gt;RAC&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa&quot;&gt;Reactive Cocoa&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Seeing as how &lt;a href=&quot;https://github.com/AshFurrow/AFTabledCollectionView&quot;&gt;we&amp;#39;re already seeing prefix overlap among 3rd-party libraries&lt;/a&gt;, make sure that you follow a 3+-letter convention in your own code.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For especially future-focused library authors, consider using &lt;a href=&quot;http://nshipster.com/at-compiler-directives/&quot;&gt;&lt;code&gt;@compatibility_alias&lt;/code&gt;&lt;/a&gt; to provide a seamless migration path for existing users in your next major upgrade.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Method Prefixes&lt;/h3&gt;

&lt;p&gt;It&amp;#39;s not just classes that are prone to naming collisions: selectors suffer from this too—in ways that are even more problematic than classes.&lt;/p&gt;

&lt;p&gt;Consider the category:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(PigLatin)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pigLatinString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If &lt;code&gt;-pigLatinString&lt;/code&gt; were implemented by another category (or added to the &lt;code&gt;NSString&lt;/code&gt; class in a future version of iOS or Mac OS X), any calls to that method would result in undefined behavior, since no guarantee is made as to the order in which methods are defined by the runtime.&lt;/p&gt;

&lt;p&gt;This can be guarded against by prefixing the method name, just like the class name (prefixing the category name isn&amp;#39;t a bad idea, either):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(XXXPigLatin)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;xxx_pigLatinString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Apple&amp;#39;s recommendation that &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW4&quot;&gt;all category methods use prefixes&lt;/a&gt; is even less widely known or accepted than its policy on class prefixing.&lt;/p&gt;

&lt;p&gt;There are many outspoken developers who will passionately argue one side or another. However, weighing the risk of collision against its likelihood, the cost/benefit analysis is not entirely clear-cut:&lt;/p&gt;

&lt;p&gt;The main feature of categories is coating useful functionality with syntactic sugar. Any category method could alternatively be implemented as a function taking an explicit argument in place of the implicit &lt;code&gt;self&lt;/code&gt; of a method.&lt;/p&gt;

&lt;p&gt;Collisions can be detected at compile time by setting the &lt;code&gt;OBJC_PRINT_REPLACED_METHODS&lt;/code&gt; environment variable to &lt;code&gt;YES&lt;/code&gt;. In practice, collisions are extremely rare, and when they do occur, they&amp;#39;re usually an indicator of functionality that is needlessly duplicated across dependencies. Although the worst-case scenario is a runtime exception, it&amp;#39;s entirely likely that two methods named the same thing will actually &lt;em&gt;do&lt;/em&gt; the same thing, and result in no change in behavior. All of those Swiss Army Knife categories that defined &lt;code&gt;NSArray -firstObject&lt;/code&gt; continued to march on once the method was officially added.&lt;/p&gt;

&lt;p&gt;Just as with constitutional scholarship, there will be strict and loose interpretations of Apple&amp;#39;s programming guidelines. Those that see it as a living document would point out that... actually, you know what? If you&amp;#39;ve read this far and are still undecided, just prefix your damn category methods. If you choose not to, just be mindful that it could bite you in the ass.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Go ahead and add &amp;quot;category method&amp;quot; to your Tweetbot mute terms. Expiration: 1 Week.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;Swizzling&lt;/h4&gt;

&lt;p&gt;The one case where method prefixing (or suffixing) is absolutely necessary is when doing method replacement, as discussed in last week&amp;#39;s article on &lt;a href=&quot;http://nshipster.com/method-swizzling/&quot;&gt;swizzling&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UIViewController&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(Swizzling)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;xxx_viewDidLoad&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xxx_viewDidLoad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Swizzled implementation&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Do We &lt;em&gt;Really&lt;/em&gt; Need Namespaces?&lt;/h2&gt;

&lt;p&gt;With all of the recent talk about replacing / reinventing / reimagining Objective-C, it&amp;#39;s almost taken as a given that namespacing would be an obvious feature. But what does that actually get us?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Aesthetics?&lt;/strong&gt; Aside from IETF members and military personnel, nobody likes the visual aesthetic of &lt;acronym title=&quot;CAPITAL LETTER ACRONYMS&quot;&gt;CLA&lt;/acronym&gt;s. But would &lt;code&gt;::&lt;/code&gt;, &lt;code&gt;/&lt;/code&gt;, or an extra &lt;code&gt;.&lt;/code&gt; really make matters better? Do we &lt;em&gt;really&lt;/em&gt; want to start calling &lt;code&gt;NSArray&lt;/code&gt; &amp;quot;Foundation Array&amp;quot;? (And what would I do with NSHipster.com ?!)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Semantics?&lt;/strong&gt; Start to look closely at any other language, and how they actually use namespaces, and you&amp;#39;ll realize that namespaces don&amp;#39;t magically solve all matters of ambiguity. If anything, the additional context makes things worse.&lt;/p&gt;

&lt;p&gt;Not to create a straw man, but an imagined implementation of Objective-C namespaces probably look a lot like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XX&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foundation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;F:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;What we have currently—warts and all—has the notable advantage of non-ambiguity. There is no mistaking &lt;code&gt;NSString&lt;/code&gt; for anything other than what it is, either by the compiler or when we talk about it as developers. There are no special contextual considerations to consider when reading through code to understand what actors are at play. And best of all: class names are &lt;a href=&quot;http://lmgtfy.com/?q=NSString&quot;&gt;&lt;em&gt;exceedingly&lt;/em&gt; easy to search for&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Either way, if you&amp;#39;re interested in this subject, I&amp;#39;d encourage you to take a look at &lt;a href=&quot;http://optshiftk.com/2012/04/draft-proposal-for-namespaces-in-objective-c/&quot;&gt;this namespace feature proposal&lt;/a&gt; by &lt;a href=&quot;http://optshiftk.com&quot;&gt;Kyle Sluder&lt;/a&gt;. It&amp;#39;s a fascinating read.&lt;/p&gt;
</description>
        <pubDate>Mon, 24 Feb 2014 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/namespacing/</link>
        <guid>http://nshipster.com/namespacing/</guid>
      </item>
    
      <item>
        <title>Method Swizzling</title>
        <description>&lt;blockquote&gt;
&lt;p&gt;If you could blow up the world with the flick of a switch&lt;br/&gt;
Would you do it?&lt;br/&gt;
If you could make everybody poor just so you could be rich&lt;br/&gt;
Would you do it?&lt;br/&gt;
If you could watch everybody work while you just lay on your back&lt;br/&gt;
Would you do it?&lt;br/&gt;
If you could take all the love without giving any back&lt;br/&gt;
Would you do it?&lt;br/&gt;
And so we cannot know ourselves or what we&amp;#39;d really do...&lt;br/&gt;
With all your power ... What would you do?&lt;br/&gt;
&lt;cite&gt;—&lt;strong&gt;The Flaming Lips&lt;/strong&gt;, &lt;em&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/The_Yeah_Yeah_Yeah_Song_(With_All_Your_Power)&quot;&gt;&amp;quot;The Yeah Yeah Yeah Song (With All Your Power)&amp;quot;&lt;/a&gt;&lt;/em&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In last week&amp;#39;s article about &lt;a href=&quot;http://nshipster.com/associated-objects/&quot;&gt;associated objects&lt;/a&gt;, we began to explore the dark arts of the Objective-C runtime. This week, we venture further, to discuss what is perhaps the most contentious of runtime hackery techniques: method swizzling.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Method swizzling is the process of changing the implementation of an existing selector. It&amp;#39;s a technique made possible by the fact that method invocations in Objective-C can be changed at runtime, by changing how selectors are mapped to underlying functions in a class&amp;#39;s dispatch table.&lt;/p&gt;

&lt;p&gt;For example, let&amp;#39;s say we wanted to track how many times each view controller is presented to a user in an iOS app:&lt;/p&gt;

&lt;p&gt;Each view controller could add tracking code to its own implementation of &lt;code&gt;viewDidAppear:&lt;/code&gt;, but that would make for a ton of duplicated boilerplate code. Subclassing would be another possibility, but it would require subclassing &lt;code&gt;UIViewController&lt;/code&gt;, &lt;code&gt;UITableViewController&lt;/code&gt;, &lt;code&gt;UINavigationController&lt;/code&gt;, and every other view controller class—an approach that would also suffer from code duplication.&lt;/p&gt;

&lt;p&gt;Fortunately, there is another way: &lt;strong&gt;method swizzling&lt;/strong&gt; from a category. Here&amp;#39;s how to do it:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#import &amp;lt;objc/runtime.h&amp;gt;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UIViewController&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(Tracking)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;dispatch_once_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;onceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispatch_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;onceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// When swizzling a class method, use the following:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Class class = object_getClass((id)self);&lt;/span&gt;

        &lt;span class=&quot;kt&quot;&gt;SEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;originalSelector&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewWillAppear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;SEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swizzledSelector&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xxx_viewWillAppear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;Method&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;originalMethod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class_getInstanceMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;originalSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Method&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swizzledMethod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class_getInstanceMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swizzledSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;didAddMethod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;class_addMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;originalSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;method_getImplementation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;swizzledMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;method_getTypeEncoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;swizzledMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;didAddMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;class_replaceMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;swizzledSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;method_getImplementation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;originalMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;method_getTypeEncoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;originalMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;method_exchangeImplementations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;originalMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swizzledMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark - Method Swizzling&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;xxx_viewWillAppear:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;animated&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xxx_viewWillAppear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;viewWillAppear: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;In computer science, &lt;a href=&quot;http://en.wikipedia.org/wiki/Pointer_swizzling&quot;&gt;pointer swizzling&lt;/a&gt; is the conversion of references based on name or position to direct pointer references.  While the origins of Objective-C&amp;#39;s usage of the term are not entirely known, it&amp;#39;s understandable why it was co-opted, since method swizzling involves changing the reference of a function pointer by its selector.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Now, when any instance of &lt;code&gt;UIViewController&lt;/code&gt;, or one of its subclasses invokes &lt;code&gt;viewWillAppear:&lt;/code&gt;, a log statement will print out.&lt;/p&gt;

&lt;p&gt;Injecting behavior into the view controller lifecycle, responder events, view drawing, or the Foundation networking stack are all good examples of how method swizzling can be used to great effect. There are a number of other occasions when swizzling would be an appropriate technique, and they become increasingly apparent the more seasoned an Objective-C developer becomes.&lt;/p&gt;

&lt;p&gt;Regardless of &lt;em&gt;why&lt;/em&gt; or &lt;em&gt;where&lt;/em&gt; one chooses to use swizzling, the &lt;em&gt;how&lt;/em&gt; remains absolute:&lt;/p&gt;

&lt;h2&gt;+load vs. +initialize&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Swizzling should always be done in &lt;code&gt;+load&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;There are two methods that are automatically invoked by the Objective-C runtime for each class. &lt;code&gt;+load&lt;/code&gt; is sent when the class is initially loaded, while &lt;code&gt;+initialize&lt;/code&gt; is called just before the application calls its first method on that class or an instance of that class. Both are optional, and are executed only if the method is implemented.&lt;/p&gt;

&lt;p&gt;Because method swizzling affects global state, it is important to minimize the possibility of race conditions. &lt;code&gt;+load&lt;/code&gt; is guaranteed to be loaded during class initialization, which provides a modicum of consistency for changing system-wide behavior. By contrast, &lt;code&gt;+initialize&lt;/code&gt; provides no such guarantee of when it will be executed—in fact, it may &lt;em&gt;never&lt;/em&gt; be called, if that class is never messaged directly by the app.&lt;/p&gt;

&lt;h2&gt;dispatch_once&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Swizzling should always be done in a &lt;code&gt;dispatch_once&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Again, because swizzling changes global state, we need to take every precaution available to us in the runtime. Atomicity is one such precaution, as is a guarantee that code will be executed exactly once, even across different threads. Grand Central Dispatch&amp;#39;s &lt;code&gt;dispatch_once&lt;/code&gt; provides both of these desirable behaviors, and should be considered as much a standard practice for swizzling as they are for &lt;a href=&quot;http://nshipster.com/c-storage-classes/&quot;&gt;initializing singletons&lt;/a&gt;.&lt;/p&gt;

&lt;h2&gt;Selectors, Methods, &amp;amp; Implementations&lt;/h2&gt;

&lt;p&gt;In Objective-C, &lt;em&gt;selectors&lt;/em&gt;, &lt;em&gt;methods&lt;/em&gt;, and &lt;em&gt;implementations&lt;/em&gt; refer to particular aspects of the runtime, although in normal conversation, these terms are often used interchangeably to generally refer to the process of message sending.&lt;/p&gt;

&lt;p&gt;Here is how each is described in Apple&amp;#39;s &lt;a href=&quot;https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/method_getImplementation&quot;&gt;Objective-C Runtime Reference&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Selector (&lt;code&gt;typedef struct objc_selector *SEL&lt;/code&gt;): Selectors are used to represent the name of a method at runtime. A method selector is a C string that has been registered (or &amp;quot;mapped&amp;quot;) with the Objective-C runtime. Selectors generated by the compiler are automatically mapped by the runtime when the class is loaded .&lt;/li&gt;
&lt;li&gt;Method (&lt;code&gt;typedef struct objc_method *Method&lt;/code&gt;): An opaque type that represents a method in a class definition.&lt;/li&gt;
&lt;li&gt;Implementation (&lt;code&gt;typedef id (*IMP)(id, SEL, ...)&lt;/code&gt;): This data type is a pointer to the start of the function that implements the method. This function uses standard C calling conventions as implemented for the current CPU architecture. The first argument is a pointer to self (that is, the memory for the particular instance of this class, or, for a class method, a pointer to the metaclass). The second argument is the method selector. The method arguments follow.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;The best way to understand the relationship between these concepts is as follows: a class (&lt;code&gt;Class&lt;/code&gt;) maintains a dispatch table to resolve messages sent at runtime; each entry in the table is a method (&lt;code&gt;Method&lt;/code&gt;), which keys a particular name, the selector (&lt;code&gt;SEL&lt;/code&gt;), to an implementation (&lt;code&gt;IMP&lt;/code&gt;), which is a pointer to an underlying C function.&lt;/p&gt;

&lt;p&gt;To swizzle a method is to change a class&amp;#39;s dispatch table in order to resolve messages from an existing selector to a different implementation, while aliasing the original method implementation to a new selector.&lt;/p&gt;

&lt;h2&gt;Invoking &lt;code&gt;_cmd&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;It may appear that the following code will result in an infinite loop:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;xxx_viewWillAppear:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;animated&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xxx_viewWillAppear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;viewWillAppear: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSStringFromClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Surprisingly, it won&amp;#39;t. In the process of swizzling, &lt;code&gt;xxx_viewWillAppear:&lt;/code&gt; has been reassigned to the original implementation of &lt;code&gt;UIViewController -viewWillAppear:&lt;/code&gt;. It&amp;#39;s good programmer instinct for calling a method on &lt;code&gt;self&lt;/code&gt; in its own implementation to raise a red flag, but in this case, it makes sense if we remember what&amp;#39;s &lt;em&gt;really&lt;/em&gt; going on. However, if we were to call &lt;code&gt;viewWillAppear:&lt;/code&gt; in this method, it &lt;em&gt;would&lt;/em&gt; cause an infinite loop, since the implementation of this method will be swizzled to the &lt;code&gt;viewwillAppear:&lt;/code&gt; selector at runtime.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Remember to prefix your swizzled method name, the same way you might any other contentious category method.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Considerations&lt;/h2&gt;

&lt;p&gt;Swizzling is widely considered a voodoo technique, prone to unpredictable behavior and unforeseen consequences. While it is not the safest thing to do, method swizzling is reasonably safe, when the following precautions are taken:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Always invoke the original implementation of a method (unless you have a good reason not to)&lt;/strong&gt;: APIs provide a contract for input and output, but the implementation in-between is a black box. Swizzling a method and not calling the original implementation may cause underlying assumptions about private state to break, along with the rest of your application.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Avoid collisions&lt;/strong&gt;: Prefix category methods, and make damn well sure that nothing else in your code base (or any of your dependencies) are monkeying around with the same piece of functionality as you are.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Understand what&amp;#39;s going on&lt;/strong&gt;: Simply copy-pasting swizzling code without understanding how it works is not only dangerous, but is a wasted opportunity to learn a lot about the Objective-C runtime. Read through the &lt;a href=&quot;https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/method_getImplementation&quot;&gt;Objective-C Runtime Reference&lt;/a&gt; and browse &lt;code&gt;&amp;lt;objc/runtime.h&amp;gt;&lt;/code&gt; to get a good sense of how and why things happen. &lt;em&gt;Always endeavor to replace magical thinking with understanding.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Proceed with caution&lt;/strong&gt;: No matter how confident you are about swizzling Foundation, UIKit, or any other built-in framework, know that everything could break in the next release. Be ready for that, and go the extra mile to ensure that in playing with fire, you don&amp;#39;t get &lt;code&gt;NSBurned&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Feeling gun shy about invoking the Objective-C runtime directly? &lt;a href=&quot;https://twitter.com/rentzsch&quot;&gt;Jonathan ‘Wolf’ Rentzsch&lt;/a&gt; provides a battle-tested, CocoaPods-ready library called &lt;a href=&quot;https://github.com/rentzsch/jrswizzle&quot;&gt;JRSwizzle&lt;/a&gt; that will take care of everything for you.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;Like &lt;a href=&quot;http://nshipster.com/associated-objects/&quot;&gt;associated objects&lt;/a&gt;, method swizzling is a powerful technique when you need it, but should be used sparingly.&lt;/p&gt;
</description>
        <pubDate>Mon, 17 Feb 2014 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/method-swizzling/</link>
        <guid>http://nshipster.com/method-swizzling/</guid>
      </item>
    
      <item>
        <title>Associated Objects</title>
        <description>&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#import &amp;lt;objc/runtime.h&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Objective-C developers are conditioned to be wary of whatever follows this ominous incantation. And for good reason: messing with the Objective-C runtime changes the very fabric of reality for all of the code that runs on it.&lt;/p&gt;

&lt;p&gt;In the right hands, the functions of &lt;code&gt;&amp;lt;objc/runtime.h&amp;gt;&lt;/code&gt; have the potential to add powerful new behavior to an application or framework, in ways that would otherwise not be possible. In the wrong hands, it drains the proverbial &lt;a href=&quot;http://en.wikipedia.org/wiki/Eternal_Darkness:_Sanity&amp;#x27;s_Requiem#Sanity_effects&quot;&gt;sanity meter&lt;/a&gt; of the code, and everything it may interact with (with &lt;a href=&quot;http://www.youtube.com/watch?v=RSXcajQnasc#t=0m30s&quot;&gt;terrifying side-effects&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Therefore, it is with great trepidation that we consider this &lt;a href=&quot;http://en.wikipedia.org/wiki/Deal_with_the_Devil&quot;&gt;Faustian bargain&lt;/a&gt;, and look at one of the subjects most-often requested by NSHipster readers: associated objects.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Associated Objects—or Associative References, as they were originally known—are a feature of the Objective-C 2.0 runtime, introduced in Mac OS X 10.6 Snow Leopard (available in iOS 4). The term refers to the following three C functions declared in &lt;code&gt;&amp;lt;objc/runtime.h&amp;gt;&lt;/code&gt;, which allow objects to associate arbitrary values for keys at runtime:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;objc_setAssociatedObject&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;objc_getAssociatedObject&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;objc_removeAssociatedObjects&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Why is this useful? It allows developers to &lt;strong&gt;add custom properties to existing classes in categories&lt;/strong&gt;, which &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html&quot;&gt;is an otherwise notable shortcoming for Objective-C&lt;/a&gt;.&lt;/p&gt;

&lt;h4&gt;NSObject+AssociatedObject.h&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(AssociatedObject)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;associatedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;NSObject+AssociatedObject.m&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(AssociatedObject)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@dynamic&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;associatedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setAssociatedObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;objc_setAssociatedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;associatedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OBJC_ASSOCIATION_RETAIN_NONATOMIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;associatedObject&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objc_getAssociatedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;associatedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It is often recommended that they key be a &lt;code&gt;static char&lt;/code&gt;—or better yet, the pointer to one. Basically, an arbitrary value that is guaranteed to be constant, unique, and scoped for use within getters and setters:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kAssociatedObjectKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;objc_getAssociatedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kAssociatedObjectKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However, a much simpler solution exists: just use a selector.&lt;/p&gt;

&lt;blockquote class=&quot;twitter-tweet&quot; lang=&quot;en&quot;&gt;&lt;p&gt;Since &lt;tt&gt;SEL&lt;/tt&gt;s are guaranteed to be unique and constant, you can use &lt;tt&gt;_cmd&lt;/tt&gt; as the key for &lt;tt&gt;objc_setAssociatedObject()&lt;/tt&gt;. &lt;a href=&quot;https://twitter.com/search?q=%23objective&amp;amp;src=hash&quot;&gt;#objective&lt;/a&gt;-c &lt;a href=&quot;https://twitter.com/search?q=%23snowleopard&amp;amp;src=hash&quot;&gt;#snowleopard&lt;/a&gt;&lt;/p&gt;&amp;mdash; Bill Bumgarner (@bbum) &lt;a href=&quot;https://twitter.com/bbum/statuses/3609098005&quot;&gt;August 28, 2009&lt;/a&gt;&lt;/blockquote&gt;

&lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;h2&gt;Associative Object Behaviors&lt;/h2&gt;

&lt;p&gt;Values can be associated onto objects according to the behaviors defined by the enumerated type &lt;code&gt;objc_AssociationPolicy&lt;/code&gt;:&lt;/p&gt;

&lt;table&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Behavior&lt;/th&gt;
            &lt;th&gt;&lt;tt&gt;@property&lt;/tt&gt; Equivalent&lt;/th&gt;
            &lt;th&gt;Description&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;tt&gt;OBJC_ASSOCIATION_ASSIGN&lt;/tt&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;tt&gt;@property (assign)&lt;/tt&gt; or &lt;tt&gt;@property (unsafe_unretained)&lt;/tt&gt;
            &lt;/td&gt;
            &lt;td&gt;
                Specifies a weak reference to the associated object.
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;tt&gt;OBJC_ASSOCIATION_RETAIN_NONATOMIC&lt;/tt&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;tt&gt;@property (nonatomic, strong)&lt;/tt&gt;
            &lt;/td&gt;
            &lt;td&gt;
                Specifies a strong reference to the associated object, and that the association is not made atomically.
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;tt&gt;OBJC_ASSOCIATION_COPY_NONATOMIC&lt;/tt&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;tt&gt;@property (nonatomic, copy)&lt;/tt&gt;
            &lt;/td&gt;
            &lt;td&gt;
                Specifies that the associated object is copied, and that the association is not made atomically.
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;tt&gt;OBJC_ASSOCIATION_RETAIN&lt;/tt&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;tt&gt;@property (atomic, strong)&lt;/tt&gt;
            &lt;/td&gt;
            &lt;td&gt;
                Specifies a strong reference to the associated object, and that the association is made atomically.
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;tt&gt;OBJC_ASSOCIATION_COPY&lt;/tt&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;tt&gt;@property (atomic, copy)&lt;/tt&gt;
            &lt;/td&gt;
            &lt;td&gt;
                Specifies that the associated object is copied, and that the association is made atomically.
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Weak associations to objects made with &lt;code&gt;OBJC_ASSOCIATION_ASSIGN&lt;/code&gt; are not zero &lt;code&gt;weak&lt;/code&gt; references, but rather follow a behavior similar to &lt;code&gt;unsafe_unretained&lt;/code&gt;, which means that one should be cautious when accessing weakly associated objects within an implementation.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;According to the Deallocation Timeline described in &lt;a href=&quot;https://developer.apple.com/videos/wwdc/2011/#322-video&quot;&gt;WWDC 2011, Session 322&lt;/a&gt; (~36:00), associated objects are erased surprisingly late in the object lifecycle, in &lt;code&gt;object_dispose()&lt;/code&gt;, which is invoked by &lt;code&gt;NSObject -dealloc&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Removing Values&lt;/h2&gt;

&lt;p&gt;One may be tempted to call &lt;code&gt;objc_removeAssociatedObjects()&lt;/code&gt; at some point in their foray into associated objects. However, &lt;a href=&quot;https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/objc_removeAssociatedObjects&quot;&gt;as described in the documentation&lt;/a&gt;, it&amp;#39;s unlikely that you would have an occasion to invoke it yourself:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The main purpose of this function is to make it easy to return an object to a &amp;quot;pristine state”. You should not use this function for general removal of associations from objects, since it also removes associations that other clients may have added to the object. Typically you should use objc_setAssociatedObject with a nil value to clear an association.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Patterns&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Adding private variables to facilitate implementation details&lt;/strong&gt;. When extending the behavior of a built-in class, it may be necessary to keep track of additional state. This is the &lt;em&gt;textbook&lt;/em&gt; use case for associated objects. For example, AFNetworking uses associated objects on its &lt;code&gt;UIImageView&lt;/code&gt; category to &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking/blob/2.1.0/UIKit%2BAFNetworking/UIImageView%2BAFNetworking.m#L57-L63&quot;&gt;store a request operation object&lt;/a&gt;, used to asynchronously fetch a remote image at a particular URL.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Adding public properties to configure category behavior.&lt;/strong&gt; Sometimes, it makes more sense to make category behavior more flexible with a property, than in a method parameter. In these situations, a public-facing property is an acceptable situation to use associated objects. To go back to the previous example of AFNetworking, its category on &lt;code&gt;UIImageView&lt;/code&gt;, &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking/blob/2.1.0/UIKit%2BAFNetworking/UIImageView%2BAFNetworking.h#L60-L65&quot;&gt;its &lt;code&gt;imageResponseSerializer&lt;/code&gt;&lt;/a&gt; allows image views to optionally apply a filter, or otherwise change the rendering of a remote image before it is set and cached to disk.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Creating an associated observer for KVO&lt;/strong&gt;. When using &lt;a href=&quot;http://nshipster.com/key-value-observing/&quot;&gt;KVO&lt;/a&gt; in a category implementation, it is recommended that a custom associated-object be used as an observer, rather than the object observing itself.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Anti-Patterns&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Storing an associated object, when the value is not needed&lt;/strong&gt;. A common pattern for views is to create a convenience method that populates fields and attributes based on a model object or compound value. If that value does not need to be recalled later, it is acceptable, and indeed preferable, not to associate with that object.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Storing an associated object, when the value can be inferred.&lt;/strong&gt; For example, one might be tempted to store a reference to a custom accessory view&amp;#39;s containing &lt;code&gt;UITableViewCell&lt;/code&gt;, for use in &lt;code&gt;tableView:accessoryButtonTappedForRowWithIndexPath:&lt;/code&gt;, when this can retrieved by calling &lt;code&gt;cellForRowAtIndexPath:&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Using associated objects instead of X&lt;/strong&gt;, where X is any one the following:

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html&quot;&gt;Subclassing&lt;/a&gt; for when inheritance is a more reasonable fit than composition.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/general/conceptual/Devpedia-CocoaApp/TargetAction.html&quot;&gt;Target-Action&lt;/a&gt; for adding interaction events to responders.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html&quot;&gt;Gesture Recognizers&lt;/a&gt; for any situations when target-action doesn&amp;#39;t suffice.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/general/conceptual/DevPedia-CocoaCore/Delegation.html&quot;&gt;Delegation&lt;/a&gt; when behavior can be delegated to another object.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://nshipster.com/nsnotification-and-nsnotificationcenter/&quot;&gt;NSNotification &amp;amp; NSNotificationCenter&lt;/a&gt; for communicating events across a system in a loosely-coupled way.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;p&gt;Associated objects should be seen as a method of last resort, rather than a solution in search of a problem (and really, categories themselves really shouldn&amp;#39;t be at the top of the toolchain to begin with).&lt;/p&gt;

&lt;p&gt;Like any clever trick, hack, or workaround, there is a natural tendency for one to actively seek out occasions to use it—especially just after learning about it. Do your best to understand and appreciate when it&amp;#39;s the right solution, and save yourself the embarrassment of being scornfully asked &amp;quot;why in the name of $DEITY&amp;quot; you decided to go with &lt;em&gt;that&lt;/em&gt; solution.&lt;/p&gt;
</description>
        <pubDate>Mon, 10 Feb 2014 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/associated-objects/</link>
        <guid>http://nshipster.com/associated-objects/</guid>
      </item>
    
      <item>
        <title>MKTileOverlay,&lt;br/&gt;MKMapSnapshotter &amp;&lt;br/&gt;MKDirections</title>
        <description>&lt;p&gt;Unless you work with &lt;code&gt;MKMapView&lt;/code&gt; on a regular basis, the last you may have heard about the current state of cartography on iOS may not have been &lt;a href=&quot;http://www.apple.com/letter-from-tim-cook-on-maps/&quot;&gt;under the cheeriest of circumstances&lt;/a&gt;. Even now, years after the ire of armchair usability experts has moved on to iOS 7&amp;#39;s distinct &amp;quot;look and feel&amp;quot;, the phrase &amp;quot;Apple Maps&amp;quot; still does not inspire confidence in the average developer.&lt;/p&gt;

&lt;p&gt;Therefore, it may come as a surprise maps on iOS have gotten quite a bit better in the intervening releases. Quite good, in fact—especially with the new mapping APIs introduced in iOS 7.  These new APIs not only expose the advanced presentational functionality seen in Maps, but provide workarounds for MapKit&amp;#39;s limitations.&lt;/p&gt;

&lt;p&gt;This week on NSHipster, we&amp;#39;ll introduce &lt;code&gt;MKTileOverlay&lt;/code&gt;, &lt;code&gt;MKMapSnapshotter&lt;/code&gt;, and &lt;code&gt;MKDirections&lt;/code&gt;: three new MapKit APIs introduced in iOS 7 that unlock a new world of possibilities.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;MKTileOverlay&lt;/h2&gt;

&lt;p&gt;Don&amp;#39;t like the default Apple Maps tiles? &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKTileOverlay_class/Reference/Reference.html&quot;&gt;&lt;code&gt;MKTileOverlay&lt;/code&gt;&lt;/a&gt; allows you to seamlessly swap out to another tile set in just a few lines of code.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Just like &lt;a href=&quot;http://www.openstreetmap.org&quot;&gt;OpenStreetMap&lt;/a&gt; and &lt;a href=&quot;https://maps.google.com&quot;&gt;Google Maps&lt;/a&gt;, MKTileOverlay uses &lt;a href=&quot;http://en.wikipedia.org/wiki/Mercator_projection#The_spherical_model&quot;&gt;spherical mercator projection (EPSG:3857)&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Setting Custom Map View Tile Overlay&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;http://tile.openstreetmap.org/{z}/{x}/{y}.png&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;MKTileOverlay&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;overlay&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKTileOverlay&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithURLTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;overlay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;canReplaceMapContent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addOverlay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;overlay&lt;/span&gt;
                   &lt;span class=&quot;nl&quot;&gt;level:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKOverlayLevelAboveLabels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;MKTileOverlay is initialized with a URL template string, with the &lt;code&gt;x&lt;/code&gt; &amp;amp; &lt;code&gt;y&lt;/code&gt; tile coordinates within the specified zoom level. &lt;a href=&quot;https://www.mapbox.com/developers/guide/&quot;&gt;MapBox has a great explanation for this scheme is used to generate tiles&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Each tile has a z coordinate describing its zoom level and x and y coordinates describing its position within a square grid for that zoom level. Hence, the very first tile in the web map system is at 0/0/0.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;table style=&quot;display:block;width:256px;margin:10px auto&quot;&gt;
    &lt;tr&gt;
        &lt;td style=&quot;background-image:url(https://a.tiles.mapbox.com/v3/examples.map-9ijuk24y/0/0/0.png);width:256px;height:256px;padding:0;border:1px #fff solid;&quot;&gt;&lt;span style=&quot;text-align:center;display:block&quot;&gt;0/0/0&lt;/span&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;

&lt;blockquote&gt;
&lt;p&gt;Zoom level 0 covers the entire globe. The very next zoom level divides z0 into four equal squares such that 1/0/0 and 1/1/0 cover the northern hemisphere while 1/0/1 and 1/1/1 cover the southern hemisphere.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;table style=&quot;display:block;width:514px;margin:10px auto;&quot;&gt;
    &lt;tr&gt;
        &lt;td style=&quot;background-image:url(https://a.tiles.mapbox.com/v3/examples.map-9ijuk24y/1/0/0.png);width:256px;height:256px;padding:0;border:1px #fff solid;&quot;&gt;&lt;span style=&quot;text-align:center;display:block&quot;&gt;1/0/0&lt;/span&gt;&lt;/td&gt;
        &lt;td style=&quot;background-image:url(https://a.tiles.mapbox.com/v3/examples.map-9ijuk24y/1/1/0.png);width:256px;height:256px;padding:0;border:1px #fff solid;&quot;&gt;&lt;span style=&quot;text-align:center;display:block&quot;&gt;1/1/0&lt;/span&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td style=&quot;background-image:url(https://a.tiles.mapbox.com/v3/examples.map-9ijuk24y/1/0/1.png);width:256px;height:256px;padding:0;border:1px #fff solid;&quot;&gt;&lt;span style=&quot;text-align:center;display:block&quot;&gt;1/0/1&lt;/span&gt;&lt;/td&gt;
        &lt;td style=&quot;background-image:url(https://a.tiles.mapbox.com/v3/examples.map-9ijuk24y/1/1/1.png);width:256px;height:256px;padding:0;border:1px #fff solid;&quot;&gt;&lt;span style=&quot;text-align:center;display:block&quot;&gt;1/1/1&lt;/span&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;

&lt;blockquote&gt;
&lt;p&gt;Zoom levels are related to each other by powers of four - &lt;code&gt;z0&lt;/code&gt; contains 1 tile, &lt;code&gt;z1&lt;/code&gt; contains 4 tiles, &lt;code&gt;z2&lt;/code&gt; contains 16, and so on. Because of this exponential relationship the amount of detail increases at every zoom level but so does the amount of bandwidth and storage required to serve up tiles. For example, a map at &lt;code&gt;z15&lt;/code&gt; – about when city building footprints first become visible – requires about 1.1 billion tiles to cover the entire world. At &lt;code&gt;z17&lt;/code&gt;, just two zoom levels greater, the world requires 17 billion tiles.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;After setting &lt;code&gt;canReplaceMapContent&lt;/code&gt; to &lt;code&gt;YES&lt;/code&gt;, the overlay is added to the &lt;code&gt;MKMapView&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;In the map view&amp;#39;s delegate, &lt;code&gt;mapView:rendererForOverlay:&lt;/code&gt; is implemented simply to return a new &lt;code&gt;MKTileOverlayRenderer&lt;/code&gt; instance when called for the &lt;code&gt;MKTileOverlay&lt;/code&gt; overlay.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#pragma mark - MKMapViewDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKOverlayRenderer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;mapView:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKMapView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mapView&lt;/span&gt;
            &lt;span class=&quot;nl&quot;&gt;rendererForOverlay:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKOverlay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;overlay&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;overlay&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKTileOverlay&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKTileOverlayRenderer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithTileOverlay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;overlay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Speaking of &lt;a href=&quot;https://www.mapbox.com&quot;&gt;MapBox&lt;/a&gt;, &lt;a href=&quot;https://github.com/incanus&quot;&gt;Justin R. Miller&lt;/a&gt; maintains &lt;a href=&quot;https://www.mapbox.com/mbxmapkit/&quot;&gt;MBXMapKit&lt;/a&gt;, a MapBox-enabled drop-in replacement for &lt;code&gt;MKMapView&lt;/code&gt;. It&amp;#39;s the easiest way to get up-and-running with this world-class mapping service, and highly recommended for anyone looking to make an impact with maps in their next release.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Implementing Custom Behavior with MKTileOverlay Subclass&lt;/h3&gt;

&lt;p&gt;If you need to accommodate a different tile coordinate scheme with your server, or want to add in-memory or offline caching, this can be done by subclassing &lt;code&gt;MKTileOverlay&lt;/code&gt; and overriding &lt;code&gt;-URLForTilePath:&lt;/code&gt; and &lt;code&gt;-loadTileAtPath:result:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;XXTileOverlay&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;MKTileOverlay&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSCache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSOperationQueue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operationQueue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;XXTileOverlay&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;URLForTilePath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKTileOverlayPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http://tile.example.com/%d/%d/%d&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;loadTileAtPath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKTileOverlayPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;path&lt;/span&gt;
                &lt;span class=&quot;nl&quot;&gt;result:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cachedData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLForTilePath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cachedData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cachedData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSURLRequest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requestWithURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLForTilePath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLConnection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sendAsynchronousRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operationQueue&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connectionError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;connectionError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;MKMapSnapshotter&lt;/h2&gt;

&lt;p&gt;Another addition to iOS 7 was &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapSnapshotter_class/Reference/Reference.html&quot;&gt;&lt;code&gt;MKMapSnapshotter&lt;/code&gt;&lt;/a&gt;, which formalizes the process of creating an image representation of a map view. Previously, this would involve playing fast and loose with the &lt;code&gt;UIGraphicsContext&lt;/code&gt;, but now images can reliably be created for any particular region and perspective.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;See &lt;a href=&quot;https://developer.apple.com/wwdc/videos/?id=309&quot;&gt;WWDC 2013 Session 309: &amp;quot;Putting Map Kit in Perspective&amp;quot;&lt;/a&gt; for additional information on how and when to use &lt;code&gt;MKMapSnapshotter&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Creating a Map View Snapshot&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;MKMapSnapshotOptions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKMapSnapshotOptions&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;region&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIScreen&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mainScreen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileURLWithPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;path/to/snapshot.png&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;MKMapSnapshotter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;snapshotter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKMapSnapshotter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithOptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;snapshotter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKMapSnapshot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;snapshot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;snapshot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIImagePNGRepresentation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;writeToURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;atomically&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;First, an &lt;code&gt;MKMapSnapshotOptions&lt;/code&gt; object is created, which is used to specify the region, size, scale, and &lt;a href=&quot;https://developer.apple.com/library/mac/documentation/MapKit/Reference/MKMapCamera_class/Reference/Reference.html&quot;&gt;camera&lt;/a&gt; used to render the map image.&lt;/p&gt;

&lt;p&gt;Then, these options are passed to a new &lt;code&gt;MKMapSnapshotter&lt;/code&gt; instance, which asynchronously creates an image with &lt;code&gt;-startWithCompletionHandler:&lt;/code&gt;. In this example, a PNG representation of the image is written to disk.&lt;/p&gt;

&lt;h3&gt;Drawing Annotations on Map View Snapshot&lt;/h3&gt;

&lt;p&gt;However, this only draws the map for the specified region; annotations are rendered separately.&lt;/p&gt;

&lt;p&gt;Including annotations—or indeed, any additional information to the map snapshot—can be done by dropping down into Core Graphics:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;snapshotter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startWithQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_get_global_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DISPATCH_QUEUE_PRIORITY_DEFAULT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;nl&quot;&gt;completionHandler:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKMapSnapshot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;snapshot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;n&quot;&gt;MKAnnotationView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKPinAnnotationView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithAnnotation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reuseIdentifier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

      &lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;snapshot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;UIGraphicsBeginImageContextWithOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;drawAtPoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGPointMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;

          &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGRectMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKAnnotation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;annotation&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annotations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;CGPoint&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;snapshot&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pointForCoordinate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annotation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coordinate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGRectContainsPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                  &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;centerOffset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
                                &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                  &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;centerOffset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
                                &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;drawAtPoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

          &lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compositeImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIGraphicsGetImageFromCurrentImageContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIImagePNGRepresentation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compositeImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;writeToURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;atomically&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;UIGraphicsEndImageContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;MKDirections&lt;/h2&gt;

&lt;p&gt;The final iOS 7 addition to MapKit that we&amp;#39;ll discuss is &lt;a href=&quot;https://developer.apple.com/library/mac/documentation/MapKit/Reference/MKDirections_class/Reference/Reference.html&quot;&gt;&lt;code&gt;MKDirections&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;MKDirections&lt;/code&gt;&amp;#39; spiritual predecessor (of sorts), &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKLocalSearch/Reference/Reference.html&quot;&gt;&lt;code&gt;MKLocalSearch&lt;/code&gt;&lt;/a&gt; was discussed in &lt;a href=&quot;http://nshipster.com/mklocalsearch/&quot;&gt;a previous NSHipster article&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;As its name implies, &lt;code&gt;MKDirections&lt;/code&gt; fetches routes between two waypoints. A &lt;code&gt;MKDirectionsRequest&lt;/code&gt; object is initialized with a &lt;code&gt;source&lt;/code&gt; and &lt;code&gt;destination&lt;/code&gt;, and is then passed into an &lt;code&gt;MKDirections&lt;/code&gt; object, which can calculate several possible routes and estimated travel times.&lt;/p&gt;

&lt;p&gt;It does so asynchronously, with &lt;code&gt;calculateDirectionsWithCompletionHandler:&lt;/code&gt;, which returns either an &lt;code&gt;MKDirectionsResponse&lt;/code&gt; object or an &lt;code&gt;NSError&lt;/code&gt; describing why the directions request failed. An &lt;code&gt;MKDirectionsResponse&lt;/code&gt; object contains an array of &lt;code&gt;routes&lt;/code&gt;: &lt;code&gt;MKRoute&lt;/code&gt; objects with an array of &lt;code&gt;MKRouteStep&lt;/code&gt; &lt;code&gt;steps&lt;/code&gt; objects, a polyline shape that can be drawn on the map, and other information like estimated travel distance and any travel advisories in effect.&lt;/p&gt;

&lt;p&gt;Building on the previous example, here is how &lt;code&gt;MKDirections&lt;/code&gt; might be used to create an array of images representing each step in a calculated route between two points (which might then be pasted into an email or cached on disk):&lt;/p&gt;

&lt;h3&gt;Getting Snapshots for each Step of Directions on a Map View&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableStepImages&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;MKDirectionsRequest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKDirectionsRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKMapItem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mapItemForCurrentLocation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;destination&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//...;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;MKDirections&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;directions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKDirections&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;directions&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;calculateDirectionsWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKDirectionsResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;MKRoute&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;route&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;routes&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKRouteStep&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;step&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;snapshotter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKMapSnapshot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;snapshot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;snapshot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;UIGraphicsBeginImageContextWithOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;drawAtPoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGPointMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;

                &lt;span class=&quot;n&quot;&gt;CGContextRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;MKPolylineRenderer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polylineRenderer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKPolylineRenderer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithPolyline&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polyline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polylineRenderer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polylineRenderer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;applyStrokePropertiesToContext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;atZoomScale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;CGContextAddPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polylineRenderer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;CGContextStrokePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

                &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGRectMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKMapItem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapItem&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;destination&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;CGPoint&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;snapshot&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pointForCoordinate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;placemark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coordinate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGRectContainsPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;MKPinAnnotationView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKPinAnnotationView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithAnnotation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reuseIdentifier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pinColor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapItem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqual&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MKPinAnnotationColorGreen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MKPinAnnotationColorRed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

                        &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;centerOffset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;centerOffset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;drawAtPoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

                &lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stepImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIGraphicsGetImageFromCurrentImageContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableStepImages&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stepImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;UIGraphicsEndImageContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;As the tools used to map the world around us become increasingly sophisticated and ubiquitous, we become ever more capable of uncovering and communicating connections we create between ideas and the spaces they inhabit. With the introduction of several new MapKit APIs, iOS 7 took great strides to expand on what&amp;#39;s possible. Although (perhaps unfairly) overshadowed by the mistakes of the past, MapKit is, and remains an extremely capable framework, worthy of further investigation.&lt;/p&gt;
</description>
        <pubDate>Mon, 03 Feb 2014 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/mktileoverlay-mkmapsnapshotter-mkdirections/</link>
        <guid>http://nshipster.com/mktileoverlay-mkmapsnapshotter-mkdirections/</guid>
      </item>
    
      <item>
        <title>Stewardship</title>
        <description>&lt;p&gt;Open Source communities function within what economists describe as a &lt;a href=&quot;http://en.wikipedia.org/wiki/Gift_economy&quot;&gt;Gift Economy&lt;/a&gt;. Rather than paying one another for goods or services through barter or currency, everyone shares freely with one another, and gains &lt;a href=&quot;http://en.wikipedia.org/wiki/Whuffie&quot;&gt;social currency&lt;/a&gt; based on their generosity. It&amp;#39;s similar to how friends tend to take turns inviting one another over for dinner or a party.&lt;/p&gt;

&lt;p&gt;With the negligible cost of distributing software over the Internet, developers are able to participate with millions of others around the world. And as a result, we have been able to collaboratively build amazing software.&lt;/p&gt;

&lt;p&gt;In terms of open source participation, releasing code is only one aspect—and arguably not even the most important one. Developing an open source project requires equal parts engineering, product design, communication, and community management. But the true deciding factor for whether an open source project succeeds is stewardship.&lt;/p&gt;

&lt;p&gt;Stewardship is an old word. It evokes the ethic of public service and duty. To be a steward is to embody the responsibilities that come with ownership. It is an act that justifies authority through continued accountability; both the greatest challenge and reward of creating and maintaining a project.&lt;/p&gt;

&lt;h2&gt;Creating&lt;/h2&gt;

&lt;p&gt;It&amp;#39;s not enough to dump a pile of source code somewhere and declare it &amp;quot;open source&amp;quot;. To do so misses the point entirely. The first step of stewardship is to clearly explain the goal and value proposition of the project, and establish clear expectations going forward.&lt;/p&gt;

&lt;h3&gt;README&lt;/h3&gt;

&lt;p&gt;A README is the most important part of any open source project. It describes why someone would want to use the code, and how they may start to do so.
All good READMEs have the following:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;A short, one or two sentence introduction that clearly explains what the project is in simple, understandable language.&lt;/li&gt;
&lt;li&gt;A section describing the basic usage of the primary tasks of the project. For example, a UI component would provide sample code of how to create, configure, and add itself to a view.&lt;/li&gt;
&lt;li&gt;A list of requirements and instructions on how to install the code into one&amp;#39;s own project.&lt;/li&gt;
&lt;li&gt;Links to documentation and resources for additional information.&lt;/li&gt;
&lt;li&gt;Contact information for the author or current maintainer.&lt;/li&gt;
&lt;li&gt;A quick statement about the licensing terms of the project.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;LICENSE&lt;/h3&gt;

&lt;p&gt;All open source code should be released under an appropriate license. Unless you have a really good reason not to, choose from any of the licenses approved by the &lt;a href=&quot;http://opensource.org&quot;&gt;Open Source Initiative&lt;/a&gt;, like &lt;a href=&quot;http://opensource.org/licenses/MIT&quot;&gt;MIT&lt;/a&gt;, &lt;a href=&quot;http://opensource.org/licenses/Apache-2.0&quot;&gt;Apache 2.0&lt;/a&gt;, or &lt;a href=&quot;http://opensource.org/licenses/GPL-3.0&quot;&gt;GPL&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If you&amp;#39;re unsure which license to choose, there are &lt;a href=&quot;http://choosealicense.com&quot;&gt;several&lt;/a&gt; &lt;a href=&quot;http://www.tldrlegal.com&quot;&gt;resources&lt;/a&gt; online that you can use to learn more. Most open source Objective-C projects are released under an MIT license, which is known to be compatible with the terms of distribution for the App Store.&lt;/p&gt;

&lt;h3&gt;Screenshot&lt;/h3&gt;

&lt;p&gt;For projects with any kind of user interface, such as a custom control, view, or animation, posting a screenshot should be considered a requirement.&lt;/p&gt;

&lt;p&gt;Buying anything &amp;quot;sight unseen&amp;quot; is a bad idea, and the same goes for consumers of open source. Although there are no monetary costs involved, evaluating a project requires a nontrivial investment in time and energy. A screenshot helps potential consumers decide if your code is worth checking out.&lt;/p&gt;

&lt;h3&gt;Demo&lt;/h3&gt;

&lt;p&gt;Actions speak louder than words. And no matter how comprehensive a README file is, any open source project can be improved with a working example.&lt;/p&gt;

&lt;p&gt;There&amp;#39;s just something about seeing the code in a real context that allows developers to grok what&amp;#39;s going on. It&amp;#39;s also nice to have a starting point for tinkering around.&lt;/p&gt;

&lt;p&gt;At the very least, an example can be used to bootstrap the process of fixing bugs or developing new features, both for you and for anyone who wants to contribute. It&amp;#39;s also a great place to incorporate any testing infrastructure for the project.&lt;/p&gt;

&lt;h3&gt;Distribution&lt;/h3&gt;

&lt;p&gt;One of the great developments in the Objective-C open source community—and in many ways, what has allowed it to flourish as it has recently—is &lt;a href=&quot;http://cocoapods.org&quot;&gt;CocoaPods&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;CocoaPods is the de facto dependency manager for integrating third party code in iOS and Mac OS X projects. At this point, it&amp;#39;s pretty much expected that any library worth using is distributed with a &lt;code&gt;.podspec&lt;/code&gt;:&lt;/p&gt;

&lt;h4&gt;NSHipsterKit.podspec&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Spec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;     &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;NSHipsterKit&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;1.0.0&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;license&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;MIT&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;A pretty obscure library.&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;                You&amp;#39;ve probably never heard of it.&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;homepage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;http://nshipster.com&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authors&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Mattt Thompson&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;
                 &lt;span class=&quot;s1&quot;&gt;&amp;#39;mattt@nshipster.com&amp;#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;social_media_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;https://twitter.com/mattt&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:git&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;https://github.com/nshipster/NSHipsterKit.git&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;1.0.0&amp;#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source_files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;NSHipsterKit&amp;#39;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Once the &lt;code&gt;.podspec&lt;/code&gt; has been submitted to the CocoaPods specs repository, a consumer would be able to add it to their own project with a Podfile:&lt;/p&gt;

&lt;h4&gt;Podfile&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:ios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;7.0&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;NSHipsterKit&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;~&amp;gt; 1.0&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Maintaining&lt;/h2&gt;

&lt;p&gt;Once the initial thrill of releasing a library has passed, the real work begins. The thing to remember is that a flurry of stars, watchers, and tweets may be exciting, but they don&amp;#39;t amount to anything of real importance. Only when users start to come with their questions, issues, and pull requests does code become software.&lt;/p&gt;

&lt;h3&gt;Versioning&lt;/h3&gt;

&lt;p&gt;Versioning is a contract that library authors make to consumers in how software will be changed over time.&lt;/p&gt;

&lt;p&gt;The prevailing convention is &lt;a href=&quot;http://semver.org&quot;&gt;Semantic Versioning&lt;/a&gt;, in which a release has a major, minor, and patch version, with each level signifying particular usage implications.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;A patch, or bugfix, release changes only implementation, keeping the public API and thus all documentation intact. Consumers should be able to update between patch versions without any change to their own code.&lt;/li&gt;
&lt;li&gt;A minor, or point, release changes the public API in non-breaking ways, such as adding a new feature. Again, developers should expect to have consumer code between minor versions work pretty much as expected.&lt;/li&gt;
&lt;li&gt;A major release is anything that changes the public API in a backwards-incompatible way. Updating between major versions effectively means migrating consumer code to a new library.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;A comprehensive set of guidelines for semantic versioning can be found at &lt;a href=&quot;http://semver.org&quot;&gt;http://semver.org&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;By following a few basic rules for versioning, developers are able to set clear expectations for how changes will affect shipping code.&lt;/p&gt;

&lt;p&gt;Deviating from these conventions as an author is disrespectful to anyone using the software, so take this responsibility seriously.&lt;/p&gt;

&lt;h3&gt;Answering Questions&lt;/h3&gt;

&lt;p&gt;One of our greatest flaws as humans is our relative inability to comprehend not knowing  or understanding something that we ourselves do. This makes it extremely difficult to diagnose (and at times empathize with) misunderstandings that someone else might be having.&lt;/p&gt;

&lt;p&gt;There&amp;#39;s also a slight sadistic tendency for developers to lord knowledge over anyone who doesn&amp;#39;t know as much as they do. We had to figure it out for ourselves (uphill both ways, in the snow) so why shouldn&amp;#39;t they have to as well?&lt;/p&gt;

&lt;p&gt;We must learn how to do better than this. RTFM is a lame answer to any question. It&amp;#39;s also a dead-end to a potential learning experience for yourself.&lt;/p&gt;

&lt;p&gt;Rather than disdaining questions, take them as an opportunity to understand what you can do better. Each question is a data point for what could be clarified or improved within your own software and documentation. And one thing to consider: for each person who asks a question, there are dozens of others who don&amp;#39;t and get frustrated and give up. Answering one question on a mailing list or developer forum helps many more people than just the asker.&lt;/p&gt;

&lt;h2&gt;Transitioning&lt;/h2&gt;

&lt;p&gt;The fate of any successful enterprise is to outgrow its original creators. While this may be a troubling or unwelcome notion, it is nevertheless something that any responsible creator should keep in mind.&lt;/p&gt;

&lt;p&gt;If anything, the reminder that all of this is fleeting gives reason to find enjoyment in even the minutia of a preoccupation.&lt;/p&gt;

&lt;h3&gt;Recruiting &amp;amp; Delegating&lt;/h3&gt;

&lt;p&gt;As a project grows, natural leaders will emerge. If you see someone consistently answering questions in issues or sending pull requests with bug fixes, ask if they would like some more responsibility.&lt;/p&gt;

&lt;p&gt;Co-maintainers don&amp;#39;t come pre-baked; individuals must grow into that role. And that role is something that must be defined over time by everyone involved. Avoid drama and hard feelings by communicating honestly and often with collaborators.&lt;/p&gt;

&lt;h3&gt;Sunsetting&lt;/h3&gt;

&lt;p&gt;All software has a lifecycle. At some point, all things must come to an end. Libraries outgrow their usefulness, or are supplanted by another piece of software, or simply fall out of favor.
In any case, there will come a time when the lights need to be turned off, and it is the responsibility of the maintainer to wrap things up.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Announce the ending of the project, offering suggestions for how to migrate to another solution.&lt;/li&gt;
&lt;li&gt;Keep the project around, but make a commit that removes source files from the master branch. (Git will keep everything safe in history)&lt;/li&gt;
&lt;li&gt;Thank everyone involved for their help and contributions.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The alternative is to become a liability, an attractive nuisance... a mockery of what once was a respectable code base.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Creating is one of the most fulfilling experiences in life, and it&amp;#39;s something that&amp;#39;s only improved by sharing with others. As software developers, we have a unique opportunity to be unbounded by physical limitations to help one another.&lt;/p&gt;

&lt;p&gt;On the occasion that you do have the opportunity to participate in the community, be sure to make the most of it—you&amp;#39;ll be happy you did.&lt;/p&gt;
</description>
        <pubDate>Mon, 27 Jan 2014 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/stewardship/</link>
        <guid>http://nshipster.com/stewardship/</guid>
      </item>
    
      <item>
        <title>Extended File Attributes</title>
        <description>&lt;p&gt;Amidst revelations of widespread spying by the NSA, the concept of metadata has taken an unexpected role in the national conversation about government surveillance. What is it? And how much does it reveal about us and our daily habits? These are questions that the American people are asking, and they deserve an answer.&lt;/p&gt;

&lt;p&gt;Acting with a sense of civic and patriotic duty rivaled only by Uncle Sam walloping Communism with a bald eagle, NSHipster aims to shed as much light on metadata as Edward Snowden with an industrial lantern.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;For every file on a UNIX filesystem, there is associated metadata. Indeed, having a path, permissions, and timestamp attributes is what makes a file a file, rather than just a blob of data.&lt;/p&gt;

&lt;p&gt;However, on Mac OS X and iOS, additional metadata can be stored in &lt;a href=&quot;http://en.wikipedia.org/wiki/Extended_file_attributes&quot;&gt;&lt;strong&gt;extended file attributes&lt;/strong&gt;&lt;/a&gt;. Introduced in Mac OS X 10.4, they are perfect for associating small, application-specific data with a file. EAs are stored in attributes B*-Tree of the HFS+ filesystem, and have a maximum size of 128KB as of Mac OS X 10.7 &amp;amp; iOS 5.&lt;/p&gt;

&lt;p&gt;What kind of information, you ask? Invoke the &lt;code&gt;ls&lt;/code&gt; command in the terminal and pass the &lt;code&gt;@&lt;/code&gt; option to see what information hides in plain sight.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;$ ls -l@
-rw-r--r--@ 1 mattt  staff  12292 Oct 19 05:59 .DS_Store
    com.apple.FinderInfo       32
-rw-r--r--@ 1 mattt  staff   5147 Dec  3 05:01 NSFixie.h
    com.apple.TextEncoding     15
-rw-r--r--@ 1 mattt  staff   5147 Dec  3 05:04 NSFixie.m
-rw-r--r--@ 1 mattt  staff   1438 Dec 18 14:31 Podfile
    com.macromates.selectionRange        4
    com.macromates.visibleIndex      1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Finder stores 32 bytes of information in &lt;code&gt;.DS_Store&lt;/code&gt;, though for reasons that aren&amp;#39;t entirely clear.&lt;/li&gt;
&lt;li&gt;Xcode takes 15 bytes to denote the TextEncoding to use for a particular file.&lt;/li&gt;
&lt;li&gt;TextMate uses extended attributes to preserve the cursor position between launches.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The extended attributes API, declared in &lt;code&gt;&amp;lt;sys/xattr.h&amp;gt;&lt;/code&gt;, has functions for getting, setting, listing, and removing attributes:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;ssize_t&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getxattr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;u_int32_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setxattr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;u_int32_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;ssize_t&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listxattr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;namebuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;removexattr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To show these in action, consider the use of extended attributes to associate an &lt;a href=&quot;http://en.wikipedia.org/wiki/HTTP_ETag&quot;&gt;HTTP Etag&lt;/a&gt; for a file:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSHTTPURLResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileSystemRepresentation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;com.Example.Etag&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allHeaderFields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Etag&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UTF8String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setxattr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strlen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As another example, previous to iOS 5.0.1, EAs were the designated way to denote that a particular file should not be synchronized with iCloud (as of iOS 5.1, &lt;code&gt;NSURL -setResourceValue:forKey:error:&lt;/code&gt; is used, which sets the &lt;code&gt;com.apple.metadata:com_apple_backup_excludeItem&lt;/code&gt; EA instead):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;sys/xattr.h&amp;gt;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLIsExcludedFromBackupKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// iOS &amp;lt;= 5.0.1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileSystemRepresentation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;com.apple.MobileBackup&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;u_int8_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setxattr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// iOS &amp;gt;= 5.1&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setResourceValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;@YES&lt;/span&gt;
                   &lt;span class=&quot;nl&quot;&gt;forKey:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLIsExcludedFromBackupKey&lt;/span&gt;
                    &lt;span class=&quot;nl&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lest extended attributes veer dangerously close to &amp;quot;being a hammer that makes everything look like a nail&amp;quot;, let it be made clear: &lt;strong&gt;extended attributes should not be used for critical data&lt;/strong&gt;. Not all volume formats support extended attributes, so copying between, say, HFS+ and FAT32 may result in a loss of information. Also consider that nothing is stopping from any application from deleting or overwriting extended attributes at any time.&lt;/p&gt;

&lt;p&gt;For things like author, file history, window or cursor position, and networking metadata, extended attributes are a great choice. If you&amp;#39;ve been struggling to synchronize file state, it may be exactly the solution you&amp;#39;ve been looking for. Just be mindful about EAs limitations and understand why they would or would not be appropriate for a particular use case.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Between domestic wiretapping, the botched launch of &lt;a href=&quot;https://www.healthcare.gov&quot;&gt;healthcare.gov&lt;/a&gt;, various stories of retailers leaking customer information, and untold volumes of snark on social networks, our culture has taken a profound shift in its relationship to computers. The average person is more technically savvy, but also harbors a newfound suspicion and mistrust of technology.&lt;/p&gt;

&lt;p&gt;Knowing the relationship between data, metadata, and the entities that interact with both offer the best chance at understanding and adapting to whatever the future holds. As programmers, we are the arbiters of digital reality for ourselves and others; it is our responsibility to act in good faith and good conscience. Taking this responsibility seriously is more important than ever before. However this manifests itself in your occupation, take care in what you do.&lt;/p&gt;
</description>
        <pubDate>Mon, 20 Jan 2014 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/extended-file-attributes/</link>
        <guid>http://nshipster.com/extended-file-attributes/</guid>
      </item>
    
      <item>
        <title>NSRange</title>
        <description>&lt;p&gt;&lt;code&gt;NSRange&lt;/code&gt; is one of the essential types of Foundation. Passed around and returned in methods throughout the framework, being well-versed in this struct has a range of benefits, which this week&amp;#39;s article will help you locate.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Ranges are data types used to describe a contiguous interval of integers. They are most commonly used with strings, arrays, and similarly-ordered collections.&lt;/p&gt;

&lt;p&gt;For Objective-C programs, the Foundation type &lt;code&gt;NSRange&lt;/code&gt; is used. In other languages, ranges are often encoded as a two-element array, containing the start and end indexes. In Foundation, &lt;code&gt;NSRange&lt;/code&gt; instead encodes a range as struct containing the location and length. By command-clicking (&lt;code&gt;⌘-ʘ&lt;/code&gt;) on the &lt;code&gt;NSRange&lt;/code&gt; symbol in Xcode, we can jump directly to its declaration in &lt;code&gt;Foundation/NSRange.h&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_NSRange&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In practice, this approach helps mitigate common off-by-one errors when working with ranges. For example, compare the equivalent Javascript and Objective-C code for creating a range of characters for a given string:&lt;/p&gt;

&lt;h4&gt;range.js&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;javascript language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;hello, world&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Forgetting to subtract &lt;code&gt;1&lt;/code&gt; for the end index in Javascript would result in an out-of-bounds error later.&lt;/p&gt;

&lt;h4&gt;range.m&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;hello, world&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;NSRange&lt;/code&gt;&amp;#39;s approach is clearer and less prone to error—especially when it comes to more complex arithmetic operations on ranges.&lt;/p&gt;

&lt;h2&gt;Usage&lt;/h2&gt;

&lt;h3&gt;Strings&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;lorem ipsum dolor sit amet&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rangeOfString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;ipsum&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// {.location=6, .length=5}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;substring&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;substringWithRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// @&amp;quot;ipsum&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;NSString&lt;/code&gt; does not have a method like &lt;code&gt;containsString:&lt;/code&gt;. Instead, &lt;code&gt;rangeOfString:&lt;/code&gt; can be used to check for an &lt;code&gt;NSNotFound&lt;/code&gt; location value:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rangeOfString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;keyword&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSNotFound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Arrays&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;d&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subarray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subarrayWithRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// @[@&amp;quot;b&amp;quot;, @&amp;quot;c&amp;quot;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Index Sets&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://nshipster.com/nsindexset/&quot;&gt;NSIndexSet&lt;/a&gt; is a Foundation collection class that is similar to &lt;code&gt;NSRange&lt;/code&gt;, with the notable exception of being able to support non-contiguous series. An &lt;code&gt;NSIndexSet&lt;/code&gt; can be created from a range using the &lt;code&gt;indexSetWithIndexesInRange:&lt;/code&gt; class constructor:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSIndexSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;indexSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSIndexSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;indexSetWithIndexesInRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Functions&lt;/h2&gt;

&lt;p&gt;Because &lt;code&gt;NSRange&lt;/code&gt; is not a class, creating and using instances is done through function calls, rather than, say, instance methods.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Many of the NSRange functions are named counter to the modern conventions of Foundation and CoreFoundation wherein the relevant type of the function immediately follows the two-letter namespace. For example, &lt;code&gt;NSMakeRange&lt;/code&gt; should instead be named &lt;code&gt;NSRangeMake&lt;/code&gt;, following the example of &lt;code&gt;CGRectMake&lt;/code&gt; and &lt;code&gt;CGSizeMake&lt;/code&gt;,  et al. Similarly,  a better name for &lt;code&gt;NSEqualRanges&lt;/code&gt; would be &lt;code&gt;NSRangeEqualToRange&lt;/code&gt;, just like &lt;code&gt;CGPointEqualToPoint&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Although consistency in itself is likely not sufficient reason to go through the trouble of replacing existing usage, &lt;a href=&quot;https://gist.github.com/mattt/8402537&quot;&gt;this gist&lt;/a&gt; shows how one could make their own code base a little more OCD-friendly.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Creating an NSRange&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSMakeRange&lt;/code&gt;:  Creates a new NSRange from the specified values.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// {.location=0, .length=3}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Querying Information&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSEqualRanges&lt;/code&gt;: Returns a Boolean value that indicates whether two given ranges are equal.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;equal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSEqualRanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// NO&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSLocationInRange&lt;/code&gt;:  Returns a Boolean value that indicates whether a specified position is in a given range.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contained&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocationInRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// YES&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSMaxRange&lt;/code&gt;: Returns the sum of the location and length of the range.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMaxRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 7&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Set Operations&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSIntersectionRange&lt;/code&gt;: Returns the intersection of the specified ranges. If the returned range’s length field is &lt;code&gt;0&lt;/code&gt;, then the two ranges don’t intersect, and the value of the location field is undefined.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intersectionRange&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSIntersectionRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// {.location=2, .length=4}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSUnionRange&lt;/code&gt;: Returns the union of the specified ranges. A range covering all indices in and between range1 and range2. If one range is completely contained in the other, the returned range is equal to the larger range.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unionRange&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUnionRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// {.location=0, .length=9}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Converting Between NSString * &amp;amp; NSRange&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSStringFromRange&lt;/code&gt;: Returns a string representation of a range.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSStringFromRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @&amp;quot;{3,4}&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSRangeFromString&lt;/code&gt;: Returns a range from a textual representation.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;{1,5}&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSRangeFromString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// {.location=1, .length=5}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If the string passed into &lt;code&gt;NSRangeFromString&lt;/code&gt; does not represent a valid range, it will return a range with its location and length set to &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;invalid&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSRangeFromString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// {.location=0, .length=0}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;While one might be tempted to use &lt;code&gt;NSStringFromRange&lt;/code&gt; to box &lt;code&gt;NSRange&lt;/code&gt; for inclusion within an &lt;code&gt;NSArray&lt;/code&gt;, &lt;code&gt;NSValue +valueWithRange:&lt;/code&gt; is the way to go:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSValue&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueWithRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSRange&lt;/code&gt; is one of the few cases where some of the underlying implementation of its functions are actually exposed and inlined in the public headers:&lt;/p&gt;

&lt;h4&gt;Foundation/NSRange.h&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NS_INLINE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NS_INLINE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NSMaxRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NS_INLINE&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NSLocationInRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NS_INLINE&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NSEqualRanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;NSRangePointer&lt;/h2&gt;

&lt;p&gt;One oddity worth mentioning with &lt;code&gt;NSRange&lt;/code&gt; is the existence of &lt;code&gt;NSRangePointer&lt;/code&gt;. &amp;quot;What the what?&amp;quot;, you might exclaim in panicked confusion. Jumping to the source confirms our darkest fears:&lt;/p&gt;

&lt;h4&gt;Foundation/NSRange.h&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRangePointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So. Without a definitive origin story, one would have to assume that this type was created by a well-meaning framework engineer who noted the confusion around &lt;code&gt;NSRange&lt;/code&gt; being a struct and not a class. &lt;code&gt;NSRange *&lt;/code&gt; is equivalent to &lt;code&gt;NSRangePointer&lt;/code&gt;, though the latter can be found in out parameters for various methods throughout Foundation. &lt;code&gt;NSAttributedString&lt;/code&gt;, for instance, has an &lt;code&gt;NSRangePointer&lt;/code&gt; parameter for returning the effective range of an attribute at a particular index (since the attribute likely starts and ends before outside of the specified index):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSMutableAttributedString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableAttributedString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableAttributedString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUnderlineStyleAttributeName&lt;/span&gt;
                               &lt;span class=&quot;nl&quot;&gt;atIndex:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
                        &lt;span class=&quot;nl&quot;&gt;effectiveRange:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Make underlined text blue as well&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableAttributedString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSForegroundColorAttributeName&lt;/span&gt;
                                    &lt;span class=&quot;nl&quot;&gt;value:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIColor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blueColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                                    &lt;span class=&quot;nl&quot;&gt;range:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;CFRange&lt;/h2&gt;

&lt;p&gt;One final caveat: Core Foundation also defines a &lt;code&gt;CFRange&lt;/code&gt; type, which differs from &lt;code&gt;NSRange&lt;/code&gt; in using &lt;code&gt;CFIndex&lt;/code&gt; types for its members, and having only the function &lt;code&gt;CFRangeMake&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CFIndex&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CFIndex&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Anyone working with CoreText or another low-level C API is likely to encounter &lt;code&gt;CFRange&lt;/code&gt; in place of &lt;code&gt;NSRange&lt;/code&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 13 Jan 2014 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nsrange/</link>
        <guid>http://nshipster.com/nsrange/</guid>
      </item>
    
      <item>
        <title>Colophon</title>
        <description>&lt;p&gt;As a way to kick off this new year, I thought it&amp;#39;d be fun to share some insights of just how NSHipster is made. This article covers both the website and the recently-released NSHipster book, so if you&amp;#39;ve wondered about the nitty gritty of digital or physical publishing, this article is for you.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;Website&lt;/h2&gt;

&lt;p&gt;I created NSHipster in July of 2012 in an attempt to form a lasting writing habit. I committed to putting out a new article each week, and (for the most part) I&amp;#39;ve been able to stick to that. Having a consistent deadline keeps me motivated and accountable for writing something every week.&lt;/p&gt;

&lt;p&gt;Here&amp;#39;s the routine: on Monday mornings I wake up at 5AM, grab a bottle of Ito En tea, and get to work. Knowing that I &lt;em&gt;need&lt;/em&gt; to get something out then and there allows me to stay focused on the task at hand.&lt;/p&gt;

&lt;h3&gt;Organization: Things.app&lt;/h3&gt;

&lt;p&gt;The first step is to figure out what to write about. I have a list of potential topics stashed away in &lt;a href=&quot;http://culturedcode.com/things/&quot;&gt;Things.app&lt;/a&gt;, compiled from random ideas I get while programming, or while reading through Twitter.&lt;/p&gt;

&lt;p&gt;With a topic in hand, then next step is to find as many relevant articles around the web as I can. Apple&amp;#39;s documentation and guides serve as an outline of topics to discuss, while Stack Overflow questions serve as data points for where any confusion may lie. Any blog posts that come up in search also help to highlight any interesting tidbits or tricks.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;And every so often, I&amp;#39;ll find that &lt;a href=&quot;https://www.mikeash.com/pyblog/&quot;&gt;Mike Ash has already written the definitive blog post&lt;/a&gt; on the subject, in which case I go back and find a new topic.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Writing: TextMate &amp;amp; Markdown&lt;/h3&gt;

&lt;p&gt;After an hour or so of research on the web and experimentation in Xcode, I&amp;#39;ll have a basic outline, along with a handful of code samples for the article. At this point, I have enough to go on for a first draft—and more importantly, have sufficiently warmed up my writing muscles, so that the words flow a little more easily.&lt;/p&gt;

&lt;p&gt;Everything is written in &lt;a href=&quot;http://en.wikipedia.org/wiki/Markdown&quot;&gt;Markdown&lt;/a&gt;, allowing me to focus on the content. My non-Xcode editor-of-choice is &lt;a href=&quot;http://macromates.com&quot;&gt;TextMate&lt;/a&gt;, as it has been for nearly a decade.&lt;/p&gt;

&lt;p&gt;With dozens of articles under my belt at this point, I&amp;#39;m able to write comfortably in the familiar voice that you&amp;#39;ve come to expect from NSHipster. Most articles start with a philosophical interlude, or some background to provide a broader context for that week&amp;#39;s topic. What follows is a top-level description of the class, method, function, project, or language feature being discussed, describing what it is, how it works, and why it&amp;#39;s cool and significant. Each section follows in a similar fashion, using code samples, figures, and tables to explain each concept. Finally, the conclusion aims to wrap up any concepts introduced in the beginning, and motivate the reader to use what they&amp;#39;ve learned in their own work.&lt;/p&gt;

&lt;h3&gt;Editing: Marked.app&lt;/h3&gt;

&lt;p&gt;Once I&amp;#39;ve gotten most of the first draft finished, I&amp;#39;ll throw the markdown file into &lt;a href=&quot;http://markedapp.com&quot;&gt;Marked&lt;/a&gt; to get a sense of the final document as it will read on the site. With all of the formatting in place, I&amp;#39;m able to get a better idea of the actual length and flow of the document. The readability tools and Mac OS X&amp;#39;s built-in grammar and spell check act as a first-pass for typos.&lt;/p&gt;

&lt;h3&gt;Generating: Jekyll &amp;amp; Compass&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://jekyllrb.com&quot;&gt;Jekyll&lt;/a&gt; is what brings all of the content together to generate the final HTML of the site. The &lt;a href=&quot;https://github.com/NSHipster/nshipster.com&quot;&gt;source code for the site&lt;/a&gt; has evolved gradually over time to incorporate things like &lt;a href=&quot;http://nshipster.com/feed.xml&quot;&gt;RSS&lt;/a&gt;, syndication on &lt;a href=&quot;https://twitter.com/nshipster&quot;&gt;Twitter&lt;/a&gt;, Facebook, and &lt;a href=&quot;https://plus.google.com/+MatttThompson&quot;&gt;Google+&lt;/a&gt;, and full-text search, as well as other best practices.&lt;/p&gt;

&lt;p&gt;For CSS, I use &lt;a href=&quot;http://en.wikipedia.org/wiki/Sass_%28stylesheet_language%29&quot;&gt;Sass&lt;/a&gt; &amp;amp; &lt;a href=&quot;http://compass-style.org&quot;&gt;Compass&lt;/a&gt;. Once you get used to Sass, there&amp;#39;s just no going back to doing CSS by hand. The site itself is long overdue for a re-align, so look forward to that at some point.&lt;/p&gt;

&lt;h3&gt;Hosting: Amazon S3&lt;/h3&gt;

&lt;p&gt;I recently switched hosting over from &lt;a href=&quot;http://heroku.com&quot;&gt;Heroku&lt;/a&gt; to &lt;a href=&quot;http://aws.amazon.com/s3/&quot;&gt;Amazon S3&lt;/a&gt;. As much as I miss ease and simplicity of Heroku&amp;#39;s git-based deployment, S3 can serve static websites much more quickly and inexpensively. Hosting in the &lt;code&gt;us-west-2&lt;/code&gt; (Oregon) region also lends some extra hipster cred, with its relative proximity to Portlandia.&lt;/p&gt;

&lt;p&gt;I use the &lt;code&gt;ALIAS&lt;/code&gt; feature of &lt;a href=&quot;https://dnsimple.com&quot;&gt;DNSimple&lt;/a&gt; to host the site at the Apex domain &lt;code&gt;nshipster.com&lt;/code&gt;, rather than a &lt;code&gt;CNAME&lt;/code&gt; like &lt;code&gt;www.nshipster.com&lt;/code&gt;. Everything about DNSimple has been a dream; I whole-heartedly recommend them for as a DNS registrar and nameserver provider.&lt;/p&gt;

&lt;h3&gt;Deploying: s3cmd &amp;amp; Transmit.app&lt;/h3&gt;

&lt;p&gt;Switching over from Heroku also meant coming up with a deployment script. Fortunately, &lt;a href=&quot;http://s3tools.org/s3cmd&quot;&gt;s3cmd&lt;/a&gt; makes it easy to synchronize files from the Jekyll &lt;code&gt;_site&lt;/code&gt; build folder to my static hosting bucket. (If anything goes wrong during deployment, or I need to quickly futz around with something in S3 directly, &lt;a href=&quot;http://panic.com/transmit/&quot;&gt;Transmit&lt;/a&gt; is my go-to tool).&lt;/p&gt;

&lt;p&gt;Before sending everything up to S3, I run &lt;a href=&quot;http://tidy.sourceforge.net&quot;&gt;HTML Tidy&lt;/a&gt; (with a &lt;a href=&quot;https://github.com/NSHipster/nshipster.com/blob/master/tidy.conf&quot;&gt;highly-customized config file&lt;/a&gt; to accomodate HTML5), and run my HTML and XML (sitemap &amp;amp; RSS feed) through &lt;a href=&quot;http://en.wikipedia.org/wiki/Gzip&quot;&gt;&lt;code&gt;gzip&lt;/code&gt;&lt;/a&gt;. By setting the &lt;code&gt;&amp;#39;Content-Encoding: gzip&amp;#39;&lt;/code&gt; header on S3, compressed assets can be served directly, which &lt;em&gt;dramatically&lt;/em&gt; reduces the size (and therefore transfer time) for files.&lt;/p&gt;

&lt;p&gt;All together, the deploy script looks something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;    jekyll build --config _config.en.yml
    find _site/ -iname &amp;quot;*.html&amp;quot;
        -exec tidy -config tidy.conf {} +
    find _site/ -iname &amp;#39;*.html&amp;#39;
        -exec gzip -n --best {} +
    find _site/ -iname &amp;#39;*.xml&amp;#39;
        -exec gzip -n --best {} +

    for f in `find _site/ -iname &amp;#39;*.gz&amp;#39;`; do
      mv $f ${f%.gz}
    done

    s3cmd sync --progress -M --acl-public
        --add-header &amp;#39;Content-Encoding:gzip&amp;#39;
        --exclude &amp;#39;*.*&amp;#39;
        --include &amp;#39;*.html&amp;#39; --include &amp;#39;*.xml&amp;#39;
        --verbose
        _site/ s3://nshipster.com/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Collaboration: GitHub&lt;/h3&gt;

&lt;p&gt;Using a static site generator like Jekyll has the additional benefit of tracking changes of documents over time with &lt;a href=&quot;http://git-scm.com&quot;&gt;git&lt;/a&gt;. If someone finds an issue with an article, or has a correction to make, they can &lt;a href=&quot;https://github.com/NSHipster/articles/issues&quot;&gt;open a Pull Request&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;And since all of the content is licensed under a &lt;a href=&quot;http://creativecommons.org/licenses/by-nc/3.0/&quot;&gt;Creative Commons BY-NC License&lt;/a&gt;, anyone is welcome to translate the source material into another language.&lt;/p&gt;

&lt;h3&gt;Internationalization: &lt;a href=&quot;http://nshipster.cn&quot;&gt;NSHipster.cn&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Speaking of translation—over the last couple months, I&amp;#39;ve been working with translators to make NSHipster more accessible to Chinese-speaking audiences. It&amp;#39;s still a work in progress, but I&amp;#39;m excited to give you &lt;a href=&quot;http://nshipster.cn&quot;&gt;a sneak peak at what we have so far: NSHipster.cn&lt;/a&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;Book&lt;/h2&gt;

&lt;p&gt;Which brings us to the book. &lt;a href=&quot;https://gumroad.com/l/nshipster&quot;&gt;NSHipster: Obscure Topics in Cocoa &amp;amp; Objective-C&lt;/a&gt; is the culmination of all of my efforts so far with NSHipster. It combines articles from the site, along with new articles to create an essential resource for any aspiring iOS or Mac OS X developer.&lt;/p&gt;

&lt;p&gt;I&amp;#39;ll admit: I had no idea what I was getting myself into when I started. Turns out, writing and publishing a book is quite a bit different from a website. Working in the insulated, digital world of technology allows us to momentarily forget about most of the sharp edges of the real world. The process of writing the book was nothing if not a reality check.&lt;/p&gt;

&lt;h3&gt;Editing &amp;amp; Layout: Pages.app&lt;/h3&gt;

&lt;p&gt;I&amp;#39;m not proud of my process in creating the book. It was a long, manual slog using kludgy tools without much of a clue about what I was doing at any step in the process.&lt;/p&gt;

&lt;p&gt;At first, I thought it would be pretty straightforward: run the site&amp;#39;s articles through &lt;a href=&quot;http://johnmacfarlane.net/pandoc/&quot;&gt;Pandoc&lt;/a&gt; and call it a day.&lt;/p&gt;

&lt;p&gt;Nope.&lt;/p&gt;

&lt;p&gt;After sinking at least 10 hours into hacking and tweaking every step of the process, I just wasn&amp;#39;t able to produce anything that I could be proud of. Whether this is the fault of the tooling, or my inability to use it correctly, I can&amp;#39;t help but conclude from my experiences that stylesheets just don&amp;#39;t cut it when it comes to books: each page spread must be designed individually.&lt;/p&gt;

&lt;p&gt;With this in mind, I turned to &lt;a href=&quot;http://www.adobe.com/products/indesign.html&quot;&gt;InDesign&lt;/a&gt;. After an hour or two of fiddling with content tools and templates, I threw in the towel and decided to just use &lt;a href=&quot;https://itunes.apple.com/us/app/pages/id409201541?mt=12&quot;&gt;Pages&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Yes, Pages. Seriously.&lt;/p&gt;

&lt;p&gt;I even specifically upgraded to the latest iWork &amp;#39;13 version, which turned out to be even less capable than its predecessor.&lt;/p&gt;

&lt;p&gt;What started as a command-line driven process became 40 hours of getting to know this WYSIWYG editor. To its credit, WYSIWYG can actually be a really nice way to design content, as it allows for copy-editing decisions to be made in a tight loop with its implications on layout. This was especially useful when it came to placing &lt;a href=&quot;http://www.conorheelan.com&quot;&gt;Conor Heelan&amp;#39;s&lt;/a&gt; delightful animal illustrations.&lt;/p&gt;

&lt;p&gt;Using Pages, I was able to generate the PDF that is available online, as well as the source document for the physical book. Even now, I&amp;#39;m still at a loss for what would have been a better solution.&lt;/p&gt;

&lt;h3&gt;Electronic Publishing: Gumroad&lt;/h3&gt;

&lt;p&gt;Of all of the options for selling and distributing online goods, &lt;a href=&quot;https://gumroad.com&quot;&gt;Gumroad&lt;/a&gt; is the best. In just a few minutes, I was able to put together &lt;a href=&quot;https://gumroad.com/l/nshipster&quot;&gt;an attractive listing&lt;/a&gt;, with options for pre-sale and physical book add-ons.&lt;/p&gt;

&lt;p&gt;Gumroad&amp;#39;s dashboard analytics and tools provide an attractive view of sales, which was exciting to watch in real-time when I first hit publish. The small cut they take on each sale to host and handle payment (including international and state sales tax) was well worth it. I&amp;#39;ll definitely be working with Gumroad again for my next project.&lt;/p&gt;

&lt;h3&gt;Physical Publishing &amp;amp; Fulfillment: CreateSpace&lt;/h3&gt;

&lt;p&gt;The good news: it&amp;#39;s never been easier to self-publish a book.&lt;br/&gt;
The bad news: parts of it are still a pain in the ass.&lt;/p&gt;

&lt;p&gt;Here&amp;#39;s how I did it:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Create an account with &lt;a href=&quot;https://www.createspace.com&quot;&gt;CreateSpace&lt;/a&gt;&lt;/strong&gt;. As I understand it, Amazon effectively cornered the market of &lt;a href=&quot;http://en.wikipedia.org/wiki/Print_on_demand&quot;&gt;Print on Demand&lt;/a&gt; by acquiring this company and buying all of the book printers it could find.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Create a new title&lt;/strong&gt;. In this case, it was a trade paperback book (6&amp;quot; × 9&amp;quot;).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Purchase ISBNs from &lt;a href=&quot;https://www.myidentifiers.com&quot;&gt;Bowker&lt;/a&gt;&lt;/strong&gt;. Since a unique &lt;a href=&quot;http://en.wikipedia.org/wiki/International_Standard_Book_Number&quot;&gt;ISBN&lt;/a&gt; is required for each retail distribution—including one for each digital format (PDF, epub, Kindle Mobi, iBooks)—I bought a 10 pack. (Don&amp;#39;t bother buying a barcode, those can be easily generated for free elsewhere)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Create the cover and internal content&lt;/strong&gt;. CreateSpace has some pretty decent tools for proofing content. They were able to find issues with margin and bleed before sending out for a physical proof.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Behold your book, &lt;a href=&quot;http://amzn.to/1cZBq78&quot;&gt;now available for sale on Amazon&lt;/a&gt;&lt;/strong&gt;. It&amp;#39;s an incredible feeling, &lt;a href=&quot;http://nshipster.s3.amazonaws.com/nshipster-books-box.jpg&quot;&gt;holding something you&amp;#39;ve created in your hands&lt;/a&gt;. This alone made everything worth it. CreateSpace offers impressive wholesale price for a physical book (between $10–15 for printing a book and shipping domestically or internationally)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Here&amp;#39;s where I messed up:&lt;/p&gt;

&lt;p&gt;Because I did a pre-order for physical books through Gumroad, it was up to me to translate those into wholesale orders from CreateSpace. Unfortunately, CreateSpace had no mechanism for bulk ordering online, and their support staff were unable to process that themselves. Their recommendation: go through the checkout process manually for each of the 1000+ orders.&lt;/p&gt;

&lt;p&gt;Yikes.&lt;/p&gt;

&lt;p&gt;Fortunately, this was the one part of the book writing process I &lt;em&gt;was&lt;/em&gt; able to automate. Using &lt;a href=&quot;http://mechanize.rubyforge.org&quot;&gt;Mechanize&lt;/a&gt;, I was able to write a Ruby script to go through each order, one-by-one, and manually create an order for each. Because the user input wasn&amp;#39;t 100% correctly formatted, I had to keep watch over the script as it ran, ready to fix any errors as they came up. &lt;strong&gt;The process took the better part of two days&lt;/strong&gt;. I&amp;#39;ll try to get that cleaned up and packaged into a proper Ruby library soon.&lt;/p&gt;

&lt;p&gt;Some other fun facts:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;I ran into the outgoing SMTP limit for my Gmail account, forcing me to create and send from several email aliases.&lt;/li&gt;
&lt;li&gt;I used Numbers.app to clean up the &lt;code&gt;.csv&lt;/code&gt; file provided by Gumroad, but because of its &lt;em&gt;delightful&lt;/em&gt; insistence on automatically formatting postal codes as numbers, anything with a leading zero got screwed up. NSHipsters in Massachusetts: I love you, but you were the bane of my existence for an afternoon.&lt;/li&gt;
&lt;li&gt;For a while, each error would silently create an order sent to my house. That was the first time a bug has so directly translated into a monetary cost for me. For fun, I added an &lt;code&gt;afplay cha-ching.aiff&lt;/code&gt; after each order from that moment on.&lt;/li&gt;
&lt;li&gt;At some point, the script started to fail silently because an order to the Ukraine triggered a fraud warning for my American Express card. Thanks to their amazing customer support, I was able to get everything running smoothly within 5 minutes.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Inspiration&lt;/h3&gt;

&lt;p&gt;So why did I write the book, anyway? There are 3 primary reasons:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;To Craft a Structured Narrative&lt;/strong&gt;: NSHipster.com has built up its archive week-by-week, and is likewise organized by its particular chronology. And though articles are organized by topic in a long footer, it can be difficult for new readers to know where to start. A book allows for a linear narrative structure in a way that a blog simply cannot. A great deal of care was put into structuring the content in the book according to a logical progression, such that one could read from start to finish. There are also a number of articles that are exclusive to the book, dealing primarily with the cultural and emotional aspects of coding.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;To Provide Something Tangible&lt;/strong&gt;: It&amp;#39;s been amazing to see how much readers have related to NSHipster. A tangible object like a book offers a tangible &lt;em&gt;something&lt;/em&gt; that you can be proud of and cherish. It also creates a tangible means of supporting the site, in the same way that one might for a favorite  &lt;a href=&quot;http://www.kcrw.com&quot;&gt;public radio station&lt;/a&gt;, &lt;a href=&quot;http://maximumfun.org&quot;&gt;podcast&lt;/a&gt;, or &lt;a href=&quot;https://dribbble.com/account/pro&quot;&gt;website&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;To Change My Life&lt;/strong&gt;: Last week, on New Year&amp;#39;s Eve, I married the most amazing person I&amp;#39;ve ever met. Thanks to your generous support, she and I are able to start our lives together comfortably, with something set aside for a house downpayment in the future (as well as a lovely honeymoon in Hawaii; I get back later this week). I can&amp;#39;t begin to express my gratitude for all of the blessings I&amp;#39;ve had in my work. Thank you.&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Mon, 06 Jan 2014 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/colophon/</link>
        <guid>http://nshipster.com/colophon/</guid>
      </item>
    
      <item>
        <title>Reader Submissions -&lt;br/&gt; New Year&#39;s 2014</title>
        <description>&lt;p&gt;As we prepare to increment our &lt;code&gt;NSDateComponents -year&lt;/code&gt; by &lt;code&gt;1&lt;/code&gt;, it&amp;#39;s time once again for NSHipster end-of-the-year Reader Submissions! &lt;a href=&quot;https://gist.github.com/mattt/4148342&quot;&gt;Last year&lt;/a&gt;, we got some &lt;a href=&quot;http://nshipster.com/reader-submissions-new-years-2013/&quot;&gt;mind-blowing tips and tricks&lt;/a&gt;. With the release of iOS 7 &amp;amp; Mavericks, and a year&amp;#39;s worth of new developments in the Objective-C ecosystem, there was a ton of new stuff to write about.&lt;/p&gt;

&lt;p&gt;Thanks to &lt;a href=&quot;https://github.com/acoomans&quot;&gt;Arnaud Coomans&lt;/a&gt;, &lt;a href=&quot;https://github.com/0xced&quot;&gt;Cédric Luthi&lt;/a&gt;, &lt;a href=&quot;https://github.com/dbgrandi&quot;&gt;David Grandinetti&lt;/a&gt;, &lt;a href=&quot;https://github.com/ellneal&quot;&gt;Ell Neal&lt;/a&gt;, &lt;a href=&quot;https://github.com/rubymaverick&quot;&gt;Eric Allam&lt;/a&gt;, &lt;a href=&quot;https://github.com/eskerber&quot;&gt;Erik Kerber&lt;/a&gt;, &lt;a href=&quot;https://github.com/jkubicek&quot;&gt;Jim Kubicek&lt;/a&gt;, &lt;a href=&quot;https://github.com/nevyn&quot;&gt;Joachim Bengtsson&lt;/a&gt;, &lt;a href=&quot;https://github.com/Anviking&quot;&gt;Johannes Lund&lt;/a&gt;, &lt;a href=&quot;https://github.com/joshavant&quot;&gt;Josh Avant&lt;/a&gt;, &lt;a href=&quot;https://github.com/jpm&quot;&gt;João Prado Maia&lt;/a&gt;, &lt;a href=&quot;https://github.com/incanus&quot;&gt;Justin R. Miller&lt;/a&gt;, &lt;a href=&quot;https://github.com/PycKamil&quot;&gt;Kamil Pyć&lt;/a&gt;, &lt;a href=&quot;https://github.com/mteece&quot;&gt;Matthew Teece&lt;/a&gt;, &lt;a href=&quot;https://github.com/MaxGabriel&quot;&gt;Maximilian Tagher&lt;/a&gt;, &lt;a href=&quot;https://github.com/mindbrix&quot;&gt;Nigel Timothy Barber&lt;/a&gt;, &lt;a href=&quot;https://github.com/NSProgrammer&quot;&gt;Nolan O&amp;#39;Brien&lt;/a&gt;, &lt;a href=&quot;https://github.com/pitiphong-p&quot;&gt;Pitiphong Phongpattranont&lt;/a&gt;, &lt;a href=&quot;https://gist.github.com/stevemoser&quot;&gt;Steve Moser&lt;/a&gt;, &lt;a href=&quot;https://github.com/Thomvis&quot;&gt;Thomas Visser&lt;/a&gt;, &lt;a href=&quot;https://github.com/shpakovski&quot;&gt;Vadim Shpakovski&lt;/a&gt;, &amp;amp; &lt;a href=&quot;https://github.com/jurre&quot;&gt;@jurre&lt;/a&gt; for &lt;a href=&quot;https://gist.github.com/7414618&quot;&gt;contributing their great tips&lt;/a&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;GCC Code Block Evaluation C Extension&lt;/h2&gt;

&lt;p&gt;Let&amp;#39;s make this official: &lt;strong&gt;NSHipster&amp;#39;s Objective-C trend of 2013 is code block evaluation assignment&lt;/strong&gt;. Recommended by both &lt;a href=&quot;https://github.com/jkubicek&quot;&gt;Jim Kubicek&lt;/a&gt; and &lt;a href=&quot;https://github.com/MaxGabriel&quot;&gt;Maximilian Tagher&lt;/a&gt; (citing &lt;a href=&quot;http://cocoa-dom.tumblr.com/post/56517731293/new-thing-i-do-in-code&quot;&gt;this blog post&lt;/a&gt; by &lt;a href=&quot;https://github.com/monkeydom&quot;&gt;Dominik Wagner&lt;/a&gt;), this trick does wonders to make code cleaner, safer, and more concise.&lt;/p&gt;

&lt;p&gt;Behind the magic is a GCC C extension, which causes a code block to return a value if  enclosed within brackets and parentheses.&lt;/p&gt;

&lt;p&gt;Watch, as it cuts through this view controller code like butter!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;searchBar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UISearchBar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;searchBar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UISearchBar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithFrame&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;50.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;searchBar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;searchBar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This not only segregates configuration details into initialization, but the additional scope allows generic variable names like &lt;code&gt;frame&lt;/code&gt;, &lt;code&gt;button&lt;/code&gt;, and &lt;code&gt;view&lt;/code&gt; to be reused in subsequent initializations. No more &lt;code&gt;loginButtonFrame = ... / signupButtonFrame = ...&lt;/code&gt;!&lt;/p&gt;

&lt;p&gt;If code craftsmanship is important to you, strongly consider making this standard practice in your work. It may look a bit weird at first, but this will very likely become common convention by the end of 2014.&lt;/p&gt;

&lt;h2&gt;Default Values with GNU-style Ternary &lt;code&gt;?:&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;The ternary operator, &lt;code&gt;?&lt;/code&gt;, is shorthand for &lt;code&gt;if () {...} else {...}&lt;/code&gt;. However, because of how difficult it can be to understand statements with ternary operators at a glance, they are generally dispreferred by veteran coders.&lt;/p&gt;

&lt;p&gt;Nonetheless, &lt;a href=&quot;https://github.com/MaxGabriel&quot;&gt;Maximilian Tagher&lt;/a&gt; offers a lesser-known (yet much-loved by those in-the-know) use of the ternary operator: &lt;code&gt;?:&lt;/code&gt;, which acts as a convenient way to specify a fallback value to return if the left-hand side is &lt;code&gt;nil&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;a&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @&amp;quot;a&amp;quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @&amp;quot;b&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is especially convenient for providing default behavior when a property may not be set:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;completionQueue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The main downside of this approach is that default Xcode project warning settings will raise a warning. You can get around this by wrapping the relevant code block in &lt;code&gt;#pragma&lt;/code&gt; declarations, but the added LOC nullifies much of the brevity that this approach provides:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#pragma clang diagnostic push&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma clang diagnostic ignored &amp;quot;-Wgnu&amp;quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Unknown&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma clang diagnostic pop&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;code&gt;@import&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/shpakovski&quot;&gt;Vadim Shpakovski&lt;/a&gt; reminds us of one of the more obscure additions to LLVM 5.0, the &lt;code&gt;@import&lt;/code&gt; keyword. No more are the days of &lt;code&gt;Xcode ▹ Project ▹ TARGETS ▹ General ▹ Linked Frameworks and Libraries ▹ +&lt;/code&gt;. With &lt;code&gt;@import&lt;/code&gt;, the Xcode will automatically link &lt;code&gt;MapKit&lt;/code&gt;, &lt;code&gt;CoreData&lt;/code&gt;, or any other referenced framework as necessary. Even &lt;code&gt;Prefix.pch&lt;/code&gt; benefits, sporting a svelte new physique:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIKit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foundation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CoreGraphics&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Customizing MKMapView Tiles&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/incanus&quot;&gt;Justin R. Miller&lt;/a&gt;, of &lt;a href=&quot;https://www.mapbox.com&quot;&gt;MapBox&lt;/a&gt; fame, brings to our attention what is perhaps the most important feature in iOS 7 mapping: custom tile overlays:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Relatively little-known feature of iOS 7: you can turn off Apple&amp;#39;s own maps now with &lt;code&gt;MKTileOverlay&lt;/code&gt;, &lt;code&gt;MKTileOverlayRenderer&lt;/code&gt;, and &lt;code&gt;canReplaceMapContent&lt;/code&gt;, unlike you could before with Apple or (pre-iOS 6) Google. And check out &lt;a href=&quot;http://github.com/mapbox/mbxmapkit&quot;&gt;MBXMapKit&lt;/a&gt; if you&amp;#39;d like to do it in one line of code.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Thoughtbot&amp;#39;s Blog Post on MapKit Performance&lt;/h2&gt;

&lt;p&gt;Speaking of iOS maps, &lt;a href=&quot;https://github.com/jpm&quot;&gt;João Prado Maia&lt;/a&gt; cites an amazing blog post by &lt;a href=&quot;http://thoughtbot.com&quot;&gt;thoughtbot&lt;/a&gt;, &lt;a href=&quot;http://robots.thoughtbot.com/how-to-handle-large-amounts-of-data-on-maps&quot;&gt;&amp;quot;How To Efficiently Display Large Amounts of Data on iOS Maps&amp;quot;&lt;/a&gt; by &lt;a href=&quot;https://twitter.com/theocalmes&quot;&gt;Theodore Calmes&lt;/a&gt;. Consider it a must-read if you plan to do any significant iCartography in 2014.&lt;/p&gt;

&lt;h2&gt;NSAttributedString + HTML in iOS 7&lt;/h2&gt;

&lt;p&gt;Shifting gears a little bit, &lt;a href=&quot;https://github.com/rubymaverick&quot;&gt;Eric Allam&lt;/a&gt; remarks that &lt;code&gt;NSAttributedString&lt;/code&gt; can do HTML now in iOS 7 with the new &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40011688&quot;&gt;&lt;code&gt;NSHTMLTextDocumentType&lt;/code&gt;&lt;/a&gt; document type attribute. Combine with &lt;a href=&quot;https://github.com/mdiep/MMMarkdown&quot;&gt;MMMarkdown&lt;/a&gt; for ridiculously easy &lt;a href=&quot;http://initwithfunk.com/blog/2013/09/29/easy-markdown-rendering-with-nsattributedstring-on-ios-7/&quot;&gt;Markdown rendering in a &lt;code&gt;UITextView&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;Launch Arguments &amp;amp; User Defaults&lt;/h2&gt;

&lt;p&gt;Offering another tip, &lt;a href=&quot;https://github.com/shpakovski&quot;&gt;Vadim Shpakovski&lt;/a&gt; calls our attention to the relationship between launch arguments and &lt;code&gt;NSUserDefaults&lt;/code&gt;:&lt;/p&gt;

&lt;p&gt;The command line argument &lt;code&gt;-TestFeatureEnabled YES&lt;/code&gt; can be checked in code with &lt;code&gt;[[NSUserDefaults standardUserDefaults] boolForKey:@&amp;quot;TestFeatureEnabled&amp;quot;]&lt;/code&gt;. This is useful for debugging development builds.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;Woes of a Missing &lt;code&gt;UIViewAnimationCurve&lt;/code&gt; Value&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/Thomvis&quot;&gt;Thomas Visser&lt;/a&gt; bemoans his pick for least awesome Objective-C development in 2013:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;In iOS7, the animation of the keyboard show/hide changed. Its duration and, most notably, its curve is different from previous iOS versions. As before, if you want to animate something with the keyboard, you can listen to &lt;code&gt;UIKeyboardWillShowNotification&lt;/code&gt;/&lt;code&gt;UIKeyboardWillHideNotification&lt;/code&gt; and use the values from the &lt;code&gt;userInfo&lt;/code&gt; dictionary to coordinate your animations with the keyboard. The &lt;code&gt;userInfo&lt;/code&gt; dictionary contains the keyboard&amp;#39;s begin frame, end frame, animation curve and animation duration.&lt;/p&gt;

&lt;p&gt;However, in iOS 7, the animation curve is an undefined value, meaning that it is not one of the 4 defined values of &lt;code&gt;UIViewAnimationCurve&lt;/code&gt;. Instead, its value is &lt;code&gt;7&lt;/code&gt;. This is a problem if you want to use the same curve in your own animation, because such a curve is not defined. The work-around, &lt;a href=&quot;https://devforums.apple.com/message/878410#878410&quot;&gt;as discussed on the Apple forums&lt;/a&gt;, is to manually translate the &lt;code&gt;UIViewAnimationCurve&lt;/code&gt; to a &lt;code&gt;UIViewAnimationOptions&lt;/code&gt; value. From the definition of &lt;code&gt;UIViewAnimationOptions&lt;/code&gt;, we learn that this translation is done by shifting the curve value 16 times to the left: &lt;code&gt;option = curve &amp;lt;&amp;lt; 16&lt;/code&gt;. This works great, but shouldn&amp;#39;t be necessary. I hope Apple will add this mysterious 5th curve to the definitions in a future iOS update.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Injecting Analytics on Outgoing Links&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/dbgrandi&quot;&gt;David Grandinetti&lt;/a&gt; has a tip for apps that want to track outgoing links from within an app: override &lt;code&gt;AppDelegate -openURL:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;openURL:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scheme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hasPrefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GAI&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sharedInstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;defaultTracker&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sendView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;absoluteString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;openURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this example, this information is being sent to Google Analytics, but one could easily adapt this approach for any analytics provider.&lt;/p&gt;

&lt;h2&gt;Reviving the Look-and-Feel of iOS 6 in Your App with One Weird Trick (UI Designers &lt;em&gt;hate&lt;/em&gt; it!)&lt;/h2&gt;

&lt;p&gt;Still resisting the aesthetics of this year&amp;#39;s iOS makeover? &lt;a href=&quot;https://github.com/PycKamil&quot;&gt;Kamil Pyć&lt;/a&gt; shows us how to act as if iOS 7 never happened:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUserDefaults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;standardUserDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;UIUseLegacyUI&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;And, of course, following up from a previous tip, since &lt;code&gt;NSUserDefaults&lt;/code&gt; is tied to launch arguments, this can also be specified on launch. Keep this tucked in the back of your mind—this could make for a simple yet effective April Fool&amp;#39;s joke.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;h2&gt;Detecting Category Method Collisions&lt;/h2&gt;

&lt;p&gt;Categories are great, but suffer from that same original sin of Objective-C: lack of name-spacing. Duplicate method declarations in categories interact in undefined ways, and may lead to difficult-to-debug behavior.&lt;/p&gt;

&lt;p&gt;Fortunately, &lt;a href=&quot;https://github.com/0xced&quot;&gt;Cédric Luthi&lt;/a&gt; shows us how to tell if any category methods are getting up in one another&amp;#39;s business:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Set the &lt;code&gt;OBJC_PRINT_REPLACED_METHODS&lt;/code&gt; environment variable to &lt;code&gt;YES&lt;/code&gt; in order to automatically log all methods that are smashed by categories.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;h2&gt;A .plist of Emoji, Grouped by Category&lt;/h2&gt;

&lt;p&gt;In an encore submission, Cédric brings us a  &lt;a href=&quot;https://gist.github.com/mattt/8185075&quot;&gt;.plist file of Emoji grouped by category&lt;/a&gt; (mirrored from CloudApp to Gist in order to be more searchable). 😄👍&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;Quickly Determining the Type of Image Data&lt;/h2&gt;

&lt;p&gt;Here&amp;#39;s a simple function from &lt;a href=&quot;https://github.com/NSProgrammer&quot;&gt;Nolan O&amp;#39;Brien&lt;/a&gt; that can be used to determine the type of image data based on the first couple bytes of the header:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSPUIImageType&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NSPUIImageTypeFromData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageData&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xd8&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSPUIImageType_JPEG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x89&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x50&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x47&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSPUIImageType_PNG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSPUIImageType_Unknown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;h2&gt;Print KVO Context&lt;/h2&gt;

&lt;p&gt;Once again, showing off his unmatched knowledge of Objective-C internals, Cédric shares this extremely useful tip for debugging &lt;a href=&quot;http://nshipster.com/key-value-observing/&quot;&gt;Key-Value Observing&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Print which &lt;a href=&quot;https://gist.github.com/ddribin/5158614#comment-798104&quot;&gt;context&lt;/a&gt; is passed to &lt;code&gt;observeValueForKeyPath:ofObject:change:context:&lt;/code&gt; in lldb.&lt;/p&gt;

&lt;p&gt;Say you have declared a context like this:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyFooContext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyFooContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;...and you want to to know what context it is when you are inside&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;observeValueForKeyPath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;keyPath&lt;/span&gt;
                      &lt;span class=&quot;nl&quot;&gt;ofObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt;
                        &lt;span class=&quot;nl&quot;&gt;change:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;change&lt;/span&gt;
                       &lt;span class=&quot;nl&quot;&gt;context:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;You can do this:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;(lldb) image lookup -a `context`
      Address: MyApp[0x00026258] (MyApp.__DATA.__data + 4)
      Summary: MyFooContext
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;h2&gt;Creating a KeyPath from Selectors&lt;/h2&gt;

&lt;p&gt;On the subject of Key-Value Coding, &lt;a href=&quot;https://github.com/pitiphong-p&quot;&gt;Pitiphong Phongpattranont&lt;/a&gt; offers this useful function that builds a keypath from a variable list of selectors:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;PTPKeyPathForSelectors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;SEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selectors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;va_list&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;va_start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;SEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selectors&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;va_arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;SEL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;va_end&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selectors&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;componentsJoinedByString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;.&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keyPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PTPKeyPathForSelectors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// =&amp;gt; @&amp;quot;data.name&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Nomad CLI Utilities&lt;/h2&gt;

&lt;p&gt;And finally, &lt;a href=&quot;https://github.com/mteece&quot;&gt;Matthew Teece&lt;/a&gt; gives a shout-out to &lt;a href=&quot;http://nomad-cli.com&quot;&gt;Nomad&lt;/a&gt;, a world-class collection of command-line utilities—specifically, &lt;a href=&quot;https://github.com/nomad/houston&quot;&gt;Houston&lt;/a&gt;, which can send and manage push notifications from the command line, or within your Ruby application.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;    $ apn push &amp;quot;&amp;lt;token&amp;gt;&amp;quot; -c /path/to/cert.pem -m &amp;quot;Hello!&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;Thus concludes this year&amp;#39;s reader submissions. Thanks again to everyone for your submissions!&lt;/p&gt;

&lt;p&gt;And thanks to you, dear reader, for sticking with NSHipster for another 52 weeks. Between the &lt;a href=&quot;http://asciiwwdc.com/2013/sessions/228?q=NSHipster&quot;&gt;WWDC session&lt;/a&gt; and &lt;a href=&quot;https://gumroad.com/l/nshipster&quot;&gt;the book&lt;/a&gt;, 2013 has been a bellwether year for NSHipster. Thank you for your support and enthusiasm for the site—it really does mean the world to me.&lt;/p&gt;

&lt;p&gt;We have a ton of great stuff planned for 2014, so keep your fixies primed and your artisanal espresso hot for another season of great iOS and Mac OS X knowledge.&lt;/p&gt;
</description>
        <pubDate>Mon, 30 Dec 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/new-years-2014/</link>
        <guid>http://nshipster.com/new-years-2014/</guid>
      </item>
    
      <item>
        <title>UIApplicationDelegate&lt;br/&gt;launchOptions</title>
        <description>&lt;p&gt;AppDelegate is the dumping ground for functionality in iOS.&lt;/p&gt;

&lt;p&gt;Application lifecycle management? URL routing? Notifications? Core Data incantations? Invasive and monolithic 3rd-party SDK initialization? Random functionality that doesn&amp;#39;t seem to fit anywhere else? Just stash it in &lt;code&gt;AppDelegate.m&lt;/code&gt;!&lt;/p&gt;

&lt;p&gt;And of all of the crowded, over-loaded parts in AppDelegate, &lt;code&gt;-application:didFinishLaunchingWithOptions:&lt;/code&gt; is the most congested of all.&lt;/p&gt;

&lt;p&gt;For many developers, the &lt;code&gt;launchOptions&lt;/code&gt; parameter is akin to the &lt;code&gt;String[] args&lt;/code&gt; argument of a Java &lt;code&gt;main&lt;/code&gt; method—something ignored in the rush to building an application. Hiding in plain sight, &lt;code&gt;launchOptions&lt;/code&gt; contains a wealth of keyed knowledge that speaks to the multitude of ways an app can be launched on iOS.&lt;/p&gt;

&lt;p&gt;This week, all will be revealed in this NSHipster tell-all about the least understood parameter of the most important method in UIKit: &lt;code&gt;launchOptions&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Every app begins with &lt;code&gt;UIApplicationDelegate -application:didFinishLaunchingWithOptions:&lt;/code&gt; (or more accurately, &lt;code&gt;-application:willFinishLaunchingWithOptions:&lt;/code&gt;, when implemented). It is called by the application to notify its delegate that the launch process is finishing, and nearly ready to run.&lt;/p&gt;

&lt;p&gt;An app launches when its icon is tapped on &lt;a href=&quot;http://en.wikipedia.org/wiki/SpringBoard&quot;&gt;Springboard&lt;/a&gt;, but there are several other occasions in which an app can be launched. For example, an app registered for a custom URL scheme, such as &lt;code&gt;twitter://&lt;/code&gt;, could be launched as a result of opening a URL. An app could also be launched in response to a push notification, or a significant change in device location.&lt;/p&gt;

&lt;p&gt;Determining why and how an app launched is the responsibility of the &lt;code&gt;launchOptions&lt;/code&gt; parameter. Like a &lt;code&gt;userInfo&lt;/code&gt; dictionary, &lt;code&gt;-application:didFinishLaunchingWithOptions:&lt;/code&gt; can get information for particular named keys in &lt;code&gt;launchOptions&lt;/code&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Many of these keys are also available in the  &lt;code&gt;UIApplicationDidFinishLaunchingNotification&lt;/code&gt; notification posted on application launch. Check the docs for additional details.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Numerous as they are, &lt;code&gt;launchOptions&lt;/code&gt; keys can be more easily understood when organized into groups, corresponding to why the app was launched:&lt;/p&gt;

&lt;h2&gt;Opening from URL&lt;/h2&gt;

&lt;p&gt;Apps can launch other apps by passing URLs:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sharedApplication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;openURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;app://...&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For example, an &lt;code&gt;http://&lt;/code&gt; URL would open in Safari, a &lt;code&gt;mailto://&lt;/code&gt; URL would open in Mail, and a &lt;code&gt;tel://&lt;/code&gt; URL would open in Phone.&lt;/p&gt;

&lt;p&gt;In these circumstances, the &lt;code&gt;UIApplicationLaunchOptionsURLKey&lt;/code&gt; key would be populated in &lt;code&gt;launchOptions&lt;/code&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UIApplicationLaunchOptionsURLKey&lt;/code&gt;: Indicates that the app was launched in order to open a URL. The value of this key is an &lt;code&gt;NSURL&lt;/code&gt; object containing the URL to open.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;An app can also be launched through URLs with additional system information. When an app is launched from an &lt;code&gt;UIDocumentInteractionController&lt;/code&gt; or via AirDrop, the following keys are set in &lt;code&gt;launchOptions&lt;/code&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UIApplicationLaunchOptionsSourceApplicationKey&lt;/code&gt;: Identifies the app that requested the launch of your app. The value of this key is an &lt;code&gt;NSString&lt;/code&gt; object that represents the bundle ID of the app that made the request&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIApplicationLaunchOptionsAnnotationKey&lt;/code&gt;: Indicates that custom data was provided by the app that requested the opening of the URL. The value of this key is a property-list object containing the custom data.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSBundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mainBundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLForResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Document&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;withExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;pdf&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIDocumentInteractionController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentInteractionController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIDocumentInteractionController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interactionControllerWithURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;documentInteractionController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annotation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;bar&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentInteractionController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setDelegate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentInteractionController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;presentPreviewAnimated&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Responding to Notification&lt;/h2&gt;

&lt;p&gt;Not to be confused with &lt;a href=&quot;http://nshipster.com/nsnotification-and-nsnotificationcenter/&quot;&gt;&lt;code&gt;NSNotification&lt;/code&gt;&lt;/a&gt;, apps can be sent remote or local notifications.&lt;/p&gt;

&lt;h3&gt;Remote Notification&lt;/h3&gt;

&lt;p&gt;Introduced in iOS 3, remote, or &amp;quot;push&amp;quot; notifications are one of the defining features of the mobile platform.&lt;/p&gt;

&lt;p&gt;To register for remote notifications, &lt;code&gt;registerForRemoteNotificationTypes:&lt;/code&gt; is called in &lt;code&gt;application:didFinishLaunchingWithOptions:&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;registerForRemoteNotificationTypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIRemoteNotificationTypeBadge&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIRemoteNotificationTypeSound&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIRemoteNotificationTypeAlert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...which, if successful, calls  &lt;code&gt;-application:didRegisterForRemoteNotificationsWithDeviceToken:&lt;/code&gt;. Once the device has been successfully registered, it can receive push notifications at any time.&lt;/p&gt;

&lt;p&gt;If an app receives a notification while in the foreground, its delegate will call &lt;code&gt;application:didReceiveRemoteNotification:&lt;/code&gt;. However, if the app is launched, perhaps by swiping the alert in notification center, &lt;code&gt;application:didFinishLaunchingWithOptions:&lt;/code&gt; is called with the  &lt;code&gt;UIApplicationLaunchOptionsRemoteNotificationKey&lt;/code&gt; launch option:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UIApplicationLaunchOptionsRemoteNotificationKey&lt;/code&gt;: Indicates that a remote notification is available for the app to process. The value of this key is an &lt;code&gt;NSDictionary&lt;/code&gt; containing the payload of the remote notification.
&amp;gt; - &lt;code&gt;alert&lt;/code&gt;: Either a string for the alert message or a dictionary with two keys: &lt;code&gt;body&lt;/code&gt; and &lt;code&gt;show-view&lt;/code&gt;.
&amp;gt; - &lt;code&gt;badge&lt;/code&gt;: A number indicating the quantity of data items to download from the provider. This number is to be displayed on the app icon. The absence of a badge property indicates that any number currently badging the icon should be removed.
&amp;gt; - &lt;code&gt;sound&lt;/code&gt;: The name of a sound file in the app bundle to play as an alert sound. If “default” is specified, the default sound should be played.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Since this introduces two separate code paths for notification handling, a common approach is to have &lt;code&gt;application:didFinishLaunchingWithOptions:&lt;/code&gt; manually call &lt;code&gt;application:didReceiveRemoteNotification:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;didFinishLaunchingWithOptions:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;launchOptions&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;launchOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplicationLaunchOptionsRemoteNotificationKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;didReceiveRemoteNotification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;launchOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplicationLaunchOptionsRemoteNotificationKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Local Notification&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1&quot;&gt;Local notifications&lt;/a&gt; were added in iOS 4, and to this day, are still surprisingly misunderstood.&lt;/p&gt;

&lt;p&gt;Apps can schedule &lt;code&gt;UILocalNotification&lt;/code&gt;s to trigger at some future time or interval. If the app is active in the foreground at that time, the app calls &lt;code&gt;-application:didReceiveLocalNotification:&lt;/code&gt; on its delegate. However, if the app is not active, the notification will be posted to Notification Center.&lt;/p&gt;

&lt;p&gt;Unlike remote notifications, &lt;code&gt;UIApplication&lt;/code&gt; delegate provides a unified code path for handling local notifications. If an app is launched through a local notification, it calls &lt;code&gt;-application:didFinishLaunchingWithOptions:&lt;/code&gt; followed by &lt;code&gt;-application:didReceiveLocalNotification:&lt;/code&gt; (that is, there is no need to call it from &lt;code&gt;-application:didFinishLaunchingWithOptions:&lt;/code&gt; like remote notifications).&lt;/p&gt;

&lt;p&gt;A local notification populates the launch options on &lt;code&gt;UIApplicationLaunchOptionsLocalNotificationKey&lt;/code&gt;, which contains a payload with the same structure as a remote notification:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UIApplicationLaunchOptionsLocalNotificationKey&lt;/code&gt;: Indicates that a local notification is available for the app to process. The value of this key is an &lt;code&gt;NSDictionary&lt;/code&gt; containing the payload of the local notification.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In the case where it is desirable to show an alert for a local notification delivered when the app is active in the foreground, and otherwise wouldn&amp;#39;t provide a visual indication, here&amp;#39;s how one might use the information from &lt;code&gt;UILocalNotification&lt;/code&gt; to do it manually:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AVFoundation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AppDelegate&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readwrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SystemSoundID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;localNotificationSound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;didReceiveLocalNotification:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UILocalNotification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;notification&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;applicationState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIApplicationStateActive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;UIAlertView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alertView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIAlertView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithTitle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alertAction&lt;/span&gt;
                                       &lt;span class=&quot;nl&quot;&gt;message:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alertBody&lt;/span&gt;
                                      &lt;span class=&quot;nl&quot;&gt;delegate:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;
                             &lt;span class=&quot;nl&quot;&gt;cancelButtonTitle:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;OK&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                             &lt;span class=&quot;nl&quot;&gt;otherButtonTitles:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localNotificationSound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;soundURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSBundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mainBundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLForResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Sosumi&amp;quot;&lt;/span&gt;
                                                      &lt;span class=&quot;nl&quot;&gt;withExtension:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;wav&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;AudioServicesCreateSystemSoundID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFURLRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;soundURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_localNotificationSound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;AudioServicesPlaySystemSound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localNotificationSound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alertView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;applicationWillTerminate:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localNotificationSound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;AudioServicesDisposeSystemSoundID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localNotificationSound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Location Event&lt;/h2&gt;

&lt;p&gt;Building the next great geomobilelocalsocial check-in photo app? Well, you&amp;#39;re about 4 years late to the party.&lt;/p&gt;

&lt;p&gt;But fear not! With iOS region monitoring, your app can be launched on location events:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UIApplicationLaunchOptionsLocationKey&lt;/code&gt;: Indicates that the app was launched in response to an incoming location event. The value of this key is an &lt;code&gt;NSNumber&lt;/code&gt; object containing a Boolean value. You should use the presence of this key as a signal to create a &lt;code&gt;CLLocationManager&lt;/code&gt; object and start location services again. Location data is delivered only to the location manager delegate and not using this key.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Here&amp;#39;s an example of how an app might go about monitoring for significant location change to determine launch behavior:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CoreLocation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AppDelegate&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CLLocationManagerDelegate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readwrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CLLocationManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locationManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;didFinishLaunchingWithOptions:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;launchOptions&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CLLocationManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;locationServicesEnabled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIAlertView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithTitle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Location Services Disabled&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                    &lt;span class=&quot;nl&quot;&gt;message:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;You currently have all location services for this device disabled. If you proceed, you will be asked to confirm whether location services should be reenabled.&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                   &lt;span class=&quot;nl&quot;&gt;delegate:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;
                          &lt;span class=&quot;nl&quot;&gt;cancelButtonTitle:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;OK&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                          &lt;span class=&quot;nl&quot;&gt;otherButtonTitles:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locationManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CLLocationManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locationManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locationManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startMonitoringSignificantLocationChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;launchOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplicationLaunchOptionsLocationKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locationManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startUpdatingLocation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Newsstand&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;All of the Newsstand developers in the house: say &amp;quot;Yeah!&amp;quot;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;code&gt;crickets.aiff&lt;/code&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Well alright, then.&lt;/p&gt;

&lt;p&gt;Newsstand can launch when newly-downloaded assets are available.&lt;/p&gt;

&lt;p&gt;This is how you register:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;registerForRemoteNotificationTypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIRemoteNotificationTypeNewsstandContentAvailability&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And this is the key to look out for in &lt;code&gt;launchOptions&lt;/code&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UIApplicationLaunchOptionsNewsstandDownloadsKey&lt;/code&gt;: Indicates that newly downloaded Newsstand assets are available for your app. The value of this key is an array of string identifiers that identify the &lt;code&gt;NKAssetDownload&lt;/code&gt; objects corresponding to the assets. Although you can use the identifiers for cross-checking purposes, you should obtain the definitive array of &lt;code&gt;NKAssetDownload&lt;/code&gt; objects (representing asset downloads in progress or in error) through the downloadingAssets property of the &lt;code&gt;NKLibrary&lt;/code&gt; object representing the Newsstand app’s library.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Not too much more to say about that.&lt;/p&gt;

&lt;h2&gt;Bluetooth&lt;/h2&gt;

&lt;p&gt;iOS 7 introduced functionality that allows apps to be relaunched by Bluetooth peripherals.&lt;/p&gt;

&lt;p&gt;If an app launches, instantiates a &lt;code&gt;CBCentralManager&lt;/code&gt; or &lt;code&gt;CBPeripheralManager&lt;/code&gt; with a particular identifier, and connects to other Bluetooth peripherals, the app can be re-launched by certain actions from the Bluetooth system. Depending on whether it was a central or peripheral manager that was notified, one of the following keys will be passed into &lt;code&gt;launchOptions&lt;/code&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UIApplicationLaunchOptionsBluetoothCentralsKey&lt;/code&gt;: Indicates that the app previously had one or more &lt;code&gt;CBCentralManager&lt;/code&gt; objects and was relaunched by the Bluetooth system to continue actions associated with those objects. The value of this key is an &lt;code&gt;NSArray&lt;/code&gt; object containing one or more &lt;code&gt;NSString&lt;/code&gt; objects. Each string in the array represents the restoration identifier for a central manager object.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIApplicationLaunchOptionsBluetoothPeripheralsKey&lt;/code&gt;:  Indicates that the app previously had one or more &lt;code&gt;CBPeripheralManager&lt;/code&gt; objects and was relaunched by the Bluetooth system to continue actions associated with those objects. The value of this key is an &lt;code&gt;NSArray&lt;/code&gt; object containing one or more &lt;code&gt;NSString&lt;/code&gt; objects. Each string in the array represents the restoration identifier for a peripheral manager object.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CoreBluetooth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AppDelegate&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CBCentralManagerDelegate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readwrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CBCentralManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;centralManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;centralManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CBCentralManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithDelegate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CBCentralManagerOptionRestoreIdentifierKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;launchOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplicationLaunchOptionsBluetoothCentralsKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUUID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UUID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UUIDString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])}];&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;centralManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CBCentralManagerStatePoweredOn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;7C13BAA0-A5D4-4624-9397-15BF67161B1C&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// generated with `$ uuidgen`&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CBUUID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UUIDWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanOptions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CBCentralManagerScanOptionAllowDuplicatesKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;centralManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanForPeripheralsWithServices&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;Keeping track of all of the various ways and means of application launching can be exhausting. So it&amp;#39;s fortunate that any given app will probably only have to handle one or two of these possibilities.&lt;/p&gt;

&lt;p&gt;Knowing what&amp;#39;s possible is often what it takes to launch an app from concept to implementation, so bear in mind all of your options when the next great idea springs to mind.&lt;/p&gt;
</description>
        <pubDate>Mon, 16 Dec 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/launch-options/</link>
        <guid>http://nshipster.com/launch-options/</guid>
      </item>
    
      <item>
        <title>Multipeer Connectivity</title>
        <description>&lt;p&gt;As consumer web technologies and enterprises race towards cloud infrastructure, there is a curious and significant counter-movement towards connected devices.&lt;/p&gt;

&lt;p&gt;In this age of mobile computing, the possibilities of collaboration, whether in work or play, have never been greater. In this age of privacy concerns and mass surveillance, the need for secure, ad hoc communications has never been more prescient. In this age of connected devices, the promise of mastery over the everyday objects of our lives has never been closer at hand.&lt;/p&gt;

&lt;p&gt;The Multipeer Connectivity APIs, introduced in iOS 7, therefore may well be the most significant for the platform. It allows developers to completely reimagine how mobile apps are built, and to redefine what is possible. And we&amp;#39;re not just talking about successors to the lame bump-to-send-contact-information genre, either: multi-peer connectivity has implications on everything from collaborative editing and file sharing to multiplayer gaming and sensor aggregation.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Multipeer Connectivity is a framework that enables nearby devices to communicate over infrastructure Wi-Fi networks, peer-to-peer Wi-Fi, and Bluetooth personal area networks. Connected peers are able securely transmit messages, streams, or file resources to other devices without going through an intermediary web service.&lt;/p&gt;

&lt;h2&gt;Advertising &amp;amp; Discovering&lt;/h2&gt;

&lt;p&gt;The first step in communication is to make peers aware of one another. This is accomplished by advertising and discovering services.&lt;/p&gt;

&lt;p&gt;Advertising makes a service known to other peers, while discovery is the inverse process of the client being made aware of services advertised by other peers. In many cases, clients both discover and advertise for the same service, which can lead to some initial confusion—especially to anyone rooted in the client-server paradigm.&lt;/p&gt;

&lt;p&gt;Each service is identified by a type, which is a short text string of ASCII letters, numbers, and dashes, up to 15 characters in length. By convention, a service name should begin with the app name, followed by a dash and a unique descriptor for that service (think of it as simplified &lt;code&gt;com.apple.*&lt;/code&gt;-esque reverse-DNS notation):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XXServiceType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;xx-service&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Peers are uniquely identified by an &lt;code&gt;MCPeerID&lt;/code&gt; object, which are initialized with a display name. This could be a user-specified nickname, or simply the current device name:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;MCPeerID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localPeerID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCPeerID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithDisplayName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIDevice&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentDevice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Peers can be also be advertised or discovered manually using &lt;code&gt;NSNetService&lt;/code&gt; or the Bonjour C APIs, but this is a rather advanced and specific concern. Additional information about manual peer management can be found in the &lt;code&gt;MCSession&lt;/code&gt; documentation.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Advertising&lt;/h3&gt;

&lt;p&gt;Services are advertised by the &lt;code&gt;MCNearbyServiceAdvertiser&lt;/code&gt;, which is initialized with a local peer, service type, and any optional information to be communicated to peers that discover the service.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Discovery information is sent as Bonjour &lt;code&gt;TXT&lt;/code&gt; records encoded according to &lt;a href=&quot;http://tools.ietf.org/html/rfc6763&quot;&gt;RFC 6763&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;MCNearbyServiceAdvertiser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;advertiser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCNearbyServiceAdvertiser&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithPeer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localPeerID&lt;/span&gt;
                                      &lt;span class=&quot;nl&quot;&gt;discoveryInfo:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;
                                        &lt;span class=&quot;nl&quot;&gt;serviceType:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XXServiceType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;advertiser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;advertiser&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startAdvertisingPeer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Events are handled by the advertiser&amp;#39;s &lt;code&gt;delegate&lt;/code&gt;, conforming to the &lt;code&gt;MCNearbyServiceAdvertiserDelegate&lt;/code&gt; protocol.&lt;/p&gt;

&lt;p&gt;As an example implementation, consider a client that allows the user to choose whether to accept or reject incoming connection requests, with the option to reject and block any subsequent requests from that peer:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#pragma mark - MCNearbyServiceAdvertiserDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advertiser:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCNearbyServiceAdvertiser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;advertiser&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;didReceiveInvitationFromPeer:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCPeerID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;peerID&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;withContext:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt;
 &lt;span class=&quot;nl&quot;&gt;invitationHandler:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MCSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;invitationHandler&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableBlockedPeers&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;containsObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;peerID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;invitationHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIActionSheet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;actionSheetWithTitle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Received Invitation from %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Received Invitation from {Peer}&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;peerID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;displayName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                       &lt;span class=&quot;nl&quot;&gt;cancelButtonTitle:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Reject&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                  &lt;span class=&quot;nl&quot;&gt;destructiveButtonTitle:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Block&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                       &lt;span class=&quot;nl&quot;&gt;otherButtonTitles:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Accept&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
                                   &lt;span class=&quot;nl&quot;&gt;block:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIActionSheet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;actionSheet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buttonIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;acceptedInvitation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buttonIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;actionSheet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstOtherButtonIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buttonIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;actionSheet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;destructiveButtonIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableBlockedPeers&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;peerID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;MCSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCSession&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithPeer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localPeerID&lt;/span&gt;
                                            &lt;span class=&quot;nl&quot;&gt;securityIdentity:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;
                                        &lt;span class=&quot;nl&quot;&gt;encryptionPreference:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCEncryptionNone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;invitationHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;acceptedInvitation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;acceptedInvitation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;showInView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;For sake of simplicity, this example contrives a block-based initializer for &lt;code&gt;UIActionSheet&lt;/code&gt;, which allows for the &lt;code&gt;invitationHandler&lt;/code&gt; to be passed directly into the action sheet responder in order to avoid the messy business of creating and managing a custom delegate object. This method can be implemented in a category, or adapted from &lt;a href=&quot;http://cocoapods.org/?q=uiactionsheet%20blocks&quot;&gt;any of the implementations available on CocoaPods&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Creating a Session&lt;/h3&gt;

&lt;p&gt;As in the example above, sessions are created by advertisers, and passed to peers when accepting an invitation to connect. An &lt;code&gt;MCSession&lt;/code&gt; object is initialized with the local peer identifier, as well as &lt;code&gt;securityIdentity&lt;/code&gt; and &lt;code&gt;encryptionPreference&lt;/code&gt; parameters.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;MCSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCSession&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithPeer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localPeerID&lt;/span&gt;
                                    &lt;span class=&quot;nl&quot;&gt;securityIdentity:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;
                                &lt;span class=&quot;nl&quot;&gt;encryptionPreference:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCEncryptionNone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;securityIdentity&lt;/code&gt; is an optional parameter that allows peers to securely identify peers by X.509 certificates. When specified, the first object should be an &lt;code&gt;SecIdentityRef&lt;/code&gt; identifying the client, followed by one or more &lt;code&gt;SecCertificateRef&lt;/code&gt; objects than can be used to verify the local peer’s identity.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;encryptionPreference&lt;/code&gt; parameter specifies whether to encrypt communication between peers. Three possible values are provided by the &lt;code&gt;MCEncryptionPreference&lt;/code&gt; enum:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;MCEncryptionOptional&lt;/code&gt;: The session prefers to use encryption, but will accept unencrypted connections.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MCEncryptionRequired&lt;/code&gt;: The session requires encryption.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MCEncryptionNone&lt;/code&gt;: The session should not be encrypted.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Enabling encryption can significantly reduce transfer rates, so unless your application specifically deals with user-sensitive information, &lt;code&gt;MCEncryptionNone&lt;/code&gt; is recommended.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The &lt;code&gt;MCSessionDelegate&lt;/code&gt; protocol will be covered in the section on sending and receiving information.&lt;/p&gt;

&lt;h3&gt;Discovering&lt;/h3&gt;

&lt;p&gt;Clients can discover advertised services using &lt;code&gt;MCNearbyServiceBrowser&lt;/code&gt;, which is initialized with the local peer identifier and the service type, much like for &lt;code&gt;MCNearbyServiceAdvertiser&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;MCNearbyServiceBrowser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;browser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCNearbyServiceBrowser&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithPeer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localPeerID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;serviceType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XXServiceType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;browser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There may be many peers advertising a particular service, so as a convenience to the user (and the developer), the &lt;code&gt;MCBrowserViewController&lt;/code&gt; offers a built-in, standard way to present and connect to advertising peers:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;MCBrowserViewController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;browserViewController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCBrowserViewController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithBrowser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;browser&lt;/span&gt;
                                             &lt;span class=&quot;nl&quot;&gt;session:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;browserViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;presentViewController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;browserViewController&lt;/span&gt;
                   &lt;span class=&quot;nl&quot;&gt;animated:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;
                 &lt;span class=&quot;nl&quot;&gt;completion:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;browser&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startBrowsingForPeers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When a browser has finished connecting to peers, it calls &lt;code&gt;-browserViewControllerDidFinish:&lt;/code&gt; on its delegate, to notify the presenting view controller that it should update its UI to accommodate the newly-connected clients.&lt;/p&gt;

&lt;h2&gt;Sending &amp;amp; Receiving Information&lt;/h2&gt;

&lt;p&gt;Once peers are connected to one another, information can be sent between them. The Multipeer Connectivity framework distinguishes between three different forms of data transfer:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Messages&lt;/strong&gt; are information with well-defined boundaries, such as short text or small serialized objects.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Streams&lt;/strong&gt; are open channels of information used to continuously transfer data like audio, video, or real-time sensor events.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Resources&lt;/strong&gt; are files like images, movies, or documents.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Messages&lt;/h3&gt;

&lt;p&gt;Messages are sent with &lt;code&gt;-sendData:toPeers:withMode:error:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Hello, World!&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataUsingEncoding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUTF8StringEncoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sendData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;
                    &lt;span class=&quot;nl&quot;&gt;toPeers:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;peers&lt;/span&gt;
                   &lt;span class=&quot;nl&quot;&gt;withMode:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCSessionSendDataReliable&lt;/span&gt;
                      &lt;span class=&quot;nl&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;Messages are received through the &lt;code&gt;MCSessionDelegate&lt;/code&gt; method &lt;code&gt;-sessionDidReceiveData:fromPeer:&lt;/code&gt;. Here&amp;#39;s how one would decode the message sent in the previous code example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#pragma mark - MCSessionDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;session:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;session&lt;/span&gt;
 &lt;span class=&quot;nl&quot;&gt;didReceiveData:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;data&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;fromPeer:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCPeerID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;peerID&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;
                              &lt;span class=&quot;nl&quot;&gt;encoding:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUTF8StringEncoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Another approach would be to send &lt;code&gt;NSKeyedArchiver&lt;/code&gt;-encoded objects:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSecureCoding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ...;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSKeyedArchiver&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;archivedDataWithRootObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sendData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;
                    &lt;span class=&quot;nl&quot;&gt;toPeers:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;peers&lt;/span&gt;
                   &lt;span class=&quot;nl&quot;&gt;withMode:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCSessionSendDataReliable&lt;/span&gt;
                      &lt;span class=&quot;nl&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#pragma mark - MCSessionDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;session:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;session&lt;/span&gt;
 &lt;span class=&quot;nl&quot;&gt;didReceiveData:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;data&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;fromPeer:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCPeerID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;peerID&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSKeyedUnarchiver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unarchiver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSKeyedUnarchiver&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initForReadingWithData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;unarchiver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requiresSecureCoding&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unarchiver&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decodeObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unarchiver&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;finishDecoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;In order to guard against object substitution attacks, it is important to set &lt;code&gt;requiresSecureCoding&lt;/code&gt; to &lt;code&gt;YES&lt;/code&gt;, such that an exception is thrown if the root object class does not conform to &lt;code&gt;&amp;lt;NSSecureCoding&amp;gt;&lt;/code&gt;.  For more information, see the [NSHipster article on &lt;a href=&quot;http://nshipster.com/nssecurecoding/&quot;&gt;NSSecureCoding&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Streams&lt;/h3&gt;

&lt;p&gt;Streams are created with &lt;code&gt;-startStreamWithName:toPeer:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSOutputStream&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outputStream&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startStreamWithName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
                          &lt;span class=&quot;nl&quot;&gt;toPeer:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;peer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scheduleInRunLoop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRunLoop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mainRunLoop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;nl&quot;&gt;forMode:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDefaultRunLoopMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;Streams are received by the &lt;code&gt;MCSessionDelegate&lt;/code&gt; with &lt;code&gt;-session:didReceiveStream:withName:fromPeer:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#pragma mark - MCSessionDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;session:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;session&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;didReceiveStream:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInputStream&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;stream&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;withName:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;streamName&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;fromPeer:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCPeerID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;peerID&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scheduleInRunLoop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRunLoop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mainRunLoop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                      &lt;span class=&quot;nl&quot;&gt;forMode:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDefaultRunLoopMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Both the input and output streams must be scheduled and opened before they can be used. Once that&amp;#39;s done, streams can be read from and written to just like any other bound pair.&lt;/p&gt;

&lt;h3&gt;Resources&lt;/h3&gt;

&lt;p&gt;Resources are sent with &lt;code&gt;sendResourceAtURL:withName:toPeer:withCompletionHandler:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileURLWithPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;path/to/resource&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSProgress&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;progress&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sendResourceAtURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt;
                           &lt;span class=&quot;nl&quot;&gt;withName:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lastPathComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                             &lt;span class=&quot;nl&quot;&gt;toPeer:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;peer&lt;/span&gt;
                  &lt;span class=&quot;nl&quot;&gt;withCompletionHandler:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The returned &lt;code&gt;NSProgress&lt;/code&gt; object can be &lt;a href=&quot;http://nshipster.com/key-value-observing/&quot;&gt;Key-Value Observed&lt;/a&gt; to monitor progress of the file transfer, as well as provide a cancellation handler, through the &lt;code&gt;-cancel&lt;/code&gt; method.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Receiving resources happens across two methods in &lt;code&gt;MCSessionDelegate&lt;/code&gt;: &lt;code&gt;-session:didStartReceivingResourceWithName:fromPeer:withProgress:&lt;/code&gt; &amp;amp; &lt;code&gt;-session:didFinishReceivingResourceWithName:fromPeer:atURL:withError:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#pragma mark - MCSessionDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;session:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;session&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;didStartReceivingResourceWithName:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;resourceName&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;fromPeer:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCPeerID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;peerID&lt;/span&gt;
   &lt;span class=&quot;nl&quot;&gt;withProgress:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSProgress&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;progress&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;session:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;session&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;didFinishReceivingResourceWithName:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;resourceName&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;fromPeer:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MCPeerID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;peerID&lt;/span&gt;
          &lt;span class=&quot;nl&quot;&gt;atURL:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;localURL&lt;/span&gt;
      &lt;span class=&quot;nl&quot;&gt;withError:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;error&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;destinationURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileURLWithPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/path/to/destination&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;moveItemAtURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localURL&lt;/span&gt;
                                                 &lt;span class=&quot;nl&quot;&gt;toURL:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;destinationURL&lt;/span&gt;
                                                 &lt;span class=&quot;nl&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Again, the &lt;code&gt;NSProgress&lt;/code&gt; parameter in &lt;code&gt;-session:didStartReceivingResourceWithName:fromPeer:withProgress:&lt;/code&gt; allows the receiving peer to monitor the file transfer progress. In &lt;code&gt;-session:didFinishReceivingResourceWithName:fromPeer:atURL:withError:&lt;/code&gt;, it is the responsibility of the delegate to move the file at the temporary &lt;code&gt;localURL&lt;/code&gt; to a permanent location.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Multipeer Connectivity is a ground-breaking API, whose value is only just starting to be fully understood. Although full support for features like AirDrop are currently limited to latest-gen devices, you should expect to see this kind of functionality become expected behavior.&lt;/p&gt;

&lt;p&gt;As you look forward to the possibilities of the new year ahead, get your head out of the cloud, and start to consider the incredible possibilities around you.&lt;/p&gt;
</description>
        <pubDate>Mon, 09 Dec 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/multipeer-connectivity/</link>
        <guid>http://nshipster.com/multipeer-connectivity/</guid>
      </item>
    
      <item>
        <title>NSNotification &amp;&lt;br/&gt;NSNotificationCenter</title>
        <description>&lt;p&gt;Any idea is inextricably linked to how it&amp;#39;s communicated. A medium defines the form and scale of significance in such a way to shape the very meaning of an idea. Very truly, the medium is the message.&lt;/p&gt;

&lt;p&gt;One of the first lessons of socialization is to know one&amp;#39;s audience. Sometimes communication is one-to-one, like an in-person conversation, while at other times, such as a television broadcast, it&amp;#39;s one-to-many. Not being able to distinguish between these two circumstances leads to awkward situations.&lt;/p&gt;

&lt;p&gt;This is as true of humans as it is within a computer process. In Cocoa, there are a number of approaches to communicating between objects, with different characteristics of intimacy and coupling:&lt;/p&gt;

&lt;table id=&quot;notification-center-coupling&quot;&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;td class=&quot;empty&quot; colspan=&quot;2&quot; rowspan=&quot;2&quot;&gt;&lt;/td&gt;
            &lt;th colspan=&quot;2&quot;&gt;Audience&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;th&gt;Intimate (One-to-One)&lt;/th&gt;
            &lt;th&gt;Broadcast (One-to-Many)&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;th rowspan=&quot;2&quot;&gt;Coupling&lt;/th&gt;
            &lt;th&gt;Loose&lt;/th&gt;
            &lt;td&gt;
                &lt;ul&gt;
                    &lt;li&gt;Target-Action&lt;/li&gt;
                    &lt;li&gt;Delegate&lt;/li&gt;
                    &lt;li&gt;Callbacks&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;ul&gt;
                    &lt;li&gt;&lt;tt&gt;Notifications&lt;/tt&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;th&gt;Strong&lt;/th&gt;
            &lt;td&gt;
                &lt;ul&gt;
                    &lt;li&gt;Direct Method Invocation&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;ul&gt;
                    &lt;li&gt;Key-Value Observing&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We&amp;#39;ve discussed the importance of how events are communicated in APIs previously in our &lt;a href=&quot;http://nshipster.com/key-value-observing/&quot;&gt;article on Key-Value Observing&lt;/a&gt;. This week, we&amp;#39;ll expand our look at the available options, with &lt;code&gt;NSNotificationCenter&lt;/code&gt; &amp;amp; &lt;code&gt;NSNotification&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSNotificationCenter&lt;/code&gt; provides a centralized hub through which any part of an application may notify and be notified of changes from any other part of the application. Observers register with a notification center to respond to particular events with a specified action. Each time an event occurs, the notification goes through its dispatch table, and messages any registered observers for that event.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Each running Cocoa program manages its own default notification center, so it&amp;#39;s unusual for a new notification center to be instantiated separately.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Each &lt;code&gt;NSNotification&lt;/code&gt; object has a &lt;code&gt;name&lt;/code&gt;, with additional context optionally provided by an associated &lt;code&gt;object&lt;/code&gt; and &lt;code&gt;userInfo&lt;/code&gt; dictionary.&lt;/p&gt;

&lt;p&gt;For example, &lt;code&gt;UITextField&lt;/code&gt; posts an &lt;code&gt;NSNotification&lt;/code&gt; with the name &lt;code&gt;UITextFieldTextDidChangeNotification&lt;/code&gt; each time its text changes. The object associated with that notification is the text field itself. In the case of &lt;code&gt;UIKeyboardWillShowNotification&lt;/code&gt;, frame positioning and animation timing are passed in &lt;code&gt;userInfo&lt;/code&gt;, while the notification&amp;#39;s associated &lt;code&gt;object&lt;/code&gt; is &lt;code&gt;nil&lt;/code&gt;.&lt;/p&gt;

&lt;h3&gt;Adding Observers&lt;/h3&gt;

&lt;p&gt;All sorts of notifications are constantly passing through &lt;code&gt;NSNotificationCenter&lt;/code&gt;.&lt;sup&gt;*&lt;/sup&gt;  But like a tree falling in the woods, a notification is moot unless there&amp;#39;s something listening for it.&lt;/p&gt;

&lt;p&gt;The traditional way to add an observer is &lt;code&gt;–addObserver:selector:name:object:&lt;/code&gt;, in which an object (usually &lt;code&gt;self&lt;/code&gt;) adds itself to have the specified selector performed when a matching notification is posted.&lt;/p&gt;

&lt;p&gt;The modern, block-based API for adding notification observers is &lt;code&gt;–addObserverForName:object:queue:usingBlock:&lt;/code&gt;. Instead of registering an existing object as an observer for a notification, this method creates its own anonymous object to be the observer, which performs a block on the specified queue (or the calling thread, if &lt;code&gt;nil&lt;/code&gt;) when a matching notification is posted. Unlike its similarly named &lt;code&gt;@selector&lt;/code&gt;-based counterpart, this method actually returns the constructed observer object, which is necessary for unregistering the observer, as discussed in the next section.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Contrary to a recent article claiming otherwise, &lt;code&gt;–addObserverForName:object:queue:usingBlock:&lt;/code&gt; should &lt;em&gt;not&lt;/em&gt; be considered harmful. It&amp;#39;s perfectly safe and suitable for use in applications. Just make sure to understand memory management rules when referencing &lt;code&gt;self&lt;/code&gt; in blocks. Any concerns in this respect are the same as for any other block-based API.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The &lt;code&gt;name&lt;/code&gt; and &lt;code&gt;object&lt;/code&gt; parameters of both methods are used to decide whether the criteria of a posted notification match the observer. If &lt;code&gt;name&lt;/code&gt; is set, only notifications with that name will trigger, but if &lt;code&gt;nil&lt;/code&gt; is set, then &lt;em&gt;all&lt;/em&gt; names will match. The same is true of &lt;code&gt;object&lt;/code&gt;. So, if both &lt;code&gt;name&lt;/code&gt; and &lt;code&gt;object&lt;/code&gt; are set, only notifications with that name &lt;em&gt;and&lt;/em&gt; the specified object will trigger. However, if both &lt;code&gt;name&lt;/code&gt; and &lt;code&gt;object&lt;/code&gt; are &lt;code&gt;nil&lt;/code&gt;, then &lt;em&gt;all&lt;/em&gt; notifications posted will trigger.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;sup&gt;*&lt;/sup&gt;See for yourself! An ordinary iOS app fires dozens of notifications just in the first second of being launched—many that you&amp;#39;ve probably never heard of before, nor will ever have to think about again.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSNotificationCenter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;center&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNotificationCenter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultCenter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;center&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObserverForName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;
                    &lt;span class=&quot;nl&quot;&gt;object:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;
                     &lt;span class=&quot;nl&quot;&gt;queue:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;
                &lt;span class=&quot;nl&quot;&gt;usingBlock:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNotification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Removing Observers&lt;/h3&gt;

&lt;p&gt;It&amp;#39;s important for objects to remove observers before they&amp;#39;re deallocated, in order to prevent further messages from being sent.&lt;/p&gt;

&lt;p&gt;There are two methods for removing observers: &lt;code&gt;-removeObserver:&lt;/code&gt; and &lt;code&gt;-removeObserver:name:object:&lt;/code&gt;. Again, just as with adding observers, &lt;code&gt;name&lt;/code&gt; and &lt;code&gt;object&lt;/code&gt; are used to define scope. &lt;code&gt;-removeObserver:&lt;/code&gt;, or &lt;code&gt;-removeObserver:name:object&lt;/code&gt; with &lt;code&gt;nil&lt;/code&gt; for both parameters, will remove the observer from the notification center dispatch table entirely, while specifying parameters for &lt;code&gt;-removeObserver:name:object:&lt;/code&gt; will only remove the observer for registrations with that name and/or object.&lt;/p&gt;

&lt;h3&gt;Posting Notifications&lt;/h3&gt;

&lt;p&gt;Of course, consuming is but one side of the story. In addition to subscribing to system-provided notifications, applications may want to publish and subscribe to their own.&lt;/p&gt;

&lt;p&gt;Notifications are created with &lt;code&gt;+notificationWithName:object:userInfo:&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Notification names are generally defined as string constants. Like any string constant, it should be declared &lt;code&gt;extern&lt;/code&gt; in a public interface, and defined privately in the corresponding implementation. It doesn&amp;#39;t matter too much what a notification name&amp;#39;s value is defined to be; the name of the variable itself is commonplace, but a reverse-DNS identifier is also a classy choice. So long as notification names are unique (or explicitly aliased), everything will work as expected.&lt;/p&gt;

&lt;p&gt;Keys for &lt;code&gt;userInfo&lt;/code&gt; should likewise be defined as string constants. It&amp;#39;s important to clearly document the expected kinds of values for each key, since the compiler can&amp;#39;t enforce constraints on dictionaries the same way it can for an object.&lt;/p&gt;

&lt;h4&gt;Foo.h&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XXFooDidBarNotification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Foo.m&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XXFooDidBarNotification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;XXFooDidBarNotification&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notifications are posted with &lt;code&gt;–postNotificationName:object:userInfo:&lt;/code&gt; or its convenience method &lt;code&gt;–postNotificationName:object:&lt;/code&gt;, which passes &lt;code&gt;nil&lt;/code&gt; for &lt;code&gt;userInfo&lt;/code&gt;. &lt;code&gt;–postNotification:&lt;/code&gt; is also available, but it&amp;#39;s generally preferable to have the notification object creation handled by the method itself.&lt;/p&gt;

&lt;p&gt;Recall from the previous section how &lt;code&gt;name&lt;/code&gt; and &lt;code&gt;object&lt;/code&gt; act to scope notification dispatch. Developers are advised to be consistent in how objects are posted with notifications, and to have this behavior documented clearly in the public interface.&lt;/p&gt;

&lt;p&gt;Since notification dispatch happens on the posting thread, it may be necessary to &lt;code&gt;dispatch_async&lt;/code&gt; to &lt;code&gt;dispatch_get_main_queue()&lt;/code&gt; so that a notification is handled on the main thread. This is not usually necessary, but it&amp;#39;s important to keep in mind.&lt;/p&gt;

&lt;h2&gt;KVO != NSNotificationCenter&lt;/h2&gt;

&lt;p&gt;Something that often slips up developers is how similar the method signatures for &lt;a href=&quot;http://nshipster.com/key-value-observing/&quot;&gt;Key-Value Observing&lt;/a&gt; are to those of &lt;code&gt;NSNotificationCenter&lt;/code&gt;:&lt;/p&gt;

&lt;h4&gt;Key-Value Observing&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addObserver:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;observer&lt;/span&gt;
         &lt;span class=&quot;nl&quot;&gt;forKeyPath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;keyPath&lt;/span&gt;
            &lt;span class=&quot;nl&quot;&gt;options:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSKeyValueObservingOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;options&lt;/span&gt;
            &lt;span class=&quot;nl&quot;&gt;context:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;NSNotificationCenter&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addObserver:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;notificationObserver&lt;/span&gt;
           &lt;span class=&quot;nl&quot;&gt;selector:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;SEL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;notificationSelector&lt;/span&gt;
               &lt;span class=&quot;nl&quot;&gt;name:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;notificationName&lt;/span&gt;
             &lt;span class=&quot;nl&quot;&gt;object:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;notificationSender&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addObserverForName:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;
                  &lt;span class=&quot;nl&quot;&gt;object:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;obj&lt;/span&gt;
                   &lt;span class=&quot;nl&quot;&gt;queue:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSOperationQueue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;queue&lt;/span&gt;
              &lt;span class=&quot;nl&quot;&gt;usingBlock:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNotification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;block&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Key-Value Observing adds observers for keypaths, while NSNotificationCenter adds observers for notifications.&lt;/strong&gt; Keep this distinction clear in your mind, and proceed to use both APIs confidently.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Notifications are an essential tool for communicating across an application. Because of its distributed, low-coupling characteristics, notifications are well-suited to a wide range of architectures. APIs would do well to add them for any significant events that might benefit from greater circulation—the performance overhead for this sort of chattiness is negligible.&lt;/p&gt;

&lt;p&gt;As it were, thinking about notifications in your own life can do wonders for improving your relationships with others. Communicating intent and giving sufficient notice are the trappings of a mature, grounded individual.&lt;/p&gt;

&lt;p&gt;...but don&amp;#39;t take that advice too far and use it to justify life-streaming, or anything. Seriously, stop taking pictures, and just eat your damn food, &lt;em&gt;amiright&lt;/em&gt;?&lt;/p&gt;
</description>
        <pubDate>Mon, 02 Dec 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nsnotification-and-nsnotificationcenter/</link>
        <guid>http://nshipster.com/nsnotification-and-nsnotificationcenter/</guid>
      </item>
    
      <item>
        <title>NSFileManager</title>
        <description>&lt;p&gt;&lt;code&gt;NSFileManager&lt;/code&gt; is Foundation&amp;#39;s high-level API for working with file systems. It abstracts Unix and Finder internals, providing a convenient way to create, read, move, copy, and delete files &amp;amp; directories on local or networked drives, as well as iCloud ubiquitous containers.&lt;/p&gt;

&lt;p&gt;File systems are a complex topic, with decades of history, vestigial complexities, and idiosyncrasies, and is well outside the scope of a single article. And since most applications don&amp;#39;t often interact with the file system much beyond simple file operations, one can get away with only knowing the basics.&lt;/p&gt;

&lt;p&gt;What follows are some code samples for your copy-pasting pleasure. Use them as a foundation for understanding how to adjust parameters to your particular use case:&lt;/p&gt;

&lt;h2&gt;Common Tasks&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;Throughout the code samples is the magical incantation &lt;code&gt;NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)&lt;/code&gt;. This may be tied with KVO as one of the worst APIs in Cocoa. Just know that this returns an array containing the user documents directory as the first object. Thank goodness for the inclusion of &lt;code&gt;NSArray -firstObject&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Determining If A File Exists&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentsPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSearchPathForDirectoriesInDomains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDocumentDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUserDomainMask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentsPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringByAppendingPathComponent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;file.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileExists&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileExistsAtPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Listing All Files In A Directory&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bundleURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSBundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mainBundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bundleURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contentsOfDirectoryAtURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bundleURL&lt;/span&gt;
                               &lt;span class=&quot;nl&quot;&gt;includingPropertiesForKeys:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[]&lt;/span&gt;
                                                  &lt;span class=&quot;nl&quot;&gt;options:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDirectoryEnumerationSkipsHiddenFiles&lt;/span&gt;
                                                    &lt;span class=&quot;nl&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;pathExtension == &amp;#39;png&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filteredArrayUsingPredicate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predicate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Enumerate each .png file in directory&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Recursively Enumerating Files In A Directory&lt;/h2&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bundleURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSBundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mainBundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bundleURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDirectoryEnumerator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enumerator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enumeratorAtURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bundleURL&lt;/span&gt;
                                      &lt;span class=&quot;nl&quot;&gt;includingPropertiesForKeys:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLNameKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSURLIsDirectoryKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                                                         &lt;span class=&quot;nl&quot;&gt;options:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDirectoryEnumerationSkipsHiddenFiles&lt;/span&gt;
                                                    &lt;span class=&quot;nl&quot;&gt;errorHandler:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@ (%@)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableFileURLs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enumerator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getResourceValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLNameKey&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getResourceValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isDirectory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLIsDirectoryKey&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Skip directories with &amp;#39;_&amp;#39; prefix, for example&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hasPrefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;_&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isDirectory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;boolValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enumerator&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;skipDescendants&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isDirectory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;boolValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableFileURLs&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Creating a Directory&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentsPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSearchPathForDirectoriesInDomains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDocumentDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUserDomainMask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imagesPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentsPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringByAppendingPathComponent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;images&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileExistsAtPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imagesPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;createDirectoryAtPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imagesPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;withIntermediateDirectories&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attributes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Deleting a File&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentsPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSearchPathForDirectoriesInDomains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDocumentDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUserDomainMask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentsPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringByAppendingPathComponent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;image.png&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;removeItemAtPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@ (%@)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Determining the Creation Date of a File&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentsPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSearchPathForDirectoriesInDomains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDocumentDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUserDomainMask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentsPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringByAppendingPathComponent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Document.pages&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;creationDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileExistsAtPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attributes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attributesOfItemAtPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;creationDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attributes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileCreationDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There are a number of file attributes that are made accessible through &lt;code&gt;NSFileManager&lt;/code&gt;, which can be fetched with &lt;code&gt;-attributesOfItemAtPath:error:&lt;/code&gt;, and other methods:&lt;/p&gt;

&lt;h4&gt;File Attribute Keys&lt;/h4&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSFileAppendOnly&lt;/code&gt;: The key in a file attribute dictionary whose value indicates whether the file is read-only.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileBusy&lt;/code&gt;: The key in a file attribute dictionary whose value indicates whether the file is busy.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileCreationDate&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s creation date.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileOwnerAccountName&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the name of the file&amp;#39;s owner.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileGroupOwnerAccountName&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the group name of the file&amp;#39;s owner.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileDeviceIdentifier&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the identifier for the device on which the file resides.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileExtensionHidden&lt;/code&gt;: The key in a file attribute dictionary whose value indicates whether the file&amp;#39;s extension is hidden.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileGroupOwnerAccountID&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s group ID.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileHFSCreatorCode&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s HFS creator code.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileHFSTypeCode&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s HFS type code.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileImmutable&lt;/code&gt;: The key in a file attribute dictionary whose value indicates whether the file is mutable.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileModificationDate&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s last modified date.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileOwnerAccountID&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s owner&amp;#39;s account ID.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFilePosixPermissions&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s Posix permissions.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileReferenceCount&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s reference count.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileSize&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s size in bytes.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFileSystemFileNumber&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s filesystem file number.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;NSFileType&lt;/code&gt;: The key in a file attribute dictionary whose value indicates the file&amp;#39;s type.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;NSDirectoryEnumerationSkipsSubdirectoryDescendants&lt;/code&gt;: Perform a shallow enumeration; do not descend into directories.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;NSDirectoryEnumerationSkipsPackageDescendants&lt;/code&gt;: Do not descend into packages.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;NSDirectoryEnumerationSkipsHiddenFiles&lt;/code&gt;: Do not enumerate hidden files.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2&gt;NSFileManagerDelegate&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSFileManager&lt;/code&gt; may optionally set a delegate to verify that it should perform a particular file operation. This allows the business logic of, for instance, which files to protect from deletion, to be factored out of the controller.&lt;/p&gt;

&lt;p&gt;There are four kinds of methods in the &lt;code&gt;&amp;lt;NSFileManagerDelegate&amp;gt;&lt;/code&gt; protocol, each with a variation for working with paths, as well as methods for error handling:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-fileManager:shouldMoveItemAtURL:toURL:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-fileManager:shouldCopyItemAtURL:toURL:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-fileManager:shouldRemoveItemAtURL:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-fileManager:shouldLinkItemAtURL:toURL:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you were wondering when you might &lt;code&gt;alloc init&lt;/code&gt; your own &lt;code&gt;NSFileManager&lt;/code&gt; rather than using the shared instance, this is it. As per the documentation:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If you use a delegate to receive notifications about the status of move, copy, remove, and link operations, you should create a unique instance of the file manager object, assign your delegate to that object, and use that file manager to initiate your operations.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bundleURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSBundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mainBundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bundleURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contentsOfDirectoryAtURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bundleURL&lt;/span&gt;
                               &lt;span class=&quot;nl&quot;&gt;includingPropertiesForKeys:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[]&lt;/span&gt;
                                                  &lt;span class=&quot;nl&quot;&gt;options:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDirectoryEnumerationSkipsHiddenFiles&lt;/span&gt;
                                                    &lt;span class=&quot;nl&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;removeItemAtPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;CustomFileManagerDelegate.m&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#pragma mark - NSFileManagerDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fileManager:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;fileManager&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;shouldRemoveItemAtURL:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;URL&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lastPathComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pathExtension&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;pdf&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Ubiquitous Storage&lt;/h2&gt;

&lt;p&gt;Documents can also be moved to iCloud. If you guessed that this would be anything but straight forward, you&amp;#39;d be 100% correct.&lt;/p&gt;

&lt;p&gt;This is another occasion when you&amp;#39;d &lt;code&gt;alloc init&lt;/code&gt; your own &lt;code&gt;NSFileManager&lt;/code&gt; rather than using the shared instance. Because &lt;code&gt;URLForUbiquityContainerIdentifier:&lt;/code&gt; and &lt;code&gt;setUbiquitous:itemAtURL:destinationURL:error:&lt;/code&gt; are blocking calls, this entire operation needs to be dispatched to a background queue.&lt;/p&gt;

&lt;h3&gt;Moving an Item to Ubiquitous Storage&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_get_global_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DISPATCH_QUEUE_PRIORITY_BACKGROUND&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentsPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSearchPathForDirectoriesInDomains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDocumentDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUserDomainMask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileURLWithPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documentsPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringByAppendingPathComponent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Document.pages&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Defaults to first listed in entitlements when `nil`; should replace with real identifier&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;identifier&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ubiquitousContainerURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLForUbiquityContainerIdentifier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;identifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ubiquitousFileURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ubiquitousContainerURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLByAppendingPathComponent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Document.pages&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setUbiquitous&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;
                                    &lt;span class=&quot;nl&quot;&gt;itemAtURL:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt;
                               &lt;span class=&quot;nl&quot;&gt;destinationURL:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ubiquitousFileURL&lt;/span&gt;
                                        &lt;span class=&quot;nl&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[Error] %@ (%@) (%@)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ubiquitousFileURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;You can find more information about ubiquitous document storage in Apple&amp;#39;s &amp;quot;iCloud File Management&amp;quot; document.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;There&amp;#39;s a lot to know about file systems, but as an app developer, it&amp;#39;s mostly an academic exercise. Now don&amp;#39;t get me wrong—academic exercises are great! But they don&amp;#39;t ship code. &lt;code&gt;NSFileManager&lt;/code&gt; allows you to ignore most of the subtlety of all of this and get things done.&lt;/p&gt;
</description>
        <pubDate>Mon, 18 Nov 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nsfilemanager/</link>
        <guid>http://nshipster.com/nsfilemanager/</guid>
      </item>
    
      <item>
        <title>NSFormatter</title>
        <description>&lt;p&gt;Conversion is the tireless errand of software development. Most programming tasks boil down to some variation of transforming data into something more useful.&lt;/p&gt;

&lt;p&gt;In the case of user-facing software, converting data into human-readable form is an essential task, and a complex one at that. A user&amp;#39;s preferred language, locale, calendar, or currency can all factor into how information should be displayed, as can other constraints, such as a label&amp;#39;s dimensions.&lt;/p&gt;

&lt;p&gt;All of this is to say that sending &lt;code&gt;-description&lt;/code&gt; to an object just isn&amp;#39;t going to cut it in most circumstances. Even &lt;code&gt;+stringWithFormat:&lt;/code&gt; is going to ultimately disappoint. No, the real tool for this job is &lt;code&gt;NSFormatter&lt;/code&gt;. &lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSFormatter&lt;/code&gt; is an abstract class for transforming data into a textual representation. It can also interpret valid textual representations back into data.&lt;/p&gt;

&lt;p&gt;Its origins trace back to &lt;code&gt;NSCell&lt;/code&gt;, which is used to display information and accept user input in tables, form fields, and other views in AppKit. Much of the API design of NSFormatter reflects this.&lt;/p&gt;

&lt;p&gt;Foundation provides two concrete subclasses for &lt;code&gt;NSFormatter&lt;/code&gt;: &lt;code&gt;NSNumberFormatter&lt;/code&gt; and &lt;code&gt;NSDateFormatter&lt;/code&gt;. As some of the oldest members of the Foundation framework, these classes are astonishingly well-suited to their respective domains, in that way only decade-old software can.&lt;/p&gt;

&lt;h2&gt;NSNumberFormatter&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSNumberFormatter&lt;/code&gt; handles every aspect of number formatting imaginable, from mathematical and scientific notation, to currencies and percentages. Nearly everything about the formatter can be customized, whether it&amp;#39;s the currency symbol, grouping separator, number of significant digits, rounding behavior, fractions, character for infinity, string representation for &lt;code&gt;0&lt;/code&gt;, or maximum / minimum values. It can even write out numbers in several languages!&lt;/p&gt;

&lt;h3&gt;Number Styles&lt;/h3&gt;

&lt;p&gt;When using an &lt;code&gt;NSNumberFormatter&lt;/code&gt;, the first order of business is to determine what kind of information you&amp;#39;re displaying. Is it a price? Is this a whole number, or should decimal values be shown?&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSNumberFormatter&lt;/code&gt; can be configured for any one of the following formats, with &lt;code&gt;-setNumberStyle:&lt;/code&gt;:&lt;/p&gt;

&lt;p&gt;To illustrate the differences between each style, here is how the number &lt;code&gt;12345.6789&lt;/code&gt; would be displayed for each: &lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSNumberFormatterNoStyle&lt;/code&gt;: 12346&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSNumberFormatterDecimalStyle&lt;/code&gt;: 12345.6789&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSNumberFormatterCurrencyStyle&lt;/code&gt;: $12345.68&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSNumberFormatterPercentStyle&lt;/code&gt;: 1234567%&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSNumberFormatterScientificStyle&lt;/code&gt;: 1.23456789E4&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSNumberFormatterSpellOutStyle&lt;/code&gt;: twelve thousand three hundred forty-five point six seven eight nine&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Locale Awareness&lt;/h3&gt;

&lt;p&gt;By default, &lt;code&gt;NSNumberFormatter&lt;/code&gt; will format according to the current locale settings, for things like currency symbol ($, £, €, etc.) and whether to use &amp;quot;,&amp;quot; or &amp;quot;.&amp;quot; as the decimal separator.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSNumberFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numberFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumberFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numberFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setNumberStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumberFormatterCurrencyStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;identifier&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;en_US&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;fr_FR&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;numberFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocale&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;localeWithLocaleIdentifier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;identifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;identifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numberFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringFromNumber&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1234.5678&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;en_US: $1,234.57
fr_FR: 1 234,57 €
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;All of those settings can be overridden on an individual basis, but for most apps, the best strategy would be deferring to the locale&amp;#39;s default settings.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Rounding &amp;amp; Significant Digits&lt;/h3&gt;

&lt;p&gt;In order to prevent numbers from getting annoyingly pedantic (&lt;em&gt;&amp;quot;thirty-two point three three, repeating, of course...&amp;quot;&lt;/em&gt;), make sure to get a handle on &lt;code&gt;NSNumberFormatter&lt;/code&gt;&amp;#39;s rounding behavior.&lt;/p&gt;

&lt;p&gt;The easiest way to do this, would be to &lt;code&gt;setUsesSignificantDigits:&lt;/code&gt; to &lt;code&gt;YES&lt;/code&gt;, and then set minimum and maximum number of significant digits appropriately. For example, a number formatter used for approximate distances in directions, would do well with significant digits to the tenths place for miles or kilometers, but only the ones place for feet or meters.&lt;/p&gt;

&lt;p&gt;For anything more advanced, an &lt;code&gt;NSDecimalNumberHandler&lt;/code&gt; object can be passed as the &lt;code&gt;roundingBehavior&lt;/code&gt; property of a number formatter.&lt;/p&gt;

&lt;h2&gt;NSDateFormatter&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSDateFormatter&lt;/code&gt; is the be all and end all of getting textual representations of both dates and times.&lt;/p&gt;

&lt;h3&gt;Date &amp;amp; Time Styles&lt;/h3&gt;

&lt;p&gt;The most important properties for an &lt;code&gt;NSDateFormatter&lt;/code&gt; object are its &lt;code&gt;dateStyle&lt;/code&gt; and &lt;code&gt;timeStyle&lt;/code&gt;. Like &lt;code&gt;-[NSNumberFormatter numberStyle]&lt;/code&gt;, these styles provide common preset configurations for common formats. In this case, the various formats are distinguished by their specificity (more specific = longer).&lt;/p&gt;

&lt;p&gt;Both properties share a single set of &lt;code&gt;enum&lt;/code&gt; values: &lt;/p&gt;

&lt;table&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Style&lt;/th&gt;
            &lt;th&gt;Description&lt;/th&gt;
            &lt;th colspan=&quot;2&quot;&gt;Examples&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;th colspan=&quot;2&quot;&gt;&lt;/th&gt;
            &lt;th&gt;Date&lt;/th&gt;
            &lt;th&gt;Time&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;tt&gt;NSDateFormatterNoStyle&lt;/tt&gt;&lt;/td&gt;
            &lt;td&gt;Specifies no style.&lt;/td&gt;
            &lt;td&gt;&lt;/td&gt;
            &lt;td&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;tt&gt;NSDateFormatterShortStyle&lt;/tt&gt;&lt;/td&gt;
            &lt;td&gt;Specifies a short style, typically numeric only.&lt;/td&gt;
            &lt;td&gt;11/23/37&lt;/td&gt;
            &lt;td&gt;3:30pm&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;tt&gt;NSDateFormatterMediumStyle&lt;/tt&gt;&lt;/td&gt;
            &lt;td&gt;Specifies a medium style, typically with abbreviated text.&lt;/td&gt;
            &lt;td&gt;Nov 23, 1937&lt;/td&gt;
            &lt;td&gt;3:30:32pm&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;tt&gt;NSDateFormatterLongStyle&lt;/tt&gt;&lt;/td&gt;
            &lt;td&gt;Specifies a long style, typically with full text.&lt;/td&gt;
            &lt;td&gt;November 23, 1937&lt;/td&gt;
            &lt;td&gt;3:30:32pm&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;tt&gt;NSDateFormatterFullStyle&lt;/tt&gt;&lt;/td&gt;
            &lt;td&gt;Specifies a full style with complete details.&lt;/td&gt;
            &lt;td&gt;Tuesday, April 12, 1952 AD&lt;/td&gt;
            &lt;td&gt;3:30:42pm PST&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;code&gt;dateStyle&lt;/code&gt; and &lt;code&gt;timeStyle&lt;/code&gt; are set independently. For example to display just the time, an &lt;code&gt;NSDateFormatter&lt;/code&gt; would be configured with a &lt;code&gt;dateStyle&lt;/code&gt; of &lt;code&gt;NSDateFormatterNoStyle&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setDateStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatterNoStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setTimeStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatterMediumStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringFromDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 12:11:19pm&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Whereas setting both to &lt;code&gt;NSDateFormatterLongStyle&lt;/code&gt; yields the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setDateStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatterLongStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setTimeStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatterLongStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringFromDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Monday, November 11, 2013 12:11:19pm PST&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you might expect, each aspect of the date format can alternatively be configured individually, a la carte. For any aspiring time wizards &lt;code&gt;NSDateFormatter&lt;/code&gt; has a bevy of different knobs and switches to play with.&lt;/p&gt;

&lt;h3&gt;Relative Formatting&lt;/h3&gt;

&lt;p&gt;As of iOS 4 / OS X 10.6, &lt;code&gt;NSDateFormatter&lt;/code&gt; supports relative date formatting for certain locales with the &lt;code&gt;doesRelativeDateFormatting&lt;/code&gt; property. Setting this to &lt;code&gt;YES&lt;/code&gt; would format the date of &lt;code&gt;[NSDate date]&lt;/code&gt; to &amp;quot;Today&amp;quot;.&lt;/p&gt;

&lt;h2&gt;Re-Using Formatter Instances&lt;/h2&gt;

&lt;p&gt;Perhaps the most critical detail to keep in mind when using formatters is that they are &lt;em&gt;extremely&lt;/em&gt; expensive to create. Even just an &lt;code&gt;alloc init&lt;/code&gt; of an &lt;code&gt;NSNumberFormatter&lt;/code&gt; in a tight loop is enough to bring an app to its knees.&lt;/p&gt;

&lt;p&gt;Therefore, it&amp;#39;s strongly recommended that formatters be created once, and re-used as much as possible.&lt;/p&gt;

&lt;p&gt;If it&amp;#39;s just a single method using a particular formatter, a static instance is a good strategy:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fooWithNumber:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSNumberFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_numberFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;dispatch_once_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;onceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispatch_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;onceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_numberFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumberFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_numberFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setNumberStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumberFormatterDecimalStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_numberFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringFromNumber&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;dispatch_once&lt;/code&gt; guarantees that the specified block is called only the first time it&amp;#39;s encountered.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;If the formatter is used across several methods in the same class, that static instance can be refactored into a singleton method:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumberFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;numberFormatter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSNumberFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_numberFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;dispatch_once_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;onceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispatch_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;onceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_numberFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumberFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_numberFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setNumberStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumberFormatterDecimalStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_numberFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If the same formatter is privately implemented across several classes, one could either expose it publicly in one of the classes, or implement the static singleton method in a category on &lt;code&gt;NSNumberFormatter&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;If your app deals in numbers or dates, &lt;code&gt;NSFormatter&lt;/code&gt; is indespensable. Actually, if your app doesn&amp;#39;t… then what &lt;em&gt;does&lt;/em&gt; it do, exactly?&lt;/p&gt;

&lt;p&gt;Presenting useful information to users is as much about content as presentation. Invest in learning all of the secrets of &lt;code&gt;NSNumberFormatter&lt;/code&gt; and &lt;code&gt;NSDateFormatter&lt;/code&gt; to get everything exactly how you want them.&lt;/p&gt;

&lt;p&gt;And if you find yourself with formatting logic scattered across your app, consider creating your own &lt;code&gt;NSFormatter&lt;/code&gt; subclass to consolidate all of that business logic in one place. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/mattt/FormatterKit&quot;&gt;FormatterKit&lt;/a&gt; has great examples of &lt;code&gt;NSFormatter&lt;/code&gt; subclasses for addresses, arrays, colors, locations, ordinal numbers, time intervals, and units of information.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 11 Nov 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nsformatter/</link>
        <guid>http://nshipster.com/nsformatter/</guid>
      </item>
    
      <item>
        <title>xctool</title>
        <description>&lt;blockquote&gt;
&lt;p&gt;Control the build system, and you control the destiny of the language, its ecosystem, and community.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Objective-C has changed so very much in such a very short timespan. In just a few short years, the language has gone from humdrum NeXT vestige to a &lt;a href=&quot;http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html&quot;&gt;position of commanding influence&lt;/a&gt;. A significant portion of these prolific contributions from the open source community for Objective-C has been directly enabled and encouraged by increased ownership around tooling. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cocoapods.org&quot;&gt;CocoaPods&lt;/a&gt;, in particular, exemplifies the compounding influences of technology and community. Now two years into the project, there are over 2,700 community-submitted libraries and frameworks that can be integrated into your own project with a simple &lt;code&gt;pod install&lt;/code&gt; command.&lt;/p&gt;

&lt;p&gt;Dependency management is just one of the many aspects of iOS and Mac OS X development that have been dramatically improved by the community. Other examples include &lt;a href=&quot;http://nomad-cli.com&quot;&gt;provisioning and distribution automation&lt;/a&gt;, &lt;a href=&quot;http://www.quickradar.com&quot;&gt;bug reporting&lt;/a&gt;, and &lt;a href=&quot;http://cocoadocs.org&quot;&gt;documentation&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;But this week, our focus is on a tool that redefines the actual build process itself, to serve as the foundation for a new generation of tooling and integration: &lt;code&gt;xctool&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/facebook/xctool&quot;&gt;&lt;code&gt;xctool&lt;/code&gt;&lt;/a&gt; is an open source project by &lt;a href=&quot;https://github.com/fpotter&quot;&gt;Fred Potter&lt;/a&gt; that came from his work on build system automation at &lt;a href=&quot;https://github.com/facebook&quot;&gt;Facebook&lt;/a&gt;. It is a drop-in replacement for &lt;a href=&quot;https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html&quot;&gt;&lt;code&gt;xcodebuild&lt;/code&gt;&lt;/a&gt;, the utility underlying Xcode.app itself.&lt;/p&gt;

&lt;p&gt;When you click &amp;quot;Build &amp;amp; Run&amp;quot; in Xcode, all of the project, build target, and scheme settings are passed to &lt;code&gt;xcodebuild&lt;/code&gt;, which invokes build commands to create and then launch an &lt;code&gt;.ipa&lt;/code&gt; executable on the device or simulator.&lt;/p&gt;

&lt;p&gt;Don&amp;#39;t get me wrong—it&amp;#39;s a &lt;em&gt;blessing&lt;/em&gt; that things work in this way, instead of, say, Xcode wrapping its own private build system in a way that was inaccessible from outside the application. But anyone who has ever attempted to interact with &lt;code&gt;xcodebuild&lt;/code&gt; from Terminal.app can attest to its... less-than-streamlined experience.&lt;/p&gt;

&lt;p&gt;Rather than belabor the point by enumerating all of the flaws in this decade-old utility, let&amp;#39;s cut to the hero of the story—XCtool—to show how it improves on the status quo:&lt;/p&gt;

&lt;h2&gt;Aesthetics &amp;amp; Style Points&lt;/h2&gt;

&lt;p&gt;The first you&amp;#39;ll notice about &lt;code&gt;xctool&lt;/code&gt; is its gorgeous, colorized output.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xctool-example.gif&quot; alt=&quot;xctool in Action&quot;&gt;&lt;/p&gt;

&lt;p&gt;As consumers of Apple hardware and software ourselves, the role of design cannot be under-stated. In this respect, &lt;code&gt;xctool&lt;/code&gt; absolutely nails it. Every step of the build process is neatly organized and reported in a way that is understandable and visually appealing, with ANSI colorization and a splash of Unicode ornamentation.&lt;/p&gt;

&lt;p&gt;But xctool&amp;#39;s beauty is not just skin-deep: build progress can also be reported in formats that can be read by other tools:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;xctool -reporter plain:output.txt build
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Reporters&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pretty&lt;/code&gt;: (&lt;em&gt;default&lt;/em&gt;) a text-based reporter that uses ANSI colors and unicode symbols for pretty output.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;plain&lt;/code&gt;: like &lt;code&gt;pretty&lt;/code&gt;, but with with no colors or Unicode.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;phabricator&lt;/code&gt;: outputs a JSON array of build/test results which can be fed into the &lt;a href=&quot;http://phabricator.org&quot;&gt;Phabricator&lt;/a&gt; code-review tool.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;junit&lt;/code&gt;: produces a &lt;a href=&quot;http://junit.org&quot;&gt;JUnit&lt;/a&gt;/&lt;a href=&quot;http://xunit.codeplex.com&quot;&gt;xUnit&lt;/a&gt; compatible XML file with test results.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;json-stream&lt;/code&gt;: a stream of build/test events as JSON dictionaries, one per line (example output).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;json-compilation-database&lt;/code&gt;: outputs a &lt;a href=&quot;http://clang.llvm.org/docs/JSONCompilationDatabase.html&quot;&gt;JSON Compilation Database&lt;/a&gt; of build events which can be used by &lt;a href=&quot;http://clang.llvm.org/docs/LibTooling.html&quot;&gt;Clang Tooling&lt;/a&gt; based tools, e.g. &lt;a href=&quot;http://oclint.org&quot;&gt;OCLint&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Build System Integration&lt;/h2&gt;

&lt;p&gt;Another major improvement over &lt;code&gt;xcodebuild&lt;/code&gt; is that &lt;code&gt;xctool&lt;/code&gt; will run application tests in your project in the same way Xcode.app does (&lt;code&gt;xcodebuild&lt;/code&gt; can&amp;#39;t discern which targets in your scheme are test targets, let alone run them in the simulator)&lt;/p&gt;

&lt;p&gt;For this reason alone, xctool has great implications for the emerging discipline of continuous integration testing within the Objective-C community.&lt;/p&gt;

&lt;h3&gt;Travis CI&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://travis-ci.org&quot;&gt;Travis CI&lt;/a&gt; offers free continuous integration services for open source projects (as well as a &lt;a href=&quot;http://travis-ci.com&quot;&gt;paid plan for commercial software&lt;/a&gt;), and is rather unique for supporting Objective-C. It can be configured to run your test suite on every &lt;code&gt;git push&lt;/code&gt; to GitHub (or your favorite SCM host), and will notify you if your most recent change-set breaks the build.&lt;/p&gt;

&lt;p&gt;To add Travis CI to your own Objective-C project, &lt;a href=&quot;http://about.travis-ci.org/docs/user/getting-started/&quot;&gt;create an account and webservice hook&lt;/a&gt;, and create a &lt;code&gt;.travis.yml&lt;/code&gt; file in your repository: &lt;/p&gt;

&lt;h4&gt;.travis.yml&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;l-Scalar-Plain&quot;&gt;objective-c&lt;/span&gt;
&lt;span class=&quot;l-Scalar-Plain&quot;&gt;before_install&lt;/span&gt;&lt;span class=&quot;p-Indicator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;p-Indicator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;l-Scalar-Plain&quot;&gt;brew update&lt;/span&gt;
    &lt;span class=&quot;p-Indicator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;l-Scalar-Plain&quot;&gt;brew install xctool&lt;/span&gt;
&lt;span class=&quot;l-Scalar-Plain&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;l-Scalar-Plain&quot;&gt;xctool -workspace MyApp.xcworkspace -scheme MyApp test&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;OCLint&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://oclint.org&quot;&gt;OCLint&lt;/a&gt; is a static code analyzer that inspects Objective-C (as well as C and C++) code for common sources of problems, like empty &lt;code&gt;if&lt;/code&gt;/&lt;code&gt;else&lt;/code&gt;/&lt;code&gt;try&lt;/code&gt;/&lt;code&gt;catch&lt;/code&gt;/&lt;code&gt;finally&lt;/code&gt; statements,unused local variables and parameters, complicated code with high NCSS or cyclomatic / NPath complexity, redundant code, code smells, and other bad practices.&lt;/p&gt;

&lt;p&gt;Remember &lt;code&gt;xctool&lt;/code&gt;&amp;#39;s &lt;code&gt;json-compilation-database&lt;/code&gt; reporter option? Well, that output &lt;a href=&quot;http://docs.oclint.org/en/dev/guide/xctool.html&quot;&gt;can be read directly&lt;/a&gt; by OCLint to do its magical static analysis.&lt;/p&gt;

&lt;p&gt;At the time of writing, there is still a ways to go before this becomes widely adopted, but my hope is that, now that the cat is out of the bag, some enterprising individuals might work together to make an insanely great experience around this promising tool.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Just as with the growth population within cities, infrastructure makes all of difference. One way or another, whether by local &lt;a href=&quot;http://en.wikipedia.org/wiki/Commissioners&amp;#x27;_Plan_of_1811&quot;&gt;government mandate&lt;/a&gt;, &lt;a href=&quot;http://en.wikipedia.org/wiki/Kowloon_Walled_City&quot;&gt;emergent self-organization&lt;/a&gt;, or somewhere in-between, environments are changed to accommodate this growth.&lt;/p&gt;

&lt;p&gt;Objective-C has and continues to undergo rapid growth based on the popularity of iOS. It is up to the community, in working with (and sometimes against) Apple to create infrastructure necessary to integrate so many new developers. How successful we are in this respect determines how we understand and communicate our roles and responsibilities as professional developers. &lt;/p&gt;

&lt;p&gt;Are we clumsy amateurs, or do we take an active role in refining our craft?&lt;/p&gt;

&lt;p&gt;xctool, like so many other tools from the community, provide hope and, indeed, inspiration about the future of the language and its ecosystem. Let&amp;#39;s continue to build upon these tools, to create a developer experience that we can be proud of.&lt;/p&gt;
</description>
        <pubDate>Mon, 04 Nov 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/xctool/</link>
        <guid>http://nshipster.com/xctool/</guid>
      </item>
    
      <item>
        <title>NSHipster Quiz #4</title>
        <description>&lt;p&gt;The fourth and final NSHipster pub quiz of the year was held in the beautiful city of Amsterdam on October 22nd, with help from the good folks at &lt;a href=&quot;http://appsterdam.rs&quot;&gt;Appsterdam&lt;/a&gt;, &lt;a href=&quot;http://www.bignerdranch.com/&quot;&gt;The Big Nerd Ranch&lt;/a&gt;, and &lt;a href=&quot;http://www.heroku.com&quot;&gt;Heroku&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The competition was fierce, but ultimately the team of &lt;a href=&quot;https://twitter.com/bmf&quot;&gt;Mike Lee&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/judykitteh&quot;&gt;Judy Chen&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/alloy&quot;&gt;Eloy Dúran&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/arepty&quot;&gt;Alexander Repty&lt;/a&gt;, &lt;a href=&quot;@Yumyoko&quot;&gt;Maxie Ketschau-Repty&lt;/a&gt;, and &lt;a href=&quot;https://twitter.com/paneidos&quot;&gt;Sernin van de Krol&lt;/a&gt; were victorious. This was, by design, to be the highest-scoring of any pub quiz, with generous portions of extra points, and Team &amp;quot;&lt;a href=&quot;http://en.wikipedia.org/wiki/Grace_Hopper&quot;&gt;Graceful Hoppers&lt;/a&gt;&amp;quot; came through with an impressive 53 points (which, interestingly enough, only edged out the 2nd place team by ½ of a point).&lt;/p&gt;

&lt;p&gt;As always, you can play along at home or at work with your colleagues. Here are the rules:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;There are 4 Rounds, with 10 questions each&lt;/li&gt;
&lt;li&gt;Record answers on a separate sheet of paper&lt;/li&gt;
&lt;li&gt;Each correct answer to a question gets you 1 point (unless otherwise specified)&lt;/li&gt;
&lt;li&gt;Play with up to 5 friends for maximum enjoyment&lt;/li&gt;
&lt;li&gt;Don&amp;#39;t be lame and look things up on the Internet or in Xcode&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;h2&gt;Round 1: General Knowledge&lt;/h2&gt;

&lt;p&gt;Current events, miscellaneous tidbits, and random trivia. Following a time-honored traditions for NSHipster quizzes, the first round is always a mis-mash of people, places, and pop culture.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;What hardware products did Apple announce at its October 22nd Media Event? (1pt for each correct answer)&lt;/li&gt;
&lt;li&gt;What two products were announced during the &lt;em&gt;last event&lt;/em&gt; to be held at the Yerba Buena Center for the Arts,  on March 7, 2012? (1pt for each correct answer)&lt;/li&gt;
&lt;li&gt;Which company&amp;#39;s CEO was recently named as Apple&amp;#39;s new Head of Retail? (1pt bonus if you know her name)&lt;/li&gt;
&lt;li&gt;In September of this year, Steve Ballmer held his last meeting as CEO at Microsoft. How many years did he serve in this role?&lt;/li&gt;
&lt;li&gt;Jony Ive recently designed a (&lt;em&gt;beautiful&lt;/em&gt;) one-off camera with which famed camera company?&lt;/li&gt;
&lt;li&gt;Which website&amp;#39;s failure has given cause for President Obama to do a post-mortem for the failed Rails app?&lt;/li&gt;
&lt;li&gt;Doomed former smartphone juggernaut BlackBerry recently released an iOS app. What is it called?&lt;/li&gt;
&lt;li&gt;Apple prompted some raised eyebrows with the final developer release of  Mac OS X Mavericks. What was the controversy?&lt;/li&gt;
&lt;li&gt;During development, the  Gold iPhone 5s was jokingly named after which American &amp;quot;celebrity&amp;quot;? &lt;/li&gt;
&lt;li&gt;At an average per capita rate of 8.4kg per year, the Netherlands is the world&amp;#39;s #5 consumer of what?&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 2: Foundation Potpourri&lt;/h2&gt;

&lt;p&gt;With the fluff out of the way, it&amp;#39;s now time to dive into some hardcore Cocoa fundamentals. How well do &lt;em&gt;you&lt;/em&gt; know the standard library?&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;NSPredicate&lt;/code&gt; objects can be decomposed into left and right hand side components of which class? &lt;/li&gt;
&lt;li&gt;Which of the following is &lt;em&gt;not&lt;/em&gt; something &lt;code&gt;NSDataDetector&lt;/code&gt; can detect? Addresses, Phone Numbers, Product Listings, or Flight Information.&lt;/li&gt;
&lt;li&gt;Which Foundation collection class allows values to be weakly referenced?&lt;/li&gt;
&lt;li&gt;What method would you implement in an &lt;code&gt;NSFormatter&lt;/code&gt; subclass in order to override what&amp;#39;s displayed while editing?&lt;/li&gt;
&lt;li&gt;Which Xcode launch argument can be specified to have NON-LOCALIZED STRINGS YELL AT YOU?&lt;/li&gt;
&lt;li&gt;Which Core Foundation  collection type corresponds to  (but does not toll-free bridge) &lt;code&gt;NSCountedSet&lt;/code&gt;?&lt;/li&gt;
&lt;li&gt;Which &lt;code&gt;NSValue&lt;/code&gt; class constructor allows for non-&lt;code&gt;NSCopying&lt;/code&gt;-conforming objects to be used as keys in an &lt;code&gt;NSDictionary&lt;/code&gt;?&lt;/li&gt;
&lt;li&gt;Which &lt;code&gt;@&lt;/code&gt; compiler directive allows classes to be referred to by another name?&lt;/li&gt;
&lt;li&gt;Name the 4 Classes that conform to &lt;code&gt;&amp;lt;NSLocking&amp;gt;&lt;/code&gt; (1 pt. each)&lt;/li&gt;
&lt;li&gt;What is the name of the method called by the following code:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Round 3: Picture Round - Indie Devs&lt;/h2&gt;

&lt;p&gt;Following another tradition of the NSHipster quiz is everybody&amp;#39;s favorite: the Picture Round! This time, the theme is indie developers. Earn up to 3 points for each set of pictures by naming the &lt;strong&gt;founder&lt;/strong&gt;, the &lt;strong&gt;name of the company&lt;/strong&gt; they&amp;#39;re known for, and the &lt;strong&gt;name of their flagship app&lt;/strong&gt; represented by the icon.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;img src=&quot;http://nshipster-quiz-4.s3.amazonaws.com/nshipster-quiz-4-question-1.png&quot; alt=&quot;Question 1&quot;&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://nshipster-quiz-4.s3.amazonaws.com/nshipster-quiz-4-question-2.png&quot; alt=&quot;Question 2&quot;&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://nshipster-quiz-4.s3.amazonaws.com/nshipster-quiz-4-question-3.png&quot; alt=&quot;Question 3&quot;&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://nshipster-quiz-4.s3.amazonaws.com/nshipster-quiz-4-question-4.png&quot; alt=&quot;Question 4&quot;&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://nshipster-quiz-4.s3.amazonaws.com/nshipster-quiz-4-question-5.png&quot; alt=&quot;Question 5&quot;&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://nshipster-quiz-4.s3.amazonaws.com/nshipster-quiz-4-question-6.png&quot; alt=&quot;Question 6&quot;&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://nshipster-quiz-4.s3.amazonaws.com/nshipster-quiz-4-question-7.png&quot; alt=&quot;Question 7&quot;&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://nshipster-quiz-4.s3.amazonaws.com/nshipster-quiz-4-question-8.png&quot; alt=&quot;Question 8&quot;&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://nshipster-quiz-4.s3.amazonaws.com/nshipster-quiz-4-question-9.png&quot; alt=&quot;Question 9&quot;&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://nshipster-quiz-4.s3.amazonaws.com/nshipster-quiz-4-question-10.png&quot; alt=&quot;Question 10&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 4: NSAnagram&lt;/h2&gt;

&lt;p&gt;And finally, an admittedly &lt;em&gt;sadistic&lt;/em&gt; round that combines wordplay with Cocoa arcana. Each question is an anagram, whose letters can be rearranged to form the name of a class or type in a well-known system framework (hint: Foundation, Core Foundation, UIKit, and AddressBook are represented here). Good luck!&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Nose Call &lt;/li&gt;
&lt;li&gt;Uncle Consort Inn&lt;/li&gt;
&lt;li&gt;Oi! Inaccurate Wit Vividity &lt;/li&gt;
&lt;li&gt;A Band&amp;#39;s Cement Jog &lt;/li&gt;
&lt;li&gt;Tartan&amp;#39;s Screech&lt;/li&gt;
&lt;li&gt;Kebab&amp;#39;s Sad Odor&lt;/li&gt;
&lt;li&gt;Macs Fret &lt;/li&gt;
&lt;li&gt;Manservant of Rulers&lt;/li&gt;
&lt;li&gt;Measurably Rant &lt;/li&gt;
&lt;li&gt;Ill-Oiled Canonicalized Tuxedo&lt;/li&gt;
&lt;/ol&gt;

&lt;hr&gt;

&lt;h1&gt;Answers&lt;/h1&gt;

&lt;h2&gt;Round 1: General Knowledge&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;Updated MacBook Pros, Mac Pro, iPad Mini Retina, iPad Air&lt;/li&gt;
&lt;li&gt;3rd Generation TV &amp;amp; 3rd Generation iPad&lt;/li&gt;
&lt;li&gt;Burberry CEO Angela Ahrendts&lt;/li&gt;
&lt;li&gt;13 Years&lt;/li&gt;
&lt;li&gt;Leica&lt;/li&gt;
&lt;li&gt;healthcare.gov&lt;/li&gt;
&lt;li&gt;BBM&lt;/li&gt;
&lt;li&gt;GM Seed was Bumped / 2nd &amp;quot;GM&amp;quot; Release&lt;/li&gt;
&lt;li&gt;Kim Kardashian&lt;/li&gt;
&lt;li&gt;Coffee&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 2: Foundation Potpourri&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;NSExpression&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Product Listings&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMapTable&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;editingStringForObjectValue:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-NSShowNonLocalizedStrings&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CFBag&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSValue +valueWithNonretainedObject:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@compatibility_alias&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLock&lt;/code&gt;, &lt;code&gt;NSConditionLock&lt;/code&gt;, &lt;code&gt;NSRecursiveLock&lt;/code&gt;, &amp;amp; &lt;code&gt;NSCondition&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;setObject:atIndexedSubscript:&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 3: Picture Round&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/cabel&quot;&gt;Cabel Sasser&lt;/a&gt; / &lt;a href=&quot;http://panic.com/&quot;&gt;Panic&lt;/a&gt; / &lt;a href=&quot;http://panic.com/transmit/&quot;&gt;Transmit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/danwood&quot;&gt;Dan Wood&lt;/a&gt; / &lt;a href=&quot;http://www.karelia.com/&quot;&gt;Karelia&lt;/a&gt; / &lt;a href=&quot;http://www.karelia.com/products/sandvox/&quot;&gt;Sandvox&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/_soaps&quot;&gt;Sophia Teutschler&lt;/a&gt; / &lt;a href=&quot;http://sophiestication.com/&quot;&gt;Sophiestication&lt;/a&gt; / &lt;a href=&quot;http://sophiestication.com/articles/&quot;&gt;Articles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/kcase&quot;&gt;Ken Case&lt;/a&gt; / &lt;a href=&quot;http://www.omnigroup.com/&quot;&gt;The Omni Group&lt;/a&gt; / &lt;a href=&quot;http://www.omnigroup.com/omnigraffle/&quot;&gt;OmniGraffle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/liscio&quot;&gt;Chris Liscio&lt;/a&gt; / &lt;a href=&quot;http://supermegaultragroovy.com/&quot;&gt;Super Mega Ultra Groovy&lt;/a&gt; / &lt;a href=&quot;http://supermegaultragroovy.com/products/Capo/&quot;&gt;Capo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/PBones&quot;&gt;Paul Kafasis&lt;/a&gt; / &lt;a href=&quot;http://rogueamoeba.com/&quot;&gt;Rogue Amoeba&lt;/a&gt; / &lt;a href=&quot;http://rogueamoeba.com/fission/&quot;&gt;Fission&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/lorenb&quot;&gt;Loren Brichter&lt;/a&gt; / &lt;a href=&quot;http://www.atebits.com/&quot;&gt;atebits&lt;/a&gt; / &lt;a href=&quot;http://www.atebits.com/letterpress/&quot;&gt;Letterpress&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/chockenberry&quot;&gt;Craig Hockenberry&lt;/a&gt; / &lt;a href=&quot;http://iconfactory.com/&quot;&gt;The Iconfactory&lt;/a&gt; / &lt;a href=&quot;http://twitterrific.com/ios&quot;&gt;Twitterific&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/dlpasco&quot;&gt;Daniel Pasco&lt;/a&gt; / &lt;a href=&quot;http://blackpixel.com/&quot;&gt;Black Pixel&lt;/a&gt; / &lt;a href=&quot;http://netnewswireapp.com/&quot;&gt;NetNewsWire&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/bmf&quot;&gt;Mike Lee&lt;/a&gt; / &lt;a href=&quot;http://newlemurs.com/&quot;&gt;New Lemurs&lt;/a&gt; / &lt;a href=&quot;http://newlemurs.com/&quot;&gt;Lemurs Chemistry&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 4: NSAnagram&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;NSLocale&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSURLConnection&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIActivityIndicatorView&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSManagedObject&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ABAddressBook&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CFStream&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSValueTransformer&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMutableArray&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UILocalizedIndexedCollation&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;hr&gt;

&lt;p&gt;How did you do this time? Tweet out your score to see how you stack up to your peers!&lt;/p&gt;
</description>
        <pubDate>Mon, 28 Oct 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nshipster-quiz-4/</link>
        <guid>http://nshipster.com/nshipster-quiz-4/</guid>
      </item>
    
      <item>
        <title>Launch Arguments &amp;&lt;br/&gt;Environment Variables</title>
        <description>&lt;p&gt;Walk into any American fast food establishment, and you&amp;#39;ll be greeted with a colorful, back-lit display of specials, set menus, and other a la carte items. But as those in-the-know are quick to point out, larger chains often have a &lt;em&gt;secret&lt;/em&gt; menu, passed down by oral tradition between line cook workers and patrons over the generations.&lt;/p&gt;

&lt;p&gt;At McDonald&amp;#39;s, one can order a &amp;quot;Poor Man’s Big Mac&amp;quot;, which transforms a double cheeseburger alchemy-like into the chain&amp;#39;s signature sandwich on the cheap.&lt;/p&gt;

&lt;p&gt;At Chipotle, there is an unwritten rule that they&amp;#39;ll make anything within the scope of available ingredients. Since Mexican food is a testament to culinary combinatorics, an off-book order for a Quesadilla or Nachos is well within their wheelhouse.&lt;/p&gt;

&lt;p&gt;In life, it&amp;#39;s all about knowing what to ask for.&lt;/p&gt;

&lt;p&gt;Which brings us to Xcode Launch Arguments &amp;amp; Environment Variables. There are a number of options that can be passed into a target&amp;#39;s scheme to enable useful debugging behavior, but like a fast food secret menu, they&amp;#39;re obscure and widely unknown.&lt;/p&gt;

&lt;p&gt;So this week on NSHipster, we&amp;#39;ll take a look at the hidden world of Xcode runtime configuration, so that you, dear reader, may also saunter up to the great lunch counter of Objective-C and order to your heart&amp;#39;s content.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;To enable launch arguments and set environment variables for your app, select your target from the Xcode toolbar and select &amp;quot;Edit Scheme...&amp;quot;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/launch-arguments-edit-scheme.png&quot; alt=&quot;Edit Scheme...&quot;&gt;&lt;/p&gt;

&lt;p&gt;On the left side of the panel, select &amp;quot;Run [AppName].app&amp;quot;, and select the &amp;quot;Arguments&amp;quot; segment on the right side. There will be two drop-downs, for &amp;quot;Arguments Passed on Launch&amp;quot; and &amp;quot;Environment Variables&amp;quot;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/launch-arguments-edit-scheme-panel.png&quot; alt=&quot;Edit Scheme Panel&quot;&gt;&lt;/p&gt;

&lt;p&gt;For the purposes of debugging an app target, launch arguments and environment variables can be thought to be equivalent—both change the runtime behavior by defining certain values. In practice, the main difference between the two is that launch arguments begin with a dash (&lt;code&gt;-&lt;/code&gt;) and don&amp;#39;t have a separate field for argument values.&lt;/p&gt;

&lt;h2&gt;Arguments Passed on Launch&lt;/h2&gt;

&lt;p&gt;Any argument passed on launch will override the current value in &lt;code&gt;NSUserDefaults&lt;/code&gt; for the duration of execution. While this can be used for domain-specific testing and debugging, the two most widely applicable use cases are for localization and Core Data.&lt;/p&gt;

&lt;h3&gt;Localization&lt;/h3&gt;

&lt;p&gt;Getting localization right is a challenging and time-consuming task in and of itself. Fortunately, there are a few launch arguments that make the process &lt;em&gt;much&lt;/em&gt; nicer.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For more information about localization, check out our article about &lt;a href=&quot;http://nshipster.com/nslocalizedstring/&quot;&gt;&lt;code&gt;NSLocalizedString&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;NSDoubleLocalizedStrings&lt;/h4&gt;

&lt;p&gt;To simulate German&amp;#39;s UI-breaking &lt;em&gt;götterdämmere Weltanschauung&lt;/em&gt; of long-compound-words-unbroken-by-breakable-whitespace, there&amp;#39;s &lt;code&gt;NSDoubleLocalizedStrings&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;According to &lt;a href=&quot;http://www-01.ibm.com/software/globalization/guidelines/a3.html&quot;&gt;IBM&amp;#39;s Globalization Guidelines&lt;/a&gt;, we can expect translations from English to many European languages to be double or even triple the physical space of the source:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Number of Characters in Text&lt;/th&gt;
&lt;th&gt;Additional Physical Space Required&lt;/th&gt;
&lt;/tr&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;≤ 10&lt;/td&gt;&lt;td&gt;100% to 200%&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;11 – 20&lt;/td&gt;&lt;td&gt;80% to 100%&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;21 – 30&lt;/td&gt;&lt;td&gt;60% to 80%&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;31 – 50&lt;/td&gt;&lt;td&gt;40% to 60%&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;51 – 70&lt;/td&gt;&lt;td&gt;31% to 40%&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;70&lt;/td&gt;&lt;td&gt;30%&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;While you&amp;#39;re waiting for the first batch of translations to come back, or are merely curious to see how badly your UI breaks under linguistic pressure, specify the following launch argument:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;-NSDoubleLocalizedStrings YES
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/launch-arguments-nsdoublelocalizedstrings.png&quot; alt=&quot;NSDoubleLocalizedStrings - Before &amp;amp; After&quot;&gt;&lt;/p&gt;

&lt;h4&gt;NSShowNonLocalizedStrings&lt;/h4&gt;

&lt;p&gt;Project managers screaming at you to get localization finished? Now you can configure your app to scream at you as well!&lt;/p&gt;

&lt;p&gt;If you pass the &lt;code&gt;NSShowNonLocalizedStrings&lt;/code&gt; launch argument, any unlocalized string will SCREAM AT YOU IN CAPITAL LETTERS. HOW DELIGHTFUL!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;-NSShowNonLocalizedStrings YES
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;AppleLanguages&lt;/h4&gt;

&lt;p&gt;Perhaps the most useful launch argument of all, however, is &lt;code&gt;AppleLanguages&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Normally, one would have to manually go through Settings &amp;gt; General &amp;gt; International &amp;gt; Language and wait for the Simulator or Device to restart. But the same can be accomplished much more simply with the following launch argument:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;-AppleLanguages (es)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;The value for &lt;code&gt;AppleLanguages&lt;/code&gt; can either be the name of the language (&amp;quot;Spanish&amp;quot;), or its language code (&lt;code&gt;es&lt;/code&gt;), but since localization files are keyed by their ISO 639 code, using the code is preferable to the actual name of the language.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Core Data&lt;/h3&gt;

&lt;p&gt;Of all of the system frameworks, Core Data may be the most in need of debugging. Managed objects passing across contexts and threads, and notifications firing with dazzlingly fervor, there&amp;#39;s too much going on to keep track of yourself. Call in reinforcements with these essential launch arguments:&lt;/p&gt;

&lt;h4&gt;SQL Debug&lt;/h4&gt;

&lt;p&gt;Most Core Data stacks use SQLite as a persistent store, so if your app is anything like the majority, you&amp;#39;ll appreciate being able to watch SQL statements and statistics fly by as Core Data works its magic.&lt;/p&gt;

&lt;p&gt;Set the following launch argument:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;-com.apple.CoreData.SQLDebug 3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...and let the spice flow.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;CoreData: sql: pragma cache_size=1000
CoreData: sql: SELECT Z_VERSION, Z_UUID, Z_PLIST FROM Z_METADATA
CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZAUTHOR, t0.ZTITLE, t0.ZCOPYRIGHT FROM ZBOOK t0 ORDER BY t0.ZAUTHOR, t0.ZTITLE
CoreData: annotation: sql connection fetch time: 0.0001s
CoreData: annotation: total fetch execution time: 0.0010s for 20 rows.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;com.apple.CoreData.SQLDebug&lt;/code&gt; takes a value between &lt;code&gt;1&lt;/code&gt; and &lt;code&gt;3&lt;/code&gt;; the higher the value, the more verbose the output. Adjust according to taste.&lt;/p&gt;

&lt;h4&gt;Syntax Colored Logging&lt;/h4&gt;

&lt;p&gt;Want your debug statements to be &lt;em&gt;even spicier&lt;/em&gt;? Toss &lt;code&gt;com.apple.CoreData.SyntaxColoredLogging&lt;/code&gt; into the mix and brace yourself for an explosion of color:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;-com.apple.CoreData.SyntaxColoredLogging YES
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Migration Debug&lt;/h4&gt;

&lt;p&gt;In any other persistence layer, migrations are a blessing. Yet, for some reason, Core Data manages to make them into something out of a nightmare. When things go wrong and you have no one to blame except your own ignorant self, unworthy of such an intuitive and well-designed &lt;del&gt;ORM&lt;/del&gt; &lt;ins&gt;graph persistence framework&lt;/ins&gt;, then here&amp;#39;s an argument you&amp;#39;ll want to pass at launch:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;-com.apple.CoreData.MigrationDebug
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;h2&gt;Environment Variables&lt;/h2&gt;

&lt;p&gt;Whereas launch arguments are specific to the executable, environment variables have a wider scope, more along the lines of a global variable (but without all of the knee-jerk derision from programmers).&lt;/p&gt;

&lt;p&gt;Configure your environment with the following settings to shape the memory management policies to aide in debugging.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Unless otherwise specified, environment variables are passed &lt;code&gt;YES&lt;/code&gt; or &lt;code&gt;NO&lt;/code&gt; to enable or disable a particular feature.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Zombies!&lt;/h3&gt;

&lt;p&gt;Over-played in popular media, under-played in Objective-C, everyone can agree that it pays to know about zombies.&lt;/p&gt;

&lt;p&gt;Setting &lt;code&gt;NSZombie&lt;/code&gt;-related environment variables allows you to control the &lt;em&gt;BRAAAAINS!&lt;/em&gt; of your app. To be more specific, when objects are deallocated, they become &amp;quot;zombified&amp;quot;, able to communicate any messages that are passed after they have been freed. This can be useful for tracing any errant &lt;code&gt;EXC_BAD_ACCESS&lt;/code&gt; exceptions you get during execution.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Effect&lt;/th&gt;&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSZombieEnabled&lt;/tt&gt;&lt;/td&gt;&lt;/td&gt;&lt;td&gt;If set to &lt;tt&gt;YES&lt;/tt&gt;, deallocated objects are &#39;zombified&#39;; this allows you to quickly debug problems where you send a message to an object that has already been freed.&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSDeallocateZombies&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;If set to &lt;tt&gt;YES&lt;/tt&gt;, the memory for &#39;zombified&#39; objects is actually freed.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3&gt;Memory Allocator&lt;/h3&gt;

&lt;p&gt;The memory allocator includes several debugging hooks that can be enabled by environment variables. As explained in Apple&amp;#39;s &lt;a href=&quot;https://developer.apple.com/library/mac/documentation/performance/Conceptual/ManagingMemory/Articles/MallocDebug.html&quot;&gt;Memory Usage Performance Guidelines&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Guard Malloc is a special version of the malloc library that replaces the standard library during debugging. Guard Malloc uses several techniques to try and crash your application at the specific point where a memory error occurs. For example, it places separate memory allocations on different virtual memory pages and then deletes the entire page when the memory is freed. Subsequent attempts to access the deallocated memory cause an immediate memory exception rather than a blind access into memory that might now hold other data. When the crash occurs, you can then go and inspect the point of failure in the debugger to identify the problem.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Here are some of the most useful ones:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Effect&lt;/th&gt;&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;MallocScribble&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;Fill allocated memory with 0xAA and scribble deallocated memory with &lt;tt&gt;0x55&lt;/tt&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;MallocGuardEdges&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;Add guard pages before and after large allocations.&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;MallocStackLogging&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;Record backtraces for each memory block to assist memory debugging tools; if the block is allocated and then immediately freed, both entries are removed from the log, which helps reduce the size of the log.&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;MallocStackLoggingNoCompact&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;Same as &lt;tt&gt;MallocStackLogging&lt;/tt&gt; but keeps all log entries.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3&gt;I/O Buffering&lt;/h3&gt;

&lt;p&gt;Although unlikely, you may come across a situation where you want logging to &lt;code&gt;stdout&lt;/code&gt; to be unbuffered (ensuring that the output has been written before continuing). You can set that with the &lt;code&gt;NSUnbufferedIO&lt;/code&gt; environment variable:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Effect&lt;/th&gt;&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSUnbufferedIO&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;If set to YES, Foundation will use unbuffered I/O for &lt;tt&gt;stdout&lt;/tt&gt; (&lt;tt&gt;stderr&lt;/tt&gt; is unbuffered by default).&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;hr&gt;

&lt;p&gt;Just as secret menus are bound by the implications of Gödel&amp;#39;s Incompleteness Theorem, it is impossible to document all of the secret incantations to get special treatment in Xcode. However, perhaps you can find a few more (and learn a &lt;em&gt;ton&lt;/em&gt; about runtime internals) by perusing Apple&amp;#39;s &lt;a href=&quot;https://developer.apple.com/library/ios/technotes/tn2239/_index.html&quot;&gt;Technical Note TN2239: iOS Debugging Magic&lt;/a&gt; and &lt;a href=&quot;https://developer.apple.com/library/mac/technotes/tn2124/_index.html&quot;&gt;Technical Note TN2124: Mac OS X Debugging Magic&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Hopefully, though, the secret knowledge you&amp;#39;ve been exposed to in this article will sustain you in your app endeavors. Use them wisely, and pass them onto your coworkers like an urban legend or juicy rumor.&lt;/p&gt;
</description>
        <pubDate>Mon, 21 Oct 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/launch-arguments-and-environment-variables/</link>
        <guid>http://nshipster.com/launch-arguments-and-environment-variables/</guid>
      </item>
    
      <item>
        <title>NSError</title>
        <description>&lt;blockquote&gt;
&lt;p&gt;To err is human.&lt;br&gt;
To &lt;code&gt;NSError&lt;/code&gt; is Cocoa.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;All programs on a Unix system are a child process of another process, forking all the way from the original process, the unmoved mover: &lt;code&gt;pid&lt;/code&gt; 1 (which in the case of Mac OS X is &lt;code&gt;launchd&lt;/code&gt;). When the executable finishes, it communicates a status code between &lt;code&gt;0&lt;/code&gt; and &lt;code&gt;255&lt;/code&gt; to its parent, as a way to communicate why or how the process exited. &lt;code&gt;0&lt;/code&gt; means &amp;quot;everything exited normally; nothing to report here&amp;quot;, while any non-zero value indicates something that the parent process should be aware of. Exit status codes may be used to indicate whether the process crashed, or terminated prematurely. By some conventions, the higher the return value, the more severe the cause of the error.&lt;/p&gt;

&lt;p&gt;In an OO paradigm processes are, for the most part, abstracted away, leaving only objects and the messages they pass between one another. That distinction between success and failure (and between different varieties of failure) is still useful in object-oriented programming. But considering that methods are often wont to return values other than &lt;code&gt;BOOL&lt;/code&gt;, this can create something of a predicament.&lt;/p&gt;

&lt;p&gt;Languages more drama-prone and trigger-happy than Objective-C reconcile this by abusing the hell out of exceptions, raising at even the slightest breach in contract. To our good fortune as Cocoanauts, however, Objective-C takes a more civilized approach when it comes to giving us bad news, and that approach is &lt;code&gt;NSError&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSError&lt;/code&gt; is the unsung hero of the Foundation framework. Passed gallantly in and out of perilous method calls, it is the messenger by which we are able to contextualize our failures. No news is good news, when it comes to such matters, but passing a &lt;code&gt;nil&lt;/code&gt; pointer to an &lt;code&gt;NSError **&lt;/code&gt; isn&amp;#39;t going to do you any favors.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSError&lt;/code&gt; is toll-free bridged with &lt;code&gt;CFError&lt;/code&gt;, but it&amp;#39;s unlikely that you&amp;#39;ll ever find a reason to dip down to its Core Foundation counterpart.&lt;/p&gt;

&lt;p&gt;Each &lt;code&gt;NSError&lt;/code&gt; object encodes three critical pieces of information: a status &lt;code&gt;code&lt;/code&gt;, corresponding to a particular error &lt;code&gt;domain&lt;/code&gt;, as well as additional context provided by a &lt;code&gt;userInfo&lt;/code&gt; dictionary.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;code&lt;/code&gt; &amp;amp; &lt;code&gt;domain&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Like exit status codes, an &lt;code&gt;NSError -code&lt;/code&gt; signals the nature of the problem. These status codes are defined within a particular error &lt;code&gt;domain&lt;/code&gt;, in order to avoid overlap and confusion. These status codes are generally defined by constants in an &lt;code&gt;enum&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For example, in the &lt;code&gt;NSCocoaErrorDomain&lt;/code&gt;, the status code for an error caused by &lt;code&gt;NSFileManager&lt;/code&gt; attempting to access a non-existant file is &lt;code&gt;4&lt;/code&gt;, as defined by &lt;code&gt;NSFileNoSuchFileError&lt;/code&gt;. However, &lt;code&gt;4&lt;/code&gt; in &lt;code&gt;NSPOSIXErrorDomain&lt;/code&gt; refers to a &lt;a href=&quot;http://250bpm.com/blog:12&quot;&gt;POSIX &lt;code&gt;EINTR&lt;/code&gt;, or &amp;quot;interupted function&amp;quot; error&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Now, anyone coming from a systems programming background may have just had a vision of a &lt;code&gt;switch&lt;/code&gt; statement with smatterings of &lt;code&gt;printf&lt;/code&gt; to translate numeric constants into something human-readable. &lt;code&gt;NSError&lt;/code&gt; is way ahead of you.  &lt;/p&gt;

&lt;h2&gt;&lt;code&gt;userInfo&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;What gives &lt;code&gt;NSError&lt;/code&gt; its particular charm is everyone&amp;#39;s favorite grab bag property: &lt;code&gt;userInfo&lt;/code&gt;. As a convention throughout Cocoa, &lt;code&gt;userInfo&lt;/code&gt; is a dictionary that contains arbitrary key-value pairs that, whether for reasons of subclassing or schematic sparsity, are not suited to full-fledged properties in and of themselves. In the case of &lt;code&gt;NSError&lt;/code&gt;, there are several special keys that correspond to &lt;code&gt;readonly&lt;/code&gt; properties.&lt;/p&gt;

&lt;p&gt;Three are generally useful:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;localizedDescription&lt;/code&gt; (&lt;code&gt;NSLocalizedDescriptionKey&lt;/code&gt;): A localized description of the error.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;localizedRecoverySuggestion&lt;/code&gt; (&lt;code&gt;NSLocalizedRecoverySuggestionErrorKey&lt;/code&gt;): A localized recovery suggestion for the error.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;localizedFailureReason&lt;/code&gt; (&lt;code&gt;NSLocalizedFailureReasonErrorKey&lt;/code&gt;): A localized explanation of the reason for the error.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;...whereas three others are specific to OS X:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;localizedRecoveryOptions&lt;/code&gt; (&lt;code&gt;NSLocalizedRecoveryOptionsErrorKey&lt;/code&gt;): An array containing the localized titles of buttons appropriate for displaying in an alert panel&lt;/li&gt;
&lt;li&gt;&lt;code&gt;recoveryAttempter&lt;/code&gt; (&lt;code&gt;NSRecoveryAttempterErrorKey&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;helpAnchor&lt;/code&gt; (&lt;code&gt;NSHelpAnchorErrorKey&lt;/code&gt;): Used by an alert panel by a help anchor button.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Here&amp;#39;s how to construct &lt;code&gt;NSError&lt;/code&gt; with a &lt;code&gt;userInfo&lt;/code&gt; dictionary: &lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userInfo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;NSLocalizedDescriptionKey:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Operation was unsuccessful.&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;NSLocalizedFailureReasonErrorKey:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;The operation timed out.&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;NSLocalizedRecoverySuggestionErrorKey:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Have you tried turning it off and on again?&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                          &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;errorWithDomain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSHipsterErrorDomain&lt;/span&gt; 
                                     &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;57&lt;/span&gt; 
                                 &lt;span class=&quot;n&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The advantage of encapsulating this information in an object like &lt;code&gt;NSError&lt;/code&gt;, as opposed to, say, throwing exceptions willy-nilly, is that these error objects can be easily passed between different objects and contexts.&lt;/p&gt;

&lt;p&gt;For example, a controller that calls a method that populates an &lt;code&gt;NSError **&lt;/code&gt; (as discussed in the next section) might pass that error into an alert view:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIAlertView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithTitle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localizedDescription&lt;/span&gt;
                            &lt;span class=&quot;nl&quot;&gt;message:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localizedRecoverySuggestion&lt;/span&gt;
                           &lt;span class=&quot;nl&quot;&gt;delegate:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;
                  &lt;span class=&quot;nl&quot;&gt;cancelButtonTitle:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;OK&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                  &lt;span class=&quot;nl&quot;&gt;otherButtonTitles:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;As a brief non-sequitur: one clever hack used by C functions to communicate errors is to &lt;a href=&quot;https://github.com/mattt/Xcode-Snippets/blob/master/checkerror.m&quot;&gt;encode 4-letter ASCII sequences in the 32 bit return type&lt;/a&gt;. It&amp;#39;s no &lt;code&gt;localizedDescription&lt;/code&gt;, but it&amp;#39;s better than cross-referencing error codes from a table every time!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;For sake of completeness: here is a list of the standard &lt;code&gt;NSError&lt;/code&gt; &lt;code&gt;userInfo&lt;/code&gt; keys:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSLocalizedDescriptionKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocalizedFailureReasonErrorKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocalizedRecoverySuggestionErrorKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocalizedRecoveryOptionsErrorKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSFilePathErrorKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSStringEncodingErrorKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSUnderlyingErrorKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSRecoveryAttempterErrorKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHelpAnchorErrorKey&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Using &lt;code&gt;NSError&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;There are two ways in which you will encounter &lt;code&gt;NSError&lt;/code&gt;: as a consumer and as a producer.&lt;/p&gt;

&lt;h3&gt;Consuming&lt;/h3&gt;

&lt;p&gt;As a consumer, you are primarily concerned with methods that have a final parameter of type &lt;code&gt;NSError **&lt;/code&gt;. Again, this is to get around the single return value constraint of Objective-C; by passing a pointer to an uninitialized &lt;code&gt;NSError *&lt;/code&gt; variable, that variable will be populated with any error the method encounters:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;moveItemAtPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/path/to/target&amp;quot;&lt;/span&gt;
                                                       &lt;span class=&quot;nl&quot;&gt;toPath:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/path/to/destination&amp;quot;&lt;/span&gt;
                                                        &lt;span class=&quot;nl&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;According to Cocoa conventions, methods returning &lt;code&gt;BOOL&lt;/code&gt; to indicate success or failure are encouraged to have a final &lt;code&gt;NSError **&lt;/code&gt; parameter if there are multiple failure conditions to distinguish between. A good guideline is whether you could imagine that &lt;code&gt;NSError&lt;/code&gt; bubbling up, and being presented to the user.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Another way &lt;code&gt;NSError&lt;/code&gt; objects are passed is the inclusion of an &lt;code&gt;NSError *&lt;/code&gt; argument in &lt;code&gt;completionHandler&lt;/code&gt; blocks. This gets around both a constraint on single value returns as well as one on that value being returned synchronously. This has become especially popular with newer Foundation APIs, like &lt;code&gt;NSURLSession&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http://example.com&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSURLRequest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requestWithURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSURLSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLSession&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sessionWithConfiguration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLSessionConfiguration&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultSessionConfiguration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataTaskWithRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;
            &lt;span class=&quot;nl&quot;&gt;completionHandler:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSURLResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resume&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Producing&lt;/h3&gt;

&lt;p&gt;One would be well-advised to follow the same conventions for error handling as other Foundation classes. In situations where a custom method invokes a method with an &lt;code&gt;NSError **&lt;/code&gt; parameter, it is usually a good idea to similarly pass that &lt;code&gt;NSError **&lt;/code&gt; parameter into the signature of the custom method. More substantial apps or libraries are encouraged to define their own error domains and error code constants as suitable.&lt;/p&gt;

&lt;p&gt;To pass an error to an &lt;code&gt;NSError **&lt;/code&gt; parameter, do the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;validateObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt; 
                 &lt;span class=&quot;nf&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__autoreleasing&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;error&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;errorWithDomain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSHipsterErrorDomain&lt;/span&gt; 
                                   &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;
                               &lt;span class=&quot;nl&quot;&gt;userInfo:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;code&gt;NSURLErrorDomain&lt;/code&gt; &amp;amp; &lt;code&gt;CFNetworkErrors&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;The greatest source of failure in iOS apps is networking. Between radios, transport, data roaming policies, proxies, security, authentication, and any number of protocol-specific negotiation, there is a lot that can go wrong.&lt;/p&gt;

&lt;p&gt;On the plus side, the Foundation URL Loading system is incredibly mature, and takes care of most of that for you. The only negative is that the documentation for all of the various things that can go wrong is scattered across different programming guides and headers. If you get a request failing with error &lt;code&gt;-1004&lt;/code&gt;, it can be &lt;em&gt;surprisingly&lt;/em&gt; difficult to figure out exactly what that means.&lt;/p&gt;

&lt;p&gt;As such, here is an exhaustive, well-formatted table at your disposal:&lt;/p&gt;

&lt;table id=&quot;CFNetworkErrors&quot;&gt;
&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorUnknown&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;1&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFHostErrorHostNotFound&lt;/tt&gt;&lt;/td&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;Indicates that the DNS lookup failed.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;2&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFHostErrorUnknown&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;An unknown error occurred (a name server failure, for example). For additional information, query the &lt;tt&gt;kCFGetAddrInfoFailureKey&lt;/tt&gt; to get the value returned from &lt;tt&gt;getaddrinfo&lt;/tt&gt;; lookup in &lt;tt&gt;netdb.h&lt;/tt&gt;&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;100&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKSErrorUnknownClientVersion&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The SOCKS server rejected access because it does not support connections with the requested SOCKS version.Query &lt;tt&gt;kCFSOCKSStatusCodeKey&lt;/tt&gt; to recover the status code returned by the server.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;101&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKSErrorUnsupportedServerVersion&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The version of SOCKS requested by the server is not supported. Query &lt;tt&gt;kCFSOCKSStatusCodeKey&lt;/tt&gt; to recover the status code returned by the server.&lt;br/&gt;Query the &lt;tt&gt;kCFSOCKSVersionKey&lt;/tt&gt; to find the version requested by the server.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;


&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;SOCKS4 Error&lt;/th&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;110&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKS4ErrorRequestFailed&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;Request rejected or failed by the server.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;111&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKS4ErrorIdentdFailed&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;Request rejected because SOCKS server cannot connect to identd on the client.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;112&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKS4ErrorIdConflict&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;Request rejected because the client program and identd report different user-ids.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;113&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKS4ErrorUnknownStatusCode&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The status code returned by the server is unknown.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;


&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;SOCKS5 Errors&lt;/th&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;120&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKS5ErrorBadState&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The stream is not in a state that allows the requested operation.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;121&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKS5ErrorBadResponseAddr&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The address type returned is not supported.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;122&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKS5ErrorBadCredentials&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The SOCKS server refused the client connection because of bad login credentials.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;123&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKS5ErrorUnsupportedNegotiationMethod&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The requested method is not supported. Query &lt;tt&gt;kCFSOCKSNegotiationMethodKey&lt;/tt&gt; to find the method requested.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;124&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFSOCKS5ErrorNoAcceptableMethod&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The client and server could not find a mutually agreeable authentication method.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;


&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;FTP Errors&lt;/th&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;200&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFFTPErrorUnexpectedStatusCode&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The server returned an unexpected status code. Query the &lt;tt&gt;kCFFTPStatusCodeKey&lt;/tt&gt; to get the status code returned by the server&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;


&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;HTTP Errors&lt;/th&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;300&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorHTTPAuthenticationTypeUnsupported&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The client and server could not agree on a supported authentication type.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;301&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorHTTPBadCredentials&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The credentials provided for an authenticated connection were rejected by the server.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;302&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorHTTPConnectionLost&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection to the server was dropped. This usually indicates a highly overloaded server.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;303&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorHTTPParseFailure&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The HTTP server response could not be parsed.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;304&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorHTTPRedirectionLoopDetected&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;Too many HTTP redirects occurred before reaching a page that did not redirect the client to another page. This usually indicates a redirect loop.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;305&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorHTTPBadURL&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The requested URL could not be retrieved.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;306&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorHTTPProxyConnectionFailure&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;A connection could not be established to the HTTP proxy.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;307&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorHTTPBadProxyCredentials&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The authentication credentials provided for logging into the proxy were rejected.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;


&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;308&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorPACFileError&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;An error occurred with the proxy autoconfiguration file.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;309&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorPACFileAuth&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The authentication credentials provided by the proxy autoconfiguration file were rejected.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;310&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFErrorHTTPSProxyConnectionFailure&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;A connection could not be established to the HTTPS proxy.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;311&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFStreamErrorHTTPSProxyFailureUnexpectedResponseToCONNECTMethod&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The HTTPS proxy returned an unexpected status code, such as a 3xx redirect.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;


&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;CFURLConnection &amp;amp; CFURLProtocol Errors&lt;/th&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-998&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorUnknown&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;An unknown error occurred.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-999&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCancelled&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCancelled&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection was cancelled.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1000&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorBadURL&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorBadURL&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed due to a malformed URL.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1001&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorTimedOut&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorTimedOut&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection timed out.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1002&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorUnsupportedURL&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorUnsupportedURL&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed due to an unsupported URL scheme.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1003&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotFindHost&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotFindHost&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because the host could not be found.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1004&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotConnectToHost&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotConnectToHost&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because a connection cannot be made to the host.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1005&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorNetworkConnectionLost&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorNetworkConnectionLost&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because the network connection was lost.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1006&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorDNSLookupFailed&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorDNSLookupFailed&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because the DNS lookup failed.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1007&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorHTTPTooManyRedirects&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorHTTPTooManyRedirects&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The HTTP connection failed due to too many redirects.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1008&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorResourceUnavailable&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorResourceUnavailable&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection’s resource is unavailable.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1009&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorNotConnectedToInternet&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorNotConnectedToInternet&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because the device is not connected to the internet.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1010&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorRedirectToNonExistentLocation&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorRedirectToNonExistentLocation&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection was redirected to a nonexistent location.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1011&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorBadServerResponse&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorBadServerResponse&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection received an invalid server response.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1012&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorUserCancelledAuthentication&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorUserCancelledAuthentication&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because the user cancelled required authentication.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1013&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorUserAuthenticationRequired&lt;/tt&gt;&lt;/td&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorUserAuthenticationRequired&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because authentication is required.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1014&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorZeroByteResource&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorZeroByteResource&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The resource retrieved by the connection is zero bytes.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1015&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotDecodeRawData&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotDecodeRawData&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection cannot decode data encoded with a known content encoding.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1016&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotDecodeContentData&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotDecodeContentData&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection cannot decode data encoded with an unknown content encoding.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1017&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotParseResponse&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotParseResponse&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection cannot parse the server’s response.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1018&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorInternationalRoamingOff&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because international roaming is disabled on the device.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1019&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCallIsActive&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because a call is active.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1020&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorDataNotAllowed&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because data use is currently not allowed on the device.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1021&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorRequestBodyStreamExhausted&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because its request’s body stream was exhausted.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;File Errors&lt;/th&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1100&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorFileDoesNotExist&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorFileDoesNotExist&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The file operation failed because the file does not exist.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1101&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorFileIsDirectory&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorFileIsDirectory&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The file operation failed because the file is a directory.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1102&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorNoPermissionsToReadFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorNoPermissionsToReadFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The file operation failed because it does not have permission to read the file.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1103&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorDataLengthExceedsMaximum&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorDataLengthExceedsMaximum&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The file operation failed because the file is too large.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;SSL Errors&lt;/th&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1200&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorSecureConnectionFailed&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorSecureConnectionFailed&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The secure connection failed for an unknown reason.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1201&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorServerCertificateHasBadDate&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorServerCertificateHasBadDate&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The secure connection failed because the server’s certificate has an invalid date.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1202&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorServerCertificateUntrusted&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorServerCertificateUntrusted&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The secure connection failed because the server’s certificate is not trusted.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1203&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorServerCertificateHasUnknownRoot&lt;/tt&gt;&lt;/td&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorServerCertificateHasUnknownRoot&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The secure connection failed because the server’s certificate has an unknown root.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1204&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorServerCertificateNotYetValid&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorServerCertificateNotYetValid&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The secure connection failed because the server’s certificate is not yet valid.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1205&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorClientCertificateRejected&lt;/tt&gt;&lt;/td&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorClientCertificateRejected&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The secure connection failed because the client’s certificate was rejected.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-1206&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorClientCertificateRequired&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorClientCertificateRequired&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The secure connection failed because the server requires a client certificate.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;Download and File I/O Errors&lt;/th&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-2000&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotLoadFromNetwork&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotLoadFromNetwork&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The connection failed because it is being required to return a cached resource, but one is not available.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-3000&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotCreateFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotCreateFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The file cannot be created.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-3001&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotOpenFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotOpenFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The file cannot be opened.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-3002&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotCloseFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotCloseFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The file cannot be closed.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-3003&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotWriteToFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotWriteToFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The file cannot be written.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-3004&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotRemoveFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotRemoveFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The file cannot be removed.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-3005&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorCannotMoveFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorCannotMoveFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The file cannot be moved.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-3006&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorDownloadDecodingFailedMidStream&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorDownloadDecodingFailedMidStream&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The download failed because decoding of the downloaded data failed mid-stream.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-3007&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFURLErrorDownloadDecodingFailedToComplete&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;tt&gt;NSURLErrorDownloadDecodingFailedToComplete&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The download failed because decoding of the downloaded data failed to complete.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;


&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;Cookie errors&lt;/th&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-4000&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFHTTPCookieCannotParseCookieFile&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The cookie file cannot be parsed.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;


&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;CFNetServices Errors&lt;/th&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-72000L&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFNetServiceErrorUnknown&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;An unknown error occurred.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-72001L&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFNetServiceErrorCollision&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;An attempt was made to use a name that is already in use.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-72002L&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFNetServiceErrorNotFound&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;&lt;em&gt;Not used.&lt;/em&gt;&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-72003L&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFNetServiceErrorInProgress&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;A new search could not be started because a search is already in progress.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-72004L&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFNetServiceErrorBadArgument&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;A required argument was not provided or was not valid.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-72005L&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFNetServiceErrorCancel&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;The search or service was cancelled.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-72006L&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFNetServiceErrorInvalid&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;Invalid data was passed to a &lt;tt&gt;CFNetServices&lt;/tt&gt; function.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-72007L&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFNetServiceErrorTimeout&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;A search failed because it timed out.&lt;/q&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td rowspan=&quot;3&quot;&gt;-73000L&lt;/td&gt;&lt;td&gt;&lt;tt&gt;kCFNetServiceErrorDNSServiceFailure&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;q&gt;An error from DNS discovery; look at &lt;tt&gt;kCFDNSServiceFailureKey&lt;/tt&gt; to get the error number and interpret using &lt;tt&gt;dnssd.h&lt;/tt&gt;&lt;/q&gt;&lt;td&gt;&lt;/td&gt; 
&lt;/table&gt;

&lt;hr&gt;

&lt;p&gt;Having scrolled down through that huge table, you might be expecting the usual NSHipster philosophical wrap-up. Not this week. Do you have any idea how long it took to compile that table? It&amp;#39;s all, like, &lt;code&gt;NSRepetitiveStrainInjury&lt;/code&gt; up in here.&lt;/p&gt;

&lt;p&gt;Such are the error of my ways.&lt;/p&gt;
</description>
        <pubDate>Mon, 14 Oct 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nserror/</link>
        <guid>http://nshipster.com/nserror/</guid>
      </item>
    
      <item>
        <title>Key-Value Observing</title>
        <description>&lt;p&gt;Ask anyone who&amp;#39;s been around the NSBlock a few times: Key-Value Observing has the &lt;em&gt;worst&lt;/em&gt; API in all of Cocoa. It&amp;#39;s awkward, verbose, and confusing. And worst of all, its terrible API belies one of the most compelling features of the framework.&lt;/p&gt;

&lt;p&gt;When dealing with complicated, stateful systems, dutiful book-keeping is essential for maintaining sanity. Lest the left hand not know what the right hand doeth, objects need some way to publish and subscribe to state changes over time.&lt;/p&gt;

&lt;p&gt;In Objective-C and Cocoa, there are a number of ways that these events are communicated, each with varying degrees of formality and coupling:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;**&lt;code&gt;NSNotification&lt;/code&gt;** &amp;amp; **&lt;code&gt;NSNotificationCenter&lt;/code&gt;** provide a centralized hub through which any part of an application may notify and be notified of changes from any other part of the application. The only requirement is to know what to look for, specifically in the name of the notification. For example, &lt;code&gt;UIApplicationDidReceiveMemoryWarningNotification
&lt;/code&gt; signals a low memory environment in an application.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Key-Value Observing&lt;/strong&gt; allows for ad-hoc, evented introspection between specific object instances by listening for changes on a particular key path. For example, a &lt;code&gt;UIProgressView&lt;/code&gt; might observe the &lt;code&gt;numberOfBytesRead&lt;/code&gt; of a network request to derive and update its own &lt;code&gt;progress&lt;/code&gt; property.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Delegates&lt;/strong&gt; are a popular pattern for signaling events over a fixed set of methods to a designated handler. For example, &lt;code&gt;UIScrollView&lt;/code&gt; sends &lt;code&gt;scrollViewDidScroll:&lt;/code&gt; to its delegate each time its scroll offset changes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Callbacks&lt;/strong&gt; of various sorts, whether block properties like &lt;code&gt;NSOperation -completionBlock&lt;/code&gt;, which trigger after &lt;code&gt;isFinished == YES&lt;/code&gt;, or C function pointers passed as hooks into functions like &lt;code&gt;SCNetworkReachabilitySetCallback(3)&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Of all of these methods, Key-Value Observing is arguably the least well-understood. So this week, NSHipster will endeavor to provide some much-needed clarification and notion of best practices to this situation. To the casual observer, this may seem an exercise in futility, but subscribers to this publication know better.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;&amp;lt;NSKeyValueObserving&amp;gt;&lt;/code&gt;, or KVO, is an informal protocol that defines a common mechanism for observing and notifying state changes between objects. As an informal protocol, you won&amp;#39;t see classes bragging about their conformance to it (it&amp;#39;s just implicitly assumed for all subclasses of &lt;code&gt;NSObject&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;The main value proposition of KVO is rather compelling: any object can subscribe to be notified about state changes in any other object. Most of this is built-in, automatic, and transparent.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For context, similar manifestations of this observer pattern are the secret sauce of most modern Javascript frameworks, such as &lt;a href=&quot;http://backbonejs.org&quot;&gt;Backbone.js&lt;/a&gt; and &lt;a href=&quot;http://emberjs.com&quot;&gt;Ember.js&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Subscribing&lt;/h2&gt;

&lt;p&gt;Objects can have observers added for a particular key path, which, as described in &lt;a href=&quot;http://nshipster.com/kvc-collection-operators/&quot;&gt;the KVC operators article&lt;/a&gt;, are dot-separated keys that specify a sequence of properties. Most of the time with KVO, these are just the top-level properties on the object.&lt;/p&gt;

&lt;p&gt;The method used to add an observer is &lt;code&gt;–addObserver:forKeyPath:options:context:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addObserver:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;observer&lt;/span&gt;
         &lt;span class=&quot;nl&quot;&gt;forKeyPath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;keyPath&lt;/span&gt;
            &lt;span class=&quot;nl&quot;&gt;options:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSKeyValueObservingOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;options&lt;/span&gt;
            &lt;span class=&quot;nl&quot;&gt;context:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;observer&lt;/code&gt;:  The object to register for KVO notifications. The observer must implement the key-value observing method observeValueForKeyPath:ofObject:change:context:.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;keyPath&lt;/code&gt;: The key path, relative to the receiver, of the property to observe. This value must not be &lt;code&gt;nil&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;options&lt;/code&gt;: A combination of the &lt;code&gt;NSKeyValueObservingOptions&lt;/code&gt; values that specifies what is included in observation notifications. For possible values, see &amp;quot;NSKeyValueObservingOptions&amp;quot;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;context&lt;/code&gt;: Arbitrary data that is passed to &lt;code&gt;observer&lt;/code&gt; in &lt;code&gt;observeValueForKeyPath:ofObject:change:context:&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Yuck. What makes this API so unsightly is the fact that those last two parameters are almost always &lt;code&gt;0&lt;/code&gt; and &lt;code&gt;NULL&lt;/code&gt;, respectively.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;options&lt;/code&gt; refers to a bitmask of &lt;code&gt;NSKeyValueObservingOptions&lt;/code&gt;. Pay particular attention to &lt;code&gt;NSKeyValueObservingOptionNew&lt;/code&gt; &amp;amp; &lt;code&gt;NSKeyValueObservingOptionOld&lt;/code&gt; as those are the options you&amp;#39;ll most likely use, if any. Feel free to skim over &lt;code&gt;NSKeyValueObservingOptionInitial&lt;/code&gt; &amp;amp; &lt;code&gt;NSKeyValueObservingOptionPrior&lt;/code&gt;:&lt;/p&gt;

&lt;h3&gt;NSKeyValueObservingOptions&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSKeyValueObservingOptionNew&lt;/code&gt;: Indicates that the change dictionary should provide the new attribute value, if applicable.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSKeyValueObservingOptionOld&lt;/code&gt;: Indicates that the change dictionary should contain the old attribute value, if applicable.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSKeyValueObservingOptionInitial&lt;/code&gt;: If specified, a notification should be sent to the observer immediately, before the observer registration method even returns.
The change dictionary in the notification will always contain an &lt;code&gt;NSKeyValueChangeNewKey&lt;/code&gt; entry if &lt;code&gt;NSKeyValueObservingOptionNew&lt;/code&gt; is also specified but will never contain an &lt;code&gt;NSKeyValueChangeOldKey&lt;/code&gt; entry. (In an initial notification the current value of the observed property may be old, but it&amp;#39;s new to the observer.) You can use this option instead of explicitly invoking, at the same time, code that is also invoked by the observer&amp;#39;s &lt;code&gt;observeValueForKeyPath:ofObject:change:context:&lt;/code&gt; method. When this option is used with &lt;code&gt;addObserver:forKeyPath:options:context:&lt;/code&gt; a notification will be sent for each indexed object to which the observer is being added.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSKeyValueObservingOptionPrior&lt;/code&gt;: Whether separate notifications should be sent to the observer before and after each change, instead of a single notification after the change.
The change dictionary in a notification sent before a change always contains an &lt;code&gt;NSKeyValueChangeNotificationIsPriorKey&lt;/code&gt; entry whose value is &lt;code&gt;@YES&lt;/code&gt;, but never contains an &lt;code&gt;NSKeyValueChangeNewKey&lt;/code&gt; entry. When this option is specified the change dictionary in a notification sent after a change contains the same entries that it would contain if this option were not specified. You can use this option when the observer&amp;#39;s own key-value observing-compliance requires it to invoke one of the &lt;code&gt;-willChange...&lt;/code&gt; methods for one of its own properties, and the value of that property depends on the value of the observed object&amp;#39;s property. (In that situation it&amp;#39;s too late to easily invoke &lt;code&gt;-willChange...&lt;/code&gt; properly in response to receiving an &lt;code&gt;observeValueForKeyPath:ofObject:change:context:&lt;/code&gt; message after the change.)&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;These options allow an object to get the values before and after the change. In practice, this is usually not necessary, since the new value is generally available from the current value of the property.&lt;/p&gt;

&lt;p&gt;That said, &lt;code&gt;NSKeyValueObservingOptionInitial&lt;/code&gt; can be helpful for reducing the code paths when responding to KVO events. For instance, if you have a method that dynamically enables a button based on the &lt;code&gt;text&lt;/code&gt; value of a field, passing &lt;code&gt;NSKeyValueObservingOptionInitial&lt;/code&gt; will have the event fire with its initial state once the observer is added.&lt;/p&gt;

&lt;p&gt;As for &lt;code&gt;context&lt;/code&gt;, this parameter is a value that can be used later to differentiate between observations of different objects with the same key path. It&amp;#39;s a bit complicated, and will be discussed later.&lt;/p&gt;

&lt;h2&gt;Responding&lt;/h2&gt;

&lt;p&gt;Another aspect of KVO that lends to its ugliness is the fact that there is no way to specify custom selectors to handle observations, as one might be used to from the Target-Action pattern used by controls.&lt;/p&gt;

&lt;p&gt;Instead, all changes for observers are funneled through a single method—&lt;code&gt;-observeValueForKeyPath:ofObject:change:context:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;observeValueForKeyPath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;keyPath&lt;/span&gt;
                      &lt;span class=&quot;nl&quot;&gt;ofObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt;
                        &lt;span class=&quot;nl&quot;&gt;change:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;change&lt;/span&gt;
                       &lt;span class=&quot;nl&quot;&gt;context:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Those parameters are the same as what were specified in &lt;code&gt;–addObserver:forKeyPath:options:context:&lt;/code&gt;, with the exception of &lt;code&gt;change&lt;/code&gt;, which are populated from whichever &lt;code&gt;NSKeyValueObservingOptions&lt;/code&gt; &lt;code&gt;options&lt;/code&gt; were used.&lt;/p&gt;

&lt;p&gt;A typical implementation of this method looks something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;observeValueForKeyPath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;keyPath&lt;/span&gt;
                      &lt;span class=&quot;nl&quot;&gt;ofObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt;
                        &lt;span class=&quot;nl&quot;&gt;change:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;change&lt;/span&gt;
                       &lt;span class=&quot;nl&quot;&gt;context:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keyPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;state&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Depending on how many kinds of objects are being observed by a single class, this method may also introduce &lt;code&gt;-isKindOfObject:&lt;/code&gt; or &lt;code&gt;-respondsToSelector:&lt;/code&gt; in order to definitively identify the kind of event being passed. However, the safest method is to do an equality check to &lt;code&gt;context&lt;/code&gt;—especially when dealing with subclasses whose parents observe the same keypath.&lt;/p&gt;

&lt;h3&gt;Correct Context Declarations&lt;/h3&gt;

&lt;p&gt;What makes a good &lt;code&gt;context&lt;/code&gt; value? Here&amp;#39;s a suggestion:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XXContext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XXContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It&amp;#39;s that simple: a static value that stores its own pointer. It means nothing on its own, which makes it rather perfect for &lt;code&gt;&amp;lt;NSKeyValueObserving&amp;gt;&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;observeValueForKeyPath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;keyPath&lt;/span&gt;
                      &lt;span class=&quot;nl&quot;&gt;ofObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt;
                        &lt;span class=&quot;nl&quot;&gt;change:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;change&lt;/span&gt;
                       &lt;span class=&quot;nl&quot;&gt;context:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XXContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keyPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isFinished&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Better Key Paths&lt;/h3&gt;

&lt;p&gt;Passing strings as key paths is strictly worse than using properties directly, as any typo or misspelling won&amp;#39;t be caught by the compiler, and will cause things to not work.&lt;/p&gt;

&lt;p&gt;A clever workaround to this is to use &lt;code&gt;NSStringFromSelector&lt;/code&gt; and a &lt;code&gt;@selector&lt;/code&gt; literal value:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isFinished&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Since &lt;code&gt;@selector&lt;/code&gt; looks through all available selectors in the target, this won&amp;#39;t prevent all mistakes, but it will catch most of them—including breaking changes made by Xcode automatic refactoring.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;observeValueForKeyPath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;keyPath&lt;/span&gt;
                      &lt;span class=&quot;nl&quot;&gt;ofObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt;
                        &lt;span class=&quot;nl&quot;&gt;change:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;change&lt;/span&gt;
                       &lt;span class=&quot;nl&quot;&gt;context:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSOperation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keyPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isFinished&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Unsubscribing&lt;/h2&gt;

&lt;p&gt;When an observer is finished listening for changes on an object, it is expected to call &lt;code&gt;–removeObserver:forKeyPath:context:&lt;/code&gt;. This will often either be called in &lt;code&gt;-observeValueForKeyPath:ofObject:change:context:&lt;/code&gt;, or &lt;code&gt;-dealloc&lt;/code&gt; (or a similar destruction method).&lt;/p&gt;

&lt;h3&gt;Safe Unsubscribe with &lt;code&gt;@try&lt;/code&gt; / &lt;code&gt;@catch&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;Perhaps the most pronounced annoyance with KVO is how it gets you at the end. If you make a call to &lt;code&gt;–removeObserver:forKeyPath:context:&lt;/code&gt; when the object is &lt;em&gt;not&lt;/em&gt; registered as an observer (whether because it was already unregistered or not registered in the first place). The kicker is that &lt;em&gt;there&amp;#39;s no built-in way to even check if an object is registered&lt;/em&gt;!&lt;/p&gt;

&lt;p&gt;Which causes one to rely on a rather unfortunate cudgel &lt;code&gt;@try&lt;/code&gt; with an unhandled &lt;code&gt;@catch&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;observeValueForKeyPath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;keyPath&lt;/span&gt;
                      &lt;span class=&quot;nl&quot;&gt;ofObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt;
                        &lt;span class=&quot;nl&quot;&gt;change:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;change&lt;/span&gt;
                       &lt;span class=&quot;nl&quot;&gt;context:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keyPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isFinished&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isFinished&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;@try&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;removeObserver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isFinished&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))];&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;@catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSException&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__unused&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exception&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Granted, &lt;em&gt;not&lt;/em&gt; handling a caught exception, as in this example, is waving the &lt;code&gt;[UIColor whiteColor]&lt;/code&gt; flag of surrender. Therefore, one should only really use this technique when faced with intermittent crashes which cannot be remedied by normal book-keeping (whether due to race conditions or undocumented behavior from a superclass).&lt;/p&gt;

&lt;h2&gt;Automatic Property Notifications&lt;/h2&gt;

&lt;p&gt;KVO is made useful by its near-universal adoption. Because of this, much of the work necessary to get everything hooked up correctly is automatically taken care of by the compiler and runtime.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Classes can opt-out of automatic KVO by overriding &lt;code&gt;+automaticallyNotifiesObserversForKey:&lt;/code&gt; and returning &lt;code&gt;NO&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;But what about compound or derived values? Let&amp;#39;s say you have an object with a &lt;code&gt;@dynamic&lt;/code&gt;, &lt;code&gt;readonly&lt;/code&gt; &lt;code&gt;address&lt;/code&gt; property, which reads and formats its &lt;code&gt;streetAddress&lt;/code&gt;, &lt;code&gt;locality&lt;/code&gt;, &lt;code&gt;region&lt;/code&gt;, and &lt;code&gt;postalCode&lt;/code&gt;?&lt;/p&gt;

&lt;p&gt;Well, you can implement the method &lt;code&gt;keyPathsForValuesAffectingAddress&lt;/code&gt; (or its less magical catch-all, &lt;code&gt;+keyPathsForValuesAffectingValueForKey:&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyPathsForValuesAffectingAddress&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setWithObjects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;streetAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locality&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;postalCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;So there you have it: some general observations and best practices for KVO. To an enterprising NSHipster, KVO can be a powerful substrate on top of which clever and powerful abstractions can be built. Use it wisely, and understand the rules and conventions to make the most of it in your own application.&lt;/p&gt;
</description>
        <pubDate>Mon, 07 Oct 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/key-value-observing/</link>
        <guid>http://nshipster.com/key-value-observing/</guid>
      </item>
    
      <item>
        <title>Xcode Key Bindings &amp; Gestures</title>
        <description>&lt;p&gt;The extent to which programming-as-craft is compared to manual disciplines like woodworking is tiresome. It&amp;#39;s absolutely the case that one should know and maintain their tools as well as a carpenter or metalsmith, but... I mean, c&amp;#39;mon. One would think that an industry demanding the skills of ninjas and rockstars would mix it up a little: &amp;quot;keep your shurikens polished, sharp, and hidden&amp;quot; or &amp;quot;tune your guitar and condition your hair twice daily&amp;quot;.&lt;/p&gt;

&lt;p&gt;Here at NSHipster, the advice is simple and only slightly allegorical: &amp;quot;Xcode is your mustache, so keep it trimmed, waxed to a sharp point, and free of bugs.&amp;quot;&lt;/p&gt;

&lt;p&gt;Anyway, a few weeks ago, we looked at how &lt;a href=&quot;http://nshipster.com/xcode-snippets/&quot;&gt;Xcode Snippets&lt;/a&gt; can make you more productive by reducing the amount of boilerplate code you have to type out. This week, we&amp;#39;re going to pick up on that thread and cover the essential key bindings and gestures. &lt;/p&gt;

&lt;p&gt;Xcode key bindings and gestures not only shave off seconds of precious work, but make you look more confident, competent, and cromulent in the process. Learn the following tricks of the trade and join the elite set of Xcode power users.&lt;/p&gt;

&lt;hr&gt;

&lt;blockquote&gt;
&lt;p&gt;For your reference, here is a legend of the common modifier key symbols (as well as a symbol for click &lt;a href=&quot;http://en.wikipedia.org/wiki/Click_consonant&quot;&gt;shamelessly borrowed from the International Phonetic Alphabet&lt;/a&gt;):&lt;/p&gt;
&lt;/blockquote&gt;

&lt;table id=&quot;xcode-key-bindings-modifiers&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Command&lt;/th&gt;
      &lt;th&gt;Control&lt;/th&gt;
      &lt;th&gt;Option&lt;/th&gt;
      &lt;th&gt;Shift&lt;/th&gt;
      &lt;th&gt;Click&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;⌘&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;⌃&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;⌥&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;⇧&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;ʘ&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2&gt;Open Quickly (&lt;code&gt;⇧⌘O&lt;/code&gt;)&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-quick-open.png&quot; alt=&quot;Open Quickly&quot;&gt;&lt;/p&gt;

&lt;p&gt;Learn to rely less on the Project Navigator by learning to love Open Quickly. There&amp;#39;s a lot to love, too—with support for partial case- and position-insensitive matches, Xcode does a great job of finding what you want with just a minimal amount of input on your part.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;Quick Documentation (&lt;code&gt;⌥ʘ&lt;/code&gt; on Symbol / Three-Finger Tap) &lt;br/&gt; Open Documentation (&lt;code&gt;⌥ʘʘ&lt;/code&gt; on Symbol)&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-quick-documentation.gif&quot; alt=&quot;Quick Documentation&quot;&gt;&lt;/p&gt;

&lt;p&gt;Quick Documentation is probably the first Xcode shortcut developers should learn. Just alt-click (or three-finger tap) any class, variable, or constant value, and Xcode will give you a quick rundown of what you&amp;#39;re looking at. Alt-double-click to bring up the documentation window, opened to the relevant entry.&lt;/p&gt;

&lt;h2&gt;Jump to Definition (&lt;code&gt;⌘ʘ&lt;/code&gt; on Symbol)&lt;/h2&gt;

&lt;p&gt;Also well-know to an expert Xcoder&amp;#39;s workflow is Jump to Definition, which opens the editor window to the relevant &lt;code&gt;@interface&lt;/code&gt; definition or constant declaration in a &lt;code&gt;.h&lt;/code&gt; file. This is especially useful for getting a raw look at system frameworks like Foundation, to get an idea of what&amp;#39;s &lt;em&gt;really&lt;/em&gt; going on behind-the-scenes.&lt;/p&gt;

&lt;h2&gt;Jump to Next Counterpart (&lt;code&gt;^⌘↑&lt;/code&gt; / &lt;code&gt;^⌘↓&lt;/code&gt; / Three-Finger Vertical Swipe)&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-counterpart.gif&quot; alt=&quot;Jump to Next Counterpart&quot;&gt;&lt;/p&gt;

&lt;p&gt;Last, but certainly not least, there&amp;#39;s Jump to Next Counterpart, which is very likely the shortcut used the most on any given day. Quickly switch between a &lt;code&gt;.h&lt;/code&gt; header and it&amp;#39;s corresponding &lt;code&gt;.m&lt;/code&gt; implementation with a simple three-finger swipe up or down (or &lt;code&gt;^⌘↑&lt;/code&gt; / &lt;code&gt;^⌘↓&lt;/code&gt; if you feel so inclined).&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;Comment Selection / Current Line (&lt;code&gt;⌘/&lt;/code&gt;)&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-comment.gif&quot; alt=&quot;Comment Selection&quot;&gt;&lt;/p&gt;

&lt;p&gt;Sure, you &lt;em&gt;could&lt;/em&gt; be debugging the &amp;quot;right way&amp;quot; by setting breakpoints and being clever with your code paths, but there&amp;#39;s quite so refreshingly simple and powerful as phasing code in and out of computational existence with a comment. Add or remove &lt;code&gt;//&lt;/code&gt; comments to the current line or selection.&lt;/p&gt;

&lt;h2&gt;Show Standard Editor (&lt;code&gt;⌘↵&lt;/code&gt;) &lt;br/&gt; Show Assistant Editor (&lt;code&gt;⌥⌘↵&lt;/code&gt;) &lt;br/&gt; Show Version Editor (&lt;code&gt;⌥⇧⌘↵&lt;/code&gt;)&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-editors.gif&quot; alt=&quot;Editors&quot;&gt;&lt;/p&gt;

&lt;p&gt;For how useful the Assistant Editor can be, surprisingly few developers can actually remember the key combo to turn it on and off. But now with &lt;code&gt;⌘↵&lt;/code&gt; and &lt;code&gt;⌥⌘↵&lt;/code&gt; fresh in your mind, you&amp;#39;ll be helping Xcode help yourself more often.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-assistant-editor-position.png&quot; alt=&quot;Assistant Editor Position&quot;&gt;&lt;/p&gt;

&lt;p&gt;As an aside, if you&amp;#39;re not big on how editors are stacking, a different horizontal or vertical arrangement can be chosen in View &amp;gt; Assistant Editor.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-panels.gif&quot; alt=&quot;Panels&quot;&gt;&lt;/p&gt;

&lt;p&gt;Sandwiching the editors on the left and right flanks, the Navigator and Utilities panels encircle your code in their loving embrace. Learning how to get them to show what&amp;#39;s useful and GTFO when needed are critical for inner peace and maximum productivity.&lt;/p&gt;

&lt;h2&gt;Show/Hide Navigator Panel (&lt;code&gt;⌘0&lt;/code&gt;)&lt;/h2&gt;

&lt;h2&gt;Select Navigator (&lt;code&gt;⌘1, ..., ⌘8&lt;/code&gt;)&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;Project Navigator&lt;/li&gt;
&lt;li&gt;Symbol Navigator&lt;/li&gt;
&lt;li&gt;Find Navigator&lt;/li&gt;
&lt;li&gt;Issue Navigator&lt;/li&gt;
&lt;li&gt;Test Navigator&lt;/li&gt;
&lt;li&gt;Debug Navigator&lt;/li&gt;
&lt;li&gt;Breakpoint Navigator&lt;/li&gt;
&lt;li&gt;Log Navigator&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Show/Hide Utilities Panel (&lt;code&gt;⌥⌘0&lt;/code&gt;)&lt;/h2&gt;

&lt;h2&gt;Select Utilities Panel (&lt;code&gt;⌥⌘1, ⌥⌘2, ...&lt;/code&gt;)&lt;/h2&gt;

&lt;h3&gt;Source File&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;File Inspector&lt;/li&gt;
&lt;li&gt;Quick Help&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;Interface Builder&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;File Inspector&lt;/li&gt;
&lt;li&gt;Quick Help&lt;/li&gt;
&lt;li&gt;Identity Inspector&lt;/li&gt;
&lt;li&gt;Attributes Inspector&lt;/li&gt;
&lt;li&gt;Size Inspector&lt;/li&gt;
&lt;li&gt;Connections Inspector&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Show / Hide Debug Area (&lt;code&gt;⇧⌘Y&lt;/code&gt;) &lt;br/&gt; Activate Console (&lt;code&gt;⇧⌘C&lt;/code&gt;)&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-debug-area.gif&quot; alt=&quot;Show / Hide Debug Area&quot;&gt;&lt;/p&gt;

&lt;p&gt;Anyone miss the option in Xcode 3 to have a detached debugger window? Yeah, me too.&lt;/p&gt;

&lt;p&gt;Knowing how to toggle the debug area and activate the console in a single keystroke may be a shallow consolation, but it does help take the edge off of the pain or loss.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;Find (&lt;code&gt;⌘F&lt;/code&gt;) /&lt;br/&gt;Find &amp;amp; Replace (&lt;code&gt;⌥⌘F&lt;/code&gt;) /&lt;br/&gt;Find in Project (&lt;code&gt;⇧⌘F&lt;/code&gt;) /&lt;br/&gt;Find &amp;amp; Replace in Project (&lt;code&gt;⌥⇧⌘F&lt;/code&gt;)&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-find.gif&quot; alt=&quot;Find&quot;&gt;&lt;/p&gt;

&lt;p&gt;For when Xcode&amp;#39;s refactoring capabilities come up short... which is to say: often. On the plus side, Xcode allows reference, definition, and regular expression search in addition to literal text.&lt;/p&gt;

&lt;h2&gt;Spelling &amp;amp; Grammar (&lt;code&gt;⌘:&lt;/code&gt;)&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-spelling-and-grammar.png&quot; alt=&quot;Spelling &amp;amp; Grammar&quot;&gt;&lt;/p&gt;

&lt;p&gt;All-powerful as Clang is, it still can&amp;#39;t help your nightmarish grammar and punctuation in your comments. Especially for anyone releasing code into the open-source wilds, do yourself a favor and give it a once-over with a built-in OS X spelling and grammar check.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-shortcuts-preferences.png&quot; alt=&quot;Xcode Shortcut Preferences&quot;&gt;&lt;/p&gt;

&lt;p&gt;But, of course, the fun doesn&amp;#39;t stop there! Like any respectable editor, Xcode allows you to customize the key bindings for every menu item and action across the app.&lt;/p&gt;

&lt;p&gt;Here are a few non-standard key bindings that you might find useful:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;^w&lt;/code&gt;: Close Document (replaces Delete to Mark)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;^⌘/&lt;/code&gt;: Show / Hide Toolbar&lt;/li&gt;
&lt;li&gt;&lt;code&gt;^⌘F&lt;/code&gt;: &lt;em&gt;None&lt;/em&gt; (removes Full Screen (at least until Mavericks))&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Got any useful or clever bindings to share? Tweet them to &lt;a href=&quot;https://twitter.com/NSHipster&quot;&gt;@NSHipster&lt;/a&gt;!&lt;/p&gt;
</description>
        <pubDate>Mon, 30 Sep 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/xcode-key-bindings-and-gestures/</link>
        <guid>http://nshipster.com/xcode-key-bindings-and-gestures/</guid>
      </item>
    
      <item>
        <title>iOS 7</title>
        <description>&lt;p&gt;With the NDA finally lifted, we can finally talk about all of the amazing new APIs in iOS 7. And there are a &lt;em&gt;lot&lt;/em&gt; of them. &amp;quot;1500 new APIs&amp;quot;, by Apple&amp;#39;s count during the WWDC Keynote. (Granted, a good portion of that could just be all of the changes from &lt;code&gt;id&lt;/code&gt; to &lt;code&gt;instancetype&lt;/code&gt;, but that&amp;#39;s a huge number, regardless).&lt;/p&gt;

&lt;p&gt;We&amp;#39;ll be going over many of the new features iOS 7 in depth over the coming weeks, but with all of the excitement around this major release, this week&amp;#39;s issue will hit on some of the gems hiding in plain sight: &lt;code&gt;NSData&lt;/code&gt; Base64 encoding, &lt;code&gt;NSURLComponents&lt;/code&gt;, &lt;code&gt;NSProgress&lt;/code&gt;, &lt;code&gt;NSProcessInfo&lt;/code&gt; activities, &lt;code&gt;CIDetectorSmile&lt;/code&gt;, &lt;code&gt;CIDetectorEyeBlink&lt;/code&gt;, &lt;code&gt;SSReadingList&lt;/code&gt;, &lt;code&gt;AVCaptureMetaDataOutput&lt;/code&gt;, &lt;code&gt;AVSpeechSynthesizer&lt;/code&gt;, and &lt;code&gt;MKDistanceFormatter&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;NSData (NSDataBase64Encoding)&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Base64&quot;&gt;Base64&lt;/a&gt; is a general term for encoding binary data as ASCII text. This is used all over the place on the web, since many core technologies are designed to support text, but not raw binary. For instance, CSS can embed images with &lt;a href=&quot;http://en.wikipedia.org/wiki/Data_URI_scheme&quot;&gt;inline &lt;code&gt;data://&lt;/code&gt; URIs&lt;/a&gt;, which are often Base64-encoded. Another example is &lt;a href=&quot;http://en.wikipedia.org/wiki/Basic_access_authentication&quot;&gt;Basic &lt;code&gt;Authentication&lt;/code&gt; headers&lt;/a&gt;, which Base64-encodes its username/password pair, which is marginally better than having them completely in the clear.&lt;/p&gt;

&lt;p&gt;For the longest time, this boringly essential function was completely MIA, leaving thousands of developers to copy-paste random code snippets from forum threads. It was an omission as conspicuous and annoying as JSON pre-iOS 5.&lt;/p&gt;

&lt;p&gt;But no longer! iOS 7 finally bakes-in Base64:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Lorem ipsum dolor sit amet.&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base64EncodedString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataUsingEncoding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUTF8StringEncoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base64EncodedStringWithOptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base64EncodedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @&amp;quot;TG9yZW0gaXBzdW0gZG9sYXIgc2l0IGFtZXQu&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;NSURLComponents &amp;amp; NSCharacterSet (NSURLUtilities)&lt;/h2&gt;

&lt;p&gt;Foundation is blessed with a wealth of functionality for working with URIs. Unfortunately, many of the APIs for manipulating URLs are strewn across &lt;code&gt;NSString&lt;/code&gt;, since &lt;code&gt;NSURL&lt;/code&gt; is immutable.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSURLComponents&lt;/code&gt; dramatically improves this situation. Think of it as &lt;code&gt;NSMutableURL&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURLComponents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLComponents&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;componentsWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http://nshipster.com&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;/iOS7&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;query&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;foo=bar&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scheme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @&amp;quot;http&amp;quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @&amp;quot;http://nshipster.com/iOS7?foo=bar&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Each property for URL components also has a &lt;code&gt;percentEncoded*&lt;/code&gt; variation (e.g. &lt;code&gt;user&lt;/code&gt; &amp;amp; &lt;code&gt;percentEncodedUser&lt;/code&gt;), which forgoes any additional URI percent encoding of special characters.&lt;/p&gt;

&lt;p&gt;Which characters are special, you ask? Well, it depends on what part of the URL you&amp;#39;re talking about. Good thing that &lt;code&gt;NSCharacterSet&lt;/code&gt; adds a new category for allowed URL characters in iOS 7:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;+ (id)URLUserAllowedCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+ (id)URLPasswordAllowedCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+ (id)URLHostAllowedCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+ (id)URLPathAllowedCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+ (id)URLQueryAllowedCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+ (id)URLFragmentAllowedCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;NSProgress&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSProgress&lt;/code&gt; is a tough class to describe. It acts as both an observer and a delegate / coordinator, acting as a handle for reporting and monitoring progress. It integrates with system-level processes on OS X, but can also be plugged into user-facing UI. It can specify handlers for pausing and canceling, which then forward onto the operation actually doing the work.&lt;/p&gt;

&lt;p&gt;Anything with a notion of completed and total units is a candidate for &lt;code&gt;NSProgress&lt;/code&gt;, whether it&amp;#39;s the bytes written to a file, the number of frames in a large render job, or the files downloaded from a server.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSProgress&lt;/code&gt; can be used to simply report overall progress in a localized way:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSProgress&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;progress&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSProgress&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;progressWithTotalUnitCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;progress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;completedUnitCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;progress&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;localizedDescription&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 42% completed&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...or it can be given a handler for stopping work entirely:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSTimer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSTimer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timerWithTimeInterval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; 
                                         &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; 
                                       &lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;incrementCompletedUnitCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; 
                                        &lt;span class=&quot;n&quot;&gt;repeats&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;progress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellationHandler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;invalidate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;progress&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;NSProgress&lt;/code&gt; makes a lot more sense in the context of Mac OS X 10.9 Mavericks, but for now, it remains a useful class for encapsulating the shared patterns of work units.&lt;/p&gt;

&lt;h2&gt;NSArray -firstObject&lt;/h2&gt;

&lt;p&gt;Rejoice! The &lt;code&gt;NSRangeException&lt;/code&gt;-dodging convenience of &lt;code&gt;-lastObject&lt;/code&gt; has finally been extended to the first member of an &lt;code&gt;NSArray&lt;/code&gt;. (Well, it &lt;em&gt;has&lt;/em&gt; been there as a private API since ~iOS 4, but that&amp;#39;s water under the bridge now).&lt;/p&gt;

&lt;p&gt;Behold!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;First Object: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Last Object: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lastObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Refreshing!&lt;/p&gt;

&lt;h2&gt;CIDetectorSmile &amp;amp; CIDetectorEyeBlink&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;As a random aside, shouldn&amp;#39;t it be a cause for concern that the device most capable of taking embarrassing photos of ourselves is also the device most capable of distributing it to millions or people? Just a thought.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Since iOS 5, the Core Image framework has provided facial detection and recognition functionality through the &lt;code&gt;CIDetector&lt;/code&gt; class. If it wasn&amp;#39;t insaneballs enough that we could detect faces in photos, in iOS 7 we can even tell if that face is smiling or has its eyes closed. *shudder*&lt;/p&gt;

&lt;p&gt;In yet another free app idea, here&amp;#39;s a snippet that might be used by a camera that only saves pictures of smiling faces:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CoreImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CIDetector&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smileDetector&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CIDetector&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detectorOfType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CIDetectorTypeFace&lt;/span&gt;
                                &lt;span class=&quot;nl&quot;&gt;context:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; 
                                &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CIDetectorTracking&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
                                          &lt;span class=&quot;n&quot;&gt;CIDetectorAccuracy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CIDetectorAccuracyLow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smileDetector&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;featuresInImage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CIDetectorSmile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;features&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CIFaceFeature&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hasSmile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIImageWriteToSavedPhotosAlbum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;didFinishWritingImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Say Cheese!&amp;quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;AVCaptureMetaDataOutput&lt;/h2&gt;

&lt;p&gt;Scan UPCs, QR codes, and barcodes of all varieties with &lt;code&gt;AVCaptureMetaDataOutput&lt;/code&gt;, new to iOS 7. All you need to do is set it up as the output of an &lt;code&gt;AVCaptureSession&lt;/code&gt;, and implement the &lt;code&gt;captureOutput:didOutputMetadataObjects:fromConnection:&lt;/code&gt; method accordingly:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AVFoundation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureSession&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;AVCaptureDevice&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;device&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureDevice&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultDeviceWithMediaType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVMediaTypeVideo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deviceInputWithDevice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;device&lt;/span&gt;
                                                                    &lt;span class=&quot;nl&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addInput&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Error: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;AVCaptureMetadataOutput&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureMetadataOutput&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setMetadataObjectsDelegate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addOutput&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setMetadataObjectTypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVMetadataObjectTypeQRCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startRunning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#pragma mark - AVCaptureMetadataOutputObjectsDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;captureOutput:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureOutput&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;captureOutput&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;didOutputMetadataObjects:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;metadataObjects&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;fromConnection:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureConnection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;connection&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;QRCode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVMetadataObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;metadata&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;metadataObjects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVMetadataObjectTypeQRCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// This will never happen; nobody has ever scanned a QR code... ever&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;QRCode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVMetadataMachineReadableCodeObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;metadata&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;QR Code: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;QRCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;AVFoundation&lt;/code&gt; supports every code you&amp;#39;ve heard of (and probably a few that you haven&amp;#39;t):&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AVMetadataObjectTypeUPCECode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AVMetadataObjectTypeCode39Code&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AVMetadataObjectTypeCode39Mod43Code&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AVMetadataObjectTypeEAN13Code&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AVMetadataObjectTypeEAN8Code&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AVMetadataObjectTypeCode93Code&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AVMetadataObjectTypeCode128Code&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AVMetadataObjectTypePDF417Code&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AVMetadataObjectTypeQRCode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AVMetadataObjectTypeAztecCode&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If nothing else, &lt;code&gt;AVCaptureMetaDataOutput&lt;/code&gt; makes it possible to easily create a Passbook pass reader for the iPhone and iPad. There&amp;#39;s still a lot of unrealized potential in Passbook, so here&amp;#39;s to hoping that this API will be a factor in more widespread adoption.&lt;/p&gt;

&lt;h2&gt;SSReadingList&lt;/h2&gt;

&lt;p&gt;Even though the number of people who have actually read something saved for later is only marginally greater than &lt;a href=&quot;http://picturesofpeoplescanningqrcodes.tumblr.com&quot;&gt;the number of people who have ever used a QR code&lt;/a&gt;, it&amp;#39;s nice that iOS 7 adds a way to add items to the Safari reading list with the new Safari Services framework.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SafariServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http://nshipster.com/ios7&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SSReadingList&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultReadingList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addReadingListItemWithURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt;
                                                        &lt;span class=&quot;nl&quot;&gt;title:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;NSHipster&amp;quot;&lt;/span&gt;
                                                  &lt;span class=&quot;nl&quot;&gt;previewText:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;...&amp;quot;&lt;/span&gt; 
                                                        &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;AVSpeechSynthesizer&lt;/h2&gt;

&lt;p&gt;Text-to-Speech has been the killer feature of computers for &lt;a href=&quot;http://nshipster.com/uiaccessibility/&quot;&gt;accessibility&lt;/a&gt; and &lt;a href=&quot;http://nshipster.com/icloud/&quot;&gt;pranking&lt;/a&gt; enthusiasts since its inception in the late 1960s.&lt;/p&gt;

&lt;p&gt;iOS 7 brings the power of Siri with the convenience of a &lt;a href=&quot;http://en.wikipedia.org/wiki/Speak_%26_Spell_%28toy%29&quot;&gt;Speak &amp;amp; Spell&lt;/a&gt; in a new class &lt;code&gt;AVSpeechSynthesizer&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechSynthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;synthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechSynthesizer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;AVSpeechUtterance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utterance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVSpeechUtterance&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechUtteranceWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Just what do you think you&amp;#39;re doing, Dave?&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;utterance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AVSpeechUtteranceMinimumSpeechRate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Tell it to me slowly&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;synthesizer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speakUtterance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utterance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;MKDistanceFormatter&lt;/h2&gt;

&lt;p&gt;Finally, we end our showcase of iOS 7&amp;#39;s new and noteworthy APIs with another class that has NSHipsters crying out &amp;quot;finally!&amp;quot;: &lt;code&gt;MKDistanceFormatter&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;As advertised, &lt;code&gt;MKDistanceFormatter&lt;/code&gt; provides a way to convert distances into localized strings using either imperial or metric units:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CoreLocation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MapKit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CLLocation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sanFrancisco&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CLLocation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithLatitude&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;37.775&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;longitude&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;122.4183333&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CLLocation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;portland&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CLLocation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithLatitude&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;45.5236111&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;longitude&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;122.675&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CLLocationDistance&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;portland&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;distanceFromLocation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sanFrancisco&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;MKDistanceFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKDistanceFormatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;units&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MKDistanceFormatterUnitsImperial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringFromDistance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 535 miles&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;So there you have it! This was just a small sample of the great new features of iOS 7. Still craving more? Check out Apple&amp;#39;s &lt;a href=&quot;https://developer.apple.com/library/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS7.html&quot;&gt;&amp;quot;What&amp;#39;s New in iOS 7&amp;quot;&lt;/a&gt; guide on the Developer Center.&lt;/p&gt;
</description>
        <pubDate>Mon, 23 Sep 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/ios7/</link>
        <guid>http://nshipster.com/ios7/</guid>
      </item>
    
      <item>
        <title>AFNetworking 2.0</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://afnetworking.com&quot;&gt;AFNetworking&lt;/a&gt; is one of the most widely used open source projects for iOS and Mac OS X development. It powers thousands of popular and critically acclaimed apps, and serves as the foundation for dozens of other great open source libraries and frameworks. With over 8,700 stars, 2,200 forks, and 130 contributors, the project is also among the most active and influential in the community.&lt;/p&gt;

&lt;p&gt;By all accounts, AFNetworking is about as mainstream as it gets.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;But have you heard about the sequel?&lt;/em&gt;&lt;br&gt;
&lt;a href=&quot;https://github.com/AFNetworking/AFNetworking/&quot;&gt;AFNetworking 2.0&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This week on NSHipster: an exclusive look at the future of AFNetworking.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Full Disclosure: NSHipster is written by the &lt;a href=&quot;https://twitter.com/mattt&quot;&gt;author of AFNetworking&lt;/a&gt;, so this is anything but an objective account of AFNetworking or its merits. What you&amp;#39;re getting is the personal, honest take of AFNetworking in its current and forthcoming releases.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;AFNetworking&amp;#39;s Big Ideas&lt;/h2&gt;

&lt;p&gt;Started in May 2011 as a humble extension of an &lt;a href=&quot;https://developer.apple.com/library/ios/samplecode/mvcnetworking/Introduction/Intro.html&quot;&gt;Apple code sample&lt;/a&gt; from a &lt;a href=&quot;http://en.wikipedia.org/wiki/Gowalla&quot;&gt;doomed location-based social network&lt;/a&gt;, AFNetworking&amp;#39;s success was a product of timing more than anything. At a time when &lt;a href=&quot;https://github.com/pokeb/asi-http-request&quot;&gt;ASIHTTPRequest&lt;/a&gt; was the de facto networking solution, AFNetworking&amp;#39;s core ideas caught on among developers looking for a more modern solution.&lt;/p&gt;

&lt;h3&gt;NSURLConnection + NSOperation&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;NSURLConnection&lt;/code&gt; is the backbone of the Foundation URL Loading system. An &lt;code&gt;NSURLConnection&lt;/code&gt; loads an &lt;code&gt;NSURLRequest&lt;/code&gt; object asynchronously, calling methods on its delegates as the &lt;code&gt;NSURLResponse&lt;/code&gt; / &lt;code&gt;NSHTTPURLResponse&lt;/code&gt; and its associated &lt;code&gt;NSData&lt;/code&gt; is sent to and loaded from the server; the delegate may also implement behavior for handling an &lt;code&gt;NSURLAuthenticationChallenge&lt;/code&gt;, a redirect responses, or determine how the associated &lt;code&gt;NSCachedURLResponse&lt;/code&gt; is stored to the shared &lt;code&gt;NSURLCache&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://nshipster.com/nsoperation&quot;&gt;&lt;code&gt;NSOperation&lt;/code&gt;&lt;/a&gt; is an abstract class that models a single unit of computation, with useful constructs like state, priority, dependencies, and cancellation.&lt;/p&gt;

&lt;p&gt;The first major breakthrough of AFNetworking was combining the two. &lt;code&gt;AFURLConnectionOperation&lt;/code&gt;, an &lt;code&gt;NSOperation&lt;/code&gt; subclass conforms to &lt;code&gt;NSURLConnectionDelegate&lt;/code&gt; methods, and tracks the state of the request from start to finish, while storing intermediary state, such as request, response, and response data.&lt;/p&gt;

&lt;h3&gt;Blocks&lt;/h3&gt;

&lt;p&gt;iOS 4 radically improved the process of developing apps with its introduction of blocks and Grand Central Dispatch. Instead of scattering implementation logic across your application with delegates, developers could localize related functionality in block properties. Rather than struggle with a miasma of threads, invocations, and operation queues, GCD could dispatch work back and forth with ease.&lt;/p&gt;

&lt;p&gt;What&amp;#39;s more, &lt;code&gt;NSURLConnectionDelegate&lt;/code&gt; methods could be customized for each request operation by setting a corresponding block property (e.g. &lt;code&gt;setWillSendRequestForAuthenticationChallengeBlock:&lt;/code&gt; to override the default implementation of &lt;code&gt;connection:willSendRequestForAuthenticationChallenge:&lt;/code&gt;)&lt;/p&gt;

&lt;p&gt;Now, an &lt;code&gt;AFURLConnectionOperation&lt;/code&gt; could be created and scheduled on an &lt;code&gt;NSOperationQueue&lt;/code&gt;, with behavior specified on what to do with the response and response data (or any error encountered during the request lifecyle) when finished by setting the new &lt;code&gt;completionBlock&lt;/code&gt; property on &lt;code&gt;NSOperation&lt;/code&gt;.&lt;/p&gt;

&lt;h3&gt;Serialization &amp;amp; Validation&lt;/h3&gt;

&lt;p&gt;Going even further, request operations could have their responsibilities extended to validate HTTP status codes and content type to validate the server response, and, for instance, serialize &lt;code&gt;NSData&lt;/code&gt; into JSON objects for responses with an &lt;code&gt;application/json&lt;/code&gt; MIME type.&lt;/p&gt;

&lt;p&gt;Loading JSON, XML, property lists, or images from the server was abstracted to more closely resemble a latent file loading operation, such that a developer could think in terms of promises rather than asynchronous networking.&lt;/p&gt;

&lt;h2&gt;Introducing AFNetworking 2.0&lt;/h2&gt;

&lt;p&gt;In many ways, AFNetworking succeeded in striking a balance between ease-of-use and extensibility. That&amp;#39;s not to say that there wasn&amp;#39;t room for improvement.&lt;/p&gt;

&lt;p&gt;With its second major release, AFNetworking aims to reconcile many of the quirks of the original design, while adding powerful new constructs to power the next generation of iOS and Mac OS X apps.&lt;/p&gt;

&lt;h3&gt;Motivations&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;NSURLSession Compatibility&lt;/strong&gt; - &lt;code&gt;NSURLSession&lt;/code&gt; is a replacement for &lt;code&gt;NSURLConnection&lt;/code&gt; introduced in iOS 7. &lt;code&gt;NSURLConnection&lt;/code&gt; isn&amp;#39;t deprecated, and likely won&amp;#39;t be for some time, but &lt;code&gt;NSURLSession&lt;/code&gt; is the future of networking in Foundation, and it&amp;#39;s a bright future at that, addressing many of the shortcomings of its predecessor. (See WWDC 2013 Session 705 &amp;quot;What’s New in Foundation Networking&amp;quot; for a good overview). Some had initially speculated that &lt;code&gt;NSURLSession&lt;/code&gt; would obviate the need for AFNetworking; although there is overlap, there is still much that a higher-level abstraction can provide. &lt;strong&gt;AFNetworking 2.0 does just this, embracing and extending &lt;code&gt;NSURLSession&lt;/code&gt; to pave over some of the rough spots, and maximize its usefulness.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Modularity&lt;/strong&gt; - One of the major criticisms of AFNetworking is how bulky it is. Although its architecture lent itself well to modularity on a class level, its packaging didn&amp;#39;t allow for individual features to be selected à la carte. Over time, &lt;code&gt;AFHTTPClient&lt;/code&gt; in particular became overburdened in its responsibilities (creating requests, serializing query string parameters, determining response parsing behavior, creating and managing operations, monitoring network reachability). &lt;strong&gt;In AFNetworking 2.0, you can pick and choose only the components you need using &lt;a href=&quot;https://github.com/CocoaPods/CocoaPods/wiki/The-podspec-format#subspecs&quot;&gt;CocoaPods subspecs&lt;/a&gt;.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Real-time&lt;/strong&gt; - With this new release, AFNetworking seeks to set an agenda for real-time functionality. In the next 18 months, real-time is going to go from being a niche feature of the top 1% to how users expect things to work by default. &lt;strong&gt;AFNetworking 2.0 follows the &lt;a href=&quot;http://rocket.github.io&quot;&gt;Rocket&lt;/a&gt; technique, which leverages web standards like &lt;a href=&quot;http://dev.w3.org/html5/eventsource/&quot;&gt;Server-Sent Events&lt;/a&gt; and &lt;a href=&quot;http://tools.ietf.org/html/rfc6902&quot;&gt;JSON Patch&lt;/a&gt; to build semantic real-time on top of existing REST web services.&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Meet the Cast&lt;/h3&gt;

&lt;h4&gt;&lt;code&gt;NSURLConnection&lt;/code&gt; Components &lt;em&gt;(iOS 6 &amp;amp; 7)&lt;/em&gt;&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AFURLConnectionOperation&lt;/code&gt; - A subclass of &lt;code&gt;NSOperation&lt;/code&gt; that manages an &lt;code&gt;NSURLConnection&lt;/code&gt; and implements its delegate methods.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AFHTTPRequestOperation&lt;/code&gt; - A subclass of &lt;code&gt;AFURLConnectionOperation&lt;/code&gt; specifically for making HTTP requests, which creates a distinction between acceptable and unacceptable status codes and content types. The main difference in 2.0 is that &lt;em&gt;you&amp;#39;ll actually use this class directly, rather than subclass it&lt;/em&gt;, for reasons explained in the &amp;quot;Serialization&amp;quot; section.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AFHTTPRequestOperationManager&lt;/code&gt; - A class that encapsulates the common patterns of communicating with a web service over HTTP, backed by &lt;code&gt;NSURLConnection&lt;/code&gt; by way of &lt;code&gt;AFHTTPRequestOperation&lt;/code&gt;. &lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;&lt;code&gt;NSURLSession&lt;/code&gt; Components &lt;em&gt;(iOS 7)&lt;/em&gt;&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AFURLSessionManager&lt;/code&gt; - A class that creates and manages an &lt;code&gt;NSURLSession&lt;/code&gt; object based on a specified &lt;code&gt;NSURLSessionConfiguration&lt;/code&gt; object, as well as data, download, and upload tasks for that session, implementing the delegate methods for both the session and its associated tasks. Because of the odd gaps in &lt;code&gt;NSURLSession&lt;/code&gt;&amp;#39;s API design, &lt;strong&gt;any code working with &lt;code&gt;NSURLSession&lt;/code&gt; would be improved by &lt;code&gt;AFURLSessionManager&lt;/code&gt;&lt;/strong&gt;. &lt;/li&gt;
&lt;li&gt;&lt;code&gt;AFHTTPSessionManager&lt;/code&gt; - A subclass of &lt;code&gt;AFURLSessionManager&lt;/code&gt; that encapsulates the common patterns of communicating with an web service over HTTP, backed by &lt;code&gt;NSURLSession&lt;/code&gt; by way of &lt;code&gt;AFURLSessionManager&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;So to recap&lt;/strong&gt;: in order to support the new &lt;code&gt;NSURLSession&lt;/code&gt; APIs as well as the old-but-not-deprecated-and-still-useful &lt;code&gt;NSURLConnection&lt;/code&gt;, the core components of AFNetworking 2.0 are split between request operation and session tasks. &lt;code&gt;AFHTTPRequestOperationManager&lt;/code&gt; and &lt;code&gt;AFHTTPSessionManager&lt;/code&gt; provide similar functionality, with nearly interchangeable interfaces that can be swapped out rather easily, should the need arise (such as porting between iOS 6 and 7).&lt;/p&gt;

&lt;p&gt;All of the other functionality previous tied up in &lt;code&gt;AFHTTPClient&lt;/code&gt;, such as serialization, security, and reachability, has been split out across several modules that are shared between &lt;code&gt;NSURLSession&lt;/code&gt; and &lt;code&gt;NSURLConnection&lt;/code&gt;-backed APIs.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;h4&gt;Serialization&lt;/h4&gt;

&lt;p&gt;One of the breakthroughs of AFNetworking 2.0&amp;#39;s new architecture is use of serializers for creating requests and parsing responses. The flexible design of serializers allows for more business logic to be transferred over to the networking layer, and for previously built-in default behavior to be easily customized.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;AFURLRequestSerializer&amp;gt;&lt;/code&gt; - Objects conforming to this protocol are used to decorate requests by translating parameters into either a query string or entity body representation, as well as setting any necessary headers. Anyone who had beef about the way &lt;code&gt;AFHTTPClient&lt;/code&gt; encoded query string parameters should find this new approach to be more to your liking.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;AFURLResponseSerializer&amp;gt;&lt;/code&gt; - Objects conforming to this protocol are responsible for validating and serializing a response and its associated data into useful representations, such as JSON objects, images, or even &lt;a href=&quot;https://github.com/blog/1299-mantle-a-model-framework-for-objective-c&quot;&gt;Mantle&lt;/a&gt;-backed model objects. Rather than endlessly subclassing &lt;code&gt;AFHTTPClient&lt;/code&gt;, &lt;code&gt;AFHTTPRequestOperation&lt;/code&gt; now has a single &lt;code&gt;responseSerializer&lt;/code&gt; property, which is set to the appropriate handler. Likewise, the &lt;a href=&quot;http://cocoadocs.org/docsets/AFNetworking/1.3.1/Classes/AFHTTPClient.html#//api/name/registerHTTPOperationClass:&quot;&gt;&lt;code&gt;NSURLProtocol&lt;/code&gt;-inspired request operation class registration nonsense&lt;/a&gt; is no more—replaced by that single delightful &lt;code&gt;responseSerializer&lt;/code&gt; property. Thank goodness.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;Security&lt;/h4&gt;

&lt;p&gt;Thanks to the contributions of &lt;a href=&quot;https://github.com/dstnbrkr&quot;&gt;Dustin Barker&lt;/a&gt;, &lt;a href=&quot;https://github.com/OliverLetterer&quot;&gt;Oliver Letterer&lt;/a&gt;, and &lt;a href=&quot;https://github.com/kcharwood&quot;&gt;Kevin Harwood&lt;/a&gt; and others, AFNetworking comes with built-in support for &lt;a href=&quot;http://blog.lumberlabs.com/2012/04/why-app-developers-should-care-about.html&quot;&gt;SSL pinning&lt;/a&gt;, which is critical for apps that deal with sensitive information.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AFSecurityPolicy&lt;/code&gt; - A class that evaluates the server trust of secure connections against its specified pinned certificates or public keys. tl;dr Add your server certificate to your app bundle to help prevent against &lt;a href=&quot;http://en.wikipedia.org/wiki/Man-in-the-middle_attack&quot;&gt;man-in-the-middle attacks&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;Reachability&lt;/h4&gt;

&lt;p&gt;Another piece of functionality now decoupled from &lt;code&gt;AFHTTPClient&lt;/code&gt; is network reachability. Now you can use it on its own, or as a property on &lt;code&gt;AFHTTPRequestOperationManager&lt;/code&gt; / &lt;code&gt;AFHTTPSessionManager&lt;/code&gt;.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AFNetworkReachabilityManager&lt;/code&gt; - This class monitors current network reachability, providing callback blocks and notifications for when reachability changes.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;Real-time&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AFEventSource&lt;/code&gt; - An Objective-C implementation of the &lt;a href=&quot;http://en.wikipedia.org/wiki/Server-sent_events&quot;&gt;&lt;code&gt;EventSource&lt;/code&gt; DOM API&lt;/a&gt;. A persistent HTTP connection is opened to a host, which streams events to the event source, to be dispatched to listeners. Messages streamed to the event source formatted as &lt;a href=&quot;http://tools.ietf.org/html/rfc6902&quot;&gt;JSON Patch&lt;/a&gt; documents are translated into arrays of &lt;code&gt;AFJSONPatchOperation&lt;/code&gt; objects. These patch operations can be applied to the persistent data set fetched from the server.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http://example.com&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;AFHTTPSessionManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;manager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AFHTTPSessionManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithBaseURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;manager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/resources&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parameters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLSessionDataTask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;responseObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resources&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObjectsFromArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;responseObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;resources&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;manager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SUBSCRIBE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/resources&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;usingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AFJSONPatchOperation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;operations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AFJSONAddOperationType&lt;/span&gt;:
                    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resources&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;nl&quot;&gt;default:&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failure&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;UIKit Extensions&lt;/h4&gt;

&lt;p&gt;All of the UIKit categories in AFNetworking 2.0 have been extracted and expanded, with several new additions to the list.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AFNetworkActivityIndicatorManager&lt;/code&gt;: Automatically start and stop the network activity indicator in the status bar as request operations and tasks begin and finish loading.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIImageView+AFNetworking&lt;/code&gt;: Adds &lt;code&gt;imageResponseSerializer&lt;/code&gt; property, which makes it easy to automatically resize or apply a filter to images loaded remotely to an image view. For example, &lt;a href=&quot;https://github.com/AFNetworking/AFCoreImageSerializer&quot;&gt;&lt;code&gt;AFCoreImageSerializer&lt;/code&gt;&lt;/a&gt; could be used to apply Core Image filters to the response image before being displayed.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIButton+AFNetworking&lt;/code&gt; &lt;em&gt;(New)&lt;/em&gt;: Similar to &lt;code&gt;UIImageView+AFNetworking&lt;/code&gt;, loads &lt;code&gt;image&lt;/code&gt; and &lt;code&gt;backgroundImage&lt;/code&gt; from remote source.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIActivityIndicatorView+AFNetworking&lt;/code&gt; &lt;em&gt;(New)&lt;/em&gt;: Automatically start and stop a &lt;code&gt;UIActivityIndicatorView&lt;/code&gt; according to the state of a specified request operation or session task.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIProgressView+AFNetworking&lt;/code&gt; &lt;em&gt;(New)&lt;/em&gt;: Automatically track the upload or download progress of a specified request operation or session task.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIWebView+AFNetworking&lt;/code&gt; &lt;em&gt;(New)&lt;/em&gt;: Provides a more sophisticated API for loading URL requests, with support for progress callbacks and content transformation.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;p&gt;Thus concludes our whirlwind tour of AFNetworking 2.0. New features for the next generation of apps, combined with a fresh new architecture for all of the existing functionality. There&amp;#39;s a lot to be excited about.&lt;/p&gt;

&lt;h3&gt;Hit the Ground Running&lt;/h3&gt;

&lt;p&gt;You can start playing around with AFNetworking 2.0 by putting the following in your &lt;a href=&quot;http://cocoapods.org&quot;&gt;&lt;code&gt;Podfile&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:ios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;7.0&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;AFNetworking&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;2.0.0&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For anyone coming over to AFNetworking from the current 1.x release, you may find &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-2.0-Migration-Guide&quot;&gt;the AFNetworking 2.0 Migration Guide&lt;/a&gt; especially useful.&lt;/p&gt;

&lt;p&gt;If you run into any bugs or general weirdness, please help by &lt;a href=&quot;https://github.com/afnetworking/afnetworking/issues?state=open&quot;&gt;opening an issue on GitHub&lt;/a&gt;. Your help will be greatly appreciated.&lt;/p&gt;

&lt;p&gt;For general usage questions, feel free tweet at &lt;a href=&quot;https://twitter.com/AFNetworking&quot;&gt;@AFNetworking&lt;/a&gt;, or email &lt;a href=&quot;mailto:m@mattt.me&quot;&gt;m@mattt.me&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Oh yeah, one more thing...&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;AFNetworking: the Definitive Guide&lt;/h2&gt;

&lt;p&gt;I&amp;#39;m thrilled to announce that AFNetworking is getting an official book! &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&amp;quot;AFNetworking: the Definitive Guide&amp;quot;&lt;/strong&gt; will be published by &lt;a href=&quot;http://oreilly.com&quot;&gt;O&amp;#39;Reilly&lt;/a&gt;, hopefully within the next couple of months. You can &lt;a href=&quot;http://eepurl.com/Flnvn&quot;&gt;sign up here to be notified by email when its available&lt;/a&gt;, or &lt;a href=&quot;https://twitter.com/AFNetworking&quot;&gt;follow @AFNetworking&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 16 Sep 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/afnetworking-2/</link>
        <guid>http://nshipster.com/afnetworking-2/</guid>
      </item>
    
      <item>
        <title>Network Link Conditioner</title>
        <description>&lt;p&gt;Product design is about empathy. Knowing what a user wants, what they like, what they dislike, what causes them frustration, and learning to understand and embody those motivations in design decisions—this is what it takes to make something insanely great.&lt;/p&gt;

&lt;p&gt;And so we invest in reaching beyond our own operational model of the world. We tailor our experience for &lt;a href=&quot;http://nshipster.com/nslocalizedstring/&quot;&gt;different locales&lt;/a&gt;. We consider the usability implications of &lt;a href=&quot;http://nshipster.com/uiaccessibility/&quot;&gt;screen readers or other assistive technologiess&lt;/a&gt;. We &lt;a href=&quot;http://nshipster.com/unit-testing/&quot;&gt;continuously evaluate&lt;/a&gt; our implementation against these expectations.&lt;/p&gt;

&lt;p&gt;There is, though, one critical factor that app developers often miss the first time around, and that is &lt;strong&gt;network condition&lt;/strong&gt;, or more specifically the latency and bandwidth of an Internet connection. For something so essential to a user&amp;#39;s experience with a product, it&amp;#39;s unfortunate that most developers take an ad-hoc approach to field testing different kinds of environments, if at all.&lt;/p&gt;

&lt;p&gt;This week on NSHipster, we&amp;#39;ll be talking about the &lt;a href=&quot;https://developer.apple.com/downloads/index.action?q=Network%20Link%20Conditioner&quot;&gt;Network Link Conditioner&lt;/a&gt;, a utility that allows Mac and iOS devices to accurately and consistently simulate adverse networking environments.&lt;/p&gt;

&lt;h2&gt;Installation&lt;/h2&gt;

&lt;p&gt;Network Link Conditioner can be found in the &amp;quot;Hardware IO Tools for Xcode&amp;quot; package. This can be downloaded from the &lt;a href=&quot;https://developer.apple.com/downloads/index.action?q=Network%20Link%20Conditioner&quot;&gt;Apple Developer Downloads&lt;/a&gt; page. &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/network-link-conditioner-download.png&quot; alt=&quot;Download&quot;&gt;&lt;/p&gt;

&lt;p&gt;Search for &amp;quot;Network Link Conditioner&amp;quot;, and select the appropriate release of the &amp;quot;Hardware IO Tools for Xcode&amp;quot; package.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/network-link-conditioner-dmg.png&quot; alt=&quot;Package&quot;&gt;&lt;/p&gt;

&lt;p&gt;Once the download has finished, open the DMG and double-click &amp;quot;Network Link Condition.prefPane&amp;quot; to install.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/network-link-conditioner-install.png&quot; alt=&quot;System Preferences&quot;&gt;&lt;/p&gt;

&lt;p&gt;From now on, you can enable the Network Link Conditioner from its preference pane at the bottom of System Preferences.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/network-link-conditioner-system-preference.png&quot; alt=&quot;Network Link Conditioner&quot;&gt;&lt;/p&gt;

&lt;p&gt;When enabled, the Network Link Conditioner can change the network environment of the iPhone Simulator according to one of the built-in presets:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;EDGE&lt;/li&gt;
&lt;li&gt;3G&lt;/li&gt;
&lt;li&gt;DSL&lt;/li&gt;
&lt;li&gt;WiFi&lt;/li&gt;
&lt;li&gt;High Latency DNS&lt;/li&gt;
&lt;li&gt;Very Bad Network&lt;/li&gt;
&lt;li&gt;100% Loss&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Each preset can set a limit for uplink or downlink &lt;a href=&quot;http://en.wikipedia.org/wiki/Bandwidth_%28computing%29&quot;&gt;bandwidth&lt;/a&gt;, &lt;a href=&quot;http%3A//en.wikipedia.org/wiki/Latency_%28engineering%29%23Communication_latency&quot;&gt;latency&lt;/a&gt;, and rate of &lt;a href=&quot;http://en.wikipedia.org/wiki/Packet_loss&quot;&gt;packet loss&lt;/a&gt; (when any value is set to 0, that value is unchanged from your computer&amp;#39;s network environment).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/network-link-conditioner-preset.png&quot; alt=&quot;Preset&quot;&gt;&lt;/p&gt;

&lt;p&gt;You can also create your own preset, if you wish to simulate a particular combination of factors simultaneously.&lt;/p&gt;

&lt;p&gt;Try running your app in the simulator with the Network Link Conditioner enabled under various presets and see what happens. How does network latency affect your app startup? What effect does bandwidth have on table view scroll performance? Does your app work at all with 100% packet loss?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If your app uses &lt;a href=&quot;https://developer.apple.com/library/ios/samplecode/Reachability/Introduction/Intro.html&quot;&gt;Reachability&lt;/a&gt; to detect network availability, you may experience some unexpected results while using the Network Link Conditioner. As such, any reachability behavior under Airplane mode or WWan / WiFi distinctions is something that should be tested separately from network conditioning.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Enabling Network Link Conditioner on iOS Devices&lt;/h2&gt;

&lt;p&gt;While the preference pane works well for developing on the simulator, it&amp;#39;s also important to test on actual devices. Fortunately, as of iOS 6, the Network Link Conditioner is available on the devices themselves.&lt;/p&gt;

&lt;p&gt;To enable it, you need to set up your device for development:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Connect your iPhone or iPad to your Mac&lt;/li&gt;
&lt;li&gt;In Xcode, go to Window &amp;gt; Organizer (⇧⌘2)&lt;/li&gt;
&lt;li&gt;Select your device in the sidebar&lt;/li&gt;
&lt;li&gt;Click &amp;quot;Use for Development&amp;quot;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/network-link-conditioner-ios.png&quot; alt=&quot;iOS Devices&quot;&gt;&lt;/p&gt;

&lt;p&gt;Now you&amp;#39;ll have access to the Developer section of the Settings app, where you&amp;#39;ll find the Network Link Conditioner (just don&amp;#39;t forget to turn it off after you&amp;#39;re done testing!).&lt;/p&gt;
</description>
        <pubDate>Mon, 09 Sep 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/network-link-conditioner/</link>
        <guid>http://nshipster.com/network-link-conditioner/</guid>
      </item>
    
      <item>
        <title>Xcode Snippets</title>
        <description>&lt;p&gt;iOS development all but requires the use of Xcode. To its credit, Xcode has improved pretty consistently over the last couple of years. Sure, &lt;a href=&quot;http://www.textfromxcode.com&quot;&gt;it still has its... quirks&lt;/a&gt;, but hey—things could be &lt;a href=&quot;http://www.eclipse.org&quot;&gt;much, much worse&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Working in an IDE may not be as cool as working in your favorite &lt;a href=&quot;http://en.wikipedia.org/wiki/Vim_(text_editor&quot;&gt;decades-old editor&lt;/a&gt;) (or &lt;a href=&quot;http://en.wikipedia.org/wiki/Emacs&quot;&gt;that other one&lt;/a&gt;), but you know what is cool? &lt;a href=&quot;http://www.textfromxcode.com/post/24542673087&quot;&gt;Autocompletion&lt;/a&gt;. Not to mention &lt;a href=&quot;http://clang-analyzer.llvm.org/xcode.html&quot;&gt;Build &amp;amp; Analyze&lt;/a&gt;, &lt;a href=&quot;https://developer.apple.com/library/ios/recipes/xcode_help-source_editor/Creating,Disabling,andDeletingBreakpoints/Creating,Disabling,andDeletingBreakpoints.html&quot;&gt;Breakpoints&lt;/a&gt;, and &lt;a href=&quot;https://developer.apple.com/library/ios/DOCUMENTATION/DeveloperTools/Conceptual/InstrumentsUserGuide/InstrumentsQuickStart/InstrumentsQuickStart.html&quot;&gt;Instruments&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This is all to say: if we&amp;#39;re resigned to use an IDE in our development workflow, we might as well make the most of it, right? So this week on NSHipster, we&amp;#39;re going to talk about one of the more powerful yet underused features of Xcode: &lt;strong&gt;Code Snippets&lt;/strong&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;From &lt;code&gt;@interface&lt;/code&gt; declarations to &lt;code&gt;if (!self) return nil;&lt;/code&gt; incantations, there is a lot of avoidable typing in Objective-C. Xcode snippets allow these common patterns and boilerplate code to be extracted for quick reuse.&lt;/p&gt;

&lt;h2&gt;Using Xcode Snippets&lt;/h2&gt;

&lt;p&gt;To see the available code snippets, show the Utilities panel, to the right of your editor. On the bottom half the Utilities panel, there will be a horizontal divider with 4 icons. &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-snippet-utilities-divider.png&quot; alt=&quot;Utilities Divider&quot;&gt;&lt;/p&gt;

&lt;p&gt;Click the &lt;code&gt;{ }&lt;/code&gt; icon to show the Code Snippets Library.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-snippet-utilties-panel.png&quot; alt=&quot;Utilities Panel&quot;&gt;&lt;/p&gt;

&lt;p&gt;There are two ways to insert a snippet into your code:&lt;/p&gt;

&lt;p&gt;You can drag and drop from the code snippets library into your editor:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-snippet-drag-and-drop.gif&quot; alt=&quot;Drag-and-Drop&quot;&gt;&lt;/p&gt;

&lt;p&gt;...or for snippets that include a text completion shortcut, you can start typing that:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-snippet-text-completion-shortcut.gif&quot; alt=&quot;Text Completion Shortcut&quot;&gt;&lt;/p&gt;

&lt;p&gt;To get a sense of what you can do with snippets, here&amp;#39;s an overview of the ones built-in to Xcode:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;C &lt;code&gt;typedef&lt;/code&gt; declarations for &lt;code&gt;enum&lt;/code&gt;, &lt;code&gt;struct&lt;/code&gt; &lt;code&gt;union&lt;/code&gt;, and blocks&lt;/li&gt;
&lt;li&gt;C control flow statements like &lt;code&gt;if&lt;/code&gt;, &lt;code&gt;if&lt;/code&gt;...&lt;code&gt;else&lt;/code&gt;, and &lt;code&gt;switch&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;C loops, such as &lt;code&gt;for&lt;/code&gt;, &lt;code&gt;while&lt;/code&gt;, and &lt;code&gt;do&lt;/code&gt;...&lt;code&gt;while&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;C inline block variable declaration&lt;/li&gt;
&lt;li&gt;Objective-C declarations for &lt;code&gt;@interface&lt;/code&gt; (including for class extensions and categories), &lt;code&gt;@implementation&lt;/code&gt;, &lt;code&gt;@protocol&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Objective-C boilerplate for KVO, including the relatively obscure &lt;code&gt;keyPathsForValuesAffecting&amp;lt;Key&amp;gt;&lt;/code&gt;, used for &lt;a href=&quot;https://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/KeyValueObserving/Articles/KVODependentKeys.html&quot;&gt;registering dependent keys&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Objective-C boilerplate for Core Data fetches, property accessors, and property validation&lt;/li&gt;
&lt;li&gt;Objective-C idioms for enumerating &lt;a href=&quot;http://nshipster.com/nsindexset/&quot;&gt;&lt;code&gt;NSIndexSet&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Objective-C incantation for &lt;code&gt;init&lt;/code&gt;, &lt;code&gt;initWithCoder:&lt;/code&gt; and &lt;code&gt;initWithFrame:&lt;/code&gt; method implementations&lt;/li&gt;
&lt;li&gt;Objective-C &lt;code&gt;@try&lt;/code&gt; / &lt;code&gt;@catch&lt;/code&gt; / &lt;code&gt;@finally&lt;/code&gt; and &lt;code&gt;@autorelease&lt;/code&gt; blocks&lt;/li&gt;
&lt;li&gt;GCD idioms for &lt;code&gt;dispatch_once&lt;/code&gt; and &lt;code&gt;dispatch_after&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Creating Xcode Snippets&lt;/h2&gt;

&lt;p&gt;Of course, what really makes snippets such a powerful feature is the ability to create your own.&lt;/p&gt;

&lt;p&gt;The process of creating a snippet is actually pretty unintuitive and difficult to explain. It uses an obscure OS X system feature that allows users to create a &amp;quot;Text Clipping&amp;quot; by dragging and dropping selected text. Much easier to just show it in action:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-snippet-create.gif&quot; alt=&quot;Text Completion Shortcut&quot;&gt;&lt;/p&gt;

&lt;p&gt;After being added to the code snippet library, a user-defined snippet can be edited by double-clicking its listing:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-snippet-editor.png&quot; alt=&quot;Text Completion Shortcut&quot;&gt;&lt;/p&gt;

&lt;p&gt;Each snippet has the following fields:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt; - The name of the snippet (appears in text completion and in snippet library listing)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Summary&lt;/strong&gt; - A brief description of what it does (appears only in snippet library listing)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Platform&lt;/strong&gt; - Limits the snippet visibility for text completion to the specified platform. OS X, iOS, or both (&amp;quot;All&amp;quot;)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Language&lt;/strong&gt; - Limits the snippet visibility for text completion to the specified language. Most commonly C, Objective-C, C++, or Objective-C++.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Completion Shortcut&lt;/strong&gt; - The text completion shortcut. For commonly-used snippets, this should be relatively short. Xcode does not warn about conflicting / overlapping shortcuts, so make sure yours doesn&amp;#39;t overlap with an existing one.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Completion Scopes&lt;/strong&gt; - Limits the snippet visibility for text completion to the specified scopes. For example, an &lt;code&gt;if&lt;/code&gt; / &lt;code&gt;else&lt;/code&gt; statement should only be auto-completed from within a method or function implementation. Any combination of the following: 

&lt;ul&gt;
&lt;li&gt;All&lt;/li&gt;
&lt;li&gt;Class Implementation&lt;/li&gt;
&lt;li&gt;Class Interface Methods&lt;/li&gt;
&lt;li&gt;Class Interface Variables&lt;/li&gt;
&lt;li&gt;Code Expression&lt;/li&gt;
&lt;li&gt;Function or Method&lt;/li&gt;
&lt;li&gt;Preprocessor Directive&lt;/li&gt;
&lt;li&gt;String or Comment&lt;/li&gt;
&lt;li&gt;Top Level&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Each Xcode snippet has a file representation in &lt;code&gt;~/Library/Developer/Xcode/UserData/CodeSnippets/&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Placeholder Tokens&lt;/h3&gt;

&lt;p&gt;Something you may have noticed in using other Xcode snippets are placeholder tokens:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/xcode-snippet-token.png&quot; alt=&quot;Placeholder Token&quot;&gt;&lt;/p&gt;

&lt;p&gt;In Xcode, placeholder tokens are delimited by &lt;code&gt;&amp;lt;#&lt;/code&gt; and &lt;code&gt;#&amp;gt;&lt;/code&gt;, with the placeholder text in the middle. Go ahead—try typing that into Xcode, and watch as the text between the octothorp tags magically transforms right in front of your eyes.&lt;/p&gt;

&lt;p&gt;Include placeholder tags to add a dash of dynamism in your own snippets!&lt;/p&gt;

&lt;h3&gt;Third-Party Xcode Snippets&lt;/h3&gt;

&lt;p&gt;A list of generally useful code snippets can be found &lt;a href=&quot;https://github.com/mattt/Xcode-Snippets&quot;&gt;in this GitHub project&lt;/a&gt; (pull requests welcome!). If nothing else, this also serves as an example of what&amp;#39;s possible.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Programming isn&amp;#39;t about being an expert typist, so don&amp;#39;t make it any more difficult for yourself than it needs to be. If you find yourself groaning while typing some inane, rote-memorized code idiom, take a minute to create a snippet for it instead!&lt;/p&gt;
</description>
        <pubDate>Mon, 02 Sep 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/xcode-snippets/</link>
        <guid>http://nshipster.com/xcode-snippets/</guid>
      </item>
    
      <item>
        <title>Equality</title>
        <description>&lt;p&gt;The concept of equality is a central point of debate and inquiry in philosophy and mathematics, with far-reaching implications for matters of ethics, justice, and public policy.&lt;/p&gt;

&lt;p&gt;From an empiricist perspective of the universe, two objects are equal if they are indistinguishable from one another in measurable observations. On a human scale, egalitarians hold that individuals should be considered equal members of the societal, economic, political, and judicial systems they inhabit.&lt;/p&gt;

&lt;p&gt;It is the task of programmers to reconcile our logical and physical understanding of equality with the semantic domains we model. There is a subtlety to the question of equality, too often overlooked. Jumping into implementation without sufficient understanding of semantics can lead to unnecessary work that produces incorrect results. Though an understanding of the mathematical and logical system underpinning is equally essential to making things work as modeled.&lt;/p&gt;

&lt;p&gt;While the temptation for all technical blog posts is to skim for headings and code samples, please take a few minutes to read and understand all of this. &lt;strong&gt;Copying relevant-looking code verbatim without knowing why its there may lead to incorrect behavior&lt;/strong&gt;. With all seriousness, equality is one of those topics—in Objective-C in particular—where there is still &lt;a href=&quot;http://stackoverflow.com/questions/254281/best-practices-for-overriding-isequal-and-hash&quot;&gt;a great deal of confusion&lt;/a&gt;.&lt;/p&gt;

&lt;h2&gt;Equality &amp;amp; Identity&lt;/h2&gt;

&lt;p&gt;First and foremost, it is important to make a distinction between &lt;em&gt;equality&lt;/em&gt; and &lt;em&gt;identity&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Two objects may be &lt;em&gt;equal&lt;/em&gt; or &lt;em&gt;equivalent&lt;/em&gt; to one another, if they share a common set of observable properties. Yet, those two objects may still be thought to be &lt;em&gt;distinct&lt;/em&gt;, each with their own &lt;em&gt;identity&lt;/em&gt;. In programming, an object&amp;#39;s identity is tied to its memory address.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSObject&lt;/code&gt; tests equality with another object with the method &lt;code&gt;isEqual:&lt;/code&gt;. In its base implementation, an equality check is essentially a test for identity. Two &lt;code&gt;NSObject&lt;/code&gt;s are considered equal if they point to the same memory address.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(Approximate)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isEqual:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For container classes like &lt;code&gt;NSArray&lt;/code&gt;, &lt;code&gt;NSDictionary&lt;/code&gt;, and &lt;code&gt;NSString&lt;/code&gt;, the expected and indeed more useful behavior would be to do a deep equality comparison, to test that each member in the collection is equal.&lt;/p&gt;

&lt;p&gt;Subclasses of &lt;code&gt;NSObject&lt;/code&gt; implementing their own &lt;code&gt;isEqual:&lt;/code&gt; method are expected to do the following:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Implement a new &lt;code&gt;isEqualTo__ClassName__:&lt;/code&gt; method, which performs the meaningful value comparison.&lt;/li&gt;
&lt;li&gt;Override &lt;code&gt;isEqual:&lt;/code&gt; to make class and object identity checks, falling back on the aforementioned value comparison method.&lt;/li&gt;
&lt;li&gt;Override &lt;code&gt;hash&lt;/code&gt;, which will be described in the next section.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Here&amp;#39;s an idea of how &lt;code&gt;NSArray&lt;/code&gt; might do this (ignoring, for this example, that as a &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/general/conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html&quot;&gt;class cluster&lt;/a&gt;, the actual implementation would be significantly more complicated):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(Approximate)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isEqualToArray:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqual&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isEqual:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The following &lt;code&gt;NSObject&lt;/code&gt; subclasses in Foundation have custom equality implementations, with the corresponding method:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSAttributedString -isEqualToAttributedString:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSData -isEqualToData:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSDate -isEqualToDate:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSDictionary -isEqualToDictionary:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHashTable -isEqualToHashTable:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSIndexSet -isEqualToIndexSet:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSNumber -isEqualToNumber:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSOrderedSet -isEqualToOrderedSet:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSSet -isEqualToSet:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSString -isEqualToString:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSTimeZone -isEqualToTimeZone:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSValue -isEqualToValue:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;When comparing two instances of any of these classes, one is encouraged to use these high-level methods rather than &lt;code&gt;isEqual:&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;However, our theoretical implementation is yet incomplete. Let&amp;#39;s turn our attention now to &lt;code&gt;hash&lt;/code&gt; (after a quick detour to clear something up about &lt;code&gt;NSString&lt;/code&gt;:&lt;/p&gt;

&lt;h3&gt;The Curious Case of &lt;code&gt;NSString&lt;/code&gt; Equality&lt;/h3&gt;

&lt;p&gt;As an interesting aside, consider the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Hello&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Hello&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wtf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// YES&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let it be perfectly clear that the correct way to compare &lt;code&gt;NSString&lt;/code&gt; objects is to use &lt;code&gt;-isEqualToString:&lt;/code&gt;. &lt;strong&gt;Under no circumstances should you compare &lt;code&gt;NSString&lt;/code&gt; with the &lt;code&gt;==&lt;/code&gt; operator.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;So what&amp;#39;s going on here? Why does this work, when the same code for &lt;code&gt;NSArray&lt;/code&gt; or &lt;code&gt;NSDictionary&lt;/code&gt; literals wouldn&amp;#39;t work?&lt;/p&gt;

&lt;p&gt;It all has to do with an optimization technique known as &lt;a href=&quot;http://en.wikipedia.org/wiki/String_interning&quot;&gt;string interning&lt;/a&gt;, whereby one copy of immutable string value is copied for each distinct value. &lt;code&gt;NSString *a&lt;/code&gt; and &lt;code&gt;*b&lt;/code&gt; point to the same copy of the interned string value &lt;code&gt;@&amp;quot;Hello&amp;quot;&lt;/code&gt;. &lt;em&gt;Note that this only works for statically defined immutable strings.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Interestingly enough, Objective-C selector names are also stored as interned strings in a shared string pool. &lt;/p&gt;

&lt;p&gt;&lt;code&gt;themoreyouknow.gif&lt;/code&gt;. &lt;/p&gt;

&lt;h2&gt;Hashing&lt;/h2&gt;

&lt;p&gt;The primary use case of object equality tests for everyday object-oriented programming is to determine collection membership. To keep this fast, subclasses with custom equality implementations are expected to implement &lt;code&gt;hash&lt;/code&gt; as well:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Object equality is &lt;em&gt;commutative&lt;/em&gt; (&lt;code&gt;[a isEqual:b]&lt;/code&gt; ⇒ &lt;code&gt;[b isEqual:a]&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;If objects are equal, then their &lt;code&gt;hash&lt;/code&gt; values must also be equal (&lt;code&gt;[a isEqual:b]&lt;/code&gt; ⇒ &lt;code&gt;[a hash] == [b hash]&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;However, the converse does not hold: two objects need not be equal in order for their hash values to be equal (&lt;code&gt;[a hash] == [b hash]&lt;/code&gt; ¬⇒ &lt;code&gt;[a isEqual:b]&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Now for a quick flashback to Computer Science 101:&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;A &lt;a href=&quot;http://en.wikipedia.org/wiki/Hash_table&quot;&gt;hash table&lt;/a&gt; is a fundamental data structure in programming, and it&amp;#39;s what enables &lt;code&gt;NSSet&lt;/code&gt; &amp;amp; &lt;code&gt;NSDictionary&lt;/code&gt; to have fast (&lt;code&gt;O(1)&lt;/code&gt;) lookup of elements.&lt;/p&gt;

&lt;p&gt;We can best understand hash tables by contrasting them to arrays: &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Arrays&lt;/strong&gt; store elements in sequential indexes, such that an Array of size &lt;code&gt;n&lt;/code&gt; will have slots at positions &lt;code&gt;0&lt;/code&gt;, &lt;code&gt;1&lt;/code&gt;, up to &lt;code&gt;n - 1&lt;/code&gt;. To determine where an element is stored in the array (if at all), each position would have to be checked one-by-one (unless the array happens to be sorted, but that&amp;#39;s another story).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Hash Tables&lt;/strong&gt; take a slightly different approach. Rather than storing elements sequentially (&lt;code&gt;0&lt;/code&gt;, &lt;code&gt;1&lt;/code&gt;, &lt;code&gt;...&lt;/code&gt;, &lt;code&gt;n-1&lt;/code&gt;), a hash table allocates &lt;code&gt;n&lt;/code&gt; positions in memory, and uses a function to calculate a position within that range. A hash function is &lt;a href=&quot;http://en.wikipedia.org/wiki/Deterministic_algorithm&quot;&gt;deterministic&lt;/a&gt;, and a &lt;em&gt;good&lt;/em&gt; hash function generates values in a relatively &lt;a href=&quot;http://en.wikipedia.org/wiki/Uniform_distribution_%28discrete%29&quot;&gt;uniform distribution&lt;/a&gt; without being too computationally expensive. A &lt;em&gt;hash collision&lt;/em&gt; occurs when two different objects calculate the same hash value. When this happens, the hash table will seek from the point of collision and place the new object in the first available place. As a hash table becomes more congested, the likelihood of collision increases, which leads to more time spent looking for a free space (hence why a hash function with a uniform distribution is so desireable).&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;One of the most common misconceptions about implementing a custom &lt;code&gt;hash&lt;/code&gt; function comes from &lt;a href=&quot;http://en.wikipedia.org/wiki/Affirming_the_consequent&quot;&gt;affirming the consequent&lt;/a&gt;, thinking that &lt;code&gt;hash&lt;/code&gt; values &lt;em&gt;must&lt;/em&gt; be distinct. This often leads to &lt;a href=&quot;http://stackoverflow.com/a/254380/157142&quot;&gt;needlessly complicated implementations involving the magical incantation of prime numbers copied from Java textbooks&lt;/a&gt;. In reality, a simple &lt;a href=&quot;http://en.wikipedia.org/wiki/Exclusive_or&quot;&gt;&lt;code&gt;XOR&lt;/code&gt;&lt;/a&gt; over the hash values of critical properties is sufficient 99% of the time. &lt;/p&gt;

&lt;p&gt;The trick is in thinking about what the critical value of an object is.&lt;/p&gt;

&lt;p&gt;For an &lt;code&gt;NSDate&lt;/code&gt;, the time interval since a reference date would be sufficient:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(Approximate)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeIntervalSinceReferenceDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For a &lt;code&gt;UIColor&lt;/code&gt;, a bit-shifted sum of RGB components is a convenient calculation:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UIColor&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(Approximate)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;green&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getRed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;red&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;green&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;green&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blue&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;red&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;green&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Implementing &lt;code&gt;-isEqual:&lt;/code&gt; and &lt;code&gt;hash&lt;/code&gt; in a Subclass&lt;/h2&gt;

&lt;p&gt;Bringing it all together, here&amp;#39;s how one might override the default equality implementation in a subclass:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;birthday&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isEqualToPerson:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isEqualToPerson:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;haveEqualNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;haveEqualBirthdays&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;birthday&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;birthday&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;birthday&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;birthday&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;haveEqualNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;haveEqualBirthdays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark - NSObject&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isEqual:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToPerson&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;birthday&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;For the curious and pedantic, see &lt;a href=&quot;http://www.mikeash.com/pyblog/friday-qa-2010-06-18-implementing-equality-and-hashing.html&quot;&gt;this post from Mike Ash&lt;/a&gt; for an explanation of how &lt;code&gt;hash&lt;/code&gt; implementations might be improved by bit-shifting or rotating composite values that may overlap.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Don&amp;#39;t Overthink It&lt;/h2&gt;

&lt;p&gt;While all of this has been an interesting exercise in epistemology and computer science, there is a lingering pragmatic detail:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;You don&amp;#39;t usually need to implement this.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;There are many situations where the default identity check (two variables point to the same address in memory) is desirable behavior. This comes as a consequence of the limitations of data modeling.&lt;/p&gt;

&lt;p&gt;Take, for instance, the previous example of the &lt;code&gt;Person&lt;/code&gt; class. It&amp;#39;s not inconceivable that two individuals would share a common name &lt;em&gt;and&lt;/em&gt; birthday. In reality, this crisis of identity would be resolved by additional information, whether it&amp;#39;s a system-dependent identifier like a Social Security Number, their parents&amp;#39; identities, or any other physical attributes.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Yet even that additional information is not entirely foolproof. After all, that person could be cloned, teleported, or whisked away into a parallel universe. Unlikely? Sure. But much of the challenge in modeling systems is dealing with imperfect assumptions. Just saying.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Ultimately, it&amp;#39;s up to the abstraction to isolate the significant, identifying features that the system cares about, and disregard the rest. The developer can then decide whether objects will be used in such a way that set membership calculations should care about. In a program that only records &lt;code&gt;name&lt;/code&gt; and &lt;code&gt;birthday&lt;/code&gt;, it may perfectly correct to treat congruent instances as distinct entities.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Hopefully, after all of this explanation, we all stand with equal footing on this slippery subject.&lt;/p&gt;

&lt;p&gt;As humans, we strive to understand and implement equality in our society and economy; in the laws and leaders that govern us; in the understanding that we extend to one another as we journey through existence. May we continue towards that ideal, where individuals are judged by the contents of their character, just as we judge a variable by the contents of its memory address.&lt;/p&gt;
</description>
        <pubDate>Mon, 26 Aug 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/equality/</link>
        <guid>http://nshipster.com/equality/</guid>
      </item>
    
      <item>
        <title>NSHashTable &amp;&lt;br/&gt;NSMapTable</title>
        <description>&lt;p&gt;&lt;code&gt;NSSet&lt;/code&gt; and &lt;code&gt;NSDictionary&lt;/code&gt;, along with &lt;code&gt;NSArray&lt;/code&gt; are the workhorse collection classes of Foundation. Unlike &lt;a href=&quot;http://en.wikipedia.org/wiki/Java_collections_framework&quot;&gt; other standard libraries&lt;/a&gt;, implementation details are &lt;a href=&quot;http://ridiculousfish.com/blog/posts/array.html&quot;&gt;hidden&lt;/a&gt; from developers, allowing them to write simple code and trust that it will be (reasonably) performant.&lt;/p&gt;

&lt;p&gt;However, even the best abstractions break down; their underlying assumptions overturned. In these cases, developers either venture further down the abstraction, or, if available use a more general-purpose solution.&lt;/p&gt;

&lt;p&gt;For &lt;code&gt;NSSet&lt;/code&gt; and &lt;code&gt;NSDictionary&lt;/code&gt;, the breaking assumption was in the memory behavior when storing objects in the collection. For &lt;code&gt;NSSet&lt;/code&gt;, objects are a strongly referenced, as are &lt;code&gt;NSDictionary&lt;/code&gt; values. Keys, on the other hand, are copied by &lt;code&gt;NSDictionary&lt;/code&gt;. If a developer wanted to store a weak value, or use a non-&lt;code&gt;&amp;lt;NSCopying&amp;gt;&lt;/code&gt;-conforming object as a key, they could be clever and use &lt;a href=&quot;http://nshipster.com/nsvalue/&quot;&gt;&lt;code&gt;NSValue +valueWithNonretainedObject&lt;/code&gt;&lt;/a&gt;. Or, as of iOS 6 (and as far back as Mac OS X 10.5), they could use &lt;code&gt;NSHashTable&lt;/code&gt; or &lt;code&gt;NSMapTable&lt;/code&gt;, the more general-case counterparts to &lt;code&gt;NSSet&lt;/code&gt; or &lt;code&gt;NSDictionary&lt;/code&gt;, respectively.&lt;/p&gt;

&lt;p&gt;So without further ado, here&amp;#39;s everything you need to know about two of the more obscure members of Foundation&amp;#39;s collection classes:&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;NSHashTable&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSHashTable&lt;/code&gt; is a general-purpose analogue of &lt;code&gt;NSSet&lt;/code&gt;. Contrasted with the behavior of &lt;code&gt;NSSet&lt;/code&gt; / &lt;code&gt;NSMutableSet&lt;/code&gt;, &lt;code&gt;NSHashTable&lt;/code&gt; has the following characteristics:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSSet&lt;/code&gt; / &lt;code&gt;NSMutableSet&lt;/code&gt; holds &lt;code&gt;strong&lt;/code&gt; references to members, which are tested for hashing and equality using the methods &lt;code&gt;hash&lt;/code&gt; and &lt;code&gt;isEqual:&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHashTable&lt;/code&gt; is mutable, without an immutable counterpart.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHashTable&lt;/code&gt; can hold &lt;code&gt;weak&lt;/code&gt; references to its members.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHashTable&lt;/code&gt; can &lt;code&gt;copy&lt;/code&gt; members on input.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHashTable&lt;/code&gt; can contain arbitrary pointers, and use pointer identity for equality and hashing checks.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Usage&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSHashTable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hashTable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSHashTable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hashTableWithOptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPointerFunctionsCopyIn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hashTable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hashTable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;bar&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hashTable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hashTable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;removeObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;bar&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Members: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hashTable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allObjects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;NSHashTable&lt;/code&gt; objects are initialized with an option for any of the following behaviors. Deprecated enum values are due to &lt;code&gt;NSHashTable&lt;/code&gt; being ported from Garbage-Collected Mac OS X to ARC-ified iOS. Other values are aliased to options defined by &lt;a href=&quot;http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSPointerFunctions_Class/Introduction/Introduction.html&quot;&gt;NSPointerFunctions&lt;/a&gt;, which will be covered next week on NSHipster.&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSHashTableStrongMemory&lt;/code&gt;: Equal to &lt;code&gt;NSPointerFunctionsStrongMemory&lt;/code&gt;. This is the default behavior, equivalent to &lt;code&gt;NSSet&lt;/code&gt; member storage.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHashTableWeakMemory&lt;/code&gt;: Equal to &lt;code&gt;NSPointerFunctionsWeakMemory&lt;/code&gt;. Uses weak read and write barriers. Using &lt;code&gt;NSPointerFunctionsWeakMemory&lt;/code&gt;, object references will turn to &lt;code&gt;NULL&lt;/code&gt; on last release.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHashTableZeroingWeakMemory&lt;/code&gt;: This option has been deprecated. Instead use the &lt;code&gt;NSHashTableWeakMemory&lt;/code&gt; option.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHashTableCopyIn&lt;/code&gt;: Use the memory acquire function to allocate and copy items on input (see &lt;a href=&quot;http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSPointerFunctions_Class/Introduction/Introduction.html#//apple_ref/occ/instp/NSPointerFunctions/acquireFunction&quot;&gt;&lt;code&gt;NSPointerFunction -acquireFunction&lt;/code&gt;&lt;/a&gt;). Equal to &lt;code&gt;NSPointerFunctionsCopyIn&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHashTableObjectPointerPersonality&lt;/code&gt;: Use shifted pointer for the hash value and direct comparison to determine equality; use the description method for a description. Equal to &lt;code&gt;NSPointerFunctionsObjectPointerPersonality&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2&gt;&lt;code&gt;NSMapTable&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSMapTable&lt;/code&gt; is a general-purpose analogue of &lt;code&gt;NSDictionary&lt;/code&gt;. Contrasted with the behavior of &lt;code&gt;NSDictionary&lt;/code&gt; / &lt;code&gt;NSMutableDictionary&lt;/code&gt;, &lt;code&gt;NSMapTable&lt;/code&gt; has the following characteristics:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSDictionary&lt;/code&gt; / &lt;code&gt;NSMutableDictionary&lt;/code&gt; copies keys, and holds strong references to values.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMapTable&lt;/code&gt; is mutable, without an immutable counterpart.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMapTable&lt;/code&gt; can hold keys and values with &lt;code&gt;weak&lt;/code&gt; references, in such a way that entries are removed when either the key or value is deallocated.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMapTable&lt;/code&gt; can &lt;code&gt;copy&lt;/code&gt; its values on input.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMapTable&lt;/code&gt; can contain arbitrary pointers, and use pointer identity for equality and hashing checks.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Usage&lt;/h3&gt;

&lt;p&gt;Instances where one might use &lt;code&gt;NSMapTable&lt;/code&gt; include non-copyable keys and storing weak references to keyed delegates or another kind of weak object.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSMapTable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapTable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMapTable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mapTableWithKeyOptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMapTableStrongMemory&lt;/span&gt;
                                             &lt;span class=&quot;nl&quot;&gt;valueOptions:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMapTableWeakMemory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapTable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Keys: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapTable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keyEnumerator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allObjects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;NSMapTable&lt;/code&gt; objects are initialized with options specifying behavior for both keys and values, using the following enum values:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSMapTableStrongMemory&lt;/code&gt;: Specifies a strong reference from the map table to its contents.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMapTableWeakMemory&lt;/code&gt;: Uses weak read and write barriers appropriate for ARC or GC. Using &lt;code&gt;NSPointerFunctionsWeakMemory&lt;/code&gt;, object references will turn to &lt;code&gt;NULL&lt;/code&gt; on last release. Equal to &lt;code&gt;NSMapTableZeroingWeakMemory&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHashTableZeroingWeakMemory&lt;/code&gt;: This option has been superseded by the &lt;code&gt;NSMapTableWeakMemory&lt;/code&gt; option.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMapTableCopyIn&lt;/code&gt;: Use the memory acquire function to allocate and copy items on input (see acquireFunction (see &lt;a href=&quot;http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSPointerFunctions_Class/Introduction/Introduction.html#//apple_ref/occ/instp/NSPointerFunctions/acquireFunction&quot;&gt;&lt;code&gt;NSPointerFunction -acquireFunction&lt;/code&gt;&lt;/a&gt;). Equal to NSPointerFunctionsCopyIn.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMapTableObjectPointerPersonality&lt;/code&gt;: Use shifted pointer hash and direct equality, object description.
Equal to &lt;code&gt;NSPointerFunctionsObjectPointerPersonality&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Subscripting&lt;/h3&gt;

&lt;p&gt;After looking at a few code examples, a clever NSHipster may have thought &amp;quot;why aren&amp;#39;t we using &lt;a href=&quot;http://nshipster.com/object-subscripting/&quot;&gt;object subscripting&lt;/a&gt;?&amp;quot;. A particularly enterprising NSHipster may even have gotten a few lines of code into implementing a subscripting category for &lt;code&gt;NSMapTable&lt;/code&gt;!&lt;/p&gt;

&lt;p&gt;So why doesn&amp;#39;t &lt;code&gt;NSMapTable&lt;/code&gt; implement subscripting? Take a look at these method signatures:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;objectForKeyedSubscript:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCopying&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;forKeyedSubscript:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCopying&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that the &lt;code&gt;key&lt;/code&gt; argument is of type &lt;code&gt;&amp;lt;NSCopying&amp;gt;&lt;/code&gt;. This is great for &lt;code&gt;NSDictionary&lt;/code&gt; &lt;code&gt;NSMutableDictionary&lt;/code&gt;, but we can&amp;#39;t make that assumption for &lt;code&gt;NSMapTable&lt;/code&gt;. And so we arrive at an impasse: with an &lt;code&gt;id &amp;lt;NSCopying&amp;gt;&lt;/code&gt; type, we can&amp;#39;t implement for &lt;code&gt;NSMapTable&lt;/code&gt;, however if object subscripting methods were to drop the &lt;code&gt;&amp;lt;NSCopying&amp;gt;&lt;/code&gt; constraint, then we would miss out on the compiler check in &lt;code&gt;NSMutableDictionary&lt;/code&gt; &lt;code&gt;-setObject:forKeyedSubscript:&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;So it goes. Honestly, in a situation where &lt;code&gt;NSMapTable&lt;/code&gt; is merited, syntactic sugar is probably the least of one&amp;#39;s concerns.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;As always, it&amp;#39;s important to remember that programming is not about being clever: always approach a problem from the highest viable level of abstraction. &lt;code&gt;NSSet&lt;/code&gt; and &lt;code&gt;NSDictionary&lt;/code&gt; are &lt;em&gt;great&lt;/em&gt; classes. For 99% of problems, they are undoubtedly the correct tool for the job. If, however, your problem has any of the particular memory management constraints described above, then &lt;code&gt;NSHashTable&lt;/code&gt; &amp;amp; &lt;code&gt;NSMapTable&lt;/code&gt; may be worth a look.&lt;/p&gt;
</description>
        <pubDate>Mon, 19 Aug 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nshashtable-and-nsmaptable/</link>
        <guid>http://nshipster.com/nshashtable-and-nsmaptable/</guid>
      </item>
    
      <item>
        <title>rand(3) / random(3) / arc4random(3) / et al.</title>
        <description>&lt;p&gt;What passes for randomness is merely a hidden chain of causality.&lt;/p&gt;

&lt;p&gt;In a mechanical universe of material interactions expressed through mathematical equations, it is unclear whether nature encodes an element of chance, or if it&amp;#39;s a uniquely human way to reconcile uncertainty.&lt;/p&gt;

&lt;p&gt;We can be sure of one thing, however: in the closed, digital universe of CPU cycles, processes, and threads, there is no true randomness, only &lt;em&gt;pseudorandomness&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Pseudorandomness, is often implemented in a way very similar to a &lt;a href=&quot;http://en.wikipedia.org/wiki/Cryptographic_hash_function&quot;&gt;cryptographic hash&lt;/a&gt;, as a deterministic function that returns a value based on the current time (salted, of course, by some initial seed value). Also like hash functions, there are a number of &lt;acronym&gt;PRNG&lt;/acronym&gt;, or pseudorandom number generators, each of which are optimized for particular performance characteristics: uniformity, periodicity, and computational complexity.&lt;/p&gt;

&lt;p&gt;Of course, for app developers, all of this is an academic exercise. And rather than bore you with any more high-minded, long-winded treatises on the philosophical nature of randomness, we&amp;#39;re going to tackle this one FAQ-style.&lt;/p&gt;

&lt;p&gt;Our goal this week: to clear up all of the lingering questions and misunderstandings about doing random things in Objective-C. Let&amp;#39;s dive in!&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;How Do I Generate a Random Number in Objective-C?&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;tl;dr&lt;/em&gt;: &lt;strong&gt;Use &lt;code&gt;arc4random()&lt;/code&gt; and its related functions.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Specifically, to generate a random number between &lt;code&gt;0&lt;/code&gt; and &lt;code&gt;N - 1&lt;/code&gt;, use &lt;code&gt;arc4random_uniform()&lt;/code&gt;, which avoids &lt;a href=&quot;http://eternallyconfuzzled.com/arts/jsw_art_rand.aspx&quot;&gt;modulo bias&lt;/a&gt;.&lt;/p&gt;

&lt;h3&gt;Random &lt;code&gt;int&lt;/code&gt; between &lt;code&gt;0&lt;/code&gt; and &lt;code&gt;N - 1&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arc4random_uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Random &lt;code&gt;int&lt;/code&gt; between &lt;code&gt;1&lt;/code&gt; and &lt;code&gt;N&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arc4random_uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Random &lt;code&gt;double&lt;/code&gt; between &lt;code&gt;0&lt;/code&gt; and &lt;code&gt;1&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;If you are generating a random &lt;code&gt;double&lt;/code&gt; or &lt;code&gt;float&lt;/code&gt;, another good option are the more obscure &lt;code&gt;rand48&lt;/code&gt; family of functions, including &lt;code&gt;drand48(3)&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;srand48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;drand48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;rand48&lt;/code&gt; functions, unlike &lt;code&gt;arc4random&lt;/code&gt; functions, require an initial value to be seeded before generating random numbers. This seed function, &lt;code&gt;srand48(3)&lt;/code&gt;, should only be run once.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;How Do I Pick a Random Element from an &lt;code&gt;NSArray&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Use &lt;code&gt;arc4random_uniform(3)&lt;/code&gt; to generate a random number in the range of a non-empty array.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arc4random_uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;How Do I Randomly Order an &lt;code&gt;NSArray&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arrayWithArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// See http://en.wikipedia.org/wiki/Fisher–Yates_shuffle&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exchangeObjectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;withObjectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arc4random_uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int32_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))];&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randomArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arrayWithArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;This code is borrowed from &lt;a href=&quot;https://github.com/mattt/TTTRandomizedEnumerator&quot;&gt;TTTRandomizedEnumerator&lt;/a&gt;, which also provides randomized enumerators for &lt;code&gt;NSSet&lt;/code&gt;, &lt;code&gt;NSOrderedSet&lt;/code&gt;, and &lt;code&gt;NSDictionary&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;How Do I Generate a Random String?&lt;/h2&gt;

&lt;p&gt;If you&amp;#39;re looking to generate &amp;quot;&lt;a href=&quot;http://en.wikipedia.org/wiki/Lorem_ipsum&quot;&gt;lorem ipsum&lt;/a&gt;&amp;quot;-style sentences, try constructing a &lt;a href=&quot;http://en.wikipedia.org/wiki/Markov_chain&quot;&gt;Markov Chain&lt;/a&gt; from a &lt;a href=&quot;http://en.wikipedia.org/wiki/Text_corpus&quot;&gt;corpus&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Otherwise, if you&amp;#39;re looking to just get random letters, try one of the following methods:&lt;/p&gt;

&lt;h3&gt;Generate a Random Lowercase &lt;code&gt;NSString&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;If you are operating on a known, contiguous range of Unicode characters, such as the lowercase letters (&lt;code&gt;U+0061&lt;/code&gt; — &lt;code&gt;U+007A&lt;/code&gt;), you can do a simple conversion from a &lt;code&gt;char&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%c&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arc4random_uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sc&quot;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Pick a Random Character From an &lt;code&gt;NSString&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;Otherwise, a simple way to pick random letters from a set of your choosing is to simply create a string containing all of the possible letters:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vowels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;aeiouy&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vowels&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;substringWithRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arc4random_uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vowels&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Why Should I Use &lt;code&gt;arc4random(3)&lt;/code&gt; instead of &lt;code&gt;rand(3)&lt;/code&gt; or &lt;code&gt;random(3)&lt;/code&gt;?&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;C functions are typically denoted with a number &lt;code&gt;3&lt;/code&gt; inside of parentheses, following the organizational convention of &lt;a href=&quot;http://en.wikipedia.org/wiki/Man_page#Manual_sections&quot;&gt;&lt;code&gt;man&lt;/code&gt; pages&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;arc4random&lt;/code&gt; does not require an initial seed (with &lt;code&gt;srand&lt;/code&gt; or &lt;code&gt;srandom&lt;/code&gt;), making it that much easier to use.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;arc4random&lt;/code&gt; has a range up to &lt;code&gt;0x100000000 (4294967296)&lt;/code&gt;, whereas &lt;code&gt;rand&lt;/code&gt; and &lt;code&gt;random&lt;/code&gt; top out at &lt;code&gt;RAND_MAX = 0x7fffffff (2147483647)&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rand&lt;/code&gt; has often been implementated in such a way that regularly cycles low bits, making it more predictable.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;What are &lt;code&gt;rand(3)&lt;/code&gt;, &lt;code&gt;random(3)&lt;/code&gt;, and &lt;code&gt;arc4random(3)&lt;/code&gt;, and Where Do They Come From?&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rand&lt;/code&gt; is a standard C function.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;random&lt;/code&gt; is &lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/009695399/functions/initstate.html&quot;&gt;defined as part of the POSIX standard&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;arc4random&lt;/code&gt; is provided in BSD and derived platforms.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;p&gt;If you have any additional questions about randomness on Objective-C, feel free to tweet &lt;a href=&quot;https://twitter.com/NSHipster&quot;&gt;@NSHipster&lt;/a&gt;. As always, corrections are welcome in the form of a &lt;a href=&quot;https://github.com/NSHipster/articles/pulls&quot;&gt;pull request&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 12 Aug 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/random/</link>
        <guid>http://nshipster.com/random/</guid>
      </item>
    
      <item>
        <title>Documentation</title>
        <description>&lt;p&gt;There&amp;#39;s an adage among Cocoa developers that Objective-C&amp;#39;s verbosity lends its code to being effectively self-documenting. Between &lt;code&gt;longMethodNamesWithNamedParameters:&lt;/code&gt; and the explicit typing of those parameters, Objective-C methods don&amp;#39;t leave much to the imagination.&lt;/p&gt;

&lt;p&gt;But even self-documenting code can be improved with documentation, and just a small amount of effort can yield significant benefit to others.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Listen&lt;/strong&gt;—I know programmers don&amp;#39;t like to be told what to do, and prescriptive arguments of &amp;quot;thou shalt&amp;quot; and &amp;quot;thou shalt not&amp;quot; have the &lt;a href=&quot;http://www.youtube.com/watch?v=ss2hULhXf04&quot;&gt;rhetorical impact of a trombone&lt;/a&gt;, so I&amp;#39;ll cut to the chase:&lt;/p&gt;

&lt;p&gt;Do you like Apple&amp;#39;s documentation? Don&amp;#39;t you want that &lt;a href=&quot;http://cocoadocs.org/docsets/AFNetworking/1.3.1/Classes/AFHTTPClient.html&quot;&gt;for your own libraries?&lt;/a&gt; Follow just a few simple conventions, and your code can get the documentation it deserves.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Every modern programming language has comments: non-executable natural language annotations denoted by a special character sequence, such as &lt;code&gt;//&lt;/code&gt;, &lt;code&gt;/* */&lt;/code&gt;, &lt;code&gt;#&lt;/code&gt;, and &lt;code&gt;--&lt;/code&gt;. Documentation provides auxiliary explanation and context to code using specially-formatted comments, which can be extracted and parsed by a build tool.&lt;/p&gt;

&lt;p&gt;In Objective-C, the documentation tool of choice is &lt;a href=&quot;https://github.com/tomaz/appledoc&quot;&gt;&lt;code&gt;appledoc&lt;/code&gt;&lt;/a&gt;. Using a &lt;a href=&quot;http://en.wikipedia.org/wiki/Javadoc&quot;&gt;Javadoc&lt;/a&gt;-like syntax, &lt;code&gt;appledoc&lt;/code&gt; is able to generate HTML and Xcode-compatible &lt;code&gt;.docset&lt;/code&gt; docs from &lt;code&gt;.h&lt;/code&gt; files that &lt;a href=&quot;http://cocoadocs.org/docsets/AFNetworking/1.3.1/Classes/AFHTTPClient.html&quot;&gt;look nearly identical&lt;/a&gt; to &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html&quot;&gt;Apple&amp;#39;s official documentation&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://www.stack.nl/%7Edimitri/doxygen/&quot;&gt;Doxygen&lt;/a&gt;, used primarily for C++, is another viable option for Objective-C, but is generally dispreffered by the iOS / Mac OS X developer community.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Here are some examples from well-documented Objective-C projects:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPSessionManager.h&quot;&gt;&lt;code&gt;AFHTTPSessionManager.h&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/marcransome/MRBrew/blob/master/MRBrew/MRBrew.h&quot;&gt;&lt;code&gt;MRBrew.h&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/groue/GRMustache/blob/master/src/classes/GRMustache.h&quot;&gt;&lt;code&gt;GRMustache.h&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mattt/FormatterKit/blob/master/FormatterKit/TTTAddressFormatter.h&quot;&gt;&lt;code&gt;TTTAddressFormatter.h&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Guidelines for Writing Objective-C Documentation&lt;/h2&gt;

&lt;p&gt;Objective-C documentation is designated by a &lt;code&gt;/** */&lt;/code&gt; comment block (note the extra initial star), which precedes any &lt;code&gt;@interface&lt;/code&gt; or &lt;code&gt;@protocol&lt;/code&gt;, as well as any method or &lt;code&gt;@property&lt;/code&gt; declarations.&lt;/p&gt;

&lt;p&gt;For classes, categories, and protocols, documentation should describe the purpose of that particular component, offering suggestions and guidelines for how it should be used. Structure it like a news article: start with a top-level &amp;quot;tweet-sized&amp;quot; overview, and then explore further topics in more detail as necessary. Concerns like how a class should (or should not) be subclassed, or any caveats in behavior for standard protocols (like &lt;code&gt;NSCopying&lt;/code&gt;) should always be documented.&lt;/p&gt;

&lt;p&gt;Each method should similarly begin with a concise description of its functionality, followed by any caveats or additional details. Method documentation also contains Javadoc-style &lt;code&gt;@&lt;/code&gt; labels for common fields like parameters and return value:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@param [param] [Description]&lt;/code&gt;: Describes what value should be passed for this parameter&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@return [Description]&lt;/code&gt;: Describes the return value of the method&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@see [selector]&lt;/code&gt;: Provide &amp;quot;see also&amp;quot; reference to related method&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@warning [description]&lt;/code&gt;: Call out exceptional or potentially dangerous behavior&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Properties are often described in a single sentence, and should include what its default value is.&lt;/p&gt;

&lt;p&gt;Related properties and methods should be grouped by an &lt;code&gt;@name&lt;/code&gt; declaration, which functions similarly to a &lt;a href=&quot;http://nshipster.com/pragma/&quot;&gt;&lt;code&gt;#pragma mark&lt;/code&gt;&lt;/a&gt;, and can be used with the triple-slash (&lt;code&gt;///&lt;/code&gt;) comment variant.&lt;/p&gt;

&lt;p&gt;Try reading other documentation before writing some yourself, in order to get a sense of the correct tone and style. When in doubt about terminology or verbiage, follow the lead of the closest thing you can find from Apple&amp;#39;s official docs.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;To help speed up the process of documenting your project, you may want to check out the &lt;a href=&quot;https://github.com/onevcat/VVDocumenter-Xcode&quot;&gt;VVDocumenter-Xcode&lt;/a&gt; project, which &lt;a href=&quot;https://raw.github.com/onevcat/VVDocumenter-Xcode/master/ScreenShot.gif&quot;&gt;automatically adds &lt;code&gt;@param&lt;/code&gt; and &lt;code&gt;@return&lt;/code&gt; labels&lt;/a&gt; for methods according to their signature.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;Just by following these simple guidelines, you can add great-looking, informative documentation to your own project. Once you get the hang of it, you&amp;#39;ll find yourself cranking docs out in no time.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Thanks to &lt;a href=&quot;https://github.com/orta&quot;&gt;@orta&lt;/a&gt; for suggesting this week&amp;#39;s topic, and for his ongoing work on &lt;a href=&quot;http://cocoadocs.org&quot;&gt;CocoaDocs&lt;/a&gt; which provides automatically-generated documentation for projects published on &lt;a href=&quot;http://cocoapods.org&quot;&gt;CocoaPods&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 05 Aug 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/documentation/</link>
        <guid>http://nshipster.com/documentation/</guid>
      </item>
    
      <item>
        <title>NSHipster Quiz #3</title>
        <description>&lt;p&gt;NSHipster Pub Quiz came to New York City on July 30th. Like our &lt;a href=&quot;http://nshipster.com/nshipster-quiz-1/&quot;&gt;first&lt;/a&gt; and &lt;a href=&quot;http://nshipster.com/nshipster-quiz-2/&quot;&gt;second&lt;/a&gt; quizzes, questions ranged from random Apple trivia to obscure framework questions—this time, with a particular focus on hardware rumors and questions about iOS [REDACTED].&lt;/p&gt;

&lt;p&gt;The event was hosted by &lt;a href=&quot;http://meetup.com&quot;&gt;Meetup&lt;/a&gt;, and sponsored by &lt;a href=&quot;https://heroku.com&quot;&gt;Heroku&lt;/a&gt;. Dozens of the best and brightest minds in Objective-C attended the event, with the team &amp;quot;The Forstall Five&amp;quot; (&lt;a href=&quot;https://twitter.com/mb&quot;&gt;@mb&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/bcapps&quot;&gt;@bcapps&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/ethicalpaul&quot;&gt;@ethicalpaul&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/grantjbutler&quot;&gt;@grantjbutler&lt;/a&gt;, and &lt;a href=&quot;https://twitter.com/conbrolution&quot;&gt;@conbrolution&lt;/a&gt;) taking first place.&lt;/p&gt;

&lt;p&gt;If you&amp;#39;d like to play along at home, or test your team&amp;#39;s mettle at work, here are some guidelines:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;There are 4 Rounds, with 10 questions each&lt;/li&gt;
&lt;li&gt;Record answers on a separate sheet of paper&lt;/li&gt;
&lt;li&gt;Each correct answer to a question gets you 1 point (unless otherwise specified)&lt;/li&gt;
&lt;li&gt;Play with up to 5 friends for maximum enjoyment&lt;/li&gt;
&lt;li&gt;Don&amp;#39;t be lame and look things up on the Internet or in Xcode&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;h2&gt;Round 1: General Knowledge&lt;/h2&gt;

&lt;p&gt;In honor of hosting this pub quiz in New York City, a couple questions about city planning are thrown in towards the end for good measure.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;iOS 7 Beta 4 hints at a new hardware feature in the next iPhone related to the acquisition of mobile security firm AuthenTec. What is that feature?&lt;/li&gt;
&lt;li&gt;iOS 7 Beta 4 also added &lt;code&gt;UIApplicationDidTakeScreenshotNotification&lt;/code&gt; ...which is good news for which popular social networking app?&lt;/li&gt;
&lt;li&gt;According to a leaked photo from Chinese site WeiPhone, what is the name of the rumored low-cost, plastic iPhone?&lt;/li&gt;
&lt;li&gt;JOBS, starring Ashton Kutcher hits theaters August 16... but which acclaimed screenwriter is behind the other Steve Jobs biopic, currently in production?&lt;/li&gt;
&lt;li&gt;Which country has planned 11 &amp;quot;Steve Jobs schools&amp;quot;, featuring an iPad-based curriculum, to open in August?&lt;/li&gt;
&lt;li&gt;Which computing pioneer, famous for his 1968 &amp;quot;Mother of All Demos&amp;quot;, passed away on July 2, 2013?&lt;/li&gt;
&lt;li&gt;Which New York-based directions and mapping startup was purchased by Apple in July 2013?&lt;/li&gt;
&lt;li&gt;Of the world&amp;#39;s major subway systems, London&amp;#39;s is the oldest, while Moscow has the greatest ridership. By what measure is the New York subway system #1?&lt;/li&gt;
&lt;li&gt;Who is the author of &amp;quot;The Death and Life of Great American Cities&amp;quot;, which famously argues against the urban renewal plans for Greenwich Village in the 1950&amp;#39;s &amp;amp; 60&amp;#39;s?&lt;/li&gt;
&lt;li&gt;What 5 channels were Apple TV with the version 5.3 update (1 point each)&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 2: Public, Private, or Fake?&lt;/h2&gt;

&lt;p&gt;There are 152 frameworks in iOS. You may know of perhaps a few dozen public ones, but there are many more private frameworks hidden in the OS. For each of the following, tell me if the framework (as of iOS 6.1) is public, private, or something we just made up.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ActorKit&lt;/li&gt;
&lt;li&gt;Celestial&lt;/li&gt;
&lt;li&gt;MediaToolbox&lt;/li&gt;
&lt;li&gt;URLify&lt;/li&gt;
&lt;li&gt;SocialDarwin&lt;/li&gt;
&lt;li&gt;Marco&lt;/li&gt;
&lt;li&gt;LinguisticsKit&lt;/li&gt;
&lt;li&gt;QuickLook&lt;/li&gt;
&lt;li&gt;AdSupport&lt;/li&gt;
&lt;li&gt;NSAKit&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 3: Picture Round - Name that App!&lt;/h2&gt;

&lt;p&gt;With over 1 Million iOS &amp;amp; Mac Apps on the App Store, it&amp;#39;s clear that the true secret to success boils down to one thing: having a pretty icon. For each icon, tell me the name of the app.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;1. What is the name of this iOS game?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-3.s3.amazonaws.com/question-1.png&quot; alt=&quot;Question 1&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;2. What is the name of this iOS game?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-3.s3.amazonaws.com/question-2.png&quot; alt=&quot;Question 2&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;3. What is the name of this iOS app?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-3.s3.amazonaws.com/question-3.png&quot; alt=&quot;Question 3&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;4. What is the name of this popular iOS app?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-3.s3.amazonaws.com/question-4.png&quot; alt=&quot;Question 4&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;5. While not on the App Store, jailbreakers will know this icon well. What&amp;#39;s its name?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-3.s3.amazonaws.com/question-5.png&quot; alt=&quot;Question 5&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;6. Which classic Mac app sports this delightful moving truck?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-3.s3.amazonaws.com/question-6.png&quot; alt=&quot;Question 6&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;7. Which indispensible development tool has this incongruous icon?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-3.s3.amazonaws.com/question-7.png&quot; alt=&quot;Question 7&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;8. Which app sports this sleek icon?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-3.s3.amazonaws.com/question-8.png&quot; alt=&quot;Question 8&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;9. Which app is represented by this delightful mail bag?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-3.s3.amazonaws.com/question-9.png&quot; alt=&quot;Question 9&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;10. Which (unfortunately stalled) app has this beautiful icon?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-3.s3.amazonaws.com/question-10.png&quot; alt=&quot;Question 10&quot;&gt;&lt;/p&gt;

&lt;h2&gt;Round 4: [REDACTED]&lt;/h2&gt;

&lt;p&gt;For each question, a class or protocol from iOS [REDACTED] is described. For 1 point each, fill in the blank.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&amp;quot;An [REDACTED] object captures map-based imagery asynchronously.&amp;quot;&lt;/li&gt;
&lt;li&gt;&amp;quot;A [REDACTED] object represents a connected physical game controller.&amp;quot;&lt;/li&gt;
&lt;li&gt;&amp;quot;An [REDACTED] object represents a scene of content in Sprite Kit.&amp;quot;&lt;/li&gt;
&lt;li&gt;&amp;quot;An [REDACTED] object specifies a gravity vector that applies to all of its dynamic items.&amp;quot;&lt;/li&gt;
&lt;li&gt;&amp;quot;[REDACTED] objects provide a mechanism to describe a font with a dictionary of attributes.&amp;quot;&lt;/li&gt;
&lt;li&gt;&amp;quot;[REDACTED] is a new class for managing the acquisition of network-based resources in the background&amp;quot;&lt;/li&gt;
&lt;li&gt;&amp;quot;An [REDACTED] object provides you with route-based directions data from Apple servers.&amp;quot;&lt;/li&gt;
&lt;li&gt;&amp;quot;An [REDACTED] object facilitates communication among all peers in a Multipeer Connectivity session.&amp;quot;&lt;/li&gt;
&lt;li&gt;&amp;quot;The [REDACTED] class defines a region in which text is laid out.&amp;quot;&lt;/li&gt;
&lt;li&gt;&amp;quot;You can use a [REDACTED] to do either or both of the following:

&lt;ul&gt;
&lt;li&gt;Run a custom animation—including an interactive animation—inside the animation block of an in-progress view controller transition&lt;/li&gt;
&lt;li&gt;Register a completion handler that is called after a view controller transition completes, such as to return state to what it was prior to the transition&amp;quot;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;hr&gt;

&lt;h1&gt;Answers&lt;/h1&gt;

&lt;h2&gt;Round 1: General Knowledge&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://appleinsider.com/articles/13/07/29/iphone-home-button-fingerprint-scanner-described-in-latest-ios-7-beta&quot;&gt;Biometric Authentication&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.snapchat.com&quot;&gt;SnapChat&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.latimes.com/business/technology/la-fi-tn-the-iphone-5c-apple-color-plasticspotify-20130730,0,1720605.story&quot;&gt;iPhone 5C&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://tech.fortune.cnn.com/2012/11/16/apple-sorkin-jobs-movie/&quot;&gt;Aaron Sorkin&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://appleinsider.com/articles/13/07/02/dutch-steve-jobs-schools-to-use-apples-ipad-for-entire-education-experience&quot;&gt;The Netherlands&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Douglas_Engelbart&quot;&gt;Douglas Engelbart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.macworld.com/article/2044904/apple-finds-its-way-to-hopstop-acquisition.html&quot;&gt;HopStop.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/New_York_City_Subway&quot;&gt;Number of Stations (468)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/The_Death_and_Life_of_Great_American_Cities&quot;&gt;Jane Jacobs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.apple.com/pr/library/2013/06/19HBO-GO-WatchESPN-Come-to-Apple-TV.html&quot;&gt;HBO Go, WatchESPN, Sky News, Qello, &amp;amp; CrunchyRoll&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 2: Public, Private, or Fake?&lt;/h2&gt;

&lt;p&gt;Source: https://github.com/nst/iOS-Runtime-Headers&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Private (iOS 3.0–)&lt;/li&gt;
&lt;li&gt;Private (iOS 2.1–)&lt;/li&gt;
&lt;li&gt;Public (iOS 6.0–), formerly Private (iOS 2.1—5.1)&lt;/li&gt;
&lt;li&gt;Private (iOS 2.1)&lt;/li&gt;
&lt;li&gt;Fake&lt;/li&gt;
&lt;li&gt;Private (iOS 4.0—4.3)&lt;/li&gt;
&lt;li&gt;Fake&lt;/li&gt;
&lt;li&gt;Public (iOS 4.0—)&lt;/li&gt;
&lt;li&gt;Public (iOS 6.0—)&lt;/li&gt;
&lt;li&gt;Fake&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 3: Picture Round - Name that App!&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://itunes.apple.com/us/app/toca-hair-salon/id426382105?mt=8&quot;&gt;Toca Boca Hair Salon&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://itunes.apple.com/us/app/tall-chess/id635361464?mt=8&quot;&gt;Tall Chess&lt;/a&gt; (Icon has since changed to something less Giraffe-ish)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://itunes.apple.com/us/app/days-your-visual-photo-gif/id630768365?ls=1&amp;amp;mt=8&quot;&gt;Days&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://itunes.apple.com/us/app/paper-by-fiftythree/id506003812?mt=8&quot;&gt;Paper&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://cydia.saurik.com&quot;&gt;Cydia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://panic.com/transmit/&quot;&gt;Transmit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.charlesproxy.com&quot;&gt;Charles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://takefiveapp.com&quot;&gt;Take Five&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.realmacsoftware.com/courier&quot;&gt;Courier&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://inductionapp.com&quot;&gt;Induction&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 4: [REDACTED]&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;MKMapSnapshot&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GCController&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SKScene&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIGravityBehavior&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIFontDescriptor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSURLSession&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MKDirections&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MCSession&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSTextContainer&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIViewControllerTransitionCoordinator&lt;/code&gt; (protocol for object returned by &lt;code&gt;UIViewController -transitionCoordinator&lt;/code&gt;)&lt;/li&gt;
&lt;/ol&gt;

&lt;hr&gt;

&lt;p&gt;So how did you fare? Tweet out your score to see how you stack up to your peers!&lt;/p&gt;
</description>
        <pubDate>Wed, 31 Jul 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nshipster-quiz-3/</link>
        <guid>http://nshipster.com/nshipster-quiz-3/</guid>
      </item>
    
      <item>
        <title>UIMenuController</title>
        <description>&lt;p&gt;Mobile usability today is truly quite remarkable—especially considering how far it&amp;#39;s come in just the last decade. What was once a clumsy technology relegated to the tech elite has now become the primary mode of computation for a significant portion of the general population.&lt;/p&gt;

&lt;p&gt;Yet despite its advances, one can&amp;#39;t help but feel occasionally... trapped.&lt;/p&gt;

&lt;p&gt;All too often, there will be information on the screen that you &lt;em&gt;just can&amp;#39;t access&lt;/em&gt;. Whether its flight information stuck in a table view cell or an unlinked URL, users are forced to solve problems creatively for lack of a provided solution.&lt;/p&gt;

&lt;p&gt;In the past, we&amp;#39;ve mentioned &lt;a href=&quot;http://nshipster.com/nslocalizedstring&quot;&gt;localization&lt;/a&gt; and &lt;a href=&quot;http://nshipster.com/uiaccessibility&quot;&gt;accessibility&lt;/a&gt; as two factors that distinguish great apps from the rest of the pack. This week, we&amp;#39;ll add another item to that list: &lt;strong&gt;Edit Actions&lt;/strong&gt;.&lt;/p&gt;

&lt;h3&gt;Copy, Cut, Paste, Delete, Select&lt;/h3&gt;

&lt;p&gt;iOS 3&amp;#39;s killer feature was undoubtedly push notifications, but the ability to copy-paste is probably a close second. For how much we use it everyday, it&amp;#39;s difficult to imagine how we got along without it. And yet, it remains a relatively obscure feature for 3rd-party apps.&lt;/p&gt;

&lt;p&gt;This may be due to how cumbersome it is to implement. Let&amp;#39;s look at a simple implementation, and then dive into some specifics about the APIs:&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;HipsterLabel.{h,m}&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HipsterLabel&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;UILabel&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HipsterLabel&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;canBecomeFirstResponder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;canPerformAction:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;SEL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;action&lt;/span&gt;
              &lt;span class=&quot;nl&quot;&gt;withSender:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sender&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark - UIResponderStandardEditActions&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;copy:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sender&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIPasteboard&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generalPasteboard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code&gt;ViewController.m&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;viewDidLoad&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;HipsterLabel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userInteractionEnabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addSubview&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;UIGestureRecognizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gestureRecognizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UILongPressGestureRecognizer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithTarget&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handleLongPressGesture&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addGestureRecognizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gestureRecognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark - UIGestureRecognizer&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;handleLongPressGesture:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIGestureRecognizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;recognizer&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIMenuController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;menuController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIMenuController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sharedMenuController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;menuController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setTargetRect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;superview&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;menuController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setMenuVisible&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;becomeFirstResponder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So, to recap, in order to allow a label&amp;#39;s text to be copied, the following must happen:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UILabel&lt;/code&gt; must be subclassed to implement &lt;code&gt;canBecomeFirstResponder&lt;/code&gt; &amp;amp; &lt;code&gt;canPerformAction:withSender:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Each performable action must implement a corresponding method that interacts with &lt;code&gt;UIPasteboard&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;When instantiated by a controller, the label must have &lt;code&gt;userInteractionEnabled&lt;/code&gt; set to &lt;code&gt;YES&lt;/code&gt; (it is not recommended that this be hard-coded into the subclass implementation)&lt;/li&gt;
&lt;li&gt;A &lt;code&gt;UIGestureRecognizer&lt;/code&gt; must be added to the label (else, &lt;code&gt;UIResponder&lt;/code&gt; methods like &lt;code&gt;touchesBegan:withEvent:&lt;/code&gt; are implemented manually in the subclass)&lt;/li&gt;
&lt;li&gt;In the method implementation corresponding to the gesture recognizer action, &lt;code&gt;UIMenuController&lt;/code&gt; must be positioned and made visible&lt;/li&gt;
&lt;li&gt;Finally, the label must become first responder&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you&amp;#39;re wondering why, &lt;em&gt;oh why&lt;/em&gt;, this isn&amp;#39;t just built into &lt;code&gt;UILabel&lt;/code&gt;, well... join the club.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;UIMenuController&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;UIMenuController&lt;/code&gt; is responsible for presenting edit action menu items. Each app has its own singleton instance, &lt;code&gt;sharedMenuController&lt;/code&gt;. By default, a menu controller will show commands for any methods in the &lt;code&gt;UIResponderStandardEditActions&lt;/code&gt; informal protocol that the responder returns &lt;code&gt;YES&lt;/code&gt; for in &lt;code&gt;canPerformAction:withSender:&lt;/code&gt;.&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;&amp;lt;UIResponderStandardEditActions&amp;gt;&lt;/code&gt;&lt;/h3&gt;

&lt;h4&gt;Handling Copy, Cut, Delete, and Paste Commands&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;Each command travels from the first responder up the responder chain until it is handled; it is ignored if no responder handles it. If a responder doesn&amp;#39;t handle the command in the current context, it should pass it to the next responder.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;copy:&lt;/code&gt; This method is invoked when the user taps the Copy command of the editing menu. A subclass of UIResponder typically implements this method. Using the methods of the UIPasteboard class, it should convert the selection into an appropriate object (if necessary) and write that object to a pasteboard.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;cut:&lt;/code&gt; This method is invoked when the user taps the Cut command of the editing menu. A subclass of UIResponder typically implements this method. Using the methods of the UIPasteboard class, it should convert the selection into an appropriate object (if necessary) and write that object to a pasteboard. It should also remove the selected object from the user interface and, if applicable, from the application&amp;#39;s data model.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;delete:&lt;/code&gt; This method is invoked when the user taps the Delete command of the editing menu. A subclass of UIResponder typically implements this method by removing the selected object from the user interface and, if applicable, from the application&amp;#39;s data model. It should not write any data to the pasteboard.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;paste:&lt;/code&gt; This method is invoked when the user taps the Paste command of the editing menu. A subclass of UIResponder typically implements this method. Using the methods of the UIPasteboard class, it should read the data in the pasteboard, convert the data into an appropriate internal representation (if necessary), and display it in the user interface.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;Handling Selection Commands&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;select:&lt;/code&gt; This method is invoked when the user taps the Select command of the editing menu. This command is used for targeted selection of items in the receiving view that can be broken up into chunks. This could be, for example, words in a text view. Another example might be a view that puts lists of visible objects in multiple groups; the select: command could be implemented to select all the items in the same group as the currently selected item.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;selectAll:&lt;/code&gt; This method is invoked when the user taps the Select All command of the editing menu.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In addition to these basic editing commands, there are commands that deal with rich text editing (&lt;code&gt;toggleBoldface:&lt;/code&gt;, &lt;code&gt;toggleItalics:&lt;/code&gt;, and &lt;code&gt;toggleUnderline:&lt;/code&gt;) and writing direction changes (&lt;code&gt;makeTextWritingDirectionLeftToLeft:&lt;/code&gt; &amp;amp; &lt;code&gt;makeTextWritingDirectionLeftToRight:&lt;/code&gt;). As these are not generally applicable outside of writing an editor, we&amp;#39;ll just mention them in passing.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;UIMenuItem&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;With iOS 3.2, developers could now add their own commands to the menu controller. As yet unmentioned, but familiar commands like &amp;quot;Define&amp;quot; or spell check suggestions take advantage of this.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;UIMenuController&lt;/code&gt; has a &lt;code&gt;menuItems&lt;/code&gt; property, which is an &lt;code&gt;NSArray&lt;/code&gt; of &lt;code&gt;UIMenuItem&lt;/code&gt; objects. Each &lt;code&gt;UIMenuItem&lt;/code&gt; object has a &lt;code&gt;title&lt;/code&gt; and &lt;code&gt;action&lt;/code&gt;. In order to have a menu item command display in a menu controller, the responder must implement the corresponding selector.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Just as a skilled coder designs software to be flexible and adaptable to unforeseen use cases, any app developer worth their salt understands the need to accommodate users with different needs from themselves.&lt;/p&gt;

&lt;p&gt;As you develop your app, take to heart the following guidelines:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;For every control, think about what you would expect a right-click (control-click) to do if used from the desktop.&lt;/li&gt;
&lt;li&gt;Any time information is shown to the user, consider whether it should be copyable.&lt;/li&gt;
&lt;li&gt;With formatted or multi-faceted information, consider whether multiple kinds of copy commands are appropriate.&lt;/li&gt;
&lt;li&gt;When implementing &lt;code&gt;copy:&lt;/code&gt; make sure to copy only valuable information to the pasteboard.&lt;/li&gt;
&lt;li&gt;For editable controls, ensure that your implementation &lt;code&gt;paste:&lt;/code&gt; can handle a wide range of valid and invalid input.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If mobile is to become most things to most people, the least we can do is make our best effort to allow users to be more productive. Your thoughtful use of &lt;code&gt;UIMenuController&lt;/code&gt; will not go unnoticed.&lt;/p&gt;
</description>
        <pubDate>Mon, 22 Jul 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/uimenucontroller/</link>
        <guid>http://nshipster.com/uimenucontroller/</guid>
      </item>
    
      <item>
        <title>NSPredicate</title>
        <description>&lt;p&gt;&lt;code&gt;NSPredicate&lt;/code&gt; is a Foundation class that specifies how data should be fetched or filtered. Its query language, which is like a cross between a SQL &lt;code&gt;WHERE&lt;/code&gt; clause and a regular expression, provides an expressive, natural language interface to define logical conditions on which a collection is searched.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s easier to show &lt;code&gt;NSPredicate&lt;/code&gt; in use, rather than talk about it in the abstract, so we&amp;#39;re going to revisit the example data set used in the &lt;a href=&quot;http://nshipster.com/nssortdescriptor/&quot;&gt;&lt;code&gt;NSSortDescriptor&lt;/code&gt; article&lt;/a&gt;:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;tt&gt;index&lt;/tt&gt;&lt;/th&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;th&gt;3&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;firstName&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;Alice&lt;/td&gt;
      &lt;td&gt;Bob&lt;/td&gt;
      &lt;td&gt;Charlie&lt;/td&gt;
      &lt;td&gt;Quentin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;lastName&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;Smith&lt;/td&gt;
      &lt;td&gt;Jones&lt;/td&gt;
      &lt;td&gt;Smith&lt;/td&gt;
      &lt;td&gt;Alberts&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;age&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;24&lt;/td&gt;
      &lt;td&gt;27&lt;/td&gt;
      &lt;td&gt;33&lt;/td&gt;
      &lt;td&gt;31&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@ %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark -&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Alice&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Bob&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Charlie&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Quentin&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Smith&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Jones&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Smith&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Alberts&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ages&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@33&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@31&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstNames&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enumerateObjectsUsingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstNames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lastNames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bobPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;firstName = &amp;#39;Bob&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smithPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;lastName = %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Smith&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;thirtiesPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;age &amp;gt;= 30&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// [&amp;quot;Bob Jones&amp;quot;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Bobs: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filteredArrayUsingPredicate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bobPredicate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// [&amp;quot;Alice Smith&amp;quot;, &amp;quot;Charlie Smith&amp;quot;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Smiths: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filteredArrayUsingPredicate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smithPredicate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// [&amp;quot;Charlie Smith&amp;quot;, &amp;quot;Quentin Alberts&amp;quot;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;30&amp;#39;s: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filteredArrayUsingPredicate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;thirtiesPredicate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Using &lt;code&gt;NSPredicate&lt;/code&gt; with Collections&lt;/h2&gt;

&lt;p&gt;Foundation provides methods to filter &lt;code&gt;NSArray&lt;/code&gt; / &lt;code&gt;NSMutableArray&lt;/code&gt; &amp;amp; &lt;code&gt;NSSet&lt;/code&gt; / &lt;code&gt;NSMutableSet&lt;/code&gt; with predicates.&lt;/p&gt;

&lt;p&gt;Immutable collections, &lt;code&gt;NSArray&lt;/code&gt; &amp;amp; &lt;code&gt;NSSet&lt;/code&gt;, have the methods &lt;code&gt;filteredArrayUsingPredicate:&lt;/code&gt; and &lt;code&gt;filteredSetUsingPredicate:&lt;/code&gt; which return an immutable collection by evaluating a predicate on the receiver.&lt;/p&gt;

&lt;p&gt;Mutable collections, &lt;code&gt;NSMutableArray&lt;/code&gt; &amp;amp; &lt;code&gt;NSMutableSet&lt;/code&gt; have the method &lt;code&gt;filterUsingPredicate:&lt;/code&gt;, which removes any objects that evaluate to &lt;code&gt;FALSE&lt;/code&gt; when running the predicate on the receiver.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSDictionary&lt;/code&gt; can use predicates by filtering its keys or values (both &lt;code&gt;NSArray&lt;/code&gt; objects). &lt;code&gt;NSOrderedSet&lt;/code&gt; can either create new ordered sets from a filtered &lt;code&gt;NSArray&lt;/code&gt; or &lt;code&gt;NSSet&lt;/code&gt;, or alternatively, &lt;code&gt;NSMutableSet&lt;/code&gt; can simply &lt;code&gt;removeObjectsInArray:&lt;/code&gt;, passing objects filtered with the &lt;em&gt;negated&lt;/em&gt; predicate.&lt;/p&gt;

&lt;h2&gt;Using &lt;code&gt;NSPredicate&lt;/code&gt; with Core Data&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSFetchRequest&lt;/code&gt; has a &lt;code&gt;predicate&lt;/code&gt; property, which specifies the logical conditions under which managed objects should be retrieved. The same rules apply, except that predicates are evaluated by the persistent store coordinator within a managed object context, rather than collections being filtered in-memory.&lt;/p&gt;

&lt;h2&gt;Predicate Syntax&lt;/h2&gt;

&lt;h3&gt;Substitutions&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;%@&lt;/code&gt; is a var arg substitution for an object value—often a string, number, or date.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;%K&lt;/code&gt; is a var arg substitution for a key path.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ageIs33Predicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%K = %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;age&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@33&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// [&amp;quot;Charlie Smith&amp;quot;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Age 33: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filteredArrayUsingPredicate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ageIs33Predicate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$VARIABLE_NAME&lt;/code&gt; is a value that can be substituted with &lt;code&gt;NSPredicate -predicateWithSubstitutionVariables:&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;namesBeginningWithLetterPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;(firstName BEGINSWITH[cd] $letter) OR (lastName BEGINSWITH[cd] $letter)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// [&amp;quot;Alice Smith&amp;quot;, &amp;quot;Quentin Alberts&amp;quot;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;&amp;#39;A&amp;#39; Names: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filteredArrayUsingPredicate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;namesBeginningWithLetterPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithSubstitutionVariables&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;letter&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;A&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}]]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Basic Comparisons&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;=&lt;/code&gt;, &lt;code&gt;==&lt;/code&gt;: The left-hand expression is equal to the right-hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;gt;=&lt;/code&gt;, &lt;code&gt;=&amp;gt;&lt;/code&gt;: The left-hand expression is greater than or equal to the right-hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;=&amp;lt;&lt;/code&gt;: The left-hand expression is less than or equal to the right-hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;gt;&lt;/code&gt;: The left-hand expression is greater than the right-hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;&lt;/code&gt;: The left-hand expression is less than the right-hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;!=&lt;/code&gt;, &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt;: The left-hand expression is not equal to the right-hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BETWEEN&lt;/code&gt;: The left-hand expression is between, or equal to either of, the values specified in the right-hand side. The right-hand side is a two value array (an array is required to specify order) giving upper and lower bounds. For example, &lt;code&gt;1 BETWEEN { 0 , 33 }&lt;/code&gt;, or &lt;code&gt;$INPUT BETWEEN { $LOWER, $UPPER }&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Basic Compound Predicates&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AND&lt;/code&gt;, &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;: Logical &lt;code&gt;AND&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;OR&lt;/code&gt;, &lt;code&gt;||&lt;/code&gt;: Logical &lt;code&gt;OR&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NOT&lt;/code&gt;, &lt;code&gt;!&lt;/code&gt;: Logical &lt;code&gt;NOT&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3&gt;String Comparisons&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;String comparisons are by default case and diacritic sensitive. You can modify an operator using the key characters c and d within square braces to specify case and diacritic insensitivity respectively, for example firstName BEGINSWITH[cd] $FIRST_NAME.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;BEGINSWITH&lt;/code&gt;: The left-hand expression begins with the right-hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CONTAINS&lt;/code&gt;: The left-hand expression contains the right-hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ENDSWITH&lt;/code&gt;: The left-hand expression ends with the right-hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LIKE&lt;/code&gt;: The left hand expression equals the right-hand expression: &lt;code&gt;?&lt;/code&gt; and &lt;code&gt;*&lt;/code&gt; are allowed as wildcard characters, where &lt;code&gt;?&lt;/code&gt; matches 1 character and &lt;code&gt;*&lt;/code&gt; matches 0 or more characters.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MATCHES&lt;/code&gt;:  The left hand expression equals the right hand expression using a regex-style comparison according to ICU v3 (for more details see the &lt;a href=&quot;http://userguide.icu-project.org/strings/regexp&quot;&gt;ICU User Guide for Regular Expressions&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Aggregate Operations&lt;/h3&gt;

&lt;h4&gt;Relational Operations&lt;/h4&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ANY&lt;/code&gt;, &lt;code&gt;SOME&lt;/code&gt;: Specifies any of the elements in the following expression. For example, &lt;code&gt;ANY children.age &amp;lt; 18&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ALL&lt;/code&gt;: Specifies all of the elements in the following expression. For example, &lt;code&gt;ALL children.age &amp;lt; 18&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NONE&lt;/code&gt;: Specifies none of the elements in the following expression. For example, &lt;code&gt;NONE children.age &amp;lt; 18&lt;/code&gt;. This is logically equivalent to &lt;code&gt;NOT (ANY ...)&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;IN&lt;/code&gt;: Equivalent to an SQL &lt;code&gt;IN&lt;/code&gt; operation, the left-hand side must appear in the collection specified by the right-hand side. For example, &lt;code&gt;name IN { &amp;#39;Ben&amp;#39;, &amp;#39;Melissa&amp;#39;, &amp;#39;Nick&amp;#39; }&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h4&gt;Array Operations&lt;/h4&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;array[index]&lt;/code&gt;: Specifies the element at the specified index in &lt;code&gt;array&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;array[FIRST]&lt;/code&gt;: Specifies the first element in &lt;code&gt;array&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;array[LAST]&lt;/code&gt;: Specifies the last element in &lt;code&gt;array&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;array[SIZE]&lt;/code&gt;: Specifies the size of &lt;code&gt;array&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Boolean Value Predicates&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;TRUEPREDICATE&lt;/code&gt;: A predicate that always evaluates to &lt;code&gt;TRUE&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;FALSEPREDICATE&lt;/code&gt;: A predicate that always evaluates to &lt;code&gt;FALSE&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2&gt;&lt;code&gt;NSCompoundPredicate&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;We saw that &lt;code&gt;AND&lt;/code&gt; &amp;amp; &lt;code&gt;OR&lt;/code&gt; can be used in predicate format strings to create compound predicates. However, the same can be accomplished using an &lt;code&gt;NSCompoundPredicate&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For example, the following predicates are equivalent:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCompoundPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;andPredicateWithSubpredicates&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;age &amp;gt; 25&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;firstName = %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Quentin&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;(age &amp;gt; 25) AND (firstName = %@)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Quentin&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;While the syntax string literal is certainly easier to type, there are occasions where you may need to combine existing predicates. In these cases, &lt;code&gt;NSCompoundPredicate -andPredicateWithSubpredicates:&lt;/code&gt; &amp;amp; &lt;code&gt;-orPredicateWithSubpredicates:&lt;/code&gt; is the way to go.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;NSComparisonPredicate&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Similarly, if after reading &lt;a href=&quot;http://nshipster.com/nsexpression/&quot;&gt;last week&amp;#39;s article&lt;/a&gt; you now find yourself with more &lt;code&gt;NSExpression&lt;/code&gt; objects than you know what to do with, &lt;code&gt;NSComparisonPredicate&lt;/code&gt; can help you out.&lt;/p&gt;

&lt;p&gt;Like &lt;code&gt;NSCompoundPredicate&lt;/code&gt;, &lt;code&gt;NSComparisonPredicate&lt;/code&gt; constructs an &lt;code&gt;NSPredicate&lt;/code&gt; from subcomponents—in this case, &lt;code&gt;NSExpression&lt;/code&gt;s on the left and right hand sides.
Analyzing its class constructor provides a glimpse into the way &lt;code&gt;NSPredicate&lt;/code&gt; format strings are parsed:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;predicateWithLeftExpression:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSExpression&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lhs&lt;/span&gt;
                             &lt;span class=&quot;nl&quot;&gt;rightExpression:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSExpression&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;rhs&lt;/span&gt;
                                    &lt;span class=&quot;nl&quot;&gt;modifier:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSComparisonPredicateModifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;modifier&lt;/span&gt;
                                        &lt;span class=&quot;nl&quot;&gt;type:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;type&lt;/span&gt;
                                     &lt;span class=&quot;nl&quot;&gt;options:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;options&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Parameters&lt;/h4&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;lhs&lt;/code&gt;: The left hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rhs&lt;/code&gt;: The right hand expression.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;modifier&lt;/code&gt;: The modifier to apply. (&lt;code&gt;ANY&lt;/code&gt; or &lt;code&gt;ALL&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;type&lt;/code&gt;: The predicate operator type.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;options&lt;/code&gt;: The options to apply. For no options, pass &lt;code&gt;0&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3&gt;&lt;code&gt;NSComparisonPredicate&lt;/code&gt; Types&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSLessThanPredicateOperatorType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSLessThanOrEqualToPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSGreaterThanPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSGreaterThanOrEqualToPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSEqualToPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSNotEqualToPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSMatchesPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSLikePredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSBeginsWithPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSEndsWithPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSInPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSCustomSelectorPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSContainsPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSBetweenPredicateOperatorType&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSPredicateOperatorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code&gt;NSComparisonPredicate&lt;/code&gt; Options&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSCaseInsensitivePredicateOption&lt;/code&gt;: A case-insensitive predicate. You represent this option in a predicate format string using a [c] following a string operation (for example, &amp;quot;NeXT&amp;quot; like[c] &amp;quot;next&amp;quot;).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSDiacriticInsensitivePredicateOption&lt;/code&gt;: A diacritic-insensitive predicate. You represent this option in a predicate format string using a [d] following a string operation (for example, &amp;quot;naïve&amp;quot; like[d] &amp;quot;naive&amp;quot;).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSNormalizedPredicateOption&lt;/code&gt;: Indicates that the strings to be compared have been preprocessed. This option supersedes NSCaseInsensitivePredicateOption and NSDiacriticInsensitivePredicateOption, and is intended as a performance optimization option. You represent this option in a predicate format string using a [n] following a string operation (for example, &amp;quot;WXYZlan&amp;quot; matches[n] &amp;quot;.lan&amp;quot;).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleSensitivePredicateOption&lt;/code&gt;: Indicates that strings to be compared using &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;=&lt;/code&gt;, &lt;code&gt;=&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt; should be handled in a locale-aware fashion. You represent this option in a predicate format string using a &lt;code&gt;[l]&lt;/code&gt; following one of the &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;=&lt;/code&gt;, &lt;code&gt;=&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt; operators (for example, &amp;quot;straße&amp;quot; &amp;gt;[l] &amp;quot;strasse&amp;quot;).&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Block Predicates&lt;/h2&gt;

&lt;p&gt;Finally, if you just can&amp;#39;t be bothered to learn the &lt;code&gt;NSPredicate&lt;/code&gt; format syntax, you can go through the motions with &lt;code&gt;NSPredicate +predicateWithBlock:&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shortNamePredicate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;evaluatedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bindings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;evaluatedObject&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// [&amp;quot;Alice Smith&amp;quot;, &amp;quot;Bob Jones&amp;quot;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Short Names: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filteredArrayUsingPredicate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shortNamePredicate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...Alright, that whole dig on &lt;code&gt;predicateWithBlock:&lt;/code&gt; as being the lazy way out wasn&amp;#39;t &lt;em&gt;entirely&lt;/em&gt; charitable.&lt;/p&gt;

&lt;p&gt;Actually, since blocks can encapsulate any kind of calculation, there is a whole class of queries that can&amp;#39;t be expressed with the &lt;code&gt;NSPredicate&lt;/code&gt; format string (such as evaluating against values dynamically calculated at run-time). And while its possible to accomplish the same using an &lt;code&gt;NSExpression&lt;/code&gt; with a custom selector, blocks provide a convenient interface to get the job done.&lt;/p&gt;

&lt;p&gt;One important note: &lt;strong&gt;&lt;code&gt;NSPredicate&lt;/code&gt;s created with &lt;code&gt;predicateWithBlock:&lt;/code&gt; cannot be used for Core Data fetch requests backed by a &lt;code&gt;SQLite&lt;/code&gt; store.&lt;/strong&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSPredicate&lt;/code&gt; is, and I know this is said a lot, truly one of the jewels of Cocoa. Other languages would be lucky to have something with half of its capabilities in a third-party library—let alone the standard library. Having it as a standard-issue component affords us as application and framework developers an incredible amount of leverage in working with data.&lt;/p&gt;

&lt;p&gt;Together with &lt;code&gt;NSExpression&lt;/code&gt;, &lt;code&gt;NSPredicate&lt;/code&gt; reminds us what a treat Foundation is: a framework that is not only incredibly useful, but meticulously architected and engineered, to be taken as inspiration for how we should write our own code.&lt;/p&gt;
</description>
        <pubDate>Mon, 15 Jul 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nspredicate/</link>
        <guid>http://nshipster.com/nspredicate/</guid>
      </item>
    
      <item>
        <title>NSExpression</title>
        <description>&lt;p&gt;Cocoa is the envy of other standard libraries when it comes to querying and arranging information. With &lt;code&gt;NSPredicate&lt;/code&gt;, &lt;a href=&quot;http://nshipster.com/nssortdescriptor/&quot;&gt;&lt;code&gt;NSSortDescriptor&lt;/code&gt;&lt;/a&gt;, and an occasional &lt;code&gt;NSFetchRequest&lt;/code&gt;, even the most complex data tasks can be reduced into just a few, &lt;em&gt;extremely-understandable&lt;/em&gt; lines of code.&lt;/p&gt;

&lt;p&gt;Now, NSHipsters are no doubt already familiar with &lt;code&gt;NSPredicate&lt;/code&gt; (and if you aren&amp;#39;t, be sure to tune in next week!), but if we take a closer look at &lt;code&gt;NSPredicate&lt;/code&gt;, we see that &lt;code&gt;NSPredicate&lt;/code&gt; is actually made up of smaller, atomic parts: two &lt;code&gt;NSExpression&lt;/code&gt;s (a left-hand value &amp;amp; a right-hand value), compared with an operator (e.g. &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;IN&lt;/code&gt;, &lt;code&gt;LIKE&lt;/code&gt;, etc.).&lt;/p&gt;

&lt;p&gt;Because most developers only use &lt;code&gt;NSPredicate&lt;/code&gt; by means of &lt;code&gt;+predicateWithFormat:&lt;/code&gt;, &lt;code&gt;NSExpression&lt;/code&gt; is a relatively obscure class. Which is a shame, because &lt;code&gt;NSExpression&lt;/code&gt; is quite an incredible piece of functionality in its own right.&lt;/p&gt;

&lt;p&gt;So allow me, dear readers, to express my respect and fascination with &lt;code&gt;NSExpression&lt;/code&gt;:&lt;/p&gt;

&lt;h2&gt;Evaluating Math&lt;/h2&gt;

&lt;p&gt;The first thing you should know about &lt;code&gt;NSExpression&lt;/code&gt; is that it lives to reduce terms. If you think about the process of evaluating an &lt;code&gt;NSPredicate&lt;/code&gt;, there are two terms and a comparator, so those two terms need to simplify into something that the operator can handle—very much like the process of compiling a line of code.&lt;/p&gt;

&lt;p&gt;Which leads us to &lt;code&gt;NSExpression&lt;/code&gt;&amp;#39;s first trick: &lt;strong&gt;doing math&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSExpression&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSExpression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expressionWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;4 + 5 - 2**3&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expressionValueWithObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// =&amp;gt; 1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It&amp;#39;s no &lt;a href=&quot;http://www.wolframalpha.com/input/?i=finn+the+human+like+curve&quot;&gt;Wolfram Alpha&lt;/a&gt;, but if your app does anything where evaluating mathematical expressions would be useful, well... there you go.&lt;/p&gt;

&lt;h2&gt;Functions&lt;/h2&gt;

&lt;p&gt;But we&amp;#39;ve only just scratched the surface with &lt;code&gt;NSExpression&lt;/code&gt;. Not impressed by a computer doing primary-school maths? How about high school statistics, then?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numbers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSExpression&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSExpression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expressionForFunction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;stddev:&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arguments&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSExpression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expressionForConstantValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numbers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]];&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expressionValueWithObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// =&amp;gt; 3.21859...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;NSExpression&lt;/code&gt; functions take a given number of sub-expression arguments. For instance, in the above example, to get the standard deviation of the collection, the array of numbers had to be wrapped with &lt;code&gt;+expressionForConstantValue:&lt;/code&gt;. A minor inconvenience (which ultimately allows &lt;code&gt;NSExpression&lt;/code&gt; to be incredibly flexible), but enough to trip up anyone trying things out for the first time.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;If you found the &lt;a href=&quot;http://nshipster.com/kvc-collection-operators/&quot;&gt;Key-Value Coding Simple Collection Operators&lt;/a&gt; (&lt;code&gt;@avg&lt;/code&gt;, &lt;code&gt;@sum&lt;/code&gt;, et al.) lacking, perhaps &lt;code&gt;NSExpression&lt;/code&gt;&amp;#39;s built-in statistical, arithmetic, and bitwise functions will pique your interest.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;A word of caution&lt;/strong&gt;: &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSExpression_Class/Reference/NSExpression.html&quot;&gt;according to this table in Apple&amp;#39;s documentation for &lt;code&gt;NSExpression&lt;/code&gt;&lt;/a&gt;, there is apparently no overlap between the availability of functions between Mac OS X &amp;amp; iOS. It would appear that recent versions of iOS do, indeed, support functions like &lt;code&gt;stddev:&lt;/code&gt;, but this is not reflected in headers or documentation. Any details &lt;a href=&quot;https://github.com/NSHipster/articles/pulls&quot;&gt;in the form of a pull request&lt;/a&gt; would be greatly appreciated.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Statistics&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;average:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sum:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;count:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;min:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;max:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;median:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mode:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;stddev:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Basic Arithmetic&lt;/h3&gt;

&lt;p&gt;These functions take two &lt;code&gt;NSExpression&lt;/code&gt; objects representing numbers.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;add:to:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;from:subtract:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;multiply:by:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;divide:by:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;modulus:by:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;abs:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Advanced Arithmetic&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sqrt:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;log:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ln:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;raise:toPower:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;exp:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Bounding Functions&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ceiling:&lt;/code&gt; - &lt;em&gt;(the smallest integral value not less than the value in the array)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;trunc:&lt;/code&gt; - &lt;em&gt;(the integral value nearest to but no greater than the value in the array)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Functions Shadowing &lt;code&gt;math.h&lt;/code&gt; Functions&lt;/h3&gt;

&lt;p&gt;So mentioned, because &lt;code&gt;ceiling&lt;/code&gt; is easily confused with &lt;code&gt;ceil(3)&lt;/code&gt;. Whereas &lt;code&gt;ceiling&lt;/code&gt; acts on an array of numbers, while &lt;code&gt;ceil(3)&lt;/code&gt; takes a &lt;code&gt;double&lt;/code&gt; (and doesn&amp;#39;t have a corresponding built-in &lt;code&gt;NSExpression&lt;/code&gt; function). &lt;code&gt;floor:&lt;/code&gt; here acts the same as &lt;code&gt;floor(3)&lt;/code&gt;.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;floor:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Random Functions&lt;/h3&gt;

&lt;p&gt;Two variations—one with and one without an argument. Taking no argument, &lt;code&gt;random&lt;/code&gt; returns an equivalent of &lt;code&gt;rand(3)&lt;/code&gt;, while &lt;code&gt;random:&lt;/code&gt; takes a random element from the &lt;code&gt;NSExpression&lt;/code&gt; of an array of numbers.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;random&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;random:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Binary Arithmetic&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;bitwiseAnd:with:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bitwiseOr:with:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bitwiseXor:with:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;leftshift:by:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rightshift:by:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onesComplement:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Date Functions&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;now&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;String Functions&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;lowercase:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;uppercase:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;No-op&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;noindex:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Custom Functions&lt;/h2&gt;

&lt;p&gt;In addition to these built-in functions, it&amp;#39;s possible to invoke custom functions in an &lt;code&gt;NSExpression&lt;/code&gt;. &lt;a href=&quot;http://funwithobjc.tumblr.com/post/2922267976/using-custom-functions-with-nsexpression&quot;&gt;This article by Dave DeLong&lt;/a&gt; describes the process.&lt;/p&gt;

&lt;p&gt;First, define the corresponding method in a category:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(Factorial)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(Factorial)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;factorial&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tgamma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;doubleValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then, use the function thusly (the &lt;code&gt;FUNCTION()&lt;/code&gt; macro in &lt;code&gt;+expressionWithFormat:&lt;/code&gt; is shorthand for the process of building out with &lt;code&gt;-expressionForFunction:&lt;/code&gt;, et al.):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSExpression&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSExpression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expressionWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;FUNCTION(4.2, &amp;#39;factorial&amp;#39;)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expressionValueWithObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 32.578...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The advantage here, over calling &lt;code&gt;-factorial&lt;/code&gt; directly is the ability to invoke the function in an &lt;code&gt;NSPredicate&lt;/code&gt; query. For example, a &lt;code&gt;location:withinRadius:&lt;/code&gt; method might be defined to easily query managed objects nearby a user&amp;#39;s current location.&lt;/p&gt;

&lt;p&gt;As Dave mentions in his article, the use cases are rather marginal, but it&amp;#39;s certainly an interesting trick to have in your repertoire.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Next week, we&amp;#39;ll build on what we just learned about &lt;code&gt;NSExpression&lt;/code&gt; to further explore &lt;code&gt;NSPredicate&lt;/code&gt;, and everything it has hidden up its sleeves. Stay tuned!&lt;/p&gt;
</description>
        <pubDate>Mon, 08 Jul 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nsexpression/</link>
        <guid>http://nshipster.com/nsexpression/</guid>
      </item>
    
      <item>
        <title>NSFastEnumeration /&lt;br/&gt;NSEnumerator /&lt;br/&gt;-enumerateObjectsUsingBlock:</title>
        <description>&lt;p&gt;Enumeration is where computation gets interesting. It&amp;#39;s one thing to encode logic that&amp;#39;s executed once, but applying it across a collection—that&amp;#39;s what makes programming so powerful.&lt;/p&gt;

&lt;p&gt;Each programming paradigm has its own way to iterate over a collection:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Procedural&lt;/strong&gt; increments a pointer within a loop&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Object Oriented&lt;/strong&gt; applies a function or block to each object in a collection&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Functional&lt;/strong&gt; works through a data structure recursively&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Objective-C, to echo one of the central themes of this blog, plays a fascinating role as a bridge between the Procedural traditions of C and the Object Oriented model pioneered in Smalltalk. In many ways, enumeration is where the proverbial rubber hits the road.&lt;/p&gt;

&lt;p&gt;This article will cover all of the different ways collections are enumerated in Objective-C &amp;amp; Cocoa. How do I love thee? Let me count the ways.&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;C Loops (&lt;code&gt;for/while&lt;/code&gt;)&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;for&lt;/code&gt; and &lt;code&gt;while&lt;/code&gt; loops are the &amp;quot;classic&amp;quot; method of iterating over a collection. Anyone who&amp;#39;s taken Computer Science 101 has written code like this before:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But as anyone who has used C-style loops knows, this method is prone to &lt;a href=&quot;http://en.wikipedia.org/wiki/Off-by-one_error&quot;&gt;off-by-one errors&lt;/a&gt;—particularly when used in a non-standard way.&lt;/p&gt;

&lt;p&gt;Fortunately, Smalltalk significantly improved this state of affairs with an idea called &lt;a href=&quot;http://en.wikipedia.org/wiki/List_comprehension&quot;&gt;list comprehensions&lt;/a&gt;, which are commonly known today as &lt;code&gt;for/in&lt;/code&gt; loops.&lt;/p&gt;

&lt;h2&gt;List Comprehension (&lt;code&gt;for/in&lt;/code&gt;)&lt;/h2&gt;

&lt;p&gt;By using a higher level of abstraction, declaring the intention of iterating through all elements of a collection, not only are we less prone to error, but there&amp;#39;s a lot less to type:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In Cocoa, comprehensions are available to any class that implements the &lt;code&gt;NSFastEnumeration&lt;/code&gt; protocol, including &lt;code&gt;NSArray&lt;/code&gt;, &lt;code&gt;NSSet&lt;/code&gt;, and &lt;code&gt;NSDictionary&lt;/code&gt;.&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;&amp;lt;NSFastEnumeration&amp;gt;&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;NSFastEnumeration&lt;/code&gt; contains a single method:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;countByEnumeratingWithState:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFastEnumerationState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;state&lt;/span&gt;
                                  &lt;span class=&quot;nl&quot;&gt;objects:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;stackbuf&lt;/span&gt;
                                    &lt;span class=&quot;nl&quot;&gt;count:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;len&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;state&lt;/code&gt;: Context information that is used in the enumeration to, in addition to other possibilities, ensure that the collection has not been mutated.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;stackbuf&lt;/code&gt;: A C array of objects over which the sender is to iterate.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;len&lt;/code&gt;: The maximum number of objects to return in stackbuf.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;One single, &lt;em&gt;deceptively complicated&lt;/em&gt; method. There&amp;#39;s that &lt;code&gt;stackbuf&lt;/code&gt; out pointer parameter, and a &lt;code&gt;state&lt;/code&gt; parameter of type &lt;code&gt;NSFastEnumerationState *&lt;/code&gt;. Let&amp;#39;s take a closer look at that...&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;NSFastEnumerationState&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;itemsPtr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutationsPtr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extra&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSFastEnumerationState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;state&lt;/code&gt;: Arbitrary state information used by the iterator. Typically this is set to 0 at the beginning of the iteration.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;itemsPtr&lt;/code&gt;: A C array of objects.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mutationsPtr&lt;/code&gt;: Arbitrary state information used to detect whether the collection has been mutated.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;extra&lt;/code&gt;: A C array that you can use to hold returned values.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Under every elegant abstraction is an underlying implementation deserving to be hidden from the eyes of God. &lt;code&gt;itemsPtr&lt;/code&gt;? &lt;code&gt;mutationsPtr&lt;/code&gt;? &lt;code&gt;extra&lt;/code&gt;‽ Seriously, what gives?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For the curious, &lt;a href=&quot;http://www.mikeash.com/pyblog/friday-qa-2010-04-16-implementing-fast-enumeration.html&quot;&gt;Mike Ash has a fantastic blog post&lt;/a&gt; where he dives into the internals, providing several reference implementations of &lt;code&gt;NSFastEnumeration&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;What you should know about &lt;code&gt;NSFastEnumeration&lt;/code&gt; is that it is &lt;em&gt;fast&lt;/em&gt;. At least as fast if not significantly faster than rolling your own &lt;code&gt;for&lt;/code&gt; loop, in fact. The secret behind its speed is how &lt;code&gt;-countByEnumeratingWithState:objects:count:&lt;/code&gt; buffers collection members, loading them in as necessary. Unlike a single-threaded &lt;code&gt;for&lt;/code&gt; loop implementation, objects can be loaded concurrently, making better use of available system resources.&lt;/p&gt;

&lt;p&gt;Apple recommends that you use &lt;code&gt;NSFastEnumeration&lt;/code&gt; &lt;code&gt;for/in&lt;/code&gt;-style enumeration for your collections wherever possible and appropriate. And to be honest, for how easy it is to use and how well it performs, that&amp;#39;s a pretty easy sell. Seriously, use it.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;NSEnumerator&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;But of course, before &lt;code&gt;NSFastEnumeration&lt;/code&gt; (circa OS X 10.5 / iOS 2.0), there was the venerable &lt;code&gt;NSEnumerator&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For the uninitiated, &lt;code&gt;NSEnumerator&lt;/code&gt; is an abstract class that implements two methods:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nextObject&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;allObjects&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;nextObject&lt;/code&gt; returns the next object in the collection, or &lt;code&gt;nil&lt;/code&gt; if unavailable. &lt;code&gt;allObjects&lt;/code&gt; returns all of the remaining objects, if any. &lt;code&gt;NSEnumerator&lt;/code&gt;s can only go forward, and only in single increments.&lt;/p&gt;

&lt;p&gt;To enumerate through all elements in a collection, one would use &lt;code&gt;NSEnumerator&lt;/code&gt; thusly:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSEnumerator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enumerator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enumerator&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nextObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...or because &lt;code&gt;NSEnumerator&lt;/code&gt; itself conforms to &lt;code&gt;&amp;lt;NSFastEnumeration&amp;gt;&lt;/code&gt; in an attempt to stay hip to the way kids do things these days:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enumerator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you&amp;#39;re looking for a convenient way to add fast enumeration to your own non-collection-class-backed objects, &lt;code&gt;NSEnumerator&lt;/code&gt; is likely a much more palatable option than getting your hands messy with &lt;code&gt;NSFastEnumeration&lt;/code&gt;&amp;#39;s implementation details.&lt;/p&gt;

&lt;p&gt;Some quick points of interest about &lt;code&gt;NSEnumeration&lt;/code&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Reverse an array in one line of code with (and excuse the excessive dot syntax) &lt;code&gt;array.reverseObjectEnumerator.allObjects&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Add LINQ-style operations with &lt;a href=&quot;https://github.com/k06a/NSEnumeratorLinq&quot;&gt;&lt;code&gt;NSEnumeratorLinq&lt;/code&gt;&lt;/a&gt;, a third-party library using chained &lt;code&gt;NSEnumerator&lt;/code&gt; subclasses.&lt;/li&gt;
&lt;li&gt;Shake things up with your collection classes in style with &lt;a href=&quot;https://github.com/mattt/TTTRandomizedEnumerator&quot;&gt;&lt;code&gt;TTTRandomizedEnumerator&lt;/code&gt;&lt;/a&gt;, another third-party library, which iterates through elements in a random order.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Enumerate With Blocks&lt;/h2&gt;

&lt;p&gt;Finally, with the introduction of blocks in OS X 10.6 / iOS 4, came a new block-based way to enumerate collections:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enumerateObjectsUsingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Collection classes like &lt;code&gt;NSArray&lt;/code&gt;, &lt;code&gt;NSSet&lt;/code&gt;, &lt;code&gt;NSDictionary&lt;/code&gt;, and &lt;code&gt;NSIndexSet&lt;/code&gt; include a similar set of block enumeration methods.&lt;/p&gt;

&lt;p&gt;One of the advantages of this approach is that the current object index (&lt;code&gt;idx&lt;/code&gt;) is passed along with the object itself. The &lt;code&gt;BOOL&lt;/code&gt; pointer allows for early returns, equivalent to a &lt;code&gt;break&lt;/code&gt; statement in a regular C loop.&lt;/p&gt;

&lt;p&gt;Unless you actually need the numerical index while iterating, it&amp;#39;s almost always faster to use a &lt;code&gt;for/in&lt;/code&gt; &lt;code&gt;NSFastEnumeration&lt;/code&gt; loop instead.&lt;/p&gt;

&lt;p&gt;One last thing to be aware of are the expanded method variants with an &lt;code&gt;options&lt;/code&gt; parameter:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;enumerateObjectsWithOptions:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSEnumerationOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;opts&lt;/span&gt;
                         &lt;span class=&quot;nl&quot;&gt;usingBlock:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;block&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code&gt;NSEnumerationOptions&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSEnumerationConcurrent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1UL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;NSEnumerationReverse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1UL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSEnumerationOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSEnumerationConcurrent&lt;/code&gt;: Specifies that the Block enumeration should be concurrent. The order of invocation is nondeterministic and undefined; this flag is a hint and may be ignored by the implementation under some circumstances; the code of the Block must be safe against concurrent invocation.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSEnumerationReverse&lt;/code&gt;: Specifies that the enumeration should be performed in reverse. This option is available for &lt;code&gt;NSArray&lt;/code&gt; and &lt;code&gt;NSIndexSet&lt;/code&gt; classes; its behavior is undefined for &lt;code&gt;NSDictionary&lt;/code&gt; and &lt;code&gt;NSSet&lt;/code&gt; classes, or when combined with the &lt;code&gt;NSEnumerationConcurrent&lt;/code&gt; flag.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Again, fast enumeration is almost certain to be much faster than block enumeration, but these options may be useful if you&amp;#39;re resigned to using blocks.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;So there you have all of the conventional forms of enumeration in Objective-C and Cocoa.&lt;/p&gt;

&lt;p&gt;What&amp;#39;s especially interesting is that in looking at these approaches, we learn a lesson about the power of abstraction. Higher levels of abstraction are not just easier to write and comprehend, but can often be much faster than doing it the &amp;quot;hard way&amp;quot;.&lt;/p&gt;

&lt;p&gt;High-level commands that declare intention, like &amp;quot;iterate through all of the elements of this collection&amp;quot; lend themselves to high-level compiler optimization in a way that just isn&amp;#39;t possible with pointer arithmetic in a loop. Context is a powerful thing, and designing APIs and functionality accordingly ultimately fulfill that great promise of abstraction: to solve larger problems more easily.&lt;/p&gt;
</description>
        <pubDate>Mon, 01 Jul 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/enumerators/</link>
        <guid>http://nshipster.com/enumerators/</guid>
      </item>
    
      <item>
        <title>NSUUID /&lt;br/&gt;CFUUIDRef /&lt;br/&gt;UIDevice -uniqueIdentifier /&lt;br/&gt;-identifierForVendor</title>
        <description>&lt;p&gt;Let&amp;#39;s say you&amp;#39;re making privacy software that also prevents piracy. I mean, it&amp;#39;s an obvious idea—&lt;a href=&quot;http://www.fakeblock.com&quot;&gt;someone&amp;#39;s going to do it&lt;/a&gt;. You&amp;#39;re just trying to be &lt;em&gt;that&lt;/em&gt; person.&lt;/p&gt;

&lt;p&gt;Until recently, it was trivial to uniquely identify devices between application launches, and even across applications: a simple call to &lt;code&gt;UIDevice -uniqueIdentifier&lt;/code&gt;, and you were all set.&lt;/p&gt;

&lt;p&gt;However, &lt;code&gt;UIDevice -uniqueIdentifier&lt;/code&gt; was deprecated in iOS 5 with the following notes:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Use the &lt;code&gt;identifierForVendor&lt;/code&gt; property of [&lt;code&gt;UIDevice&lt;/code&gt;] or the &lt;code&gt;advertisingIdentifier&lt;/code&gt; property of the &lt;code&gt;ASIdentifierManager&lt;/code&gt; class instead, as appropriate, or use the &lt;code&gt;UUID&lt;/code&gt; method of the &lt;code&gt;NSUUID&lt;/code&gt; class to create a &lt;code&gt;UUID&lt;/code&gt; and write it to the user defaults database.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/news/?id=3212013a&quot;&gt;As of May 1st&lt;/a&gt;, Apple began enforcing this deprecation on all new app submissions, even for apps targeting earlier versions of iOS. Any use of &lt;code&gt;uniqueIdentifier&lt;/code&gt; is grounds for immediate rejection of new binaries.&lt;/p&gt;

&lt;p&gt;Just as privacy and piracy have phonetic and conceptual similarities, device identifiers, whether UUID / GUID, UDID, or otherwise can be rather confusing:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;UUID &lt;em&gt;(Universally Unique Identifier)&lt;/em&gt;&lt;/strong&gt;: A sequence of 128 bits that can guarantee uniqueness across space and time, defined by &lt;a href=&quot;http://www.ietf.org/rfc/rfc4122.txt&quot;&gt;RFC 4122&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GUID &lt;em&gt;(Globally Unique Identifier)&lt;/em&gt;&lt;/strong&gt;: Microsoft&amp;#39;s implementation of the UUID specification; often used interchangeably with UUID.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;UDID &lt;em&gt;(Unique Device Identifier)&lt;/em&gt;&lt;/strong&gt;: A sequence of 40 hexadecimal characters that uniquely identify an iOS device (the device&amp;#39;s &lt;a href=&quot;https://en.wikipedia.org/wiki/Social_Security_number&quot;&gt;Social Security Number&lt;/a&gt;, if you will). This value can be &lt;a href=&quot;http://whatsmyudid.com&quot;&gt;retrieved through iTunes&lt;/a&gt;, or found using &lt;code&gt;UIDevice -uniqueIdentifier&lt;/code&gt;. Derived from hardware details like &lt;a href=&quot;http://en.wikipedia.org/wiki/MAC_address&quot;&gt;MAC address&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Incidentally, all of the suggested replacements for &lt;code&gt;UIDevice -uniqueIdentifier&lt;/code&gt; listed in its deprecation notes return UUID, whether created automatically with &lt;code&gt;UIDevice -identifierForVendor&lt;/code&gt; &amp;amp; &lt;code&gt;ASIdentifierManager -advertisingIdentifier&lt;/code&gt; or manually with &lt;code&gt;NSUUID&lt;/code&gt; (or &lt;code&gt;CFUUIDCreate&lt;/code&gt;).&lt;/p&gt;

&lt;h2&gt;Vendor Identifier&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;The value of this property is the same for apps that come from the same vendor running on the same device. A different value is returned for apps on the same device that come from different vendors, and for apps on different devices regardless of vendor.&lt;/p&gt;

&lt;p&gt;The value in this property remains the same while the app (or another app from the same vendor) is installed on the iOS device. The value changes when the user deletes all of that vendor’s apps from the device and subsequently reinstalls one or more of them. Therefore, if your app stores the value of this property anywhere, you should gracefully handle situations where the identifier changes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In many ways, this is what should have been used the whole time. App developers now have a way to identify devices uniquely—even across other apps by the same developer—without being entrusted with something as sensitive as the device&amp;#39;s UDID.&lt;/p&gt;

&lt;p&gt;For most applications, doing a find-and-replace of &lt;code&gt;uniqueIdentifier&lt;/code&gt; to &lt;code&gt;identifierForVendor&lt;/code&gt; is enough.&lt;/p&gt;

&lt;p&gt;However, for advertising networks, which require a consistent identifier across applications from many developers, a different approach is required:&lt;/p&gt;

&lt;h2&gt;Advertising Identifier&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;iOS 6 introduces the Advertising Identifier, a non-permanent, non-personal, device identifier, that advertising networks will use to give you more control over advertisers’ ability to use tracking methods. If you choose to limit ad tracking, advertising networks using the Advertising Identifier may no longer gather information to serve you targeted ads. In the future all advertising networks will be required to use the Advertising Identifier. However, until advertising networks transition to using the Advertising Identifier you may still receive targeted ads from other networks.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;As the sole component of the &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/DeviceInformation/Reference/AdSupport_Framework/_index.html#//apple_ref/doc/uid/TP40012658&quot;&gt;Ad Support framework&lt;/a&gt;, &lt;code&gt;ASIdentifierManager&lt;/code&gt;&amp;#39;s modus operandi is clear: provide a way for ad networks to track users between different applications in a way that doesn&amp;#39;t compromise privacy.&lt;/p&gt;

&lt;p&gt;Users can opt out of ad targeting in a Settings screen added in iOS 6.1, found at &lt;strong&gt;Settings &amp;gt; General &amp;gt; About &amp;gt; Advertising&lt;/strong&gt;:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/ad-support-limit-ad-tracking.png&quot; alt=&quot;Limit Ad Tracking&quot;&gt;&lt;/p&gt;

&lt;h2&gt;NSUUID &amp;amp; CFUUIDRef&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSUUID&lt;/code&gt; was added to Foundation in iOS 6 as a way to easily create UUIDs. How easy?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UUID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUUID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UUID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UUIDString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If your app targets iOS 5 or earlier, however, you have to settle for Core Foundation functions on &lt;code&gt;CFUUIDRef&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CFUUIDRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;uuid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFUUIDCreate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UUID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFUUIDCreateString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;uuid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For apps building against a base SDK without the vendor or advertising identifier APIs, a similar effect can be achieved—as recommended in the deprecation notes—by using &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSUserDefaults_Class/Reference/Reference.html&quot;&gt;&lt;code&gt;NSUserDefaults&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;didFinishLaunchingWithOptions:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;launchOptions&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UUID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUserDefaults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;standardUserDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kApplicationUUIDKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UUID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;CFUUIDRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;uuid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFUUIDCreate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;UUID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge_transfer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFUUIDCreateString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;uuid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;CFRelease&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uuid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUserDefaults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;standardUserDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UUID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kApplicationUUIDKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUserDefaults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;standardUserDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;synchronize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This way, a UUID will be generated once when the app is launched for the first time, and then stored in &lt;code&gt;NSUserDefaults&lt;/code&gt; to be retrieved on each subsequent app launch. Unlike advertising or vendor identifiers, these identifiers would not be shared across other apps, but for most intents and purposes, this is works just fine.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Of course, UUIDs have many other uses: primary identifiers for records in distributed systems, names for temporary files, or even a bulk color generator (chunk the hexadecimal representation into 5 groups of 6!). But on iOS, it&amp;#39;s all about tracking, about finding what was lost in a sea of network traffic and possibilities. Knowing where you stand on uniqueness is the first step to understanding all of this.&lt;/p&gt;
</description>
        <pubDate>Mon, 24 Jun 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/uuid-udid-unique-identifier/</link>
        <guid>http://nshipster.com/uuid-udid-unique-identifier/</guid>
      </item>
    
      <item>
        <title>Object Subscripting</title>
        <description>&lt;p&gt;Xcode 4.4 quietly introduced a syntactic revolution to Objective-C. Like all revolutions, however, its origins and agitators require some effort to trace: Xcode 4.4 shipped with Apple LLVM Compiler 4.0, which incorporated changes effective in the Clang front-end as of version 3.1.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For the uninitiated, &lt;a href=&quot;http://clang.llvm.org/index.html&quot;&gt;Clang&lt;/a&gt; is the open source C language family front end to the &lt;a href=&quot;http://www.llvm.org&quot;&gt;LLVM&lt;/a&gt; compiler. Clang is responsible for all of the killer language features in Objective-C going back a few years, such as &amp;quot;Build &amp;amp; Analyze&amp;quot;, ARC, blocks, and a nearly 3× performance boost when compiling over GCC.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Clang 3.1 added three features to Objective-C whose aesthetic &amp;amp; cosmetic impact is comparable to the changes brought about in Objective-C 2.0: &lt;strong&gt;&lt;code&gt;NSNumber&lt;/code&gt; Literals&lt;/strong&gt;, &lt;strong&gt;Collection Literals&lt;/strong&gt;, and &lt;strong&gt;Object Subscripting&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;In a single Xcode release, Objective-C went from this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionaryWithObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numberWithInteger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...to this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Concision is the essence of clarity.&lt;/p&gt;

&lt;p&gt;Shorter code means typing less, but it also means understanding more. Even a sprinkle of syntactic sugar can be enough to transform a language, and unlock new design patterns.&lt;/p&gt;

&lt;p&gt;Collection literals become preferable to property lists for configuration.&lt;br/&gt;
Single-element array parameters become more acceptable.&lt;br/&gt;
APIs requiring boxed numeric values become more palatable.&lt;br/&gt;&lt;/p&gt;

&lt;p&gt;However, what remains relatively under-utilized even now—a year after the these language features were added—is object subscripting. Perhaps after reading the rest of this article, though, you&amp;#39;ll help to change this.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Elements in a C array are laid out contiguously in memory, and is referenced by the address of its first element. To get the value at a particular index, one would offset this address by the size of an array element, multiplied by the desired index. This pointer arithmetic is provided by the &lt;code&gt;[]&lt;/code&gt; operator.&lt;/p&gt;

&lt;p&gt;Over time, scripting languages began to take greater liberties with this familiar convention, expanding its role to get &amp;amp; set values in arrays, as well as hashes and objects.&lt;/p&gt;

&lt;p&gt;With Clang 3.1, everything has come full-circle: what began as a C operator and co-opted by scripting languages, has now been rolled back into Objective-C. And like the aforementioned scripting languages of yore, the &lt;code&gt;[]&lt;/code&gt; subscripting operator in Objective-C has been similarly overloaded to handle both integer-indexed and object-keyed accessors.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;bar&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;If Objective-C is a superset of C, how can Object Subscripting overload the &lt;code&gt;[]&lt;/code&gt; C operator? The modern Objective-C runtime prohibits pointer arithmetic on objects, making this semantic pivot possible.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Where this really becomes interesting is when you extend your own classes with subscripting support:&lt;/p&gt;

&lt;h3&gt;Custom Indexed Subscripting&lt;/h3&gt;

&lt;p&gt;To add custom-indexed subscripting support to your class, simply declare and implement the following methods:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;objectAtIndexedSubscript:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;atIndexedSubscript:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Custom Keyed Subscripting&lt;/h3&gt;

&lt;p&gt;Similarly, custom-keyed subscripting can be added to your class by declaring and implementing these methods:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;objectForKeyedSubscript:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCopying&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setObject:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;forKeyedSubscript:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCopying&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Custom Subscripting as DSL&lt;/h2&gt;

&lt;p&gt;The whole point in describing all of this is to encourage unconventional thinking about this whole language feature. At the moment, a majority of custom subscripting in classes is used as a convenience accessor to a private collection class. But there&amp;#39;s nothing to stop you from, for instance, doing this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;GET /users/:id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...or this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;piece&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;chessBoard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;E1&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...or this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;managedObjectContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Product WHERE stock &amp;gt; 20&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Because of how flexible and concise subscripting is, it is extremely well-purposed for creating &lt;a href=&quot;http://en.wikipedia.org/wiki/Domain-specific_language&quot;&gt;DSL&lt;/a&gt;s. When defining custom subscripting methods on your own class, there are no restrictions on how they are implemented. You can use this syntax to provide a shorthand for defining application routes, search queries, compound property accessors, or plain-old KVO.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;This is, of course, dangerous thinking. Subscripting isn&amp;#39;t your new bicycle. It isn&amp;#39;t a giant hammer. Hell, &lt;em&gt;it isn&amp;#39;t even a giant screwdriver!&lt;/em&gt; If there is one thing Object Subscripting DSLs are, it&amp;#39;s trouble. Here be dragons.&lt;/p&gt;

&lt;p&gt;That said, it does open up some interesting opportunities to bend syntactic conventions to useful ends.&lt;/p&gt;
</description>
        <pubDate>Mon, 17 Jun 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/object-subscripting/</link>
        <guid>http://nshipster.com/object-subscripting/</guid>
      </item>
    
      <item>
        <title>NSHipster Quiz #2</title>
        <description>&lt;p&gt;On June 11th, we organized an NSHipster Pub Quiz for WWDC attendees. Like &lt;a href=&quot;http://nshipster.com/nshipster-quiz-1/&quot;&gt;our first quiz&lt;/a&gt;, questions ranged from random Apple trivia to obscure framework questions. The event was hosted by &lt;a href=&quot;http://newrelic.com&quot;&gt;New Relic&lt;/a&gt;, and sponsored by &lt;a href=&quot;https://heroku.com&quot;&gt;Heroku&lt;/a&gt; &amp;amp; &lt;a href=&quot;http://www.mutualmobile.com&quot;&gt;Mutual Mobile&lt;/a&gt;. About 100 developers attended the event, with the team &amp;quot;UIResponders&amp;quot; taking top prize.&lt;/p&gt;

&lt;p&gt;For everyone that couldn&amp;#39;t make it to the event, here&amp;#39;s an opportunity to play along at home. Here are some ground rules:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;There are 4 Rounds, with 10 questions each&lt;/li&gt;
&lt;li&gt;Record answers on a separate sheet of paper&lt;/li&gt;
&lt;li&gt;Each correct answer to a question gets you 1 point (unless otherwise specified)&lt;/li&gt;
&lt;li&gt;Play with up to 5 friends for maximum enjoyment&lt;/li&gt;
&lt;li&gt;Don&amp;#39;t be lame and look things up on the Internet or in Xcode&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;h2&gt;Round 1: General Knowledge&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;Mac OS 10.9 Mavericks is named after a surf spot in Northern California. What was the surf spot named after?&lt;/li&gt;
&lt;li&gt;What is the Objective-C Type Encoding of &lt;code&gt;NSError **&lt;/code&gt;?&lt;/li&gt;
&lt;li&gt;What is the name of the command line utility that generates a &lt;code&gt;.strings&lt;/code&gt; file from Objective-C source code with &lt;code&gt;NSLocalizedString&lt;/code&gt;?&lt;/li&gt;
&lt;li&gt;What &lt;code&gt;NSArray&lt;/code&gt; method was available since 10.6, but only made public as of 10.9?&lt;/li&gt;
&lt;li&gt;What is the name of the open source project whose C/C++ libraries power &lt;code&gt;NSRegularExpression&lt;/code&gt;, &lt;code&gt;CFStringTransform&lt;/code&gt;, and other Unicode features in Cocoa?&lt;/li&gt;
&lt;li&gt;On May 19, 2001 Apple opened its first 2 retail stores. Where were they? (1 point for each exact location, or ½‎ for each state)&lt;/li&gt;
&lt;li&gt;What is the name of the private Apple TV framework responsible for appliance UI?&lt;/li&gt;
&lt;li&gt;Which Apple VP said &amp;quot;Can&amp;#39;t innovate anymore,  my ass!&amp;quot;?&lt;/li&gt;
&lt;li&gt;List all of the rooms in Moscone West named after San Francisco neighborhoods, starting at Level 2 (1 point for each room)&lt;/li&gt;
&lt;li&gt;Complete the following verse:&lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
&lt;p&gt;We&amp;#39;ve come too far
To give up who we are&lt;/p&gt;

&lt;hr&gt;

&lt;hr&gt;

&lt;p&gt;She&amp;#39;s up all night to the sun...&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Round 2: Before &amp;amp; After&lt;/h2&gt;

&lt;p&gt;What are the following better known as today?&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Yellow Box&lt;/li&gt;
&lt;li&gt;AppleSearch&lt;/li&gt;
&lt;li&gt;Jaguar (i.e. &amp;quot;Mac OS X 10.__&amp;quot;?)&lt;/li&gt;
&lt;li&gt;Rendezvous&lt;/li&gt;
&lt;li&gt;SoundJam&lt;/li&gt;
&lt;li&gt;Six Pack&lt;/li&gt;
&lt;li&gt;Universal Access&lt;/li&gt;
&lt;li&gt;Graphics Group (semi-related to Apple)&lt;/li&gt;
&lt;li&gt;20525 Mariani Ave.&lt;/li&gt;
&lt;li&gt;Yerba Buena (has to do with California, not Apple)&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 3: Picture Round&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;1. Which WWDC keynote was this from?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-2.s3.amazonaws.com/question-1.jpg&quot; alt=&quot;Question 1&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;2. Which WWDC keynote was this from?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-2.s3.amazonaws.com/question-2.jpg&quot; alt=&quot;Question 2&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;3. Which WWDC keynote was this from?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-2.s3.amazonaws.com/question-3.jpg&quot; alt=&quot;Question 3&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;4. Which WWDC keynote was this from?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-2.s3.amazonaws.com/question-4.jpg&quot; alt=&quot;Question 4&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;5. WTF is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-2.s3.amazonaws.com/question-5.jpg&quot; alt=&quot;Question 5&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;6. What is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-2.s3.amazonaws.com/question-6.jpg&quot; alt=&quot;Question 6&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;7. What is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-2.s3.amazonaws.com/question-7.jpg&quot; alt=&quot;Question 7&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;8. What is this? (and which generation?)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-2.s3.amazonaws.com/question-8.jpg&quot; alt=&quot;Question 8&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;9. Which &amp;quot;Core&amp;quot; framework is represented by this logo?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-2.s3.amazonaws.com/question-9.jpg&quot; alt=&quot;Question 9&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;10. Everybody loves Craig &lt;em&gt;/fɛdɹ̩igi/&lt;/em&gt; (Pictured). How do you spell his last name?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-2.s3.amazonaws.com/question-10.jpg&quot; alt=&quot;Question 10&quot;&gt;&lt;/p&gt;

&lt;h2&gt;Round 4: Name That Framework!&lt;/h2&gt;

&lt;p&gt;For each question, a list of three classes from the same framework have been listed without their two-letter namespace prefix. Name the framework that they all belong to!&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Call, CallCenter, Carrier&lt;/li&gt;
&lt;li&gt;Attitude, LogItem, Magnetometer Data&lt;/li&gt;
&lt;li&gt;IdentifierManager&lt;/li&gt;
&lt;li&gt;Request, ComposeViewController, ServiceTypes.h&lt;/li&gt;
&lt;li&gt;Metadata, FileWrapper, FileManager&lt;/li&gt;
&lt;li&gt;Alarm, RecurrenceEnd, Source&lt;/li&gt;
&lt;li&gt;NotificationBanner, Player, SessionError&lt;/li&gt;
&lt;li&gt;Null, Zone, Coder&lt;/li&gt;
&lt;li&gt;Attribute Description, Relationship Description, Property Mapping&lt;/li&gt;
&lt;li&gt;Map Table, Hash Table, Pointer Array&lt;/li&gt;
&lt;/ol&gt;

&lt;hr&gt;

&lt;h1&gt;Answers&lt;/h1&gt;

&lt;h2&gt;Round 1: General Knowledge&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Mavericks_(location&quot;&gt;A white-haired German Shepherd named Maverick&lt;/a&gt;#History) (anything about a dog gets the point)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://nshipster.com/type-encodings/&quot;&gt;&lt;code&gt;^@&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/genstrings.1.html&quot;&gt;&lt;code&gt;genstrings&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSArray -firstObject&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://site.icu-project.org&quot;&gt;ICU (International Components for Unicode)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Apple_Store#History&quot;&gt; Tysons Corner, Virginia &amp;amp; Glendale, California&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://nshipster.com/backrow/&quot;&gt;BackRow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.theverge.com/2013/6/13/4423844/cant-innovate-anymore-my-ass-apple&quot;&gt;Phil Schiller&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Pacific Heights, Mission, Nob Hill, Russian Hill, Marina, Presidio&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://rock.rapgenius.com/Daft-punk-get-lucky-lyrics&quot;&gt;&amp;quot;So let&amp;#39;s raise the bar / And our cups to the stars&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 2: Before &amp;amp; After&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Cocoa_%28API%29&quot;&gt;Cocoa&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Sherlock_%28Software%29&quot;&gt;Sherlock&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Mac_OS_X_v10.2&quot;&gt;Mac OS X 10.2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Bonjour_%28Software%29&quot;&gt;Bonjour&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Itunes#History&quot;&gt;iTunes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/System_6&quot;&gt;System 6 / Mac OS 6&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.apple.com/accessibility/&quot;&gt;Accessibility&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Pixar&quot;&gt;Pixar&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/1_infinite_loop&quot;&gt;1 Infinite Loop&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.sfmuseum.org/hist/name.html&quot;&gt;San Francisco&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 3: Picture Round&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;2011&lt;/li&gt;
&lt;li&gt;2009&lt;/li&gt;
&lt;li&gt;2012&lt;/li&gt;
&lt;li&gt;2008&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/EMate_300&quot;&gt;eMate 300&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Xserve_RAID&quot;&gt;Xserve RAID&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/ISight&quot;&gt;iSight&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Ipod_shuffle#Third_generation&quot;&gt;3rd gen. iPod Shuffle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Core_Audio&quot;&gt;Core Audio&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Craig_Federighi&quot;&gt;&amp;quot;Federighi&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 4: Name That Framework!&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html&quot;&gt;Core Telephony&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CoreMotion_Reference/_index.html&quot;&gt;Core Motion&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/DeviceInformation/Reference/AdSupport_Framework/_index.html&quot;&gt;Ad Support&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html%23//apple_ref/doc/uid/TP40012233&quot;&gt;Social&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/ObjC_classic/_index.html&quot;&gt;Foundation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EventKitFrameworkRef/_index.html&quot;&gt;EventKit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GameKit_Collection/_index.html&quot;&gt;Game Kit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/ObjC_classic/_index.html&quot;&gt;Foundation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreData_ObjC/_index.html&quot;&gt;Core Data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/ObjC_classic/_index.html&quot;&gt;Foundation&lt;/a&gt; or &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CoreFoundation_Collection/_index.html&quot;&gt;Core Foundation&lt;/a&gt; (2 points if you got both)&lt;/li&gt;
&lt;/ol&gt;

&lt;hr&gt;

&lt;p&gt;So how did you fare? Tweet out your score to see how you stack up to your peers!&lt;/p&gt;

&lt;p&gt;We&amp;#39;ll be announcing another pub quiz soon, so be sure to &lt;a href=&quot;http://eepurl.com/ys5K1&quot;&gt;sign up here&lt;/a&gt; to be the first to know about it!&lt;/p&gt;
</description>
        <pubDate>Wed, 12 Jun 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nshipster-quiz-2/</link>
        <guid>http://nshipster.com/nshipster-quiz-2/</guid>
      </item>
    
      <item>
        <title>NSDataDetector</title>
        <description>&lt;p&gt;Machines speak in binary, while humans speak in riddles, half-truths, and omissions.&lt;/p&gt;

&lt;p&gt;And until humanity embraces &lt;a href=&quot;http://en.wikipedia.org/wiki/Resource_Description_Framework&quot;&gt;RDF&lt;/a&gt; for all of their daily interactions, a large chunk of artificial intelligence is going to go into figuring out what the heck we&amp;#39;re all talking about.&lt;/p&gt;

&lt;p&gt;Because in the basic interactions of our daily lives—meeting people, making plans, finding information online—there is immense value in automatically converting from implicit human language to explicit structured data, so that it can be easily added to our calendars, address books, maps, and reminders.&lt;/p&gt;

&lt;p&gt;Fortunately for Cocoa developers, there&amp;#39;s an easy solution: &lt;code&gt;NSDataDetector&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSDataDetector&lt;/code&gt; is a subclass of &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html&quot;&gt;&lt;code&gt;NSRegularExpression&lt;/code&gt;&lt;/a&gt;, but instead of matching on an ICU pattern, it detects semi-structured information: dates, addresses, links, phone numbers and transit information.&lt;/p&gt;

&lt;p&gt;It does all of this with frightening accuracy. &lt;code&gt;NSDataDetector&lt;/code&gt; will match flight numbers, address snippets, oddly formatted digits, and even relative deictic expressions like &amp;quot;next Saturday at 5&amp;quot;.&lt;/p&gt;

&lt;p&gt;You can think of it as a regexp matcher with incredibly complicated expressions that can extract information from natural language (though its actual implementation details may be somewhat more complicated than that).&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSDataDetector&lt;/code&gt; objects are initialized with a bitmask of types of information to check, and then passed strings to match on. Like &lt;code&gt;NSRegularExpression&lt;/code&gt;, each match found in a string is represented by a &lt;code&gt;NSTextCheckingResult&lt;/code&gt;, which has details like character range and match type. However, &lt;code&gt;NSDataDetector&lt;/code&gt;-specific types may also contain metadata such as address or date components.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDataDetector&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;detector&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDataDetector&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataDetectorWithTypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSTextCheckingTypeAddress&lt;/span&gt;
                                                        &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSTextCheckingTypePhoneNumber&lt;/span&gt;
                                                           &lt;span class=&quot;nl&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;123 Main St. / (555) 555-5555&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;detector&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enumerateMatchesInString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;
                           &lt;span class=&quot;nl&quot;&gt;options:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kNilOptions&lt;/span&gt;
                             &lt;span class=&quot;nl&quot;&gt;range:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
                        &lt;span class=&quot;nl&quot;&gt;usingBlock:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSTextCheckingResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMatchingFlags&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Match: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;When initializing &lt;code&gt;NSDataDetector&lt;/code&gt;, be sure to specify only the types you&amp;#39;re interested in. With each additional type to be checked comes a nontrivial performance cost.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Data Detector Match Types&lt;/h2&gt;

&lt;p&gt;Because of how much &lt;code&gt;NSTextCheckingResult&lt;/code&gt; is used for, it&amp;#39;s not immediately clear which properties are specific to &lt;code&gt;NSDataDetector&lt;/code&gt;. For your reference, here is a table of the different &lt;code&gt;NSTextCheckingTypes&lt;/code&gt; for &lt;code&gt;NSDataDetector&lt;/code&gt; matches, and their associated properties:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Type&lt;/th&gt;
      &lt;th&gt;Properties&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;

    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSTextCheckingTypeDate&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;tt&gt;date&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;duration&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;timeZone&lt;/tt&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSTextCheckingTypeAddress&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;tt&gt;addressComponents&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/li&gt;
          &lt;ul&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingNameKey&lt;/tt&gt;&lt;/li&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingJobTitleKey&lt;/tt&gt;&lt;/li&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingOrganizationKey&lt;/tt&gt;&lt;/li&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingStreetKey&lt;/tt&gt;&lt;/li&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingCityKey&lt;/tt&gt;&lt;/li&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingStateKey&lt;/tt&gt;&lt;/li&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingZIPKey&lt;/tt&gt;&lt;/li&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingCountryKey&lt;/tt&gt;&lt;/li&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingPhoneKey&lt;/tt&gt;&lt;/li&gt;
          &lt;/ul&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSTextCheckingTypeLink&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;tt&gt;url&lt;/tt&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSTextCheckingTypePhoneNumber&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;tt&gt;phoneNumber&lt;/tt&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSTextCheckingTypeTransitInformation&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;tt&gt;components&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/li&gt;
          &lt;ul&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingAirlineKey&lt;/tt&gt;&lt;/li&gt;
            &lt;li&gt;&lt;tt&gt;NSTextCheckingFlightKey&lt;/tt&gt;&lt;/li&gt;
          &lt;/ul&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td colspan=&quot;2&quot;&gt;&lt;sup&gt;*&lt;/sup&gt; &lt;tt&gt;NSDictionary&lt;/tt&gt; properties have values at defined keys.
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;h2&gt;Data Detection on iOS&lt;/h2&gt;

&lt;p&gt;Somewhat confusingly, iOS also defines &lt;code&gt;UIDataDetectorTypes&lt;/code&gt;. A bitmask of these values can be set as the &lt;code&gt;dataDetectorTypes&lt;/code&gt; of a &lt;code&gt;UITextView&lt;/code&gt; to have detected data automatically linked in the displayed text.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;UIDataDetectorTypes&lt;/code&gt; is distinct from &lt;code&gt;NSTextCheckingTypes&lt;/code&gt; in that equivalent enum constants (e.g. &lt;code&gt;UIDataDetectorTypePhoneNumber&lt;/code&gt; and &lt;code&gt;NSTextCheckingTypePhoneNumber&lt;/code&gt;) do not have the same integer value, and not all values in one are found in the other. Converting from &lt;code&gt;UIDataDetectorTypes&lt;/code&gt; to &lt;code&gt;NSTextCheckingTypes&lt;/code&gt; can be accomplished with a function:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSTextCheckingType&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NSTextCheckingTypesFromUIDataDetectorTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIDataDetectorTypes&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataDetectorType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSTextCheckingType&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;textCheckingType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dataDetectorType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIDataDetectorTypeAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;textCheckingType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSTextCheckingTypeAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dataDetectorType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIDataDetectorTypeCalendarEvent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;textCheckingType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSTextCheckingTypeDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dataDetectorType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIDataDetectorTypeLink&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;textCheckingType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSTextCheckingTypeLink&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dataDetectorType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIDataDetectorTypePhoneNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;textCheckingType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSTextCheckingTypePhoneNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;textCheckingType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you&amp;#39;re looking for an easy way to use &lt;code&gt;NSDataDetector&lt;/code&gt; in your iOS app, you may want to check out &lt;a href=&quot;https://github.com/mattt/TTTAttributedLabel/&quot;&gt;TTTAttributedLabel&lt;/a&gt;, a drop-in replacement for &lt;code&gt;UILabel&lt;/code&gt; that supports attributed strings, and (as of 1.7.0) automatic data detection of &lt;code&gt;NSTextCheckingTypes&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Do I detect some disbelief of how easy it is to translate between natural language and structured data? This should not be surprising, given how &lt;a href=&quot;http://nshipster.com/cfstringtransform/&quot;&gt;insanely&lt;/a&gt; &lt;a href=&quot;http://nshipster.com/nslinguistictagger/&quot;&gt;great&lt;/a&gt; Cocoa&amp;#39;s linguistic APIs are.&lt;/p&gt;

&lt;p&gt;Don&amp;#39;t make your users re-enter information by hand just because of a programming oversight. Take advantage of &lt;code&gt;NSDataDetector&lt;/code&gt; in your app to unlock the structured information already hiding in plain sight.&lt;/p&gt;
</description>
        <pubDate>Sun, 02 Jun 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nsdatadetector/</link>
        <guid>http://nshipster.com/nsdatadetector/</guid>
      </item>
    
      <item>
        <title>Unit Testing</title>
        <description>&lt;p&gt;Unit Testing is an emotional topic for developers. It inspires a sense of superiority to its most zealous adherents, and evokes a feeling of inadequacy to non-practitioners. &lt;a href=&quot;http://ntoll.org/article/tdd-cargo-cult&quot;&gt;Cargo Cults like TDD&lt;/a&gt; stake their reputation on unit testing to the point of co-opting and conflating utility with morality.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s as close to a religious matter as programmers get, aside from the tabs-versus-spaces debate.&lt;/p&gt;

&lt;p&gt;Objective-C developers have, for the most part, remained relatively apathetic to Unit Testing (&lt;em&gt;&amp;quot;There&amp;#39;s that SenTest thing, but who uses that, really?&amp;quot;&lt;/em&gt;). Between static typing, typically manageable project sizes, and a compiler advanced enough to &lt;a href=&quot;http://clang.llvm.org/doxygen/Rewriter_8h_source.html&quot;&gt;rewrite code for you&lt;/a&gt;, unit testing isn&amp;#39;t as much of a necessity as it is for more dynamic languages like Ruby (at least in practice).&lt;/p&gt;

&lt;p&gt;But that&amp;#39;s not to say that Objective-C developers wouldn&amp;#39;t benefit from unit testing. In fact, as Objective-C continues to become more collaborative, with growing participation in the open source community, automated testing will become a necessity.&lt;/p&gt;

&lt;p&gt;This week NSHipster will explore the world of unit testing frameworks, and how to set up an automated build system with Travis CI.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Unit_testing&quot;&gt;Unit Testing&lt;/a&gt; is a tool, just like any other tool. Its purpose is to make us better at our jobs, which is to produce robust, maintainable software.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s a simple enough premise: write code to construct environments that exercise the particular behavior of a given method, function, class, or feature. Variables are isolated in a scientific manner, so as to test assumptions with logical atomicity.&lt;/p&gt;

&lt;h2&gt;OCUnit&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.sente.ch/software/ocunit/&quot;&gt;OCUnit&lt;/a&gt;, a.k.a. SenTestingKit, was integrated into Xcode 2.1 circa WWDC 2005, &lt;a href=&quot;http://www.friday.com/bbum/2005/09/24/unit-testing&quot;&gt;as a result of its use in the development of Core Data 1.0&lt;/a&gt;. Developed by &lt;a href=&quot;http://www.sente.ch&quot;&gt;Sen:te&lt;/a&gt;, OCUnit is actually one of the first unit testing libraries written for any language.&lt;/p&gt;

&lt;p&gt;Unit Tests were added into a separate testing target in the Xcode Project. Each test file defines an &lt;code&gt;SenTestCase&lt;/code&gt; subclass, which implements a series of methods beginning with the word &lt;code&gt;test&lt;/code&gt;. C &lt;code&gt;assert&lt;/code&gt;-style macros are used to fail tests if the specified condition is not met. Each test is run in sequence, independently of one another, with the results logged afterwards:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#import &amp;lt;SenTestingKit/SenTestingKit.h&amp;gt;&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#import &amp;quot;Person.h&amp;quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestPerson&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;SenTestCase&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestPerson&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;testFullName&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Pablo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Picasso&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;STAssertEqualObjects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fullName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Pablo Picasso&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The SenTestingKit assertions are about what you&amp;#39;d expect, offering bread-and-butter equality, existence, and truth checks:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;STAssertNil()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertNotNil()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertTrue()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertFalse()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertEqualObjects()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertEquals()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertEqualsWithAccuracy()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertThrows()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertThrowsSpecific()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertThrowsSpecificNamed()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertNoThrow()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertNoThrowSpecific()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertNoThrowSpecificNamed()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertTrueNoThrow()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAssertFalseNoThrow()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STFail()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And yet, as useful as tests are, they necessarily introduce friction into a development cycle. When project pressures begin to weigh, tests are the first thing to be thrown overboard. At some point, the tests stop passing (&amp;quot;we can worry about that later—now we have to ship!&amp;quot;)&lt;/p&gt;

&lt;p&gt;The only chance testing has to remain relevant in high-pressure situations is to reduce that friction in development. Essentially, tests need to become both &lt;em&gt;easier to write&lt;/em&gt; and &lt;em&gt;easier to run&lt;/em&gt;.&lt;/p&gt;

&lt;h2&gt;Open Source Libraries&lt;/h2&gt;

&lt;p&gt;There are a myriad of open source libraries that attempt to make testing more palatable by way of syntactic sugar and features like &lt;a href=&quot;https://en.wikipedia.org/wiki/Method_stub&quot;&gt;method stubs&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Mock_object&quot;&gt;mock objects&lt;/a&gt;, and &lt;a href=&quot;http://en.wikipedia.org/wiki/Futures_and_promises&quot;&gt;promises&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here&amp;#39;s a list of some of the most useful open source libraries for unit testing:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;th colspan=&quot;3&quot;&gt;Mock Objects&lt;/th&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/erikdoe/ocmock&quot;&gt;OCMock&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/erikdoe&quot;&gt;Erik Doernenburg&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=erikdoe&amp;repo=ocmock&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/jonreid/OCMockito&quot;&gt;OCMockito&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/jonreid&quot;&gt;Jon Reid&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=jonreid&amp;repo=OCMockito&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;

  &lt;thead&gt;
    &lt;th colspan=&quot;3&quot;&gt;Matchers&lt;/th&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/specta/expecta&quot;&gt;Expecta&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/petejkim&quot;&gt;Peter Jihoon Kim&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=specta&amp;repo=expecta&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/hamcrest/OCHamcrest&quot;&gt;OCHamcrest&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/jonreid&quot;&gt;Jon Reid&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=hamcrest&amp;repo=OCHamcrest&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;

  &lt;thead&gt;
    &lt;th colspan=&quot;3&quot;&gt;BDD / TDD&lt;/th&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/specta/specta&quot;&gt;Specta&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/petejkim&quot;&gt;Peter Jihoon Kim&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=specta&amp;repo=specta&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/allending/Kiwi&quot;&gt;Kiwi&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/allending&quot;&gt;Allen Ding&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=allending&amp;repo=Kiwi&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/pivotal/cedar&quot;&gt;Cedar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/pivotal&quot;&gt;Pivotal Labs&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=pivotal&amp;repo=cedar&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;

  &lt;thead&gt;
    &lt;th colspan=&quot;3&quot;&gt;Frameworks&lt;/th&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/gabriel/gh-unit/&quot;&gt;GHUnit&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/gabriel&quot;&gt;Gabriel Handford&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=gabriel&amp;repo=gh-unit&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2&gt;Automated Testing&lt;/h2&gt;

&lt;p&gt;Making tests easier to write is one thing, but getting them to run without affecting productivity is quite another.&lt;/p&gt;

&lt;h3&gt;Jenkins&lt;/h3&gt;

&lt;p&gt;For a long time, installing &lt;a href=&quot;http://jenkins-ci.org&quot;&gt;Jenkins&lt;/a&gt; on a dedicated Mac Mini was the state-of-the-art for automated build servers.&lt;/p&gt;

&lt;p&gt;Aside from the fact that it&amp;#39;s &lt;em&gt;kinda the worst thing ever to set-up&lt;/em&gt;, &lt;a href=&quot;https://speakerdeck.com/subdigital/ios-build-automation-with-jenkins&quot;&gt;you can do a lot of cool things&lt;/a&gt; like notifying build status over IM or IRC, automatically distributing builds to &lt;a href=&quot;https://testflightapp.com/dashboard/&quot;&gt;TestFlight&lt;/a&gt; or &lt;a href=&quot;http://hockeyapp.net&quot;&gt;HockeyApp&lt;/a&gt; with &lt;a href=&quot;https://github.com/nomad/shenzhen&quot;&gt;Shenzhen&lt;/a&gt;, and generating documentation with &lt;a href=&quot;http://gentlebytes.com/appledoc/&quot;&gt;AppleDoc&lt;/a&gt;.&lt;/p&gt;

&lt;h3&gt;Travis&lt;/h3&gt;

&lt;p&gt;Until recently, automated unit testing for Objective-C was the privilege of projects that could dedicate the time and money to setup a CI server. &lt;a href=&quot;https://travis-ci.org&quot;&gt;Travis CI&lt;/a&gt; made CI available to the masses.&lt;/p&gt;

&lt;p&gt;CI for Objective-C is more difficult than for other languages, because it needs to be done on a Mac. For economic reasons, there just isn&amp;#39;t a market for cloud-based OS X environments like there is for Linux. Fortunately, &lt;a href=&quot;https://saucelabs.com&quot;&gt;SauceLabs&lt;/a&gt; has built such a virtualized Mac cloud, and is graciously donating some of it to run tests for open source Objective-C projects on Travis-CI.&lt;/p&gt;

&lt;p&gt;For an example of automated Objective-C unit testing in the wild, check out &lt;a href=&quot;https://github.com/afnetworking/afnetworking#unit-tests&quot;&gt;how AFNetworking does it&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;Tests&lt;/code&gt; subdirectory contains separate projects for iOS and OS X targets, as well as a Podfile, which specifies all of the testing library dependencies. AFNetworking executes a &lt;a href=&quot;http://rake.rubyforge.org&quot;&gt;Rake&lt;/a&gt; task, which shells out to &lt;a href=&quot;https://github.com/facebook/xctool&quot;&gt;&lt;code&gt;xctool&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;All of the configuration for setup is defined in &lt;code&gt;.travis.yml&lt;/code&gt;:&lt;/p&gt;

&lt;h4&gt;.travis.yml&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;language: objective-c
before_install:
  - brew update
  - brew install xctool --HEAD
  - cd Tests &amp;amp;&amp;amp; pod install &amp;amp;&amp;amp; cd $TRAVIS_BUILD_DIR
  - mkdir -p &amp;quot;Tests/AFNetworking Tests.xcodeproj/xcshareddata/xcschemes&amp;quot; &amp;amp;&amp;amp; cp Tests/Schemes/*.xcscheme &amp;quot;Tests/AFNetworking Tests.xcodeproj/xcshareddata/xcschemes/&amp;quot;
script: rake test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Full documentation for the Travis configuration file &lt;a href=&quot;http://about.travis-ci.org/docs/user/build-configuration/&quot;&gt;can be found on Travis-CI.org&lt;/a&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Once again, the direction of Objective-C has been directly influenced by the Ruby community. Those guys and gals are &lt;em&gt;serious&lt;/em&gt; about testing. It&amp;#39;s not like we should complain, though: between &lt;a href=&quot;http://cocoapods.org&quot;&gt;CocoaPods&lt;/a&gt;, &lt;a href=&quot;http://www.rubymotion.com&quot;&gt;RubyMotion&lt;/a&gt;, and &lt;a href=&quot;http://nomad-cli.com&quot;&gt;Nomad&lt;/a&gt;, Ruby has made Objective-C development better by several orders of magnitude.&lt;/p&gt;

&lt;p&gt;The bottom line is that testing has come to Objective-C. It&amp;#39;s not always necessary, and it&amp;#39;s certainly not a silver bullet for writing great software, but it&amp;#39;s proven itself invaluable (especially for open source development). So give it a try now, before &lt;em&gt;not&lt;/em&gt; testing becomes &lt;em&gt;seriously uncool&lt;/em&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 27 May 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/unit-testing/</link>
        <guid>http://nshipster.com/unit-testing/</guid>
      </item>
    
      <item>
        <title>Core Data Libraries &amp; Utilities</title>
        <description>&lt;p&gt;So let&amp;#39;s say that, having determined your particular needs and compared all of the alternatives, you&amp;#39;ve chosen &lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html&quot;&gt;Core Data&lt;/a&gt; for your next app.&lt;/p&gt;

&lt;p&gt;Nothing wrong with that! Core Data is a great choice for apps that model, persist, and query large object graphs.&lt;/p&gt;

&lt;p&gt;Sure it&amp;#39;s complicated, cumbersome, and yes, at times, a real &lt;a href=&quot;http://nshipster.com/nscoding#figure-2&quot;&gt;pain in the ass&lt;/a&gt;—but gosh darn it, some of the best and most popular apps ever built use Core Data. And if it&amp;#39;s good enough for them, it&amp;#39;s probably good enough for you, too.&lt;/p&gt;

&lt;p&gt;...but that&amp;#39;s not to say that Core Data can&amp;#39;t be improved.&lt;/p&gt;

&lt;p&gt;And while there have been many libraries attempting to replace Core Data, there are many more that attempt to make it better. These libraries range from the much-needed dose of syntactic sugar to comprehensive, full-stack frameworks.&lt;/p&gt;

&lt;p&gt;This week on NSHipster: a guided tour of the best open source libraries for working with Core Data. Read on to see how you might make the most from your Core Data experience.&lt;/p&gt;

&lt;hr&gt;

&lt;blockquote&gt;
&lt;p&gt;For your convenience, the following table is provided. Contained within are the most significant open source libraries and utilities for working with Core Data. This is list is by no means comprehensive, so if you think something is missing or out of place, please tweet &lt;a href=&quot;https://twitter.com/NSHipster&quot;&gt;@NSHipster&lt;/a&gt;—or better yet, &lt;a href=&quot;https://github.com/NSHipster/articles&quot;&gt;submit a pull request&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th colspan=&quot;3&quot;&gt;Wrappers&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/magicalpanda/MagicalRecord&quot;&gt;Magical Record&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/casademora&quot;&gt;Saul Mora&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=magicalpanda&amp;repo=MagicalRecord&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/mneorr/Objective-Record&quot;&gt;Objective-Record&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/mneorr&quot;&gt;Marin Usalj&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=mneorr&amp;repo=Objective-Record&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/soffes/SSDataKit&quot;&gt;SSDataKit&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/soffes&quot;&gt;Sam Soffes&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=soffes&amp;repo=SSDataKit&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/martydill/ios-queryable&quot;&gt;ios-queryable&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/martydill&quot;&gt;Marty Dill&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=martydill&amp;repo=ios-queryable&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/apparentsoft/ReactiveCoreData&quot;&gt;ReactiveCoreData&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/apparentsoft&quot;&gt;Jacob Gorban&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=apparentsoft&amp;repo=ReactiveCoreData&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;

  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th colspan=&quot;3&quot;&gt;Adapters&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/RestKit/RestKit&quot;&gt;RestKit&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/blakewatters&quot;&gt;Blake Watters&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=RestKit&amp;repo=RestKit&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/AFNetworking/AFIncrementalStore&quot;&gt;AFIncrementalStore&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/mattt&quot;&gt;Mattt Thompson&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=AFNetworking&amp;repo=AFIncrementalStore&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/mutualmobile/MMRecord&quot;&gt;MMRecord&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/cnstoll&quot;&gt;Conrad Stoll&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=mutualmobile&amp;repo=MMRecord&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/OliverLetterer/SLRESTfulCoreData&quot;&gt;SLRESTfulCoreData&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/OliverLetterer&quot;&gt;Oliver Letterer&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=OliverLetterer&amp;repo=SLRESTfulCoreData&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/gonzalezreal/Overcoat&quot;&gt;Overcoat&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/gonzalezreal&quot;&gt;Guillermo Gonzalez&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=gonzalezreal&amp;repo=Overcoat&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/github/Mantle&quot;&gt;Mantle&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/GitHub&quot;&gt;GitHub&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=github&amp;repo=Mantle&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;

  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th colspan=&quot;3&quot;&gt;Synchronizers&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/nothirst/TICoreDataSync&quot;&gt;TICoreDataSync&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/timisted&quot;&gt;Tim Isted&lt;/a&gt;, &lt;a href=&quot;https://github.com/MrRooni&quot;&gt;Michael Fey&lt;/a&gt;, &lt;a href=&quot;https://github.com/kevinhoctor&quot;&gt;Kevin Hoctor&lt;/a&gt;, &lt;a href=&quot;https://github.com/chbeer&quot;&gt;Christian Beer&lt;/a&gt;, &lt;a href=&quot;https://github.com/tonyarnold&quot;&gt;Tony Arnold&lt;/a&gt;, and &lt;a href=&quot;https://github.com/dannygreg&quot;&gt;Danny Greg&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=nothirst&amp;repo=TICoreDataSync&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/lhunath/UbiquityStoreManager&quot;&gt;UbiquityStoreManager&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/lhunath&quot;&gt;Maarten Billemont&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=lhunath&amp;repo=UbiquityStoreManager&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;


  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th colspan=&quot;3&quot;&gt;Utilities&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/rentzsch/mogenerator&quot;&gt;mogenerator&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/rentzsch&quot;&gt;Jonathan &#39;Wolf&#39; Rentzsch&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;iframe src=&quot;http://ghbtns.com/github-btn.html?user=rentzsch&amp;repo=mogenerator&amp;type=watch&amp;count=true&quot; allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; width=&quot;106&quot; height=&quot;20&quot;&gt;&lt;/iframe&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2&gt;Wrappers&lt;/h2&gt;

&lt;p&gt;Wrapper libraries provide some much needed syntactic sugar and convenience methods to Core Data&amp;#39;s verbose and complicated APIs.&lt;/p&gt;

&lt;p&gt;For example, to insert a new managed object into a managed object context, it&amp;#39;s a class method on, not &lt;code&gt;NSManagedObject&lt;/code&gt; or &lt;code&gt;NSManagedObjectContext&lt;/code&gt; as one might reasonably expect, but &lt;code&gt;NSEntityDescription&lt;/code&gt;. &lt;code&gt;NSEntityDescription +insertNewObjectForEntityForName:inManagedObjectContext:&lt;/code&gt;. What?&lt;/p&gt;

&lt;p&gt;There are a number of open source libraries that collectively identify and correct for the roughest patches of the Core Data APIs. Managing a main and private context outside of &lt;code&gt;AppDelegate&lt;/code&gt;, convenience method for manipulating and querying managed objects, and so on.&lt;/p&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/soffes/SSDataKit&quot;&gt;SSDataKit&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;There is a lot of boilerplate code required to write a Core Data application. This is annoying. In pretty much everything I&amp;#39;ve written since Core Data came to iOS, I have used the following class.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Inspired by &lt;a href=&quot;http://api.rubyonrails.org/classes/ActiveRecord/Base.html&quot;&gt;Active Record&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;It should be no surprise that programmers, having learned how to do things a certain way, will bring those ideas and conventions to other technologies. For the large influx of Ruby developers coming over to iOS, that familiar paradigm was &lt;a href=&quot;http://api.rubyonrails.org/classes/ActiveRecord/Base.html&quot;&gt;Active Record&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Contrary to popular belief, Core Data is &lt;em&gt;not&lt;/em&gt; an &lt;a href=&quot;http://en.wikipedia.org/wiki/Object-relational_mapping&quot;&gt;Object-Relational Mappers&lt;/a&gt;, but rather an object graph and persistence framework, capable of much more than the &lt;a href=&quot;http://en.wikipedia.org/wiki/Active_record_pattern&quot;&gt;Active Record pattern&lt;/a&gt; alone is capable of. Using Core Data as an ORM necessarily limits the capabilities of Core Data and muddies its conceptual purity. But for many developers longing for the familiarity of an ORM, this trade-off is a deal at twice the price!&lt;/p&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/magicalpanda/MagicalRecord&quot;&gt;Magical Record&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;MagicalRecord was inspired by the ease of Ruby on Rails&amp;#39; Active Record fetching. The goals of this code are to clean up Core Data related code, allow for clear, simple, one-line fetches, and still allow the modification of the &lt;code&gt;NSFetchRequest&lt;/code&gt; when request optimizations are needed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/mneorr/Objective-Record&quot;&gt;Objective-Record&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;This is a lightweight ActiveRecord way of managing Core Data objects.
The syntax is borrowed from Ruby on Rails.
And yeah, no AppDelegate code.
It&amp;#39;s fully tested with &lt;a href=&quot;https://github.com/allending/Kiwi&quot;&gt;Kiwi&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Inspired by &lt;a href=&quot;http://en.wikipedia.org/wiki/Language_Integrated_Query&quot;&gt;LINQ&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Here&amp;#39;s a fun game: the next time you meet a developer coming over from the .NET world, set a timer to see how long it takes them to start raving about &lt;a href=&quot;http://en.wikipedia.org/wiki/Language_Integrated_Query&quot;&gt;LINQ&lt;/a&gt;. Seriously, people &lt;em&gt;love&lt;/em&gt; LINQ.&lt;/p&gt;

&lt;p&gt;For the uninitiated, LINQ is like &lt;a href=&quot;http://en.wikipedia.org/wiki/SQL&quot;&gt;SQL&lt;/a&gt;, but integrated as a language feature. Think &lt;code&gt;NSPredicate&lt;/code&gt;, &lt;a href=&quot;http://nshipster.com/nssortdescriptor/&quot;&gt;&lt;code&gt;NSSortDescriptor&lt;/code&gt;&lt;/a&gt;, and &lt;a href=&quot;http://nshipster.com/kvc-collection-operators/&quot;&gt;&lt;code&gt;Key-Value Coding&lt;/code&gt;&lt;/a&gt; with a much nicer syntax:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;from c in SomeCollection
  where c.SomeProperty &amp;lt; 10
  select new {c.SomeProperty, c.OtherProperty};
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;a href=&quot;https://github.com/martydill/ios-queryable&quot;&gt;ios-queryable&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;ios-queryable supports LINQ-style query composition and deferred execution, and implements a subset of IEnumerable&amp;#39;s methods, including &lt;code&gt;where&lt;/code&gt;, &lt;code&gt;take&lt;/code&gt;, &lt;code&gt;skip&lt;/code&gt;, &lt;code&gt;orderBy&lt;/code&gt;, &lt;code&gt;first/firstOrDefault&lt;/code&gt;, &lt;code&gt;single/singleOrDefault&lt;/code&gt;, &lt;code&gt;count&lt;/code&gt;, &lt;code&gt;any&lt;/code&gt;, and &lt;code&gt;all&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Inspired by &lt;a href=&quot;https://github.com/ReactiveCocoa&quot;&gt;ReactiveCocoa&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;ReactiveCocoa, which itself &lt;a href=&quot;http://nshipster.com/reactivecocoa/&quot;&gt;brings the functional reactive paradigm to Objective-C&lt;/a&gt;, is now being used to bring some functional sanity and order to Core Data. This is still uncharted territory, but the initial results are indeed promising.&lt;/p&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/apparentsoft/ReactiveCoreData&quot;&gt;ReactiveCoreData&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;ReactiveCoreData (RCD) is an attempt to bring Core Data into the ReactiveCocoa (RAC) world.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Adapters&lt;/h2&gt;

&lt;p&gt;Most iOS apps communicate with a webservice in some capacity. For apps using Core Data, it&amp;#39;s common for records to be fetched, updated, and deleted from a REST or RPC-style webservice. Maintaining consistency between a local cache and the server is a deceptively tricky enterprise.&lt;/p&gt;

&lt;p&gt;Keeping objects up-to-date, removing duplicate records, mapping entities to API endpoints, reconciling conflicts, managing network reachability... these are just some of the challenges a developer faces when creating a robust client-server application.&lt;/p&gt;

&lt;p&gt;Fortunately, there are a wealth of open-source libraries that can help alleviate some of this pain.&lt;/p&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/RestKit/RestKit&quot;&gt;RestKit&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;RestKit is a modern Objective-C framework for implementing RESTful web services clients on iOS and Mac OS X. It provides a powerful &lt;a href=&quot;https://github.com/RestKit/RestKit/wiki/Object-mapping&quot;&gt;object mapping&lt;/a&gt; engine that seamlessly integrates with &lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html&quot;&gt;Core Data&lt;/a&gt; and a simple set of networking primitives for mapping HTTP requests and responses built on top of &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking&quot;&gt;AFNetworking&lt;/a&gt;. It has an elegant, carefully designed set of APIs that make accessing and modeling RESTful resources feel almost magical.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/AFNetworking/AFIncrementalStore&quot;&gt;AFIncrementalStore&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;AFIncrementalStore is an NSIncrementalStore subclass that uses AFNetworking to automatically request resources as properties and relationships are needed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/mutualmobile/MMRecord&quot;&gt;MMRecord&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;MMRecord is a block-based seamless web service integration library for iOS and Mac OS X. It leverages the Core Data model configuration to automatically create and populate a complete object graph from an API response. It works with any networking library, is simple to setup, and includes many popular features that make working with web services even easier.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/OliverLetterer/SLRESTfulCoreData&quot;&gt;SLRESTfulCoreData&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;SLRESTfulCoreData&lt;/code&gt; builds on top of &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking&quot;&gt;AFNetworking&lt;/a&gt; and &lt;a href=&quot;https://github.com/OliverLetterer/SLCoreDataStack&quot;&gt;SLCoreDataStack&lt;/a&gt; and let&amp;#39;s you map your JSON REST API to your CoreData model in minutes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/gonzalezreal/Overcoat&quot;&gt;Overcoat&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;Overcoat is an &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking&quot;&gt;AFNetworking&lt;/a&gt; extension that makes it super simple for developers to use Mantle model objects with a REST client.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/github/Mantle&quot;&gt;Mantle&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;Mantle makes it easy to write a simple model layer for your Cocoa or Cocoa Touch application.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Synchronizers&lt;/h2&gt;

&lt;p&gt;Whereas adapters synchronize information through an existing, general purpose interface such as REST, synchronizers use a more direct protocol, offering better integration and performance at the expense of portability and generality.&lt;/p&gt;

&lt;h3&gt;&lt;a href=&quot;https://github.com/nothirst/TICoreDataSync&quot;&gt;TICoreDataSync&lt;/a&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;Automatic synchronization for Core Data Apps, between any combination of Mac OS X and iOS: Mac to iPhone to iPad to iPod touch and back again&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/lhunath/UbiquityStoreManager&quot;&gt;UbiquityStoreManager&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;UbiquityStoreManager is a controller that implements iCloud integration with Core Data for you.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Utilities&lt;/h2&gt;

&lt;p&gt;We would be remiss to survey the open source Core Data ecosystem without mentioning Mogenerator. Among one of the surviving projects from the pre-iPhone era, Mogenerator has become indispensable to developers over the years. Although much has changed about Core Data over the years, the one constant has been Apple&amp;#39;s characteristic lack of comprehensive tooling. Fortunately, Mr. Wolf Rentzsch has us covered.&lt;/p&gt;

&lt;h4&gt;&lt;a href=&quot;https://github.com/rentzsch/mogenerator&quot;&gt;Mogenerator&lt;/a&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;mogenerator&lt;/code&gt; is a command-line tool that, given an &lt;code&gt;.xcdatamodel&lt;/code&gt; file, will generate &lt;em&gt;two classes per entity&lt;/em&gt;. The first class, &lt;code&gt;_MyEntity&lt;/code&gt;, is intended solely for machine consumption and will be continuously overwritten to stay in sync with your data model. The second class, &lt;code&gt;MyEntity&lt;/code&gt;, subclasses &lt;code&gt;_MyEntity&lt;/code&gt;, won&amp;#39;t ever be overwritten and is a great place to put your custom logic.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;Remember: there is no silver bullet. There is no one-size-fits-all solution. Just as Core Data may only be advisable in particular circumstances, so too are the aforementioned Core Data libraries.&lt;/p&gt;

&lt;p&gt;Dividing the ecosystem up into broad categories is informative if only to help identify the relative strengths and trade-offs of each library. Only you can determine (yes, sometimes through trial and error) which solution is the best for you.&lt;/p&gt;
</description>
        <pubDate>Mon, 20 May 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/core-data-libraries-and-utilities/</link>
        <guid>http://nshipster.com/core-data-libraries-and-utilities/</guid>
      </item>
    
      <item>
        <title>NSCoding / NSKeyedArchiver</title>
        <description>&lt;p&gt;Among the most important architectural decisions made when building an app is how to persist data between launches. The question of how, exactly, to re-create the state of the app from the time it was last opened; of how to describe the object graph in such a way that it can be flawlessly reconstructed next time.&lt;/p&gt;

&lt;p&gt;On iOS and Mac OS X, Apple provides two options: &lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html&quot;&gt;Core Data&lt;/a&gt; or &lt;a href=&quot;http://developer.apple.com/library/ios/#Documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html&quot;&gt;&lt;code&gt;NSKeyedArchiver&lt;/code&gt;&lt;/a&gt; / &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedUnarchiver_Class/Reference/Reference.html&quot;&gt;&lt;code&gt;NSKeyedUnarchiver&lt;/code&gt;&lt;/a&gt; (which serializes &lt;code&gt;&amp;lt;NSCoding&amp;gt;&lt;/code&gt;-compliant classes to and from a data representation).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Or rather: three, if you include &lt;code&gt;NSURLCache&lt;/code&gt;. In the case of a client-server application, having the client load necessary data on each launch is a viable design, especially when combined with a disk-based cache, which allows stored server responses to be returned immediately from matching requests. In practice, some combination of network and object caching is advisable.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;When it comes to modeling, querying, traversing and persisting complex object graphs, there is no substitute for Core Data. Core Data is a big hammer, but not every problem is a nail—much less a sufficiently large nail.&lt;/p&gt;

&lt;p&gt;A fair and common comparison of Core Data to &lt;code&gt;NSKeyedArchiver&lt;/code&gt; might go something like this:&lt;/p&gt;

&lt;table id=&quot;figure-1&quot; class=&quot;core-data-versus-nskeyedarchiver&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;Core Data&lt;/th&gt;
      &lt;th&gt;NSKeyedArchiver&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Entity Modeling&lt;/td&gt;
      &lt;td&gt;Yes&lt;/td&gt;
      &lt;td&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Querying&lt;/td&gt;
      &lt;td&gt;Yes&lt;/td&gt;
      &lt;td&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Speed&lt;/td&gt;
      &lt;td&gt;Fast&lt;/td&gt;
      &lt;td&gt;Slow&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Serialization Format&lt;/td&gt;
      &lt;td&gt;SQLite, XML, or NSData&lt;/td&gt;
      &lt;td&gt;NSData&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Migrations&lt;/td&gt;
      &lt;td&gt;Automatic&lt;/td&gt;
      &lt;td&gt;Manual&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Undo Manager&lt;/td&gt;
      &lt;td&gt;Automatic&lt;/td&gt;
      &lt;td&gt;Manual&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Et cetera. In a heads-up, apples to apples comparison, it looks rather one-sided.&lt;/p&gt;

&lt;p&gt;...that is, until you look at it from a slightly different perspective:&lt;/p&gt;

&lt;table id=&quot;figure-2&quot; class=&quot;core-data-versus-nskeyedarchiver&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;Core Data&lt;/th&gt;
      &lt;th&gt;NSKeyedArchiver&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Persists State&lt;/td&gt;
      &lt;td&gt;Yes&lt;/td&gt;
      &lt;td&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Pain in the Ass&lt;/td&gt;
      &lt;td&gt;Yes&lt;/td&gt;
      &lt;td&gt;No&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;By these measures, &lt;code&gt;NSKeyedArchiver&lt;/code&gt; becomes a perfectly reasonable choice in certain situations. Not all apps need to query data. Not all apps need automatic migrations. Not all apps work with large or complex object graphs. And even apps that do may have certain components better served by a simpler solution.&lt;/p&gt;

&lt;p&gt;This article will look at the how&amp;#39;s, when&amp;#39;s, and why&amp;#39;s of &lt;code&gt;NSKeyedArchiver&lt;/code&gt; and &lt;code&gt;NSCoding&lt;/code&gt;. And with this understanding, hopefully provide you, dear reader, with the wisdom to choose the best tool for the job.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSCoding&lt;/code&gt; is a simple protocol, with two methods: &lt;code&gt;-initWithCoder:&lt;/code&gt; and &lt;code&gt;encodeWithCoder:&lt;/code&gt;. Classes that conform to &lt;code&gt;NSCoding&lt;/code&gt; can be serialized and deserialized into data that can be either be archived to disk or distributed across a network.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Book&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCoding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pageCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categories&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isAvailable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;available&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Book&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark - NSCoding&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initWithCoder:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCoder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;decoder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decodeObjectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;author&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decodeObjectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;author&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pageCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decodeIntegerForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;pageCount&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categories&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decodeObjectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;categories&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;available&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decodeBoolForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;available&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;encodeWithCoder:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCoder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;encoder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encodeObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encodeObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;author&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;author&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encodeInteger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pageCount&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;pageCount&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encodeObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categories&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;categories&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encodeBool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isAvailable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;available&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you can see, &lt;code&gt;NSCoding&lt;/code&gt; is mostly boilerplate. Each property is encoded or decoded as an object or type, using the name of the property of as the key each time. (Some developers prefer to define &lt;code&gt;NSString *&lt;/code&gt; constants for each keypath, but this is usually unnecessary).&lt;/p&gt;

&lt;p&gt;But boilerplate can be a good things sometimes—with direct control over the entire serialization process, it remains flexible to account for things like:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Migrations&lt;/strong&gt;: If a data model changes—such as adding, renaming, or removing a field—it should maintain compatibility with data serialized in the old format. Apple provides some guidelines on how to go about this in &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Articles/compatibility.html#//apple_ref/doc/uid/20001055-BCICFFGE&quot;&gt;&amp;quot;Forward and Backward Compatibility for Keyed Archives&amp;quot;&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Archiving non-&lt;code&gt;NSCoding&lt;/code&gt;-compatible Classes&lt;/strong&gt;: According to object-oriented design, objects should take responsibility for encoding and decoding to and from a serialization format. However, when a class doesn&amp;#39;t come with &lt;code&gt;NSCoding&lt;/code&gt; support built in, it may be left up to class that uses it to help out.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;One library that aims to cut down the boilerplate of NSCoding is &lt;a href=&quot;https://github.com/github/Mantle&quot;&gt;Mantle&lt;/a&gt;, from the good folks over at GitHub. If you&amp;#39;re looking for more of the conveniences of Core Data modeling with &lt;code&gt;NSCoding&lt;/code&gt;, Mantle is definitely worth a look.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;Of course, serialization is only one part of the story. Determining where this data will persist is another question. Again, there are two approaches: writing to the local file system and using &lt;code&gt;NSUserDefaults&lt;/code&gt;.&lt;/p&gt;

&lt;h2&gt;File System&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSKeyedArchiver&lt;/code&gt; and &lt;code&gt;NSKeyedUnarchiver&lt;/code&gt; provide a convenient API to read / write objects directly to / from disk.&lt;/p&gt;

&lt;p&gt;An &lt;code&gt;NSCoding&lt;/code&gt;-backed table view controller might, for instance, set its collection property from the file manager&lt;/p&gt;

&lt;h4&gt;Archiving&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSKeyedArchiver&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;archiveRootObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;books&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;toFile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/path/to/archive&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Unarchiving&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSKeyedUnarchiver&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unarchiveObjectWithFile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/path/to/archive&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;code&gt;NSUserDefaults&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Each app has its own database of user preferences, which can store and retrieve any &lt;code&gt;NSCoding&lt;/code&gt;-compatible object or C value.&lt;/p&gt;

&lt;p&gt;While it is not advisable to store an entire object graph into &lt;code&gt;NSUserDefaults&lt;/code&gt;, it can be useful to encode compound objects in this way, such as &amp;quot;current user&amp;quot; objects &lt;del&gt;or API credentials&lt;/del&gt; &lt;ins&gt;(use &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html&quot;&gt;Keychain&lt;/a&gt; instead)&lt;/ins&gt;.&lt;/p&gt;

&lt;h4&gt;Archiving&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSKeyedArchiver&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;archivedDataWithRootObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;books&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUserDefaults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;standardUserDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;books&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Unarchiving&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUserDefaults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;standardUserDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;books&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;books&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSKeyedUnarchiver&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unarchiveObjectWithData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;As developers, it is our responsibility to understand the goals and needs of our applications, and to resist the urge to over-engineer and prematurely optimize our solutions.&lt;/p&gt;

&lt;p&gt;The decision to use Core Data in an application may appear to be a no-brainer, if not harmless. But in many cases, Core Data is discovered to be so unwieldy or unnecessary as to become a real hindrance to making something useful, let alone functional.&lt;/p&gt;

&lt;p&gt;And even if most applications &lt;em&gt;would&lt;/em&gt; benefit from Core Data at some point, there is wisdom to letting complexity evolve from a simple as necessary. And as far as persistence goes, it doesn&amp;#39;t get much simpler than &lt;code&gt;NSCoding&lt;/code&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 13 May 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nscoding/</link>
        <guid>http://nshipster.com/nscoding/</guid>
      </item>
    
      <item>
        <title>GPUImage</title>
        <description>&lt;p&gt;Here at NSHipster, we&amp;#39;re all about diving into the darker corners of Objective-C to learn something new about the systems we interact with every day. Often, this means sifting through Apple frameworks or language features (it is, after all, a lot of what it means to work in Objective-C). However, &lt;a href=&quot;http://nshipster.com/reactivecocoa/&quot;&gt;on occasion&lt;/a&gt;, it&amp;#39;s nice to take a look to the burgeoning landscape of third-party libraries and frameworks (and there are some truly remarkable ones) for a glimpse of what&amp;#39;s new and great outside of Cupertino.&lt;/p&gt;

&lt;p&gt;This week, we&amp;#39;ll be taking a look at one of the most impressive open source projects you&amp;#39;ll find: &lt;a href=&quot;https://github.com/BradLarson/GPUImage&quot;&gt;GPUImage&lt;/a&gt;. Buckle up, NSHipsters—if you&amp;#39;re not careful, you may well end up creating a camera app by the end of the article.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;GPUImage is a BSD-licensed iOS library written by &lt;a href=&quot;https://github.com/BradLarson/&quot;&gt;Brad Larson&lt;/a&gt; that lets you apply GPU-accelerated filters and other effects to images, live camera video, and movies.&lt;/p&gt;

&lt;h2&gt;GPU vs. CPU&lt;/h2&gt;

&lt;p&gt;Every iPhone ships with two processors: a &lt;a href=&quot;http://en.wikipedia.org/wiki/Central_processing_unit&quot;&gt;CPU&lt;/a&gt;, or Central Processing Unit and a &lt;a href=&quot;http://en.wikipedia.org/wiki/Graphics_processing_unit&quot;&gt;GPU&lt;/a&gt;, or Graphics Processing Unit. Each processor has its own strengths, and modern chip architecture (like in the iPhone&amp;#39;s &lt;a href=&quot;http://en.wikipedia.org/wiki/Apple_A4&quot;&gt;A4&lt;/a&gt;) integrate the CPU and GPU onto the same physical die.&lt;/p&gt;

&lt;p&gt;When you write C or Objective-C code in Xcode, you&amp;#39;re generating instructions that will be handled almost exclusively by the CPU. The GPU, by contrast, is a specialized chip that is especially well-suited for computation that can be split out into many small, independent operations, such as graphics rendering. The kinds of instructions understood by the GPU are quite different from that of the CPU, and as such, we write this code in a different language: &lt;a href=&quot;http://en.wikipedia.org/wiki/Opengl&quot;&gt;OpenGL&lt;/a&gt; (or specifically, &lt;a href=&quot;http://en.wikipedia.org/wiki/OpenGL_ES&quot;&gt;OpenGL ES&lt;/a&gt; on the iPhone &amp;amp; iPad).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Check out &lt;a href=&quot;http://iphonedevelopment.blogspot.com/2010/11/opengl-es-20-for-ios-chapter-4.html&quot;&gt;Jeff LaMarche&amp;#39;s GLProgram OpenGL ES 2.0 book&lt;/a&gt; for a great introduction to OpenGL ES and the rendering pipeline.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Comparing the performance of GPU-based rendering to CPU rendering for something like video, the differences are staggering:&lt;/p&gt;

&lt;table id=&quot;gpuimage-benchmarks&quot;&gt;
  &lt;caption&gt;CPU vs. GPU Frame-Rate (Larger FPS is Better)&lt;/caption&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Calculation&lt;/th&gt;
      &lt;th&gt;GPU FPS&lt;/th&gt;
      &lt;th&gt;CPU FPS&lt;/th&gt;
      &lt;th&gt;Δ&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Thresholding ⨉ 1&lt;/td&gt;
      &lt;td&gt;60.00&lt;/td&gt;
      &lt;td&gt;4.21&lt;/td&gt;
      &lt;td&gt;14.3⨉&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Thresholding ⨉ 2&lt;/td&gt;
      &lt;td&gt;33.63&lt;/td&gt;
      &lt;td&gt;2.36&lt;/td&gt;
      &lt;td&gt;14.3⨉&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Thresholding ⨉ 100&lt;/td&gt;
      &lt;td&gt;1.45&lt;/td&gt;
      &lt;td&gt;0.05&lt;/td&gt;
      &lt;td&gt;28.7⨉&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3&gt;&amp;quot;Oh, so it&amp;#39;s like Instagram?&amp;quot;&lt;/h3&gt;

&lt;p&gt;Let me put it this way:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;Instagram : GPUImage :: Disposable Camera : NASA Space Optics Manufacturing Center
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To put it another way, within GPUImage&amp;#39;s APIs lay &lt;em&gt;thousands&lt;/em&gt; of camera apps, just waiting for the right combination of filters and a little spark of imagination.&lt;/p&gt;

&lt;p&gt;Here&amp;#39;s a table of the 125 (!) filters that come with GPUImage:&lt;/p&gt;

&lt;table id=&quot;gpuimage-filters&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Color Adjustments&lt;/th&gt;
      &lt;th&gt;Image Processing&lt;/th&gt;
      &lt;th&gt;Blending Modes&lt;/th&gt;
      &lt;th&gt;Visual Effects&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;Brightness Filter&lt;/li&gt;
          &lt;li&gt;Exposure Filter&lt;/li&gt;
          &lt;li&gt;Contrast Filter&lt;/li&gt;
          &lt;li&gt;Saturation Filter&lt;/li&gt;
          &lt;li&gt;Gamma Filter&lt;/li&gt;
          &lt;li&gt;Levels Filter&lt;/li&gt;
          &lt;li&gt;Color Matrix Filter&lt;/li&gt;
          &lt;li&gt;RGB Filter&lt;/li&gt;
          &lt;li&gt;Hue Filter&lt;/li&gt;
          &lt;li&gt;Tone Curve Filter&lt;/li&gt;
          &lt;li&gt;Highlight Shadow Filter&lt;/li&gt;
          &lt;li&gt;Lookup Filter&lt;/li&gt;
          &lt;li&gt;Amatorka Filter&lt;/li&gt;
          &lt;li&gt;Miss Etikate Filter&lt;/li&gt;
          &lt;li&gt;Soft Elegance Filter&lt;/li&gt;
          &lt;li&gt;Color Invert Filter&lt;/li&gt;
          &lt;li&gt;Grayscale Filter&lt;/li&gt;
          &lt;li&gt;Monochrome Filter&lt;/li&gt;
          &lt;li&gt;False Color Filter&lt;/li&gt;
          &lt;li&gt;Haze Filter&lt;/li&gt;
          &lt;li&gt;Sepia Filter&lt;/li&gt;
          &lt;li&gt;Opacity Filter&lt;/li&gt;
          &lt;li&gt;Solid Color Generator&lt;/li&gt;
          &lt;li&gt;Luminance Threshold Filter&lt;/li&gt;
          &lt;li&gt;Adaptive Threshold Filter&lt;/li&gt;
          &lt;li&gt;Average Luminance Threshold Filter&lt;/li&gt;
          &lt;li&gt;Histogram Filter&lt;/li&gt;
          &lt;li&gt;Histogram Generator&lt;/li&gt;
          &lt;li&gt;Average Color&lt;/li&gt;
          &lt;li&gt;Luminosity&lt;/li&gt;
          &lt;li&gt;Chroma Key Filter&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;Transform Filter&lt;/li&gt;
          &lt;li&gt;Crop Filter&lt;/li&gt;
          &lt;li&gt;Lanczos Resampling Filter&lt;/li&gt;
          &lt;li&gt;Sharpen Filter&lt;/li&gt;
          &lt;li&gt;Unsharp Mask Filter&lt;/li&gt;
          &lt;li&gt;Fast Blur Filter&lt;/li&gt;
          &lt;li&gt;Single Component Fast Blur Filter&lt;/li&gt;
          &lt;li&gt;Gaussian Blur Filter&lt;/li&gt;
          &lt;li&gt;Single Component Gaussian Blur Filter&lt;/li&gt;
          &lt;li&gt;Gaussian Selective Blur Filter&lt;/li&gt;
          &lt;li&gt;Gaussian Blur Position Filter&lt;/li&gt;
          &lt;li&gt;Median Filter&lt;/li&gt;
          &lt;li&gt;Bilateral Filter&lt;/li&gt;
          &lt;li&gt;Tilt Shift Filter&lt;/li&gt;
          &lt;li&gt;Box Blur Filter&lt;/li&gt;
          &lt;li&gt;3x3 Convolution Filter&lt;/li&gt;
          &lt;li&gt;Sobel Edge Detection Filter&lt;/li&gt;
          &lt;li&gt;Threshold Edge Detection Filter&lt;/li&gt;
          &lt;li&gt;Canny Edge Detection Filter&lt;/li&gt;
          &lt;li&gt;Harris Corner Detection Filter&lt;/li&gt;
          &lt;li&gt;Noble Corner Detection Filter&lt;/li&gt;
          &lt;li&gt;Shi-Tomasi Corner Detection Filter&lt;/li&gt;
          &lt;li&gt;Non Maximum Suppression Filter&lt;/li&gt;
          &lt;li&gt;X/Y Derivative Filter&lt;/li&gt;
          &lt;li&gt;Crosshair Generator&lt;/li&gt;
          &lt;li&gt;Dilation Filter&lt;/li&gt;
          &lt;li&gt;RGB Dilation Filter&lt;/li&gt;
          &lt;li&gt;Erosion Filter&lt;/li&gt;
          &lt;li&gt;RGB Erosion Filter&lt;/li&gt;
          &lt;li&gt;Opening Filter&lt;/li&gt;
          &lt;li&gt;RGB Opening Filter&lt;/li&gt;
          &lt;li&gt;Closing Filter&lt;/li&gt;
          &lt;li&gt;RGB Closing Filter&lt;/li&gt;
          &lt;li&gt;Local Binary Pattern Filter&lt;/li&gt;
          &lt;li&gt;Low Pass Filter&lt;/li&gt;
          &lt;li&gt;High Pass Filter&lt;/li&gt;
          &lt;li&gt;Motion Detector&lt;/li&gt;
          &lt;li&gt;Hough Transform Line Detector&lt;/li&gt;
          &lt;li&gt;Line Generator&lt;/li&gt;
          &lt;li&gt;Motion Blur Filter&lt;/li&gt;
          &lt;li&gt;Zoom Blur Filter&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;Chroma Key Blend Filter&lt;/li&gt;
          &lt;li&gt;Dissolve Blend Filter&lt;/li&gt;
          &lt;li&gt;Multiply Blend Filter&lt;/li&gt;
          &lt;li&gt;Add Blend Filter&lt;/li&gt;
          &lt;li&gt;Subtract Blend Filter&lt;/li&gt;
          &lt;li&gt;Divide Blend Filter&lt;/li&gt;
          &lt;li&gt;Overlay Blend Filter&lt;/li&gt;
          &lt;li&gt;Darken Blend Filter&lt;/li&gt;
          &lt;li&gt;Lighten Blend Filter&lt;/li&gt;
          &lt;li&gt;Color Burn Blend Filter&lt;/li&gt;
          &lt;li&gt;Color Dodge Blend Filter&lt;/li&gt;
          &lt;li&gt;Screen Blend Filter&lt;/li&gt;
          &lt;li&gt;Exclusion Blend Filter&lt;/li&gt;
          &lt;li&gt;Difference Blend Filter&lt;/li&gt;
          &lt;li&gt;Hard Light Blend Filter&lt;/li&gt;
          &lt;li&gt;Soft Light Blend Filter&lt;/li&gt;
          &lt;li&gt;Alpha Blend Filter&lt;/li&gt;
          &lt;li&gt;Source Over Blend Filter&lt;/li&gt;
          &lt;li&gt;Color Burn Blend Filter&lt;/li&gt;
          &lt;li&gt;Color Dodge Blend Filter&lt;/li&gt;
          &lt;li&gt;Normal Blend Filter&lt;/li&gt;
          &lt;li&gt;Color Blend Filter&lt;/li&gt;
          &lt;li&gt;Hue Blend Filter&lt;/li&gt;
          &lt;li&gt;Saturation Blend Filter&lt;/li&gt;
          &lt;li&gt;Luminosity Blend Filter&lt;/li&gt;
          &lt;li&gt;Linear Burn Blend Filter&lt;/li&gt;
          &lt;li&gt;Poisson Blend Filter&lt;/li&gt;
          &lt;li&gt;Mask Filter&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;Pixellate Filter&lt;/li&gt;
          &lt;li&gt;Polar Pixellate Filter&lt;/li&gt;
          &lt;li&gt;Polka Dot Filter&lt;/li&gt;
          &lt;li&gt;Halftone Filter&lt;/li&gt;
          &lt;li&gt;Crosshatch Filter&lt;/li&gt;
          &lt;li&gt;Sketch Filter&lt;/li&gt;
          &lt;li&gt;Threshold Sketch Filter&lt;/li&gt;
          &lt;li&gt;Toon Filter&lt;/li&gt;
          &lt;li&gt;Smooth Toon Filter&lt;/li&gt;
          &lt;li&gt;Emboss Filter&lt;/li&gt;
          &lt;li&gt;Posterize Filter&lt;/li&gt;
          &lt;li&gt;Swirl Filter&lt;/li&gt;
          &lt;li&gt;Bulge Distortion Filter&lt;/li&gt;
          &lt;li&gt;Pinch Distortion Filter&lt;/li&gt;
          &lt;li&gt;Stretch Distortion Filter&lt;/li&gt;
          &lt;li&gt;Sphere Refraction Filter&lt;/li&gt;
          &lt;li&gt;Glass Sphere Filter&lt;/li&gt;
          &lt;li&gt;Vignette Filter&lt;/li&gt;
          &lt;li&gt;Kuwahara Filter&lt;/li&gt;
          &lt;li&gt;Kuwahara Radius 3 Filter&lt;/li&gt;
          &lt;li&gt;Perlin Noise Filter&lt;/li&gt;
          &lt;li&gt;CGAColorspace Filter&lt;/li&gt;
          &lt;li&gt;Mosaic Filter&lt;/li&gt;
          &lt;li&gt;JFAVoronoi Filter&lt;/li&gt;
          &lt;li&gt;Voronoi Consumer Filter&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Seriously, the &lt;a href=&quot;https://github.com/BradLarson/GPUImage/tree/master/examples/iOS/FilterShowcase&quot;&gt;Filter Showcase Example App&lt;/a&gt; that comes bundled in the repository could easily retail on the AppStore for $3.99, as-is. Add Twitter integration and a few sound effects, and you could bump that up to a respectable $6.99.&lt;/p&gt;

&lt;h2&gt;Rendering Pipeline&lt;/h2&gt;

&lt;p&gt;&lt;object data=&quot;http://nshipster.s3.amazonaws.com/gpuimage-pipeline.svg&quot; type=&quot;image/svg+xml&quot;&gt;
  &lt;img src=&quot;http://nshipster.s3.amazonaws.com/gpuimage-pipeline.png&quot; /&gt;
&lt;/object&gt;&lt;/p&gt;

&lt;p&gt;GPUImage is, at its core, an Objective-C abstraction around a rendering pipeline. Source images from the camera, network, or disk are loaded and manipulated according to a chain of filters, and finally outputted either a view, graphics context, or data stream.&lt;/p&gt;

&lt;p&gt;For example, images from the video camera  could have a Color Levels filter applied to simulate different types of &lt;a href=&quot;http://en.wikipedia.org/wiki/Color_blindness&quot;&gt;color blindness&lt;/a&gt; and displayed in a live view.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;GPUImageVideoCamera&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;videoCamera&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GPUImageVideoCamera&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;initWithSessionPreset:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureSessionPreset640x480&lt;/span&gt;
           &lt;span class=&quot;nl&quot;&gt;cameraPosition:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureDevicePositionBack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;videoCamera&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outputImageOrientation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIInterfaceOrientationPortrait&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;GPUImageFilter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GPUImageLevelsFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithFragmentShaderFromFile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;CustomShader&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setRedMin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.299&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gamma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minOut&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxOut&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setGreenMin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.587&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gamma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minOut&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxOut&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setBlueMin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.114&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gamma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minOut&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxOut&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;videoCamera&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addTarget&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;GPUImageView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filteredVideoView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GPUImageView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithFrame&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addTarget&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filteredVideoView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addSubView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filteredVideoView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;videoCamera&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startCameraCapture&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Or, combining various color blending modes, image effects, and adjustments, you could transform still images into something worthy of sharing with your hipster friends (example taken from &lt;a href=&quot;https://github.com/eklipse2k8/FilterKit/blob/master/FilterKit/FilterKit/Filters/FKBlueValentine.m&quot;&gt;FilterKit&lt;/a&gt;, which is built on GPUImage):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;GPUImageFilterGroup&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GPUImageFilterGroup&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;GPUImageSaturationFilter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;saturationFilter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GPUImageSaturationFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;saturationFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setSaturation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;GPUImageMonochromeFilter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;monochromeFilter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GPUImageMonochromeFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;monochromeFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GPUVector4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;monochromeFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setIntensity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;GPUImageVignetteFilter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vignetteFilter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GPUImageVignetteFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vignetteFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setVignetteEnd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;GPUImageExposureFilter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exposureFilter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GPUImageExposureFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exposureFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setExposure&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addGPUFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exposureFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addGPUFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;monochromeFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addGPUFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;saturationFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addGPUFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vignetteFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;Looking through all of what GPUImage can do, one can&amp;#39;t help but get &lt;em&gt;excited&lt;/em&gt;. Easy enough to get started immediately (without needing to know anything about OpenGL) yet performant enough to power whatever you dream up. And not just that, but it also comes with a dizzying number of building blocks—all of the color adjustments, blending modes, and visual effects you could ever want (or never knew you needed).&lt;/p&gt;

&lt;p&gt;GPUImage is a rare treat for the open source community, and we as Mac &amp;amp; iOS developers are lucky to have it at our disposal. Use it to make something great, and show others the world in a whole new way.&lt;/p&gt;
</description>
        <pubDate>Mon, 06 May 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/gpuimage/</link>
        <guid>http://nshipster.com/gpuimage/</guid>
      </item>
    
      <item>
        <title>MKLocalSearch</title>
        <description>&lt;p&gt;Look, we get it: people are upset about Apple Maps.&lt;/p&gt;

&lt;p&gt;What should have been a crowning feature for iOS 6 became the subject of an official apology due to its embarrassing inaccuracies and the removal of public transportation information.&lt;/p&gt;

&lt;p&gt;In all of the hubbub of torch burning and pitchfork raising, you may have completely missed a slew of additions to MapKit in iOS 6.1. Namely: &lt;code&gt;MKLocalSearch&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;MKLocalSearch&lt;/code&gt; allows developers to find nearby points of interest within a geographic region.&lt;/p&gt;

&lt;p&gt;But before you go and rush into using &lt;code&gt;MKLocalSearch&lt;/code&gt;, you&amp;#39;ll have to know a few things about its friends. You see, &lt;code&gt;MKLocalSearch&lt;/code&gt; has its functionality divided across &lt;code&gt;MKLocalSearchRequest&lt;/code&gt; and &lt;code&gt;MKLocalSearchResponse&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;MKLocalSearchRequest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKLocalSearchRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalLanguageQuery&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Restaurants&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;region&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mapView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MKLocalSearch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKLocalSearch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MKLocalSearchResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Map Items: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapItems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;MKLocalSearchRequest&lt;/code&gt; takes a &lt;code&gt;naturalLanguageQuery&lt;/code&gt;, such as &amp;quot;Taxidermists&amp;quot;, and an optional bounding geographic &lt;code&gt;region&lt;/code&gt; to constrain results. In practice, the &lt;code&gt;region&lt;/code&gt; is usually passed from an &lt;code&gt;MKMapView&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;MKLocalSearchResponse&lt;/code&gt; is returned in the eponymous block handler of &lt;code&gt;MKLocalSearch -startWithCompletionHandler:&lt;/code&gt;, and returns an array of &lt;code&gt;MKMapItem&lt;/code&gt; objects. Each &lt;code&gt;MKMapItem&lt;/code&gt; contains information like &lt;code&gt;name&lt;/code&gt;, &lt;code&gt;phoneNumber&lt;/code&gt;, &lt;code&gt;url&lt;/code&gt; and address information via the &lt;code&gt;placemark&lt;/code&gt; property.&lt;/p&gt;

&lt;p&gt;If you keep a reference to your &lt;code&gt;MKLocalSearch&lt;/code&gt; object, you can optionally &lt;code&gt;-cancel&lt;/code&gt; the request, such as on &lt;code&gt;-viewWillDisappear:&lt;/code&gt; or the like.&lt;/p&gt;

&lt;h2&gt;Where&amp;#39;s The Beef?&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;MKLocalSearch&lt;/code&gt; is a relatively straight-forward API (albeit perhaps worse off for eschewing a simpler single-class interface)... so what&amp;#39;s the big deal?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;API limits.&lt;/strong&gt; Or rather, the lack of them. Let me explain:&lt;/p&gt;

&lt;p&gt;Perhaps the most counter-intuitive things about MapKit in iOS 6 is that &lt;em&gt;it&amp;#39;s still widely used&lt;/em&gt;. Nevermind the &amp;quot;Apple Maps-gate&amp;quot; melodrama, MapKit, even with the introduction of impressive iOS mapping SDKs from &lt;a href=&quot;https://developers.google.com/maps/documentation/ios/&quot;&gt;Google&lt;/a&gt; and &lt;a href=&quot;http://mapbox.com/mobile/&quot;&gt;MapBox&lt;/a&gt;, &lt;a href=&quot;http://appleinsider.com/articles/13/03/18/developers-prefer-apples-ios-maps-sdk-over-google-maps&quot;&gt;developers are still using MapKit&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Part of this may be aesthetics, but a lot has to do with a certain level of home-field advantage, too. Because of MapKit&amp;#39;s close ties to UIKit, it can be customized more easily and more extensively by third-party developers.&lt;/p&gt;

&lt;p&gt;This brings us back to API call limits. When developing with another mapping SDK or geospatial webservice, licensing terms are almost necessarily going to be more limited than what Apple makes available for free. Free is a tough price to beat, and it&amp;#39;s all-the-more compelling because there is no worry of going over API limits for tile loading or API calls.&lt;/p&gt;

&lt;h2&gt;Where Do We Go From Here?&lt;/h2&gt;

&lt;p&gt;With the introduction of &lt;code&gt;MKLocalSearch&lt;/code&gt;, one can be hopeful of more first-party webservices being exposed in a similar fashion. Expanded geospatial search? Or perhaps first-party APIs to iTunes media streaming?&lt;/p&gt;

&lt;p&gt;One can dare to dream, after all...&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;MKLocalSearch&lt;/code&gt; provides a simple way to find local points of interest. Because of its no-hassle webservice integration and tight integration with MapKit, any location-based app would do well to take advantage of it.&lt;/p&gt;
</description>
        <pubDate>Mon, 29 Apr 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/mklocalsearch/</link>
        <guid>http://nshipster.com/mklocalsearch/</guid>
      </item>
    
      <item>
        <title>NSHipster Quiz #1</title>
        <description>&lt;p&gt;On April 9th, the first-ever &lt;a href=&quot;http://www.uikonf.com/2013/04/11/nshipster-pub-quiz.html&quot;&gt;NSHipster Pub Quiz&lt;/a&gt; was held in Berlin. Think of your traditional pub quiz crossed with &amp;quot;Stump the Experts&amp;quot;, with questions about things that you know and care about: computers, programming, Apple trivia—that sort of thing. The event was hosted by &lt;a href=&quot;http://www.uikonf.com&quot;&gt;UIKonf&lt;/a&gt;, and made possible by its organizers &lt;a href=&quot;http://twitter.com/chriseidhof&quot;&gt;Chris Eidhof&lt;/a&gt;, &lt;a href=&quot;http://twitter.com/fidothe&quot;&gt;Matt Patterson&lt;/a&gt;, and &lt;a href=&quot;http://twitter.com/peterbihr&quot;&gt;Peter Bihr&lt;/a&gt;. Thanks again to Chris, Matt, and Peter, and everyone who came out to make it such an amazing event.&lt;/p&gt;

&lt;p&gt;All told, a whopping 50-some folks came out, composing a dozen or so teams of up to 6 people, with names such as &amp;quot;NSBeep&amp;quot;, &amp;quot;alloc] win_it]&amp;quot;, &amp;amp; &amp;quot;- Bug Fixes / - Performance Improvements&amp;quot;. At the end of the evening, it was the &lt;a href=&quot;http://codekollektiv.com&quot;&gt;CodeKollectiv&lt;/a&gt; team that claimed top prize, with a score of 30pts.&lt;/p&gt;

&lt;p&gt;Here are the rules to play along at home:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;There are 4 Rounds, with 10 questions each&lt;/li&gt;
&lt;li&gt;Record answers on a separate sheet of paper&lt;/li&gt;
&lt;li&gt;Each correct answer to a question gets you 1 point&lt;/li&gt;
&lt;li&gt;Play with up to 5 friends for maximum enjoyment&lt;/li&gt;
&lt;li&gt;Don&amp;#39;t be lame and look things up on the internet or in Xcode&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;h2&gt;Round 1: General Knowledge&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;What does &lt;code&gt;NS&lt;/code&gt; stand for?&lt;/li&gt;
&lt;li&gt;When Steve Jobs introduced the iPhone, he made a prank call to Starbucks. How many lattés did he order to-go?
a. 3000
b. 4000
c. 6000&lt;/li&gt;
&lt;li&gt;NSOperation has 4 properties used as keypaths for operation object states. What are they?&lt;/li&gt;
&lt;li&gt;On your answer sheet, draw a &lt;code&gt;UITableViewCell&lt;/code&gt; with &lt;code&gt;UITableViewCellStyleValue2&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Which UIKit protocol contains the method &lt;code&gt;–tableView:heightForRowAtIndexPath:&lt;/code&gt;?&lt;/li&gt;
&lt;li&gt;What is the storage type of &lt;code&gt;BOOL&lt;/code&gt;? &lt;em&gt;(i.e. &lt;code&gt;typedef&lt;/code&gt; equivalent)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When was the Unix Epoch? Hint: NSDate has an initializer referencing this.&lt;/li&gt;
&lt;li&gt;What is the current version of Xcode?&lt;/li&gt;
&lt;li&gt;What was the first article written on NSHipster?&lt;/li&gt;
&lt;li&gt;How many apps were on on the home screen of the first iPhone?&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 2: APIs&lt;/h2&gt;

&lt;p&gt;You will be given the name of the class, and the description of the property or method from the documentation. You need to tell me the name of that method or property.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;UIView&lt;/code&gt;: &amp;quot;A flag used to determine how a view lays out its content when its bounds change.&amp;quot;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIAccessibility&lt;/code&gt;: &amp;quot;A brief description of the result of performing an action on the accessibility element, in a localized string.&amp;quot;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIColor&lt;/code&gt;: &amp;quot;Returns a color object whose RGB values are 0.0, 1.0, and 1.0 and whose alpha value is 1.0.&amp;quot;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIAlertView&lt;/code&gt;: &amp;quot;Sent to the delegate when the user clicks a button on an alert view.&amp;quot;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIButton&lt;/code&gt;: &amp;quot;A Boolean value that determines whether tapping the button causes it to glow.&amp;quot;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UITableView&lt;/code&gt;: &amp;quot;Reloads the specified rows using a certain animation effect.&amp;quot;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UITableViewDataSource&lt;/code&gt;: &amp;quot;Tells the data source to return the number of rows in a given section of a table view.&amp;quot;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIWebView&lt;/code&gt;: &amp;quot;Sets the main page content and base URL.&amp;quot;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIGestureRecognizer&lt;/code&gt;: &amp;quot;Sent to the receiver when one or more fingers touch down in the associated view.&amp;quot;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIDictationPhrase&lt;/code&gt;: &amp;quot;The most likely textual interpretation of a dictated phrase.&amp;quot;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 3: Picture Round&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;1. What is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-1.s3.amazonaws.com/question-1.jpg&quot; alt=&quot;Question 1&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;2. What is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-1.s3.amazonaws.com/question-2.jpg&quot; alt=&quot;Question 2&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;3. What is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-1.s3.amazonaws.com/question-3.jpg&quot; alt=&quot;Question 3&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;4. What is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-1.s3.amazonaws.com/question-4.jpg&quot; alt=&quot;Question 4&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;5. WTF is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-1.s3.amazonaws.com/question-5.jpg&quot; alt=&quot;Question 5&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;6. Who is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-1.s3.amazonaws.com/question-6.jpg&quot; alt=&quot;Question 6&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;7. Who is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-1.s3.amazonaws.com/question-7.jpg&quot; alt=&quot;Question 7&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;8. Who is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-1.s3.amazonaws.com/question-8.jpg&quot; alt=&quot;Question 8&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;9. Who is this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-1.s3.amazonaws.com/question-9.jpg&quot; alt=&quot;Question 9&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;10. In this photo, Bill Gates &amp;amp; Steve Jobs are being interviewed at the D5 conference in 2007 by a man and a woman just off-screen to the left. Who are they? (One point for each person)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster-quiz-1.s3.amazonaws.com/question-10.jpg&quot; alt=&quot;Question 10&quot;&gt;&lt;/p&gt;

&lt;h2&gt;Round 4: Name That Framework!&lt;/h2&gt;

&lt;p&gt;For each question, a list of three classes from the same framework have been listed without their two-letter namespace prefix. Name the framework that they all belong to!&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Color List, Matrix, Sound&lt;/li&gt;
&lt;li&gt;Composition, URL Asset, Capture Session&lt;/li&gt;
&lt;li&gt;Enclosure, Author, Feed&lt;/li&gt;
&lt;li&gt;Geocoder, Location, Region&lt;/li&gt;
&lt;li&gt;Merge Policy, Mapping Model, Incremental Store&lt;/li&gt;
&lt;li&gt;Analysis, Summary, Search&lt;/li&gt;
&lt;li&gt;Record, Person, MultiValue&lt;/li&gt;
&lt;li&gt;View, View Controller, Skybox Effect&lt;/li&gt;
&lt;li&gt;Central Manager, Descriptor, Peripheral Delegate&lt;/li&gt;
&lt;li&gt;Filter, Face Feature, Vector&lt;/li&gt;
&lt;/ol&gt;

&lt;hr&gt;

&lt;h1&gt;Answers&lt;/h1&gt;

&lt;h2&gt;Round 1: General Knowledge&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/NeXTSTEP&quot;&gt;NeXTSTEP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.macrumors.com/2013/03/04/steve-jobs-4000-latte-prank-order-lives-on-at-san-francisco-starbucks/&quot;&gt;4000&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html%23//apple_ref/doc/uid/TP40004591-RH2-DontLinkElementID_1&quot;&gt;&lt;code&gt;isReady&lt;/code&gt;, &lt;code&gt;isExecuting&lt;/code&gt;, &lt;code&gt;isFinished&lt;/code&gt;, &lt;code&gt;isCancelled&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Conceptual/TableView_iPhone/Art/tvcellstyle_value2.jpg&quot;&gt;    textLabel detailTextLabel   &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006942-CH3-SW25&quot;&gt;&lt;code&gt;UITableViewDelegate&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://nshipster.com/bool/&quot;&gt;&lt;code&gt;signed char&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Unix_epoch&quot;&gt;Midnight UTC, 1 January 1970&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Xcode&quot;&gt;4.6.2 (4H1003)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://nshipster.com/nsindexset/&quot;&gt;NSIndexSet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/IPhone_%281st_generation%29&quot;&gt;16&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 2: APIs&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;@contentMode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@accessibilityHint&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+cyanColor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-alertView:clickedButtonAtIndex:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@showsTouchWhenHighlighted&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-reloadRowsAtIndexPaths:withRowAnimation:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-tableView:numberOfRowsInSection:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-loadHTMLString:baseURL:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-touchesBegan:withEvent:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@text&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 3: Picture Round&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Apple_I&quot;&gt;Apple I&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/EMac&quot;&gt;Apple eMac&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Apple_Bandai_Pippin&quot;&gt;Apple Bandai Pippin&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Apple_QuickTake&quot;&gt;Apple QuickTake&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cultofmac.com/108782/apples-magnificent-mothership-campus-gets-new-renders-and-more-details-report/&quot;&gt;New Proposed Apple Campus / &amp;quot;Mothership&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Jonathan_Ive&quot;&gt;Sir Jonathan &amp;quot;Jony&amp;quot; Ive&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Scott_Forstall&quot;&gt;Scott Forstall&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Bob_Mansfield&quot;&gt;Bob Mansfield&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Susan_kare&quot;&gt;Susan Kare&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://allthingsd.com/20071224/best-of-2007-video-d5-interview-with-bill-gates-and-steve-jobs/&quot;&gt;Kara Swisher &amp;amp; Walt Mossberg &lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Round 4: Name That Framework!&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/ObjC_classic/_index.html&quot;&gt;App Kit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVFoundationFramework/_index.html&quot;&gt;AV Foundation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/InternetWeb/Reference/PubSubReference/_index.html#//apple_ref/doc/uid/TP40004649&quot;&gt;Publication Subscription&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CoreLocation_Framework/_index.html&quot;&gt;Core Location&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/cocoa/Reference/CoreData_ObjC/_index.html&quot;&gt;Core Data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/UserExperience/Reference/SearchKit/Reference/reference.html&quot;&gt;Search Kit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/AddressBook_iPhoneOS_Framework/_index.html&quot;&gt;Address Book&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/GLkit/Reference/GLKit_Collection/_index.html&quot;&gt;GLKit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html&quot;&gt;Core Bluetooth&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_intro/ci_intro.html&quot;&gt;Core Image&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;hr&gt;

&lt;p&gt;So how did you fare? Tweet out your score to see how you stack up to your peers!&lt;/p&gt;
</description>
        <pubDate>Mon, 22 Apr 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nshipster-quiz-1/</link>
        <guid>http://nshipster.com/nshipster-quiz-1/</guid>
      </item>
    
      <item>
        <title>NSSecureCoding</title>
        <description>&lt;p&gt;A short post for this week: everything you need to know about &lt;code&gt;NSSecureCoding&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSSecureCoding&lt;/code&gt; is a protocol introduced in the iOS 6 / Mac OS X 10.8 SDKs. Aside from a few mentions at WWDC, &lt;code&gt;NSSecureCoding&lt;/code&gt; remains relatively obscure—most developers have perhaps heard of it, but perhaps never went so far as to look up what it does.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSSecureCoding&lt;/code&gt; extends the &lt;code&gt;NSCoding&lt;/code&gt; protocol by adding the class method:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;supportsSecureCoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;By conforming to &lt;code&gt;NSSecureCoding&lt;/code&gt; and returning &lt;code&gt;YES&lt;/code&gt; for &lt;code&gt;+supportsSecureCoding&lt;/code&gt;, a class declares that it handles encoding and decoding of instances of itself in a way that guards against substitution attacks.&lt;/p&gt;

&lt;p&gt;Specifically, classes that override &lt;code&gt;-initWithCoder&lt;/code&gt; and conform to &lt;code&gt;NSSecureCoding&lt;/code&gt; should use &lt;code&gt;-decodeObjectOfClass:forKey:&lt;/code&gt; rather than &lt;code&gt;-decodeObjectForKey:&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Why is this important? Recall that &lt;code&gt;NSCoding&lt;/code&gt; is Foundation&amp;#39;s way of marshaling objects to be either archived on a file system, or copied to another address space. When &lt;code&gt;-decodeObjectForKey:&lt;/code&gt; is used to decode representations of objects into actual objects, there is no guarantee that the result of creating the object will be what was expected. If that representation is corrupted—specifically, in changing the target class (and thus designated initializer)—the application runs the risk of constructing unknown objects. Whether by malicious intent or an incidental coding error, this can cause serious problems.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s not an apples-to-apples comparison, but it&amp;#39;s somewhat similar to &lt;a href=&quot;http://tenderlovemaking.com/2013/02/06/yaml-f7u12.html&quot;&gt;recent YAML exploit found in Rails&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For an &lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html&quot;&gt;XPC service&lt;/a&gt;, which is designed with security in mind, data integrity of this nature is especially important. It&amp;#39;s a safe bet that XPC will only wax influence in subsequent iOS and OS X releases, so it&amp;#39;s good to keep this all in mind.&lt;/p&gt;

&lt;p&gt;Anyway, &lt;code&gt;NSSecureCoding&lt;/code&gt; patches this vulnerability by establishing a contract for best practices. Now, decoding an object requires the class to be known ahead of time.&lt;/p&gt;

&lt;p&gt;Whereas a standard, secure implementation of &lt;code&gt;-initWithCoder:&lt;/code&gt; might have a check like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decodeObjectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;myKey&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyClass&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// fail&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...an &lt;code&gt;NSSecureCoding&lt;/code&gt;-conforming class would use:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decoder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decodeObjectOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyClass&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                               &lt;span class=&quot;nl&quot;&gt;forKey:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;myKey&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sometimes, a little API change makes all of the difference.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;So now you know what&amp;#39;s up with &lt;code&gt;NSSecureCoding&lt;/code&gt;. Keep an eye out for that going forward: &lt;a href=&quot;http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/&quot;&gt;XPC is only going to become more important&lt;/a&gt;. Perhaps not today, perhaps not tomorrow, but someday—you will probably need to implement &lt;code&gt;NSSecureCoding&lt;/code&gt;. And when that day comes... you&amp;#39;ll be ready.&lt;/p&gt;

&lt;p&gt;Stay safe, everyone.&lt;/p&gt;
</description>
        <pubDate>Mon, 15 Apr 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nssecurecoding/</link>
        <guid>http://nshipster.com/nssecurecoding/</guid>
      </item>
    
      <item>
        <title>BOOL / bool / Boolean / NSCFBoolean</title>
        <description>&lt;p&gt;We&amp;#39;ve talked before about the &lt;a href=&quot;http://nshipster.com/nil/&quot;&gt;philosophical and technical concerns of nothingness in programming&lt;/a&gt;. This week, our attention turns to another fundamental matter: Truth.&lt;/p&gt;

&lt;p&gt;Truth. &lt;em&gt;Vēritās&lt;/em&gt;. The entire charter of Philosophy is founded upon the pursuit of it, and yet its exact meaning and implications still elude us. Does truth exist independently, or is it defined contingently against falsity? Can a proposition be at once both true &lt;em&gt;and&lt;/em&gt; false? Is there absolute truth in anything, or is everything relative?&lt;/p&gt;

&lt;p&gt;Once again, encoding our logical universe into the cold, calculating bytecode of computers forces us to deal with these questions one way or another. And as you&amp;#39;ll see from our discussion of boolean types in Objective-C and its kin, truth is indeed stranger than fiction.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Objective-C defines &lt;code&gt;BOOL&lt;/code&gt; to encode truth value. It is a &lt;code&gt;typedef&lt;/code&gt; of a &lt;code&gt;signed char&lt;/code&gt;, with the macros &lt;code&gt;YES&lt;/code&gt; and &lt;code&gt;NO&lt;/code&gt; to represent true and false, respectively.&lt;/p&gt;

&lt;p&gt;Boolean values are used in conditionals, such as &lt;code&gt;if&lt;/code&gt; or &lt;code&gt;while&lt;/code&gt; statements, to conditionally perform logic or repeat execution. When evaluating a conditional statement, the value &lt;code&gt;0&lt;/code&gt; is considered &amp;quot;false&amp;quot;, while any other value is considered &amp;quot;true&amp;quot;. Because &lt;code&gt;NULL&lt;/code&gt; and &lt;code&gt;nil&lt;/code&gt; are defined as &lt;code&gt;0&lt;/code&gt;, conditional statements on these nonexistent values are also evaluated as &amp;quot;false&amp;quot;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;In Objective-C, use the &lt;code&gt;BOOL&lt;/code&gt; type for parameters, properties, and instance variables dealing with truth values. When assigning literal values, use the &lt;code&gt;YES&lt;/code&gt; and &lt;code&gt;NO&lt;/code&gt; macros.&lt;/strong&gt;&lt;/p&gt;

&lt;h2&gt;The Wrong Answer to the Wrong Question&lt;/h2&gt;

&lt;p&gt;Novice programmers often include an equality operator when evaluating conditionals:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqual&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Not only is this unnecessary, but depending on the left-hand value, it may also cause unexpected results, as described in the &lt;a href=&quot;http://blog.bignerdranch.com/564-bools-sharp-corners/&quot;&gt;Big Nerd Ranch blog post, &amp;quot;BOOL&amp;#39;s Sharp Edges&amp;quot;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;different&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;An overly clever C programmer might take some satisfaction in the simplicity of this approach: indeed, two integers are equal if and only if their difference is &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;However, because of the reality of &lt;code&gt;BOOL&lt;/code&gt; being &lt;code&gt;typedef&lt;/code&gt;&amp;#39;d as a &lt;code&gt;signed char&lt;/code&gt;, this will not behave as expected:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;different&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;11 != 10&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;11 == 10&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;different&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;10 != 11&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;10 == 11&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;different&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;512 != 256&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;512 == 256&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This evaluates to:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;11 != 10
10 == 11
512 == 256
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, &lt;a href=&quot;https://www.destroyallsoftware.com/talks/wat&quot;&gt;this might be acceptable for JavaScript&lt;/a&gt;, but Objective-C don&amp;#39;t suffer fools gladly.&lt;/p&gt;

&lt;p&gt;Deriving truth value directly from an arithmetic operation is never a good idea. Like the sentence &lt;a href=&quot;http://en.wikipedia.org/wiki/Colorless_green_ideas_sleep_furiously&quot;&gt;&amp;quot;Colorless green ideas sleep furiously&amp;quot;&lt;/a&gt;, it may be grammatical (after all, &lt;code&gt;BOOL&lt;/code&gt; is a &lt;code&gt;signed char&lt;/code&gt; like any other, so it &lt;em&gt;could&lt;/em&gt; be treated as a number), but it doesn&amp;#39;t make sense semantically. Instead, use the result of the &lt;code&gt;==&lt;/code&gt; operator, or cast values into booleans with the &lt;code&gt;!&lt;/code&gt; (or &lt;code&gt;!!&lt;/code&gt;) operator.&lt;/p&gt;

&lt;h2&gt;The Truth About &lt;code&gt;NSNumber&lt;/code&gt; and &lt;code&gt;BOOL&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Pop quiz: what is the output of the following expression?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[@(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The answer:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;__NSCFBoolean
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Wait, what?&lt;/p&gt;

&lt;p&gt;All this time, we&amp;#39;ve been led to believe that &lt;code&gt;NSNumber&lt;/code&gt; &lt;a href=&quot;http://nshipster.com/nsvalue/&quot;&gt;boxes&lt;/a&gt; primitives into an object representation. Any other integer- or float-derived &lt;code&gt;NSNumber&lt;/code&gt; object shows its class to be &lt;code&gt;__NSCFNumber&lt;/code&gt;. What gives?&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSCFBoolean&lt;/code&gt; is a private class in the &lt;code&gt;NSNumber&lt;/code&gt; &lt;a href=&quot;http://nshipster.com/nsorderedset/&quot;&gt;class cluster&lt;/a&gt;. It is a bridge to the &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFBooleanRef/Reference/reference.html&quot;&gt;&lt;code&gt;CFBooleanRef&lt;/code&gt; type&lt;/a&gt;, which is used to wrap boolean values for Core Foundation property lists and collections. &lt;code&gt;CFBoolean&lt;/code&gt; defines the constants &lt;code&gt;kCFBooleanTrue&lt;/code&gt; and &lt;code&gt;kCFBooleanFalse&lt;/code&gt;. Because &lt;code&gt;CFNumberRef&lt;/code&gt; and &lt;code&gt;CFBooleanRef&lt;/code&gt; are different types in Core Foundation, it makes sense that they are represented by different bridging classes in &lt;code&gt;NSNumber&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For most people, boolean values and boxed objects &amp;quot;just work&amp;quot;, and don&amp;#39;t really care what goes into making the sausage. But here at NSHipster, we&amp;#39;re all about sausages.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;So, to recap, here is a table of all of the truth types and values in Objective-C:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Name&lt;/th&gt;
      &lt;th&gt;Typedef&lt;/tt&gt;
      &lt;th&gt;Header&lt;/th&gt;
      &lt;th&gt;True Value&lt;/th&gt;
      &lt;th&gt;False Value&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;BOOL&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;signed char&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;objc.h&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;YES&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;NO&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;bool&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;_Bool&lt;/tt&gt; (&lt;tt&gt;int&lt;/tt&gt;)&lt;/td&gt;
      &lt;td&gt;stdbool.h&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;true&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;false&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;Boolean&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;unsigned char&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;MacTypes.h&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;TRUE&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;FALSE&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSNumber&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;__NSCFBoolean&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;Foundation.h&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;@(YES)&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;@(NO)&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;CFBooleanRef&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;struct&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;CoreFoundation.h&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;kCFBooleanTrue&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;kCFBooleanFalse&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        <pubDate>Mon, 08 Apr 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/bool/</link>
        <guid>http://nshipster.com/bool/</guid>
      </item>
    
      <item>
        <title>iCloud</title>
        <description>&lt;p&gt;The &lt;a href=&quot;http://en.wikipedia.org/wiki/Apple_Lisa&quot;&gt;Lisa&lt;/a&gt;. The &lt;a href=&quot;http://en.wikipedia.org/wiki/Twentieth_Anniversary_Macintosh&quot;&gt;Twentieth Anniversary Macintosh&lt;/a&gt;. The &lt;a href=&quot;http://en.wikipedia.org/wiki/IPod_Hi-Fi&quot;&gt;iPod Hi-Fi&lt;/a&gt;. The &lt;a href=&quot;http://www.youtube.com/watch?v=9BnLbv6QYcA&quot;&gt;MacBook Wheel&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Each of these products exemplifies Apple&amp;#39;s obsessive pursuit of quality as much as its unrivaled ability to anticipate the direction of things to come and execute flawlessly.&lt;/p&gt;

&lt;p&gt;In the words of Wayne Gretzky: &lt;q&gt;Skate where the puck&amp;#39;s going, not where it&amp;#39;s been.&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;But perhaps what Apple is most renowned for, however, is its consistent track record for creating &lt;em&gt;great&lt;/em&gt; webservices. From consumer products like MobileMe and Ping to developer tools including the Provisioning Portal and iTunes Connect, Apple has continued to set new standards for convenience, robustness, and extensibility.&lt;/p&gt;

&lt;p&gt;So when Apple introduced iCloud at WWDC in 2011, everyone in the audience was rapt in anticipation, overcome with a sense of optimistic wonder. &amp;quot;Not again!&amp;quot;, we said to ourselves, shaking our head with a knowing smile. &amp;quot;This changes everything!&amp;quot;&lt;/p&gt;

&lt;p&gt;And indeed, iCloud &lt;em&gt;has&lt;/em&gt; changed everything. Although it seemed almost too good to be true when Steve Jobs got up on that stage in Moscone to announce iCloud to the world that morning in June—if anything, Apple has &lt;strong&gt;under&lt;/strong&gt;-promised and &lt;strong&gt;over&lt;/strong&gt;-delivered with iCloud.&lt;/p&gt;

&lt;p&gt;Now, NSHipster usually covers obscure topics that you&amp;#39;ve probably never heard of. But this is one of those days where it just feels &lt;em&gt;right&lt;/em&gt; to take this opportunity today to make sure we&amp;#39;re all on the same page about iCloud.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;iCloud is an umbrella term for the latest evolution of Apple&amp;#39;s consumer web services. Following from the success of iTools, .Mac, and MobileMe, iCloud manages our digital lives like never before, with features like Photo Stream, iTunes Match, and Documents in the Cloud.&lt;/p&gt;

&lt;p&gt;What really ties everything together are the iCloud Storage APIs that allow developers to easily create applications to stay connected across all of your devices. These APIs come in three different flavors, depending on the particular needs of your application:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Key-value storage&lt;/strong&gt; for discrete values, such as preferences, settings, and simple app state.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Document storage&lt;/strong&gt; for user-visible file-based information such as word processing documents, drawings, and complex app state.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Core Data storage&lt;/strong&gt; for shoebox-style apps and server-based, multi-device database solutions for structured content. iCloud Core Data storage is built on document storage and employs the same iCloud APIs.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Key-Value Storage... in the Cloud!&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;To store discrete values in iCloud for app preferences, app configuration, or app state, use iCloud key-value storage. Key-value storage is similar to the local user defaults database; but values that you place in key-value storage are available to every instance of your app on all of a user’s various devices.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Everyone knows that key-value storage is the secret to achieving Web Scale. That&amp;#39;s just science.&lt;/p&gt;

&lt;p&gt;Inject a healthy dose of Web Scale convenience into your app by incorporating &lt;code&gt;NSUbiquitousKeyValueStore&lt;/code&gt; into your app:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;didFinishLaunchingWithOptions:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;launchOptions&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNotificationCenter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultCenter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;nl&quot;&gt;addObserver:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;
         &lt;span class=&quot;nl&quot;&gt;selector:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ubiquitousKeyValueStoreDidChange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;nl&quot;&gt;name:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUbiquitousKeyValueStoreDidChangeExternallyNotification&lt;/span&gt;
           &lt;span class=&quot;nl&quot;&gt;object:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUbiquitousKeyValueStore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUbiquitousKeyValueStore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;synchronize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ubiquitousKeyValueStoreDidChange:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNotification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;notification&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSUbiquitousKeyValueStore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ubiquitousKeyValueStore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ubiquitousKeyValueStore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;synchronize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Document Storage... in the Cloud!&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;Adopting iCloud document storage makes your app’s documents available on all of a user’s devices. Documents automatically implement most of the behavior expected of iCloud apps. Specifically, a document automatically ensures that local changes are safely coordinated with iCloud-originated changes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Leave filesystem-based storage to those poor terrestrial bound souls who haven&amp;#39;t been raptured to the iCloud. Dropbox? Never heard of &amp;#39;em.&lt;/p&gt;

&lt;p&gt;Having documents reside entirely in application-specific cloud containers means less clutter in your digital life. Why should other applications be able to access documents anyway? Why would I want to use any more than a single app for any particular task?&lt;/p&gt;

&lt;p&gt;They say seeing is believing, but iCloud is built on faith—that everything will be there next time you open Pages, Keynote, or TextEdit. Leave the Finder to play with its folders and &lt;code&gt;.DS_Store&lt;/code&gt; files; we shall inherit the open skies of digital freedom.&lt;/p&gt;

&lt;h2&gt;Core Data Storage... in the Cloud!&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;Adopting iCloud Core Data storage makes the content in a shoebox-style app (like iPhoto) or a database-style app (like Bento) available on all of a user’s devices. Each instance of your app, on each device attached to an iCloud account, maintains its own local Core Data store file. When data changes locally, Core Data writes change log files to your app’s default ubiquity container.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Developers really love Core Data syncing over iCloud. Seriously, they just &lt;a href=&quot;http://blackpixel.com/blog/2013/03/the-return-of-netnewswire.html&quot;&gt;can&amp;#39;t&lt;/a&gt; &lt;a href=&quot;https://twitter.com/SteveStreza/status/314494942489751553&quot;&gt;stop&lt;/a&gt; &lt;a href=&quot;http://www.jumsoft.com/2013/01/response-to-sync-issues/&quot;&gt;raving&lt;/a&gt; &lt;a href=&quot;http://inessential.com/2013/03/27/why_developers_shouldnt_use_icloud_sy&quot;&gt;about&lt;/a&gt; &lt;a href=&quot;http://www.theverge.com/2013/3/26/4148628/why-doesnt-icloud-just-work&quot;&gt;it&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Just when you thought Core Data couldn&amp;#39;t get simpler, iCloud once again redefines our expectations.&lt;/p&gt;

&lt;p&gt;Every time your application receives a &lt;code&gt;NSPersistentStoreDidImportUbiquitousContentChangesNotification&lt;/code&gt; is reminiscent of that excitement of seeing the FedEx truck pull up with your pre-ordered iPhone 5. &amp;quot;This is the first day of the rest of my life&amp;quot;, you&amp;#39;ll think to yourself as you sign the proverbial confirmation slip of the package.&lt;/p&gt;

&lt;p&gt;Sure, there&amp;#39;s a chance that what you&amp;#39;re signing is &lt;em&gt;actually&lt;/em&gt; a repossession confirmation, and that the delivery guy will proceed to bust into your apartment and take everything you once owned, but at least you still have your new iPhone.&lt;/p&gt;

&lt;p&gt;So it goes. Even an enlightened iLife is not without its risks.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Life just seems to float by, now that iCloud is managing our digital existence. No longer do we have to think about whether we have all of the information we need to go about our day:&lt;/p&gt;

&lt;p&gt;From the moment our iPhone wakes us up with the &amp;quot;Marimba&amp;quot; ringtone, to our daily commute with Siri talking us through our day, and a productive work day using iWork; from the walk to the gym, listening to Podcasts.app, and working out with iTunes Sync, until our last waking hours as we wind down the day with Game Center, Apple and iCloud makes every day special.&lt;/p&gt;

&lt;p&gt;And with the iCloud Storage APIs, you too can add your application to that perfect routine of digitally-synced bliss.&lt;/p&gt;

&lt;p&gt;No foolin&amp;#39;.&lt;/p&gt;
</description>
        <pubDate>Mon, 01 Apr 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/icloud/</link>
        <guid>http://nshipster.com/icloud/</guid>
      </item>
    
      <item>
        <title>Search Kit</title>
        <description>&lt;p&gt;NSHipsters love irony, right? How about this for irony:&lt;/p&gt;

&lt;p&gt;There&amp;#39;s this framework called &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/UserExperience/Reference/SearchKit/Reference/reference.html&quot;&gt;Search Kit&lt;/a&gt;, which despite being insanely powerful and useful for finding information, is something that almost no one has ever heard of.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s true! I&amp;#39;d reckon there&amp;#39;s a better chance that you have implemented your own search functionality from scratch than have ever even heard of Search Kit. (Heck, most people haven&amp;#39;t even heard of &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Carbon/Reference/CoreServicesReferenceCollection/_index.html&quot;&gt;Core Services&lt;/a&gt;, its parent framework)&lt;/p&gt;

&lt;p&gt;If only everyone knew that they could harness the same killer search functionality that Apple uses for their own applications...&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Search Kit is a C framework for searching and indexing content in human languages. It supports matching on phrase or partial word, including logical (&lt;code&gt;AND&lt;/code&gt;, &lt;code&gt;OR&lt;/code&gt;) and wildcard (&lt;code&gt;*&lt;/code&gt;) operators, and can rank results by relevance. Search Kit also provides document summarization, which is useful for generating representative excerpts. And best of all: it&amp;#39;s thread-safe.&lt;/p&gt;

&lt;p&gt;All of the whiz-bang search-as-you-type features in Mac OS X—from Mail.app and Xcode to System Preferences and Spotlight—use Search Kit under the hood.&lt;/p&gt;

&lt;p&gt;But to understand how Search Kit does its magic, it&amp;#39;s important to explain some of the basics of Information Retrieval and Natural Language Processing.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Be sure to check out &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/SearchKitConcepts/searchKit_intro/searchKit_intro.html&quot;&gt;Apple&amp;#39;s Search Kit Programming Guide&lt;/a&gt; for an authoritative explanation of the what&amp;#39;s, why&amp;#39;s, and how&amp;#39;s of this great framework.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Search 101&lt;/h2&gt;

&lt;p&gt;Quoth Apple:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;You have an information need. But before you can ask a question, you need someone or something to ask. That is, you need to establish who or what you will accept as an authority for an answer. So before you ask a question you need to define the target of your question.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Finding the answer in a reasonable amount of time requires effort from the start. This is what that process looks like in general terms:&lt;/p&gt;

&lt;h3&gt;Extract&lt;/h3&gt;

&lt;p&gt;First, content must be extracted from a &lt;a href=&quot;http://en.wikipedia.org/wiki/Text_corpus&quot;&gt;corpus&lt;/a&gt;. For a text document, this could involve removing any styling, formatting, or other meta-information. For a data record, such as an &lt;code&gt;NSManagedObject&lt;/code&gt;, this means taking all of the salient fields and combining it into a representation.&lt;/p&gt;

&lt;p&gt;Once extracted, the content is &lt;a href=&quot;http://en.wikipedia.org/wiki/Tokenization&quot;&gt;tokenized&lt;/a&gt; for further processing.&lt;/p&gt;

&lt;h3&gt;Filter&lt;/h3&gt;

&lt;p&gt;In order to get the most relevant matches, it&amp;#39;s important to filter out common, or &amp;quot;stop&amp;quot; words like articles, pronouns, and helping verbs, that don&amp;#39;t really contribute to overall meaning.&lt;/p&gt;

&lt;h3&gt;Reduce&lt;/h3&gt;

&lt;p&gt;Along the same lines, words that mean basically the same thing should be reduced down into a common form. Morpheme clusters, such as grammatical conjugations like &amp;quot;computer&amp;quot;, &amp;quot;computers&amp;quot;, &amp;quot;computed&amp;quot;, and &amp;quot;computing&amp;quot;, for example, can all be simplified to be just &amp;quot;compute&amp;quot;, using a &lt;a href=&quot;http://en.wikipedia.org/wiki/Stemming&quot;&gt;stemmer&lt;/a&gt;. Synonyms, likewise, can be lumped into a common entry using a thesaurus lookup.&lt;/p&gt;

&lt;h3&gt;Index&lt;/h3&gt;

&lt;p&gt;The end result of extracting, filtering, and reducing content into an array of normalized tokens is to form an &lt;a href=&quot;http://en.wikipedia.org/wiki/Inverted_index&quot;&gt;inverted index&lt;/a&gt;, such that each token points to its origin in the index.&lt;/p&gt;

&lt;p&gt;After repeating this process for each document or record in the corpus until, each token can point to many different articles. In the process of searching, a query is mapped onto one or many of these tokens, retrieving the union of the articles associated with each token.&lt;/p&gt;

&lt;h2&gt;Using Search Kit&lt;/h2&gt;

&lt;h3&gt;Creating an Index&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;SKIndexRef&lt;/code&gt; is the central data type in Search Kit, containing all of the information needed to process and fulfill searches, and add information from new documents. Indexes can be persistent / file-based or ephemeral / in-memory. Indexes can either be created from scratch, or loaded from an existing file or data object—and once an index is finished being used, like many other C APIs, the index is closed.&lt;/p&gt;

&lt;h3&gt;Adding Documents to an Index&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;SKDocumentRef&lt;/code&gt; is the data type associated with entries in the index. When a search is performed, documents (along with their context and relevance) are the results.&lt;/p&gt;

&lt;p&gt;Each &lt;code&gt;SKDocumentRef&lt;/code&gt; is associated with a URI.&lt;/p&gt;

&lt;p&gt;For documents on the file system, the URI is simply the location of the file on disk:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileURLWithPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;/path/to/document&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;SKDocumentRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SKDocumentCreateWithURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFURLRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For Core Data managed objects, the &lt;code&gt;NSManagedObjectID -URIRepresentation&lt;/code&gt; can be used:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objectURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objectID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URIRepresentation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;SKDocumentRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SKDocumentCreateWithURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFURLRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objectURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;For any other kinds of data, it would be up to the developer to define a URI representation.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;When adding the contents of a &lt;code&gt;SKDocumentRef&lt;/code&gt; to an &lt;code&gt;SKIndexRef&lt;/code&gt;, the text can either be specified manually:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Lorem ipsum dolar sit amet&amp;quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;SKIndexAddDocumentWithText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...or collected automatically from a file:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mimeTypeHint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;text/rtf&amp;quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;SKIndexAddDocument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mimeTypeHint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To change the way a file-based document&amp;#39;s contents are processed, properties can be defined when creating the index:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stopwords&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setWithObjects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;all&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;and&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;its&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;it&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;the&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;properties&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@{&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;@&amp;quot;kSKStartTermChars&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// additional starting-characters for terms&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;@&amp;quot;kSKTermChars&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;-_@.&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// additional characters within terms&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;@&amp;quot;kSKEndTermChars&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// additional ending-characters for terms&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;@&amp;quot;kSKMinTermLength&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;@&amp;quot;kSKStopWords&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stopwords&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;SKIndexRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SKIndexCreateWithURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFURLRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kSKIndexInverted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFDictionaryRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;properties&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Searching&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;SKSearchRef&lt;/code&gt; is the data type constructed to perform a search on an &lt;code&gt;SKIndexRef&lt;/code&gt;. It contains a reference to the index, a query string, and a set of options:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;query&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;kind of blue&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;SKSearchOptions&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kSKSearchOptionDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;SKSearchRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;search&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SKSearchCreate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CFStringRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;SKSearchOptions&lt;/code&gt; is a bitmask with the following possible values:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;kSKSearchOptionDefault&lt;/code&gt;: Default search options include:

&lt;ul&gt;
&lt;li&gt;Relevance scores will be computed&lt;/li&gt;
&lt;li&gt;Spaces in a query are interpreted as Boolean AND operators.&lt;/li&gt;
&lt;li&gt;Do not use similarity searching.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;These options can be specified individually as well:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;kSKSearchOptionNoRelevanceScores&lt;/code&gt;: This option saves time during a search by suppressing the computation of relevance scores.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kSKSearchOptionSpaceMeansOR&lt;/code&gt;: This option alters query behavior so that spaces are interpreted as Boolean OR operators.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kSKSearchOptionFindSimilar&lt;/code&gt;: This option alters query behavior so that Search Kit returns references to documents that are similar to an example text string. When this option is specified, Search Kit ignores all query operators.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Putting this all together is &lt;code&gt;SKIndexCopyDocumentURLsForDocumentIDs&lt;/code&gt;, which performs the search and fills arrays with the results. Iterating through the range of found matches provides access to the document URL and relevance score (if calculated):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Maximum number of results&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSTimeInterval&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Maximum time to get results, in seconds&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;SKDocumentID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;documentIDs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CFURLRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scores&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CFIndex&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hasResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SKSearchFindMatches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;documentIDs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scores&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;SKIndexCopyDocumentURLsForDocumentIDs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foundCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;documentIDs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableResults&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSIndexSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;indexSetWithIndexesInRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enumerateIndexesUsingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CFURLRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relevance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scores&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;- %@: %f&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relevance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objectID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableResults&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;CFRelease&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;For more examples of Search Kit in action, be sure to check out &lt;a href=&quot;https://github.com/indragiek&quot;&gt;Indragie Karunaratne&amp;#39;s&lt;/a&gt; project, &lt;a href=&quot;https://github.com/indragiek/SNRSearchIndex&quot;&gt;SNRSearchIndex&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;And so this article becomes yet another document in the corpus we call the Internet. By pointing to Search Kit, and explaining even the briefest of its features, this—the strings of tokens you read at this very moment—are (perhaps) making it easier for others to find Search Kit.&lt;/p&gt;

&lt;p&gt;...and it&amp;#39;s a good thing, too, because Search Kit is a wonderful and all-too-obscure framework, which anyone building a content-based system would do well to investigate.&lt;/p&gt;
</description>
        <pubDate>Mon, 25 Mar 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/search-kit/</link>
        <guid>http://nshipster.com/search-kit/</guid>
      </item>
    
      <item>
        <title>C Storage Classes</title>
        <description>&lt;p&gt;It&amp;#39;s time, once again, to take a few steps back from the world of Objective-C, and look at some underlying C language features. Hold onto your fedoras, ladies &amp;amp; gents, as we dive into C storage classes in this week&amp;#39;s edition of NSHipster.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;In C, the &lt;em&gt;scope&lt;/em&gt; and &lt;em&gt;lifetime&lt;/em&gt; of a variable or function within a program is determined by its &lt;em&gt;storage class&lt;/em&gt;. Each variable has a &lt;em&gt;lifetime&lt;/em&gt;, or the context in which they store their value. Functions, along with variables, also exist within a particular &lt;em&gt;scope&lt;/em&gt;, or visibility, which dictates which parts of a program know about and can access them.&lt;/p&gt;

&lt;p&gt;There are 4 storage classes in C:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;auto&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;register&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;static&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;extern&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;At least a few of these will look familiar to anyone who has done a cursory amount of Objective-C programming. Let&amp;#39;s go into more detail with each one:&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;auto&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;There&amp;#39;s a good chance you&amp;#39;ve never seen this keyword in the wild. That&amp;#39;s because &lt;code&gt;auto&lt;/code&gt; is the default storage class, and therefore doesn&amp;#39;t need to be explicitly used often.&lt;/p&gt;

&lt;p&gt;Automatic variables have memory automatically allocated when a program enters a block, and released when the program leaves that block. Access to automatic variables is limited to only the block in which they are declared, as well as any nested blocks.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;register&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Most Objective-C programmers probably aren&amp;#39;t familiar with &lt;code&gt;register&lt;/code&gt; either, as it&amp;#39;s just not widely used in the &lt;code&gt;NS&lt;/code&gt; world.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;register&lt;/code&gt; behaves just like &lt;code&gt;auto&lt;/code&gt;, except that instead of being allocated onto the stack, they are stored in a &lt;a href=&quot;http://en.wikipedia.org/wiki/Processor_register&quot;&gt;register&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Registers offer faster access than RAM, but because of the complexities of memory management, putting variables in registers does not guarantee a faster program—in fact, it may very well end up slowing down execution by taking up space on the register unnecessarily. As it were, using &lt;code&gt;register&lt;/code&gt; is actually just a &lt;em&gt;suggestion&lt;/em&gt; to the compiler to store the variable in the register; implementations may choose whether or not to honor this.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;register&lt;/code&gt;&amp;#39;s lack of popularity in Objective-C is instructive: it&amp;#39;s probably best not to bother with it, as it&amp;#39;s much more likely to cause a headache than speed up your app in any noticeable way.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;static&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Finally, one that everyone&amp;#39;s sure to recognize: &lt;code&gt;static&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;As a keyword, &lt;code&gt;static&lt;/code&gt; gets used in a lot of different, incompatible ways, so it can be confusing to figure out exactly what it means in every instance. When it comes to storage classes, &lt;code&gt;static&lt;/code&gt; means one of two things.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;A &lt;code&gt;static&lt;/code&gt; variable inside a method or function retains its value between invocations.&lt;/li&gt;
&lt;li&gt;A &lt;code&gt;static&lt;/code&gt; variable declared globally can be called by any function or method, so long as those functions appear in the same file as the &lt;code&gt;static&lt;/code&gt; variable. The same goes for &lt;code&gt;static&lt;/code&gt; functions.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;Static Singletons&lt;/h3&gt;

&lt;p&gt;A common pattern in Objective-C is the &lt;code&gt;static&lt;/code&gt; singleton, wherein a statically-declared variable is initialized and returned in either a function or class method. &lt;code&gt;dispatch once&lt;/code&gt; is used to guarantee that the variable is initialized &lt;em&gt;exactly&lt;/em&gt; once in a thread-safe manner:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sharedInstance&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_sharedInstance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;dispatch_once_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;onceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;dispatch_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;onceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;_sharedInstance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_sharedInstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The singleton pattern is useful for creating objects that are shared across the entire application, such as an HTTP client or a notification manager, or objects that may be expensive to create, such as formatters.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;extern&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Whereas &lt;code&gt;static&lt;/code&gt; makes functions and variables globally visible within a particular file, &lt;code&gt;extern&lt;/code&gt; makes them visible globally to &lt;em&gt;all files&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Global variables are not a great idea, generally speaking. Having no constraints on how or when state can be mutated is just asking for impossible-to-debug bugs. That said, there are two common and practical uses for &lt;code&gt;extern&lt;/code&gt; in Objective-C.&lt;/p&gt;

&lt;h3&gt;Global String Constants&lt;/h3&gt;

&lt;p&gt;Any time your application uses a string constant with a non-linguistic value in a public interface, it should declare it as an external string constant. This is especially true of keys in &lt;code&gt;userInfo&lt;/code&gt; dictionaries, &lt;code&gt;NSNotification&lt;/code&gt; names, and &lt;code&gt;NSError&lt;/code&gt; domains.&lt;/p&gt;

&lt;p&gt;The pattern is to declare an &lt;code&gt;extern&lt;/code&gt; &lt;code&gt;NSString * const&lt;/code&gt; in a public header, and define that &lt;code&gt;NSString * const&lt;/code&gt; in the implementation:&lt;/p&gt;

&lt;h4&gt;AppDelegate.h&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kAppErrorDomain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;AppDelegate.m&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kAppErrorDomain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;com.example.yourapp.error&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It doesn&amp;#39;t particularly matter what the value of the string is, so long as it&amp;#39;s unique. Using a string constant establishes a strict contract, that the constant variable is used instead of the string&amp;#39;s literal value itself.&lt;/p&gt;

&lt;h3&gt;Public Functions&lt;/h3&gt;

&lt;p&gt;Some APIs may wish to expose helper functions publicly. For auxiliary concerns and state-agnostic procedures, functions are a great way to encapsulate these behaviors—and if they&amp;#39;re particularly useful, it may be worth making them available globally.&lt;/p&gt;

&lt;p&gt;The pattern follows the same as in the previous example:&lt;/p&gt;

&lt;h4&gt;TransactionStateMachine.h&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NS_ENUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TransactionState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TransactionOpened&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TransactionPending&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TransactionClosed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NSStringFromTransactionState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TransactionState&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;TransactionStateMachine.m&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NSStringFromTransactionState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TransactionState&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TransactionOpened&lt;/span&gt;:
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Opened&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TransactionPending&lt;/span&gt;:
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Pending&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TransactionClosed&lt;/span&gt;:
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Closed&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;default:&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;To understand anything is to make sense of its context. What we may see as obvious and self-evident, is all but unknown to someone without our frame of reference. Our inability to truly understand or appreciate the differences in perspective and information between ourselves and others is perhaps our most basic shortcoming.&lt;/p&gt;

&lt;p&gt;That is why, in our constructed logical universe of 0&amp;#39;s and 1&amp;#39;s, we take such care to separate contexts, and structure our assumptions based on these explicit rules. C storage classes are essential to understanding how a program operates. Without them, we are left to develop as one might walk on egg shells. So take heed of these simple rules of engagement and go forth to code with confidence.&lt;/p&gt;
</description>
        <pubDate>Mon, 18 Mar 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/c-storage-classes/</link>
        <guid>http://nshipster.com/c-storage-classes/</guid>
      </item>
    
      <item>
        <title>UIAppearance</title>
        <description>&lt;p&gt;Style vs. Substance.
Message vs. Medium.
Rhetoric vs. Dialectic.&lt;/p&gt;

&lt;p&gt;Is beauty merely skin deep, or is it somehow informed by deeper truths?
What does it mean for something to possess good design?
Are aesthetic judgments relative, or absolute?&lt;/p&gt;

&lt;p&gt;These are deep questions that have been pondered by philosophers, artists, and makers alike for millennia.&lt;/p&gt;

&lt;p&gt;And while we all continue our search for beauty and understanding in the universe, the app marketplace has been rather clear on this subject:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Users will pay a premium for good-looking software.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;When someone purchases an iPhone, they are buying into Apple&amp;#39;s philosophy that things that work well should look good, too. The same goes for when we choose to develop for iOS—a sloppy UI reflects poorly on the underlying code.&lt;/p&gt;

&lt;p&gt;It used to be that even trivial UI customization on iOS required AppStore-approval-process-taunting ju-ju like method swizzling. Fortunately, with iOS 5, developers were given an easier way: &lt;code&gt;UIAppearance&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;UIAppearance&lt;/code&gt; allows the appearance of views and controls to be consistently defined across the entire application.&lt;/p&gt;

&lt;p&gt;In order to have this work within the existing structure of UIKit, Apple devised a rather clever solution: &lt;code&gt;UIAppearance&lt;/code&gt; is a protocol that returns a proxy that will forward any configuration to instances of a particular class. Why a proxy instead of a property or method on &lt;code&gt;UIView&lt;/code&gt; directly? Because there are non-&lt;code&gt;UIView&lt;/code&gt; objects like &lt;code&gt;UIBarButtonItem&lt;/code&gt; that render their own composite views.
Appearance can be customized for all instances, or scoped to particular view hierarchies:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;+appearance&lt;/code&gt;: Returns the appearance proxy for the receiver.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+appearanceWhenContainedIn:(Class &amp;lt;UIAppearanceContainer&amp;gt;)ContainerClass,...&lt;/code&gt;: Returns the appearance proxy for the receiver in a given containment hierarchy.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;To customize the appearance of all instances of a class, you use &lt;code&gt;appearance&lt;/code&gt; to get the appearance proxy for the class. For example, to modify the tint color for all instances of UINavigationBar:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UINavigationBar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appearance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setTintColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;To customize the appearances for instances of a class when contained within an instance of a container class, or instances in a hierarchy, you use appearanceWhenContainedIn: to get the appearance proxy for the class:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIBarButtonItem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appearanceWhenContainedIn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UINavigationBar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;setTintColor:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myNavBarColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIBarButtonItem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appearanceWhenContainedIn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UINavigationBar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIPopoverController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;setTintColor:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myPopoverNavBarColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIBarButtonItem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appearanceWhenContainedIn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIToolbar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;setTintColor:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myToolbarColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIBarButtonItem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appearanceWhenContainedIn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIToolbar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIPopoverController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;setTintColor:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myPopoverToolbarColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Determining Which Properties Work With &lt;code&gt;UIAppearance&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;One major downside to &lt;code&gt;UIAppearance&lt;/code&gt;&amp;#39;s proxy approach is that it&amp;#39;s difficult to know which selectors are compatible.&lt;/p&gt;

&lt;del&gt;Because &lt;tt&gt;+appearance&lt;/tt&gt; returns an &lt;tt&gt;id&lt;/tt&gt;, Xcode can&#39;t provide any code-completion information. This is a major source of confusion and frustration with this feature.&lt;/del&gt;

&lt;ins&gt;As of iOS 7, UIAppearance now returns &lt;a href=&quot;http://nshipster.com/instancetype/&quot;&gt;&lt;tt&gt;instancetype&lt;/tt&gt;&lt;/a&gt;, which allows for code completion to work as expected. Huzzah!&lt;/ins&gt;

&lt;p&gt;In order to find out what methods work with &lt;code&gt;UIAppearance&lt;/code&gt;, you have to &lt;a href=&quot;http://stackoverflow.com/questions/9424112/what-properties-can-i-set-via-an-uiappearance-proxy&quot;&gt;look at the headers&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;$ cd /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/
  Developer/SDKs/iPhoneOS*.sdk/System/Library/Frameworks/UIKit.framework/Headers
$ grep -H UI_APPEARANCE_SELECTOR ./* | sed &amp;#39;s/ __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_5_0) UI_APPEARANCE_SELECTOR;//&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;UIAppearance&lt;/code&gt; looks for the &lt;code&gt;UI_APPEARANCE_SELECTOR&lt;/code&gt; macro in method signatures. Any method with this annotation can be used with the &lt;code&gt;appearance&lt;/code&gt; proxy.&lt;/p&gt;

&lt;p&gt;For your convenience, &lt;a href=&quot;https://gist.github.com/mattt/5135521&quot;&gt;here is the list of properties as of iOS 7.0&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;Implementing &lt;code&gt;&amp;lt;UIAppearance&amp;gt;&lt;/code&gt; in Custom UIView Subclasses&lt;/h2&gt;

&lt;p&gt;Much like how &lt;a href=&quot;http://nshipster.com/nslocalizedstring/&quot;&gt;&lt;code&gt;NSLocalizedString&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;http://nshipster.com/pragma/&quot;&gt;&lt;code&gt;#pragma&lt;/code&gt;&lt;/a&gt; are marks of quality in Objective-C code, having custom UI classes conform to &lt;code&gt;UIAppearance&lt;/code&gt; is not only a best-practice, but it demonstrates a certain level of care being put into its implementation.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://twitter.com/steipete&quot;&gt;Peter Steinberger&lt;/a&gt; has &lt;a href=&quot;http://petersteinberger.com/blog/2013/uiappearance-for-custom-views/&quot;&gt;this great article&lt;/a&gt;, which describes some of the caveats about implementing &lt;code&gt;UIAppearance&lt;/code&gt; in custom views. It&amp;#39;s a must-read for anyone who aspires to greatness in their open source UI components.&lt;/p&gt;

&lt;h2&gt;Alternatives&lt;/h2&gt;

&lt;p&gt;Another major shortcoming of &lt;code&gt;UIAppearance&lt;/code&gt; is that style rules are &lt;em&gt;imperative&lt;/em&gt;, rather than &lt;em&gt;declarative&lt;/em&gt;. That is, styling is applied at runtime in code, rather than being interpreted from a list of style rules.&lt;/p&gt;

&lt;p&gt;Yes, if there&amp;#39;s one idea to steal from web development, it&amp;#39;s the separation of content and presentation. Say what you will about CSS, but stylesheets are &lt;em&gt;amazing&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Stylesheet enthusiasts on iOS now have some options. &lt;a href=&quot;http://www.pixate.com&quot;&gt;Pixate&lt;/a&gt; is a commercial framework that uses CSS to style applications. &lt;a href=&quot;https://github.com/tombenner/nui&quot;&gt;NUI&lt;/a&gt;, an open-source project by &lt;a href=&quot;https://github.com/tombenner&quot;&gt;Tom Benner&lt;/a&gt;, does much the same with a CSS/SCSS-like language. Another open source project along the same lines is &lt;a href=&quot;https://github.com/robertwijas/UISS&quot;&gt;UISS&lt;/a&gt; by &lt;a href=&quot;https://github.com/robertwijas&quot;&gt;Robert Wijas&lt;/a&gt;, which allows &lt;code&gt;UIAppearance&lt;/code&gt; rules to be read from JSON.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Cocoa developers have a long history of obsessing about visual aesthetics, and have often gone to extreme ends to achieve their desired effects. Recall the &lt;a href=&quot;http://en.wikipedia.org/wiki/Delicious_Generation&quot;&gt;Delicious Generation&lt;/a&gt; of Mac developers, and applications like &lt;a href=&quot;http://discoapp.com&quot;&gt;Disco&lt;/a&gt;, which went so far as to &lt;a href=&quot;http://www.youtube.com/watch?v=8Dwi47XOqwI&quot;&gt;emit virtual smoke when burning a disc&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This spirit of dedication to making things look good is alive and well in iOS. As a community and as an ecosystem, we have relentlessly pushed the envelope in terms of what users should expect from their apps. And though this makes our jobs more challenging, it makes the experience of developing for iOS all the more enjoyable.&lt;/p&gt;

&lt;p&gt;Settle for nothing less than the whole package.
Make your apps beautiful from interface to implementation.&lt;/p&gt;
</description>
        <pubDate>Mon, 11 Mar 2013 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/uiappearance/</link>
        <guid>http://nshipster.com/uiappearance/</guid>
      </item>
    
      <item>
        <title>Back Row</title>
        <description>&lt;p&gt;For years, many have predicted the announcement of an Apple TV SDK. We all know it&amp;#39;s coming. It has to. And it will be amazing when it happens... whenever that is.&lt;/p&gt;

&lt;p&gt;Everything is in place for Apple to kick-start the next generation of television, completely leap-frogging the current, pathetic crop of &amp;quot;smart TVs&amp;quot; like the iPhone did with its &amp;quot;smart phone&amp;quot; predecessors. All they need to do is open up the ecosystem.&lt;/p&gt;

&lt;p&gt;But rather than simply wait for the future, we can take matters into our own hands, with &lt;a href=&quot;https://github.com/nygard/class-dump&quot;&gt;class-dump&lt;/a&gt; and some reverse-engineering chutzpah.&lt;/p&gt;

&lt;p&gt;Voila! &lt;a href=&quot;http://appletv.ericiii.net/5.2/annotated.php&quot;&gt;A class dump of the Apple TV private framework headers&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;That&amp;#39;s right: this edition of NSHipster covers a topic so obscure, &lt;em&gt;it doesn&amp;#39;t even officially exist&lt;/em&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Back Row is a private framework used in the Apple TV user experience. Its name is a reference to &lt;a href=&quot;http://en.wikipedia.org/wiki/Front_Row_(software)&quot;&gt;Front Row&lt;/a&gt;, an application included in Mac OS X 10.4 – 10.6 that paired with the Apple Remote to transform the Mac into a couch-friendly media center. &lt;/p&gt;

&lt;p&gt;The original Apple TV could be described as a &amp;quot;short Mac Mini&amp;quot;, which ran a modified version of Front Row on a stripped-down build of Mac OS X. It was little more than an iTunes remote, streaming content from a shared iTunes library on a separate computer.&lt;/p&gt;

&lt;p&gt;The second generation of the device took a smaller form factor, shifting its focus from media storage and management to on-demand streaming. The second generation Apple TV user interface reflected this in both its design and implementation. BackRow was ported from OS X to iOS, as it transcended its original role coordinating iTunes libraries to become an extensible platform for streaming media appliances.&lt;/p&gt;

&lt;h2&gt;Back Row &amp;amp; UIKit&lt;/h2&gt;

&lt;p&gt;Back Row (name prefix: &lt;code&gt;BR&lt;/code&gt;) bears a striking resemblance to UIKit, with many of the familiar metaphors and conventions of iOS development. &lt;/p&gt;

&lt;p&gt;Here&amp;#39;s a brief list of some Back Row classes &amp;amp; protocols and their UIKit equivalents:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Back Row&lt;/th&gt;
      &lt;th&gt;UIKit&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;&amp;lt;BRResponder&amp;gt;&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;&amp;lt;UIResponder&amp;gt;&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;&amp;lt;BRAppliance&amp;gt;&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;&amp;lt;UIApplication&amp;gt;&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;BRController&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;UIViewController&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;BRMenuController&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;UITableViewController&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;BRControllerStack&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;UINavigationController&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;BRGridView&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;UICollectionView&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;BRListView&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;UITableView&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2&gt;Apple TV Appliance Structure&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/backrow-home-screen.jpg&quot; alt=&quot;Apple TV Home Screen&quot;&gt;&lt;/p&gt;

&lt;p&gt;In the current Apple TV interface, the home screen contains a grid of rectangular icons, similar to the home screen on iOS. Each icon corresponds to an &lt;em&gt;appliance&lt;/em&gt;. &lt;/p&gt;

&lt;p&gt;Why an appliance and not an application? An appliance is more limited in what it can do as compared to an application. On iPhone or iPad, applications range from social media clients and photo tools to games and musical instruments. Whereas on Apple TV, an appliance consists of a series of remote-friendly menus, lists, and grids, which ultimately lead to media playback of some form. When it comes to appliances, (audio / video) content is king.&lt;/p&gt;

&lt;p&gt;When an appliance launches, it displays a list of &lt;code&gt;BRApplianceCategory&lt;/code&gt; items. Each category has its own name, identifier, and preferred ordering. When a category is selected, the appliance calls &lt;code&gt;- controllerForIdentifier:args:&lt;/code&gt;, which returns a &lt;code&gt;BRController&lt;/code&gt; object.&lt;/p&gt;

&lt;p&gt;An appliance also has an optional &lt;code&gt;topShelfController&lt;/code&gt;, which is what displays at the top of the home screen when the app is highlighted.&lt;/p&gt;

&lt;p&gt;Pushing and popping controllers is managed by a shared &lt;code&gt;BRControllerStack&lt;/code&gt;. When a controller is selected with in a list, it is pushed onto the stack. When the user presses the Menu button, the stack is popped.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/backrow-youtube.jpg&quot; alt=&quot;Apple TV YouTube&quot;&gt;&lt;/p&gt;

&lt;p&gt;A typical controller consists of a menu list on the right, with some kind of complimentary view on the left. &lt;/p&gt;

&lt;p&gt;On top-level controllers, this sometimes takes the form of a &lt;code&gt;BRMarqueeStack&lt;/code&gt;, which animates a Cover-Flow-style sequence of preview images for each of the controllers.&lt;/p&gt;

&lt;p&gt;For controllers listing media that can be played, the complimentary view usually shows a preview image, along with meta data in a &lt;code&gt;BRMetadataControl&lt;/code&gt;, such as runtime, date created, and other relevant information.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/backrow-movie.jpg&quot; alt=&quot;Apple TV Movie&quot;&gt;&lt;/p&gt;

&lt;p&gt;iTunes store controllers also use a horizontally-stacked layout, with media information at the top, with related titles listed below.&lt;/p&gt;

&lt;h2&gt;Points of Interest&lt;/h2&gt;

&lt;p&gt;Diving into the class dump of the Apple TV frameworks reveals a treasure trove of interesting tidbits. With only undocumented header files to go by, there&amp;#39;s still a lot of mystery to what all&amp;#39;s in these private frameworks, or how they fit together. However a thoughtful analysis of class and method names offers some workable clues into their inter-workings.&lt;/p&gt;

&lt;p&gt;Here are some of the more interesting parts of the Back Row framework headers (again, all of this is complete speculation):&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://appletv.ericiii.net/5.2/protocol_b_r_image_proxy-p.php&quot;&gt;&lt;code&gt;BRURLImageProxy&lt;/code&gt;&lt;/a&gt;: A protocol that encapsulates the process of loading and displaying images at various dimensions.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://appletv.ericiii.net/5.2/interface_b_r_keyboard.php&quot;&gt;&lt;code&gt;BRKeyboard&lt;/code&gt;&lt;/a&gt;: It&amp;#39;s always fascinating to see how Apple architects controls. Keyboards populate and manage interactions with the grid view of character and action keys, and are divided into classes for Roman and Japanese scripts.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://appletv.ericiii.net/5.2/interface_b_r_state_machine.php&quot;&gt;&lt;code&gt;BRStateMachine&lt;/code&gt;&lt;/a&gt;: No other Apple frameworks expose a class for state machines. &lt;a href=&quot;http://appletv.ericiii.net/5.2/interface_l_t_a_v_lease_agent.php&quot;&gt;&lt;code&gt;LATVLeaseAgent&lt;/code&gt;&lt;/a&gt; is a subclass in the &lt;code&gt;AppleTV&lt;/code&gt; framework that appears to negotiate the terms of iTunes movie rentals.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://appletv.ericiii.net/5.2/interface_b_r_mapping_dictionary.php&quot;&gt;&lt;code&gt;BRMappingDictionary&lt;/code&gt;&lt;/a&gt;: A new and useful-looking collection class that functions as an &lt;code&gt;NSMutableDictionary&lt;/code&gt;, but also allows for an &lt;code&gt;NSValueTransformer&lt;/code&gt; to be set for each key (&lt;code&gt;-transformedValueForKey:forObject:&lt;/code&gt; in addition to &lt;code&gt;-valueForKey:&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://appletv.ericiii.net/5.2/interface_b_r_merchant.php&quot;&gt;&lt;code&gt;BRMerchant&lt;/code&gt;&lt;/a&gt;: What you might expect in terms of a class representing a store client, with some &lt;a href=&quot;http://appletv.ericiii.net/5.2/interface_b_r_merchant.php#pub-static-methods&quot;&gt;interesting class methods&lt;/a&gt;. &lt;code&gt;itms&lt;/code&gt; is in reference to the iTunes Music Store, but what&amp;#39;s &lt;code&gt;sedona&lt;/code&gt; and &lt;code&gt;flagstaff&lt;/code&gt;? They&amp;#39;re probably codewords for streaming services that fall under the umbrella of the iTunes store.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://appletv.ericiii.net/5.2/protocol_b_r_control_factory-p.php&quot;&gt;&lt;code&gt;&amp;lt;BRControlFactory&amp;gt;&lt;/code&gt;&lt;/a&gt; &lt;a href=&quot;http://appletv.ericiii.net/5.2/protocol_b_r_metadata_populator-p.php&quot;&gt;&lt;code&gt;&amp;lt;BRMetadataPopulator&amp;gt;&lt;/code&gt;&lt;/a&gt; &amp;amp; &lt;a href=&quot;http://appletv.ericiii.net/5.2/interface_b_r_control_mediator.php&quot;&gt;&lt;code&gt;BRControlMediator&lt;/code&gt;&lt;/a&gt;: Factories, Populators, and Mediators are not commonly seen design patterns in Apple frameworks, although they are described in the &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html&quot;&gt;Cocoa Fundamentals Guide&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Building Your Own Apple TV App&lt;/h2&gt;

&lt;p&gt;In the immortal words of Jeff Goldblum: &lt;a href=&quot;http://www.youtube.com/watch?v=SkWeMvrNiOM&quot;&gt;&amp;quot;Life finds a way&amp;quot;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Undeterred by the litigious shadow of Apple Inc., nor the undocumented wilds of a private API, a cadre of jail-breaking homesteaders have cracked the nut on Apple TV development with promising results.&lt;/p&gt;

&lt;p&gt;One of the most polished among them is &lt;a href=&quot;https://github.com/alloy/UitzendingGemist-ATV2&quot;&gt;UitzendingGemist&lt;/a&gt; led by none other than &lt;a href=&quot;https://github.com/alloy&quot;&gt;Eloy Durán&lt;/a&gt; of &lt;a href=&quot;https://github.com/CocoaPods&quot;&gt;CocoaPods&lt;/a&gt; fame, along with &lt;a href=&quot;https://github.com/lechium&quot;&gt;Kevin Bradley&lt;/a&gt; and &lt;a href=&quot;https://github.com/mgile&quot;&gt;Michael Gile&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;As you can see from &lt;a href=&quot;http://cl.ly/2p2V0W3W0n3m&quot;&gt;this video of an early version&lt;/a&gt;, you can run your very own applications on a jail-broken Apple TV (OS 5.0.1 or compatible). The code is relatively straightforward, fetching a catalog of media files from the Dutch public broadcasting site &lt;a href=&quot;http://www.uitzendinggemist.nl&quot;&gt;UitzendingGemist.nl&lt;/a&gt;, and playing them on demand.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;It&amp;#39;s hard to say what it will take for Apple to open up the Apple TV ecosystem. Is it a matter of getting the APIs documented and ready for public use? Is there a process underway to refactor Back Row into UIKit? Or is everything pretty much ready, and it&amp;#39;s just a matter of other business pieces falling into place?&lt;/p&gt;

&lt;p&gt;Only time will tell.&lt;/p&gt;

&lt;p&gt;In the meantime, you can get a head-start on what will almost certainly be a gold-rush on the scale of the first generation of iPhone apps.&lt;/p&gt;
</description>
        <pubDate>Mon, 04 Mar 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/backrow/</link>
        <guid>http://nshipster.com/backrow/</guid>
      </item>
    
      <item>
        <title>NSAssertionHandler</title>
        <description>&lt;p&gt;&amp;quot;When at first you don&amp;#39;t succeed, use an object-oriented injection point to override default exception handling.&amp;quot; This is the sort of advice you would have learned at mother&amp;#39;s knee if you were raised by &lt;code&gt;NSAssertionHandler&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Programming incorporates numerous disciplines of human reasoning, from high-level discourse and semantics—the &amp;quot;story&amp;quot; we tell each other to explain how a system works—to the mathematical and philosophical machinery that underpins everything. &lt;/p&gt;

&lt;p&gt;Assertions are a concept borrowed from classical logic. In logic, assertions are statements about propositions within a proof. In programming, assertions denote assumptions the programmer has made about the application at the place where they are declared. &lt;/p&gt;

&lt;p&gt;When used in the capacity of preconditions and postconditions, which describe expectations about the state of the code at the beginning and end of execution of a method or function, assertions form a &lt;a href=&quot;http://en.wikipedia.org/wiki/Design_by_contract&quot;&gt;contract&lt;/a&gt;. Assertions can also be used to enforce conditions at run-time, in order to prevent execution when certain preconditions fail.&lt;/p&gt;

&lt;p&gt;Assertions are similar to &lt;a href=&quot;http://en.wikipedia.org/wiki/Unit_testing&quot;&gt;unit testing&lt;/a&gt; in that they define expectations about the way code will execute. Unlike unit tests, assertions exist inside the program itself, and are thereby constrained to the context of the program. Because unit tests are fully independent, they have a much greater capacity to isolate and test certain behaviors, using tools like methods stubs and mock objects. Developers should use assertions and unit tests in combination and in reasonable quantity to test and define behavior in an application.&lt;/p&gt;

&lt;h2&gt;Foundation Assertion Handling&lt;/h2&gt;

&lt;p&gt;Objective-C combines C-style assertion macros with an object-oriented approach to intercepting and handling assertion failures. Namely, &lt;code&gt;NSAssertionHandler&lt;/code&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Each thread has its own assertion handler, which is an object of class &lt;code&gt;NSAssertionHandler&lt;/code&gt;. When invoked, an assertion handler prints an error message that includes the method and class names (or the function name). It then raises an &lt;code&gt;NSInternalInconsistencyException&lt;/code&gt; exception.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Foundation &lt;a href=&quot;https://gist.github.com/mattt/5031388#file-nsassertionhandler-m-L50-L56&quot;&gt;defines&lt;/a&gt; two pairs of assertion macros:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSAssert&lt;/code&gt; / &lt;code&gt;NSCAssert&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSParameterAssert&lt;/code&gt; / &lt;code&gt;NSCParameterAssert&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Foundation makes two distinctions in their assertion handler APIs that are both semantic and functional. &lt;/p&gt;

&lt;p&gt;The first distinction is between a general assertion (&lt;code&gt;NSAssert&lt;/code&gt;) and a parameter assertion (&lt;code&gt;NSParameterAssert&lt;/code&gt;). As a rule of thumb, methods / functions should use &lt;code&gt;NSParameterAssert&lt;/code&gt; / &lt;code&gt;NSCParameterAssert&lt;/code&gt; statements at the top of methods to enforce any preconditions about the input values; in all other cases, use &lt;code&gt;NSAssert&lt;/code&gt; / &lt;code&gt;NSCAssert&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The second is the difference between C and Objective-C assertions: &lt;code&gt;NSAssert&lt;/code&gt; should only be used in an Objective-C context (i.e. method implementations), whereas &lt;code&gt;NSCAssert&lt;/code&gt; should only be used in a C context (i.e. functions). &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;When a condition in &lt;code&gt;NSAssert&lt;/code&gt; or &lt;code&gt;NSParameterAssert&lt;/code&gt; fails, &lt;code&gt;-handleFailureInMethod:object:file:lineNumber:description:&lt;/code&gt; is called in the assertion handler. &lt;/li&gt;
&lt;li&gt;When a condition in &lt;code&gt;NSCAssert&lt;/code&gt; or &lt;code&gt;NSCParameterAssert&lt;/code&gt; fails, &lt;code&gt;-handleFailureInFunction:file:lineNumber:description:&lt;/code&gt; is called in the assertion handler.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Additionally, there are variations of &lt;code&gt;NSAssert&lt;/code&gt; / &lt;code&gt;NSCAssert&lt;/code&gt;, from &lt;code&gt;NSAssert1&lt;/code&gt; ... &lt;code&gt;NSAssert5&lt;/code&gt;, which take their respective number of arguments to use in a &lt;code&gt;printf&lt;/code&gt;-style format string.&lt;/p&gt;

&lt;h2&gt;Using NSAssertionHandler&lt;/h2&gt;

&lt;p&gt;It&amp;#39;s important to note that as of Xcode 4.2, &lt;a href=&quot;http://stackoverflow.com/questions/6445222/ns-block-assertions-in-objective-c&quot;&gt;assertions are turned off by default for release builds&lt;/a&gt;, which is accomplished by defining the &lt;code&gt;NS_BLOCK_ASSERTIONS&lt;/code&gt; macro. That is to say, when compiled for release, any calls to &lt;code&gt;NSAssert&lt;/code&gt; &amp;amp; co. are effectively removed.&lt;/p&gt;

&lt;p&gt;And while Foundation assertion macros are extremely useful in their own right—even when just used in development—the fun doesn&amp;#39;t have to stop there. &lt;code&gt;NSAssertionHandler&lt;/code&gt; provides a way to gracefully handle assertion failures in a way that preserves valuable real-world usage information.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;That said, many seasoned Objective-C developers caution against actually using &lt;code&gt;NSAssertionHandler&lt;/code&gt; in production applications. Foundation assertion handlers are something to understand and appreciate from a safe distance. &lt;strong&gt;Proceed with caution if you decide to use this in a shipping application.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;NSAssertionHandler&lt;/code&gt; is a straightforward class, with two methods to implement in your subclass: &lt;code&gt;-handleFailureInMethod:...&lt;/code&gt; (called on a failed &lt;code&gt;NSAssert&lt;/code&gt; / &lt;code&gt;NSParameterAssert&lt;/code&gt;) and &lt;code&gt;-handleFailureInFunction:...&lt;/code&gt; (called on a failed &lt;code&gt;NSCAssert&lt;/code&gt; / &lt;code&gt;NSCParameterAssert&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;&lt;code&gt;LoggingAssertionHandler&lt;/code&gt; simply logs out the assertion failures, but those failures could also be logged to an external web service to be aggregated and analyzed, for example.&lt;/p&gt;

&lt;h3&gt;LoggingAssertionHandler.h&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoggingAssertionHandler&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;NSAssertionHandler&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;LoggingAssertionHandler.m&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoggingAssertionHandler&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;handleFailureInMethod:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;SEL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;selector&lt;/span&gt; 
                       &lt;span class=&quot;nf&quot;&gt;object:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;object&lt;/span&gt; 
                         &lt;span class=&quot;nf&quot;&gt;file:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;fileName&lt;/span&gt; 
                   &lt;span class=&quot;nf&quot;&gt;lineNumber:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;line&lt;/span&gt; 
                  &lt;span class=&quot;nf&quot;&gt;description:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;NSAssert Failure: Method %@ for object %@ in %@#%i&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSStringFromSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;handleFailureInFunction:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;functionName&lt;/span&gt; 
                           &lt;span class=&quot;nf&quot;&gt;file:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;fileName&lt;/span&gt; 
                     &lt;span class=&quot;nf&quot;&gt;lineNumber:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;line&lt;/span&gt; 
                    &lt;span class=&quot;nf&quot;&gt;description:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;NSCAssert Failure: Function (%@) in %@#%i&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;functionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Each thread has the option of specifying an assertion handler. To have the &lt;code&gt;NSAssertionHandler&lt;/code&gt; subclass start handling failed assertions, set it as the value for the &lt;code&gt;NSAssertionHandlerKey&lt;/code&gt; key in the thread&amp;#39;s &lt;code&gt;threadDictionary&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;In most cases, it will make sense to set your assertion handler on the current thread inside &lt;code&gt;-application:
didFinishLaunchingWithOptions:&lt;/code&gt;.&lt;/p&gt;

&lt;h3&gt;AppDelegate.m&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt; 
&lt;span class=&quot;nl&quot;&gt;didFinishLaunchingWithOptions:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;launchOptions&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSAssertionHandler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertionHandler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LoggingAssertionHandler&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSThread&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threadDictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertionHandler&lt;/span&gt; 
                                                 &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSAssertionHandlerKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSAssertionHandler&lt;/code&gt; reminds us of the best practices around articulating our expectations as programmers through assert statements.&lt;/p&gt;

&lt;p&gt;But if we look deeper into &lt;code&gt;NSAssertionHandler&lt;/code&gt;—and indeed, into our own hearts, there are lessons to be learned about our capacity for kindness and compassion; about our ability to forgive others, and to recover from our own missteps. We can&amp;#39;t be right all of the time. We all make mistakes. By accepting limitations in ourselves and others, only then are we able to grow as individuals.&lt;/p&gt;

&lt;p&gt;Or whatever.&lt;/p&gt;
</description>
        <pubDate>Mon, 25 Feb 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nsassertionhandler/</link>
        <guid>http://nshipster.com/nsassertionhandler/</guid>
      </item>
    
      <item>
        <title>ReactiveCocoa</title>
        <description>&lt;p&gt;Languages are living works. They are nudged and challenged and bastardized and mashed-up in a perpetual cycle of undirected and rapid evolution. Technologies evolve, requirements change, corporate stewards and open source community come and go; obscure dialects are vaulted to prominence on the shoulders of exciting new frameworks, and thrust into a surprising new context after a long period of dormancy.&lt;/p&gt;

&lt;p&gt;Objective-C has a remarkable history spanning four acts in as many decades:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;In its 1&lt;sup&gt;st&lt;/sup&gt; act&lt;/strong&gt;, Objective-C was adopted as the language of NeXT, powering &lt;a href=&quot;http://en.wikipedia.org/wiki/NeXTSTEP&quot;&gt;NeXTSTEP&lt;/a&gt; and &lt;a href=&quot;http://en.wikipedia.org/wiki/Web_server#History&quot;&gt;the world&amp;#39;s first web server&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;In its 2&lt;sup&gt;nd&lt;/sup&gt; act&lt;/strong&gt;, Objective-C positioned itself in the heart Apple&amp;#39;s technology stack (after a prolonged turf war with Java) with Apple&amp;#39;s acquisition of NeXT.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;In its 3&lt;sup&gt;rd&lt;/sup&gt; act&lt;/strong&gt;, Objective-C rose to unprecedented significance with the release of iOS, making it the most important language of mobile computing.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Objective-C&amp;#39;s 4&lt;sup&gt;th&lt;/sup&gt; act takes us to the present day&lt;/strong&gt;, with an influx of new iOS developers from the Ruby, Python, and Javascript communities sparking a revolution in open source participation. For the first time, Objective-C is being directly shaped and guided by the contributions of individuals outside of Apple.&lt;/p&gt;

&lt;p&gt;Breaking from a tradition of covering Apple APIs exclusively, this edition of NSHipster will look at an open source project that exemplifies this brave new era for Objective-C: &lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa&quot;&gt;ReactiveCocoa&lt;/a&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;blockquote&gt;
&lt;p&gt;For a complete look at ReactiveCocoa, refer to the project&amp;#39;s &lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/README.md&quot;&gt;README&lt;/a&gt;, &lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/Documentation/FrameworkOverview.md&quot;&gt;Framework Overview&lt;/a&gt; and &lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/Documentation/DesignGuidelines.md&quot;&gt;Design Guidelines&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa&quot;&gt;ReactiveCocoa&lt;/a&gt; is an open source library that brings Functional Reactive Programming paradigm to Objective-C. It was created by &lt;a href=&quot;https://github.com/joshaber&quot;&gt;Josh Abernathy&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://github.com/jspahrsummers&quot;&gt;Justin Spahr-Summers&lt;/a&gt; in the development of &lt;a href=&quot;http://mac.github.com&quot;&gt;GitHub for Mac&lt;/a&gt;. Last week, ReactiveCocoa reached a major milestone with its &lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/tree/v1.0.0&quot;&gt;1.0 release&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Functional_reactive_programming&quot;&gt;Functional Reactive Programming&lt;/a&gt; (FRP) is a way of thinking about software in terms of transforming inputs to produce output continuously over time. &lt;a href=&quot;http://blog.maybeapps.com/post/42894317939/input-and-output&quot;&gt;Josh Abernathy frames the paradigm thusly&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Programs take input and produce output. The output is the result of doing something with the input. Input, transform, output, done.&lt;/p&gt;

&lt;p&gt;The input is all the sources of action for your app. It&amp;#39;s taps. It&amp;#39;s keyboard events. It&amp;#39;s timer triggers, GPS events, and web service responses. These things are all inputs. They all feed into the app, and the app combines them all in some way to produce a result: the output.&lt;/p&gt;

&lt;p&gt;The output is often a change in the app&amp;#39;s UI. A switch is toggled or a list gets a new item. Or it could be more than that. It could be a new file on the device&amp;#39;s disk, or it could be an API request. These things are the outputs of the app.&lt;/p&gt;

&lt;p&gt;But unlike the classic input/output design, this input and output happens more than once. It&amp;#39;s not just a single input → work → output—the cycle continues while the app is open. The app is always consuming inputs and producing outputs based on them.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;To illustrate the difference between the conventional, imperative paradigm of Objective-C programming versus a functional reactive approach, consider the common example of validating a signup form:&lt;/p&gt;

&lt;h3&gt;Conventional&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isFormValid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;usernameField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emailField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqual&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordVerificationField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark - UITextFieldDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;textField:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITextField&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;textField&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;shouldChangeCharactersInRange:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;range&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;replacementString:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;createButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isFormValid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the conventional example, logic is fragmented across different methods in the view controller, with calls to &lt;code&gt;self.createButton.enabled = [self isFormValid];&lt;/code&gt; interspersed throughout delegate methods and view lifecycle callbacks.&lt;/p&gt;

&lt;p&gt;Compare this with equivalent code using ReactiveCocoa:&lt;/p&gt;

&lt;h3&gt;ReactiveCocoa&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;RACSignal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formValid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RACSignal&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;combineLatest:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rac_textSignal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emailField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rac_textSignal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rac_textSignal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordVerificationField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rac_textSignal&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;reduce:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordVerification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;password&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;password&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqual&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordVerification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;RAC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;createButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enabled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;formValid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here, all of the logic for validating form input is contained in a single chain of logic and responsibility. Each time any of the text fields is updated, their inputs are reduced into a single boolean value, which automatically enables / disables the create button.&lt;/p&gt;

&lt;h2&gt;Overview&lt;/h2&gt;

&lt;p&gt;ReactiveCocoa is comprised of two major components: &lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/Documentation/FrameworkOverview.md#signals&quot;&gt;signals&lt;/a&gt; (&lt;code&gt;RACSignal&lt;/code&gt;) and &lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/Documentation/FrameworkOverview.md#sequences&quot;&gt;sequences&lt;/a&gt; (&lt;code&gt;RACSequence&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;Both signals and sequences are kinds of &lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/Documentation/FrameworkOverview.md#streams&quot;&gt;streams&lt;/a&gt;, sharing many of the same operators. ReactiveCocoa has done well to abstract a wide scope of functionality into a semantically dense, consistent design: signals are a &lt;em&gt;push&lt;/em&gt;-driven stream, and sequences are a &lt;em&gt;pull&lt;/em&gt;-driven stream.&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;RACSignal&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Handling Asynchronous Or Event-driven Data Sources&lt;/strong&gt;: Much of Cocoa programming is focused on reacting to user events or changes in application state.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Chaining Dependent Operations&lt;/strong&gt;: Dependencies are most often found in network requests, where a previous request to the server needs to complete before the next one can be constructed.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Parallelizing Independent Work&lt;/strong&gt;: Working with independent data sets in parallel and then combining them into a final result is non-trivial in Cocoa, and often involves a lot of synchronization.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Signals send three different types of events to their subscribers:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The &lt;strong&gt;next&lt;/strong&gt; event provides a new value from the stream. Unlike Cocoa collections, it is
completely valid for a signal to include &lt;code&gt;nil&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;The &lt;strong&gt;error&lt;/strong&gt; event indicates that an error occurred before the signal could
finish. The event may include an &lt;code&gt;NSError&lt;/code&gt; object that indicates what went
wrong. Errors must be handled specially – they are not included in the
stream&amp;#39;s values.&lt;/li&gt;
&lt;li&gt;The &lt;strong&gt;completed&lt;/strong&gt; event indicates that the signal finished successfully, and
that no more values will be added to the stream. Completion must be handled
specially – it is not included in the stream of values.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The lifetime of a signal consists of any number of &lt;code&gt;next&lt;/code&gt; events, followed by
one &lt;code&gt;error&lt;/code&gt; or &lt;code&gt;completed&lt;/code&gt; event (but not both).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;&lt;code&gt;RACSequence&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Simplifying Collection Transformations&lt;/strong&gt;: Higher-order functions like &lt;code&gt;map&lt;/code&gt;, &lt;code&gt;filter&lt;/code&gt;, &lt;code&gt;fold/reduce&lt;/code&gt; are sorely missing from &lt;code&gt;Foundation&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sequences are a kind of collection, similar in purpose to &lt;code&gt;NSArray&lt;/code&gt;. Unlike
an array, the values in a sequence are evaluated &lt;em&gt;lazily&lt;/em&gt; (i.e., only when they
are needed) by default, potentially improving performance if only part of
a sequence is used. Just like Cocoa collections, sequences cannot contain &lt;code&gt;nil&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;RACSequence&lt;/code&gt; allows any Cocoa collection to be manipulated in a uniform and declarative way.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;RACSequence&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;normalizedLongWords&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rac_sequence&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;filter:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;map:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lowercaseString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Precedents in Cocoa&lt;/h2&gt;

&lt;p&gt;Capturing and responding to changes has a long tradition in Cocoa, and ReactiveCocoa is a conceptual and functional extension of that. It is instructive to contrast RAC with those Cocoa technologies:&lt;/p&gt;

&lt;h3&gt;RAC vs. KVO&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html&quot;&gt;Key-Value Observing&lt;/a&gt; is at the heart of all magic in Cocoa—indeed, it is used extensively by ReactiveCocoa to react to property changes. However, KVO is neither pleasant nor easy to use: its API is overwrought with unused parameters and sorely lacking a blocks-based interface.&lt;/p&gt;

&lt;h3&gt;RAC vs. Bindings&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaBindings/CocoaBindings.html&quot;&gt;Bindings&lt;/a&gt; are magic—voodoo, really.&lt;/p&gt;

&lt;p&gt;Although essential to managing the complexity of a Mac OS X application, Bindings&amp;#39; cultural relevance has waned for years, as the focus has shifted to iOS and UIKit, which notably lacks support. Bindings replace a lot of boilerplate glue code and allow programming to be done in Interface Builder, but they&amp;#39;re severely limited and &lt;em&gt;impossible&lt;/em&gt; to debug. RAC offers a clear, understandable, and extensible code-based API that works in iOS and is apt to replace all but the most trivial uses of bindings in your OS X application.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Objective-C was built from Smalltalk&amp;#39;s ideas on top of C&amp;#39;s metal, but its cultural imports go far beyond its original pedigree.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;@protocol&lt;/code&gt; was a rejection of C++&amp;#39;s multiple inheritance, favoring an abstract data type pattern comparable to a Java &lt;code&gt;Interface&lt;/code&gt;. Objective-C 2.0 introduced &lt;code&gt;@property / @synthesize&lt;/code&gt;, a contemporary of C#&amp;#39;s &lt;code&gt;get; set;&lt;/code&gt; shorthand for getter and setter methods (as well as dot syntax, which is still a point of contention for NeXTSTEP hard-liners). Blocks injected some functional programming flavor to the language, which paired nicely with Grand Central Dispatch--a queue-based concurrency API almost certainly influenced by Fortran / C / C++ standard &lt;a href=&quot;http://en.wikipedia.org/wiki/OpenMP&quot;&gt;OpenMP&lt;/a&gt;. Subscripting and object literals, a standard feature in scripting languages like Ruby and Javascript, now finally brought to Objective-C thanks to a Clang language extension.&lt;/p&gt;

&lt;p&gt;ReactiveCocoa brings a healthy dose of functional and reactive programming influence to Objective-C, and was itself influenced by C#&amp;#39;s &lt;a href=&quot;http://msdn.microsoft.com/en-us/data/gg577609.aspx&quot;&gt;Rx library&lt;/a&gt;, &lt;a href=&quot;http://en.wikipedia.org/wiki/Clojure&quot;&gt;Clojure&lt;/a&gt;, and &lt;a href=&quot;http://en.wikipedia.org/wiki/Elm_(programming_language)&quot;&gt;Elm&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Good ideas are contagious. ReactiveCocoa is a reminder that good ideas can come from unlikely places, and that a fresh perspective can make all of the difference with familiar problems.&lt;/p&gt;
</description>
        <pubDate>Mon, 18 Feb 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/reactivecocoa/</link>
        <guid>http://nshipster.com/reactivecocoa/</guid>
      </item>
    
      <item>
        <title>NSURLCache</title>
        <description>&lt;p&gt;&lt;code&gt;NSURLCache&lt;/code&gt; provides a composite in-memory and on-disk caching mechanism for URL requests to your application. As part of Foundation&amp;#39;s &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i&quot;&gt;URL Loading System&lt;/a&gt;, any request loaded through &lt;code&gt;NSURLConnection&lt;/code&gt; will be handled by &lt;code&gt;NSURLCache&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Network caching reduces the number of requests that need to be made to the server, and improve the experience of using an application offline or under slow network conditions.&lt;/p&gt;

&lt;p&gt;When a request has finished loading its response from the server, a cached response will be saved locally. The next time the same request is made, the locally-cached response will be returned immediately, without connecting to the server. &lt;code&gt;NSURLCache&lt;/code&gt; returns the cached response &lt;em&gt;automatically&lt;/em&gt; and &lt;em&gt;transparently&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;In order to take advantage of &lt;code&gt;NSURLCache&lt;/code&gt;, a shared URL cache must be initialized and set. This should be done in &lt;code&gt;-application:didFinishLaunchingWithOptions:&lt;/code&gt; on iOS, or  &lt;code&gt;–applicationDidFinishLaunching:&lt;/code&gt; on Mac OS X:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt; 
    &lt;span class=&quot;nf&quot;&gt;didFinishLaunchingWithOptions:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;launchOptions&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSURLCache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URLCache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLCache&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithMemoryCapacity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt; 
                                                       &lt;span class=&quot;n&quot;&gt;diskCapacity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt; 
                                                           &lt;span class=&quot;n&quot;&gt;diskPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLCache&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setSharedURLCache&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URLCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Caching policies are specified in both the request (by the client) and in the response (by the server). Understanding these policies and how they relate to one another is essential to finding the optimal behavior for your application.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;NSURLRequestCachePolicy&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSURLRequest&lt;/code&gt; has a &lt;code&gt;cachePolicy&lt;/code&gt; property, which specifies the caching behavior of the request according to the following constants:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSURLRequestUseProtocolCachePolicy&lt;/code&gt;: Caching logic defined in the protocol implementation is used for a particular URL load request. This is the default policy.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSURLRequestReloadIgnoringLocalCacheData&lt;/code&gt;: Data should be loaded from the originating source. No existing cache data should be used.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSURLRequestReloadIgnoringLocalAndRemoteCacheData&lt;/code&gt;: Not only should the local cache data be ignored, but proxies and other intermediates should be instructed to disregard their caches so far as the protocol allows.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSURLRequestReturnCacheDataElseLoad&lt;/code&gt;: Existing cached data should be used, regardless of its age or expiration date. If there is no existing data in the cache corresponding to the request, the data is loaded from the originating source.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSURLRequestReturnCacheDataDontLoad&lt;/code&gt;: Existing cache data should be used, regardless of its age or expiration date. If there is no existing data in the cache corresponding to the request, no attempt is made to load the data from the originating source, and the load is considered to have failed, (i.e. &amp;quot;offline&amp;quot; mode).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSURLRequestReloadRevalidatingCacheData&lt;/code&gt;: Existing cache data may be used provided the origin source confirms its validity, otherwise the URL is loaded from the origin source.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It may not surprise you that these values are poorly understood and often confused with one another. &lt;/p&gt;

&lt;p&gt;Adding to the confusion is the fact that &lt;code&gt;NSURLRequestReloadIgnoringLocalAndRemoteCacheData&lt;/code&gt; and &lt;code&gt;NSURLRequestReloadRevalidatingCacheData&lt;/code&gt; &lt;a href=&quot;https://gist.github.com/mattt/4753073#file-nsurlrequest-h-L95-L108&quot;&gt;&lt;em&gt;aren&amp;#39;t even implemented&lt;/em&gt;&lt;/a&gt;! (&lt;a href=&quot;http://openradar.appspot.com/radar?id=1755401&quot;&gt;Link to Radar&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;So here&amp;#39;s what you &lt;em&gt;actually&lt;/em&gt; need to know about &lt;code&gt;NSURLRequestCachePolicy&lt;/code&gt;:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Constant&lt;/th&gt;
      &lt;th&gt;Meaning&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;UseProtocolCachePolicy&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;Default behavior&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;ReloadIgnoringLocalCacheData&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;Don&#39;t use the cache&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;del&gt;&lt;tt&gt;ReloadIgnoringLocalAndRemoteCacheData&lt;/tt&gt;&lt;/del&gt;&lt;/td&gt;
      &lt;td&gt;&lt;del&gt;Seriously, don&#39;t use the cache&lt;/del&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;ReturnCacheDataElseLoad&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;Use the cache (no matter how out of date), or if no cached response exists, load from the network&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;ReturnCacheDataDontLoad&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;Offline mode: use the cache (no matter how out of date), but &lt;em&gt;don&#39;t&lt;/em&gt; load from the network&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;del&gt;&lt;tt&gt;ReloadRevalidatingCacheData&lt;/tt&gt;&lt;/del&gt;&lt;/td&gt;
      &lt;td&gt;&lt;del&gt;Validate cache against server before using&lt;/del&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2&gt;HTTP Cache Semantics&lt;/h2&gt;

&lt;p&gt;Because &lt;code&gt;NSURLConnection&lt;/code&gt; is designed to support multiple protocols—including both &lt;code&gt;FTP&lt;/code&gt; and &lt;code&gt;HTTP&lt;/code&gt;/&lt;code&gt;HTTPS&lt;/code&gt;—the URL Loading System APIs specify caching in a protocol-agnostic fashion. For the purposes of this article, caching will be explained in terms of HTTP semantics.&lt;/p&gt;

&lt;p&gt;HTTP requests and responses use &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html&quot;&gt;headers&lt;/a&gt; to communicate metadata such as character encoding, MIME type, and caching directives.&lt;/p&gt;

&lt;h3&gt;Request Cache Headers&lt;/h3&gt;

&lt;p&gt;By default, &lt;code&gt;NSURLRequest&lt;/code&gt; will use the current time to determine whether a cached response should be returned. For more precise cache control, the following headers can be specified:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;If-Modified-Since&lt;/code&gt; - This request header corresponds to the &lt;code&gt;Last-Modified&lt;/code&gt; response header. Set the value of this to the &lt;code&gt;Last-Modified&lt;/code&gt; value received from the last request to the same endpoint.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;If-None-Match&lt;/code&gt; - This request header corresponds to the &lt;code&gt;Etag&lt;/code&gt; response header. Use the &lt;code&gt;Etag&lt;/code&gt; value received previously for the last request to that endpoint.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Response Cache Headers&lt;/h3&gt;

&lt;p&gt;An &lt;code&gt;NSHTTPURLResponse&lt;/code&gt; contains a set of HTTP headers, which can include the following directives for how that response should be cached:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Cache-Control&lt;/code&gt; - This header must be present in the response from the server to enable HTTP caching by a client. The value of this header may include information like its &lt;code&gt;max-age&lt;/code&gt; (how long to cache a response), and whether the response may be cached with &lt;code&gt;public&lt;/code&gt; or &lt;code&gt;private&lt;/code&gt; access, or &lt;code&gt;no-cache&lt;/code&gt; (not at all). See the &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9&quot;&gt;&lt;code&gt;Cache-Control&lt;/code&gt; section of RFC 2616&lt;/a&gt; for full details.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In addition to &lt;code&gt;Cache-Control&lt;/code&gt;, a server may send additional headers that can be used to conditionally request information as needed (as mentioned in the previous section):&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Last-Modified&lt;/code&gt; - The value of this header corresponds to the date and time when the requested resource was last changed. For example, if a client requests a timeline of recent photos, &lt;code&gt;/photos/timeline&lt;/code&gt;, the &lt;code&gt;Last-Modified&lt;/code&gt;
value could be set to when the most recent photo was taken.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Etag&lt;/code&gt; - An abbreviation for &amp;quot;entity tag&amp;quot;, this is an identifier that represents the contents requested resource. In practice, an &lt;code&gt;Etag&lt;/code&gt; header value could be something like the &lt;a href=&quot;http://en.wikipedia.org/wiki/MD5&quot;&gt;&lt;code&gt;MD5&lt;/code&gt;&lt;/a&gt; digest of the resource properties. This is particularly useful for dynamically generated resources that may not have an obvious &lt;code&gt;Last-Modified&lt;/code&gt; value.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;&lt;code&gt;NSURLConnectionDelegate&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Once the server response has been received, the &lt;code&gt;NSURLConnection&lt;/code&gt; delegate has an opportunity to specify the cached response in &lt;code&gt;-connection:willCacheResponse:&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSCachedURLResponse&lt;/code&gt; is a class that contains both an &lt;code&gt;NSURLResponse&lt;/code&gt; with the cached &lt;code&gt;NSData&lt;/code&gt; associated with the response.&lt;/p&gt;

&lt;p&gt;In &lt;code&gt;-connection:willCacheResponse:&lt;/code&gt;, the &lt;code&gt;cachedResponse&lt;/code&gt; object has been automatically created from the result of the URL connection. Because there is no mutable counterpart to &lt;code&gt;NSCachedURLResponse&lt;/code&gt;, in order to change anything about &lt;code&gt;cachedResponse&lt;/code&gt;, a new object must be constructed, passing any modified values into &lt;code&gt;–initWithResponse:data:userInfo:storagePolicy:&lt;/code&gt;, for instance:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCachedURLResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLConnection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;connection&lt;/span&gt; 
                  &lt;span class=&quot;nf&quot;&gt;willCacheResponse:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCachedURLResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;cachedResponse&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableUserInfo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cachedResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutableCopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSMutableData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cachedResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutableCopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSURLCacheStoragePolicy&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;storagePolicy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSURLCacheStorageAllowedInMemoryOnly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCachedURLResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithResponse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cachedResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                                                    &lt;span class=&quot;nl&quot;&gt;data:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableData&lt;/span&gt;
                                                &lt;span class=&quot;nl&quot;&gt;userInfo:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableUserInfo&lt;/span&gt;
                                           &lt;span class=&quot;nl&quot;&gt;storagePolicy:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;storagePolicy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If &lt;code&gt;-connection:willCacheResponse:&lt;/code&gt; returns &lt;code&gt;nil&lt;/code&gt;, the response will not be cached.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCachedURLResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURLConnection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;connection&lt;/span&gt; 
                  &lt;span class=&quot;nf&quot;&gt;willCacheResponse:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCachedURLResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;cachedResponse&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When left unimplemented, &lt;code&gt;NSURLConnection&lt;/code&gt; will simply use the cached response that would otherwise be passed into &lt;code&gt;-connection:willCacheResponse:&lt;/code&gt;, so unless you need to change or prevent caching, this method does not need to be implemented in the delegate.&lt;/p&gt;

&lt;h2&gt;Caveats&lt;/h2&gt;

&lt;p&gt;Just like its unrelated-but-similarly-named cohort, &lt;a href=&quot;http://nshipster.com/nscache/&quot;&gt;&lt;code&gt;NSCache&lt;/code&gt;&lt;/a&gt;, &lt;code&gt;NSURLCache&lt;/code&gt; is not without some peculiarities.&lt;/p&gt;

&lt;p&gt;As of iOS 5, disk caching is supported, but only for HTTP, not HTTPS, requests (though iOS 6 added support for this). Peter Steinberger &lt;a href=&quot;http://petersteinberger.com/blog/2012/nsurlcache-uses-a-disk-cache-as-of-ios5/&quot;&gt;wrote an excellent article on this subject&lt;/a&gt;, after digging into the internals while implementing &lt;a href=&quot;https://github.com/steipete/SDURLCache&quot;&gt;his own NSURLCache subclass&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://blackpixel.com/blog/2012/05/caching-and-nsurlconnection.html&quot;&gt;Another article by Daniel Pasco at Black Pixel&lt;/a&gt; describes some unexpected default behavior when communicating with servers that don&amp;#39;t set cache headers.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSURLCache&lt;/code&gt; reminds us of how important it is to be familiar with the systems we interact with. Chief among them when developing for iOS or Mac OS X is, of course, the &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i&quot;&gt;URL Loading System&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Untold numbers of developers have hacked together an awkward, fragile system for network caching functionality, all because they weren&amp;#39;t aware that &lt;code&gt;NSURLCache&lt;/code&gt; could be setup in two lines and do it 100× better. Even more developers have never known the benefits of network caching, and never attempted a solution, causing their apps to make untold numbers of unnecessary requests to the server.&lt;/p&gt;

&lt;p&gt;So be the change you want to see in the world, and be sure to always start you app on the right foot, by setting a shared &lt;code&gt;NSURLCache&lt;/code&gt; in &lt;code&gt;-application:didFinishLaunchingWithOptions:&lt;/code&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 11 Feb 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nsurlcache/</link>
        <guid>http://nshipster.com/nsurlcache/</guid>
      </item>
    
      <item>
        <title>Type Encodings</title>
        <description>&lt;p&gt;From &lt;a href=&quot;http://en.wikipedia.org/wiki/Numbers_station&quot;&gt;number stations&lt;/a&gt; and &lt;a href=&quot;http://en.wikipedia.org/wiki/Numerology&quot;&gt;numerology&lt;/a&gt; to &lt;a href=&quot;http://en.wikipedia.org/wiki/Egyptian_hieroglyphs&quot;&gt;hieroglyphs&lt;/a&gt; and &lt;a href=&quot;http://en.wikipedia.org/wiki/Hobo#Hobo_.28sign.29_code&quot;&gt;hobo codes&lt;/a&gt;, there is something truly fascinating about finding meaning that hides in plain sight. Though hidden messages in and of themselves are rarely useful or particularly interesting, it&amp;#39;s the thrill of the hunt that piques our deepest curiosities. &lt;/p&gt;

&lt;p&gt;It is in this spirit that we take a look at &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html&quot;&gt;Objective-C Type Encodings&lt;/a&gt; in this week&amp;#39;s edition of NSHipster.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;a href=&quot;http://nshipster.com/nsvalue/&quot;&gt;Last week&lt;/a&gt;, in a discussion about &lt;code&gt;NSValue&lt;/code&gt;, there was mention of &lt;code&gt;+valueWithBytes:objCType:&lt;/code&gt;, whose second parameter should be created with the Objective-C &lt;code&gt;@encode()&lt;/code&gt; compiler directive. &lt;/p&gt;

&lt;p&gt;&lt;code&gt;@encode&lt;/code&gt;, one of the &lt;a href=&quot;http://nshipster.com/at-compiler-directives/&quot;&gt;&lt;code&gt;@&lt;/code&gt; Compiler Directives&lt;/a&gt;, returns a C string that encodes the internal representation of a given type (e.g., &lt;code&gt;@encode(int)&lt;/code&gt; → &lt;code&gt;i&lt;/code&gt;), similar to the ANSI C &lt;code&gt;typeof&lt;/code&gt; operator. Apple&amp;#39;s Objective-C runtime uses type encodings internally to help facilitate message dispatching.&lt;/p&gt;

&lt;p&gt;Here&amp;#39;s a rundown of all of the different Objective-C Type Encodings:&lt;/p&gt;

&lt;table id=&quot;type-encodings&quot;&gt;
  &lt;caption&gt;Objective-C Type Encodings&lt;/caption&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code&lt;/th&gt;
      &lt;th&gt;Meaning&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;c&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A &lt;tt&gt;char&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;i&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;An &lt;tt&gt;int&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;s&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A &lt;tt&gt;short&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;l&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A &lt;tt&gt;long&lt;/tt&gt;&lt;tt&gt;l&lt;/tt&gt; is treated as a 32-bit quantity on 64-bit programs.&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;q&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A &lt;tt&gt;long long&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;C&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;An &lt;tt&gt;unsigned char&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;I&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;An &lt;tt&gt;unsigned int&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;S&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;An &lt;tt&gt;unsigned short&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;L&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;An &lt;tt&gt;unsigned long&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;Q&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;An &lt;tt&gt;unsigned long long&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;f&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A &lt;tt&gt;float&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;d&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A &lt;tt&gt;double&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;B&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A C++ &lt;tt&gt;bool&lt;/tt&gt; or a C99 &lt;tt&gt;_Bool&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;v&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A &lt;tt&gt;void&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;*&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A character string (&lt;tt&gt;char *&lt;/tt&gt;)&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;@&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;An object (whether statically typed or typed &lt;tt&gt;id&lt;/tt&gt;)&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;#&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A class object (&lt;tt&gt;Class&lt;/tt&gt;)&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;:&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;A method selector (&lt;tt&gt;SEL&lt;/tt&gt;)&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;[&lt;em&gt;array type&lt;/em&gt;] &lt;/td&gt;
      &lt;td&gt;An array&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;{&lt;em&gt;name=type...&lt;/em&gt;}&lt;/td&gt;
      &lt;td&gt;A structure&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;(&lt;em&gt;name&lt;/em&gt;=&lt;em&gt;type...&lt;/em&gt;)&lt;/td&gt;
      &lt;td&gt;A union&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;b&lt;/tt&gt;num&lt;/td&gt;
      &lt;td&gt;A bit field of &lt;em&gt;num&lt;/em&gt; bits&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;^&lt;/tt&gt;type&lt;/td&gt;
      &lt;td&gt;A pointer to &lt;em&gt;type&lt;/em&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;?&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;An unknown type (among other things, this code is used for function pointers)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Of course, charts are fine, but experimenting in code is even better:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;int        : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;float      : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;float *    : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;char       : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;char *     : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;BOOL       : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;void       : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;void *     : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;NSObject * : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;NSObject   : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[NSObject] : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;NSError ** : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;int[]      : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;floatArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.1f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.2f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.3f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;float[]    : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;floatArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Struct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;struct     : %s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Struct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Result:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;int        : i
float      : f
float *    : ^f
char       : c
char *     : *
BOOL       : c
void       : v
void *     : ^v

NSObject * : @
NSObject   : #
[NSObject] : {NSObject=#}
NSError ** : ^@

int[]      : [5i]
float[]    : [3f]
struct     : {_struct=sqQ}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There are some interesting takeaways from this:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Whereas the standard encoding for pointers is a preceding &lt;code&gt;^&lt;/code&gt;, &lt;code&gt;char *&lt;/code&gt; gets its own code: &lt;code&gt;*&lt;/code&gt;. This makes sense conceptually, as C strings are thought to be entities in and of themselves, rather than a pointer to something else.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BOOL&lt;/code&gt; is &lt;code&gt;c&lt;/code&gt;, rather than &lt;code&gt;i&lt;/code&gt;, as one might expect. Reason being, &lt;code&gt;char&lt;/code&gt; is smaller than an &lt;code&gt;int&lt;/code&gt;, and when Objective-C was originally designed in the 80&amp;#39;s, bits (much like the dollar) were more valuable than they are today. &lt;code&gt;BOOL&lt;/code&gt; is specifically a &lt;code&gt;signed char&lt;/code&gt; (even if &lt;code&gt;-funsigned-char&lt;/code&gt; is set), to ensure a consistent type between compilers, since &lt;code&gt;char&lt;/code&gt; could be either &lt;code&gt;signed&lt;/code&gt; or &lt;code&gt;unsigned&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Passing &lt;code&gt;NSObject&lt;/code&gt; directly yields &lt;code&gt;#&lt;/code&gt;. However, passing &lt;code&gt;[NSObject class]&lt;/code&gt; yields a struct named &lt;code&gt;NSObject&lt;/code&gt; with a single class field. That is, of course, the &lt;code&gt;isa&lt;/code&gt; field, which all &lt;code&gt;NSObject&lt;/code&gt; instances have to signify their type.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Method Encodings&lt;/h2&gt;

&lt;p&gt;As mentioned in Apple&amp;#39;s &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html&quot;&gt;&amp;quot;Objective-C Runtime Programming Guide&amp;quot;&lt;/a&gt;, there are a handful of type encodings that are used internally, but cannot be returned with &lt;code&gt;@encode&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;These are the type qualifiers for methods declared in a protocol:&lt;/p&gt;

&lt;table id=&quot;method-encodings&quot;&gt;
  &lt;caption&gt;Objective-C Method Encodings&lt;/caption&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code&lt;/th&gt;
      &lt;th&gt;Meaning&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;r&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;const&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;n&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;in&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;N&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;inout&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;o&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;out&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;O&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;bycopy&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;R&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;byref&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;V&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;oneway&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;For anyone familiar with &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDistantObject_Class/Reference/Reference.html&quot;&gt;NSDistantObject&lt;/a&gt;, you&amp;#39;ll doubtless recognize these as a vestige of &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DistrObjects/DistrObjects.html#//apple_ref/doc/uid/10000102i&quot;&gt;Distributed Objects&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Although DO has fallen out of fashion in the age of iOS, it was an interprocess messaging protocol used between Cocoa applications--even running on different machines on the network. Under these constraints, there were benefits to be had from the additional context. &lt;/p&gt;

&lt;p&gt;For example, parameters in distributed object messages were passed as proxies by default. In situations where proxying would be unnecessarily inefficient, the &lt;code&gt;bycopy&lt;/code&gt; qualifier could be added to make sure a full copy of the object was sent. Also by default, parameters were &lt;code&gt;inout&lt;/code&gt;, signifying that objects needed to be sent back and forth when sending the message. By specifying a parameter as &lt;code&gt;in&lt;/code&gt; or &lt;code&gt;out&lt;/code&gt; instead, the application could avoid the round-trip overhead.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;So what do we gain from our newfound understanding of Objective-C Type Encodings?&lt;br&gt;
Honestly, not that much (unless you&amp;#39;re doing any crazy metaprogramming).&lt;/p&gt;

&lt;p&gt;But as we said from the very outset, there is wisdom in the pursuit of deciphering secret messages.&lt;/p&gt;

&lt;p&gt;Looking at type encodings reveals details about Objective-C runtime internals, which is a noble pursuit in and of itself. Going further down the rabbit hole, and we come to the secret history of Distributed Objects, and the obscure parameter qualifiers that &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html%23jumpTo_22&quot;&gt;still linger around to this day&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 04 Feb 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/type-encodings/</link>
        <guid>http://nshipster.com/type-encodings/</guid>
      </item>
    
      <item>
        <title>NSValue</title>
        <description>&lt;p&gt;As part of playing the role of Abraham Lincoln in the &lt;a href=&quot;http://www.imdb.com/title/tt0443272/&quot;&gt;eponymous 2012 biopic&lt;/a&gt;, Daniel Day-Lewis would insist on walking through a refrigerator box marked &amp;quot;TIME MACHINE&amp;quot; anytime he entered or left the set. &lt;del markdown=&quot;1&quot;&gt;&lt;a href=&quot;http://filmdrunk.uproxx.com/2012/10/daniel-day-lewis-method-acting-lincoln-ny-times-profile&quot;&gt;True Story&lt;/a&gt;&lt;/del&gt;.&lt;/p&gt;

&lt;p&gt;While the ends certainly justify the means when it comes to Mr. Day-Lewis&amp;#39; method acting, one can&amp;#39;t help but marvel at the absurdity of a magical cardboard box used as a nexus between the modern and historical worlds.&lt;/p&gt;

&lt;p&gt;Yet, this is &lt;em&gt;exactly&lt;/em&gt; what we do as Objective-C programmers.&lt;/p&gt;

&lt;p&gt;...well not &lt;em&gt;exactly&lt;/em&gt;, but there is a box involved.&lt;/p&gt;

&lt;p&gt;As mentioned &lt;a href=&quot;http://nshipster.com/ns_enum-ns_options/&quot;&gt;time&lt;/a&gt; and &lt;a href=&quot;http://nshipster.com/nil/&quot;&gt;again&lt;/a&gt; in NSHipster, what makes Objective-C such a curiosity is the way it merges the old, procedural world of C with the modern Object-Oriented influences of Smalltalk. When done correctly, this tension can be exploited to craft semantically rich software without sacrificing performance. But bridging that gap between old and new is a miasma of casts, bridges, and of course, boxes.&lt;/p&gt;

&lt;p&gt;Boxing is the process of encapsulating scalars (&lt;code&gt;int&lt;/code&gt;, &lt;code&gt;double&lt;/code&gt;, &lt;code&gt;BOOL&lt;/code&gt;, etc.) and value types (&lt;code&gt;struct&lt;/code&gt;, &lt;code&gt;enum&lt;/code&gt;) with an object container, and is primarily used to store those values in collection objects—namely arrays and dictionaries.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSNumber&lt;/code&gt; is often used to box scalars, but in Foundation, the reigning featherweight champion of boxing is &lt;code&gt;NSValue&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSValue&lt;/code&gt; is a simple container for a single C or Objective-C data value. It can hold scalars and value types, as well as pointers and object IDs.&lt;/p&gt;

&lt;p&gt;While boxing is an admittedly dry subject matter, there are two methods in particular that are worth noting: &lt;code&gt;+valueWithBytes:objCType:&lt;/code&gt;, which serves as a primer for working with &lt;code&gt;NSValue&lt;/code&gt;, and 
&lt;code&gt;+valueWithNonretainedObject:&lt;/code&gt;, which is surprisingly useful for being relatively unknown.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;valueWithBytes:objCType:&lt;/code&gt;&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;+valueWithBytes:objCType:&lt;/code&gt;
Creates and returns an NSValue object that contains a given value, which is interpreted as being of a given Objective-C type.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;value&lt;/code&gt;: The value for the new &lt;code&gt;NSValue&lt;/code&gt; object.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;type&lt;/code&gt;: The Objective-C type of value. &lt;code&gt;type&lt;/code&gt; should be created with the Objective-C &lt;code&gt;@encode()&lt;/code&gt; compiler directive; it should not be hard-coded as a C string.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;@encode&lt;/code&gt; was discussed in &lt;a href=&quot;http://nshipster.com/at-compiler-directives/&quot;&gt;our rundown of the myriad &lt;code&gt;@&lt;/code&gt; Compiler Directives&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;@encode()&lt;/code&gt;: Returns the &lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html&quot;&gt;type encoding&lt;/a&gt; of a type. This type value can be used as the first argument encode in &lt;code&gt;NSCoder -encodeValueOfObjCType:at&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The subject of type encodings would make for &lt;a href=&quot;http://nshipster.com/type-encodings/&quot;&gt;a great article of its own&lt;/a&gt;, but the main takeaway is that it serves as a terse, human-readable representation of the structure of a type. For example,&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;example&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;anObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;anInt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Example&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...has the encoding:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;NSValue&lt;/code&gt; uses this type encoding to create the necessary data structures to represent these values internally. Neat!&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;valueWithNonretainedObject:&lt;/code&gt;&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;+valueWithNonretainedObject:&lt;/code&gt;
Creates and returns an NSValue object that contains a given object.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;anObject&lt;/code&gt;: The value for the new object.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;If you already knew about &lt;code&gt;valueWithNonretainedObject&lt;/code&gt;, you should be nodding with a knowing grin. If you didn&amp;#39;t, you&amp;#39;re likely staring incredulously with mouth agape. Or if not, you will be soon.&lt;/p&gt;

&lt;p&gt;In short, &lt;code&gt;valueWithNonretainedObject:&lt;/code&gt; allows objects to be added to a collection, without the need for satisfying &lt;code&gt;&amp;lt;NSCopying&amp;gt;&lt;/code&gt;. &lt;/p&gt;

&lt;p&gt;It&amp;#39;s something that comes up occasionally, working with objects that can&amp;#39;t be directly added to an &lt;code&gt;NSArray&lt;/code&gt; or &lt;code&gt;NSDictionary&lt;/code&gt;. Without knowing about &lt;code&gt;valueWithNonretainedObject:&lt;/code&gt;, this would be something that would throw off your entire game—especially if you&amp;#39;re just starting out in Objective-C. &lt;/p&gt;

&lt;p&gt;But now you&amp;#39;re in the know. You won&amp;#39;t be stifled by such pedestrian concerns. You need not grope around for answers with &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPointerArray_Class/Introduction/Introduction.html&quot;&gt;&lt;code&gt;NSPointerArray&lt;/code&gt;&lt;/a&gt; or &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSMapTable_class/Reference/NSMapTable.html#//apple_ref/occ/cl/NSMapTable&quot;&gt;&lt;code&gt;NSMapTable&lt;/code&gt;&lt;/a&gt;. Today is a new day.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Having unpacked all of this wisdom about &lt;code&gt;NSValue&lt;/code&gt;, you can now face that cruel divide between procedural and object-oriented; C and Smalltalk. Because everything is easy with a magic box.&lt;/p&gt;
</description>
        <pubDate>Mon, 28 Jan 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nsvalue/</link>
        <guid>http://nshipster.com/nsvalue/</guid>
      </item>
    
      <item>
        <title>NSLocalizedString</title>
        <description>&lt;p&gt;Strings are perhaps the most versatile data type in computing. They&amp;#39;re passed around as symbols, used to encode numeric values, associate values to keys, represent resource paths, store linguistic content, and format information. Having a strong handle on user-facing strings is essential to making a great user experience.&lt;/p&gt;

&lt;p&gt;In Foundation, there is a convenient macro for denoting strings as user-facing: &lt;code&gt;NSLocalizedString&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSLocalizedString&lt;/code&gt; provides string localization in &amp;quot;compile-once / run everywhere&amp;quot; fashion, replacing all localized strings with their respective translation according to the string tables of the user settings. But even if you&amp;#39;re not going to localize your app to any other markets, &lt;code&gt;NSLocalizedString&lt;/code&gt; does wonders with respect to copy writing &amp;amp; editing.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For more information about Localization (l10n) and Internationalization (i18n) &lt;a href=&quot;http://nshipster.com/nslocale/&quot;&gt;see the NSHipster article about NSLocale&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSLocalizedString&lt;/code&gt; is a Foundation macro that returns a localized version of a string. It has two arguments: &lt;code&gt;key&lt;/code&gt;, which uniquely identifies the string to be localized, and &lt;code&gt;comment&lt;/code&gt;, a string that is used to provide sufficient context for accurate translation.&lt;/p&gt;

&lt;p&gt;In practice, the &lt;code&gt;key&lt;/code&gt; is often just the base translation string to be used, while &lt;code&gt;comment&lt;/code&gt; is usually &lt;code&gt;nil&lt;/code&gt;, unless there is an ambiguous context:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;textField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;placeholder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Username&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;NSLocalizedString&lt;/code&gt; can also be used as a format string in &lt;code&gt;NSString +stringWithFormat:&lt;/code&gt;. In these cases, it&amp;#39;s important to use the &lt;code&gt;comment&lt;/code&gt; argument to provide enough context to be properly translated.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;#39;s Profile&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;{User First Name}&amp;#39;s Profile&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Showing %lu of %lu items&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Showing {number} of {total number} items&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;code&gt;NSLocalizedString&lt;/code&gt; &amp;amp; Co.&lt;/h2&gt;

&lt;p&gt;There are four varieties of &lt;code&gt;NSLocalizedString&lt;/code&gt;, with increasing levels of control (and obscurity):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedStringFromTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tableName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedStringFromTableInBundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tableName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSBundle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedStringWithDefaultValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tableName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSBundle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;99% of the time, &lt;code&gt;NSLocalizedString&lt;/code&gt; will suffice. If you&amp;#39;re working in a library or shared component, &lt;code&gt;NSLocalizedStringFromTable&lt;/code&gt; should be used instead.&lt;/p&gt;

&lt;h2&gt;Localizable.strings&lt;/h2&gt;

&lt;p&gt;At runtime, &lt;code&gt;NSLocalizedString&lt;/code&gt; determines the preferred language, and finds a corresponding &lt;code&gt;Localizable.strings&lt;/code&gt; file in the app bundle. For example, if the user prefers French, the file &lt;code&gt;fr.lproj/Localizable.strings&lt;/code&gt; will be consulted.&lt;/p&gt;

&lt;p&gt;Here&amp;#39;s what that looks like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;/* No comment provided by engineer. */
&amp;quot;Username&amp;quot;=&amp;quot;nom d&amp;#39;utilisateur&amp;quot;;
/* {User First Name}&amp;#39;s Profile */
&amp;quot;%@&amp;#39;s Profile&amp;quot;=&amp;quot;profil de %1$@&amp;quot;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Localizable.strings&lt;/code&gt; files are initially generated with &lt;code&gt;genstrings&lt;/code&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The &lt;code&gt;genstrings&lt;/code&gt; utility generates a .strings file(s) from the C or Objective-C (.c or .m) source code file(s) given as the argument(s).  A .strings file is used for localizing an application for different languages, as described under &amp;quot;Internationalization&amp;quot; in the Cocoa Developer Documentation.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;genstrings&lt;/code&gt; goes through each of the selected source files, and for each use of &lt;code&gt;NSLocalizedString&lt;/code&gt;, appends the key and comment into a target file. It&amp;#39;s up to the developer to then create a copy of that file for each targeted locale and have a localizer translate it.&lt;/p&gt;

&lt;h2&gt;No Madlibs&lt;/h2&gt;

&lt;p&gt;After reading that part about localized format strings, you may be tempted to take a clever, DRY approach by creating reusable grammar templates like `@&amp;quot;{Noun} {Verb} {Noun}&amp;quot;, and localizing each word individually...&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;DON&amp;#39;T.&lt;/strong&gt; This cannot be stressed enough: &lt;em&gt;don&amp;#39;t subdivide localized strings&lt;/em&gt;. Context will be lost, grammatical constructions will be awkward and unidiomatic, verbs will be incorrectly conjugated, and you&amp;#39;ll have missed the point entirely—taking great effort to make something worse than if you hadn&amp;#39;t bothered in the first place.&lt;/p&gt;

&lt;p&gt;Numbers, dates, and similar values are almost always safe replacements. Nouns are subject to pluralization and verb conjugation, but usually safe as direct or indirect objects.&lt;/p&gt;

&lt;p&gt;For additional guidelines, see &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/StringsFiles.html#//apple_ref/doc/uid/20000005&quot;&gt;Localizing String Resources from Apple&amp;#39;s Internationalization Programming guide&lt;/a&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSLocalizedString&lt;/code&gt; is a remarkably reliable indicator of code quality. Those who care enough to take a few extra seconds to internationalize are very likely to be just as thoughtful when it comes to design and implementation.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Always wrap user-facing strings with &lt;code&gt;NSLocalizedString&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Even if you don&amp;#39;t plan to localize your app into any other languages, there is &lt;em&gt;immense&lt;/em&gt; utility in being able to easily review all of the strings that a user will see. And if localization is in the cards, it&amp;#39;s significantly easier to &lt;code&gt;NSLocalize&lt;/code&gt; your strings as you go along the first time, then try to find all of them after-the-fact.&lt;/p&gt;
</description>
        <pubDate>Mon, 21 Jan 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nslocalizedstring/</link>
        <guid>http://nshipster.com/nslocalizedstring/</guid>
      </item>
    
      <item>
        <title>__attribute__</title>
        <description>&lt;p&gt;A recurring theme of this publication has been the importance of a healthy relationship with the compiler. Like any craft, one&amp;#39;s effectiveness as a practitioner is contingent on how they treat their tools. Take good care of them, and they&amp;#39;ll take good care of you.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__attribute__&lt;/code&gt; is a compiler directive that specifies characteristics on declarations, which allows for more error checking and advanced optimizations.&lt;/p&gt;

&lt;p&gt;The syntax for this keyword is &lt;code&gt;__attribute__&lt;/code&gt; followed by two sets of parentheses (the double parentheses makes it easy to &amp;quot;macro out&amp;quot;, especially with multiple attributes). Inside the parentheses is a comma-delimited list of attributes. &lt;code&gt;__attribute__&lt;/code&gt; directives are placed after function, variable, and type declarations.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// Return the square of a number&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;square&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Declare the availability of a particular API&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;availability&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;macosx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;introduced&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deprecated&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Send printf-like message to stderr and exit&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;noreturn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If this is starting to remind you of ISO C&amp;#39;s &lt;a href=&quot;http://nshipster.com/pragma&quot;&gt;&lt;code&gt;#pragma&lt;/code&gt;&lt;/a&gt;, you&amp;#39;re not alone.&lt;/p&gt;

&lt;p&gt;In fact, when &lt;code&gt;__attribute__&lt;/code&gt; was first introduced to GCC, it was faced with some resistance by some who suggested that &lt;code&gt;#pragma&lt;/code&gt; be used exclusively for the same purposes.&lt;/p&gt;

&lt;p&gt;There were, however, two very good reasons why &lt;code&gt;__attribute__&lt;/code&gt; was added:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;It was impossible to generate &lt;code&gt;#pragma&lt;/code&gt; commands from a macro (before the C99 &lt;code&gt;_Pragma&lt;/code&gt; operator).&lt;/li&gt;
&lt;li&gt;There is no telling what the same &lt;code&gt;#pragma&lt;/code&gt; might mean in another compiler.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;Quoth the &lt;a href=&quot;http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html&quot;&gt;GCC Documentation for Function Attributes&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;These two reasons applied to almost any application that might have been proposed for &lt;code&gt;#pragma&lt;/code&gt;. It was basically a mistake to use &lt;code&gt;#pragma&lt;/code&gt; for anything.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Indeed, if you look at modern Objective-C--in the headers of Apple frameworks and well-engineered open-source projects--&lt;code&gt;__attribute__&lt;/code&gt; is used for myriad purposes. (By contrast, &lt;code&gt;#pragma&lt;/code&gt;&amp;#39;s main claim to fame these days is decoration: &lt;code&gt;#pragma mark&lt;/code&gt;)&lt;/p&gt;

&lt;p&gt;So without further ado, let&amp;#39;s take a look at the most important attributes:&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;GCC&lt;/h2&gt;

&lt;h3&gt;&lt;code&gt;format&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;The &lt;code&gt;format&lt;/code&gt; attribute specifies that a function takes &lt;code&gt;printf&lt;/code&gt;, &lt;code&gt;scanf&lt;/code&gt;, &lt;code&gt;strftime&lt;/code&gt; or &lt;code&gt;strfmon&lt;/code&gt; style arguments which should be type-checked against a format string.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;my_printf&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;my_object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;my_format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Objective-C programmers can also use the &lt;code&gt;__NSString__&lt;/code&gt; format to enforce the same rules as format strings in &lt;code&gt;NSString +stringWithFormat:&lt;/code&gt; and &lt;code&gt;NSLog()&lt;/code&gt;.&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;nonnull&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;The &lt;code&gt;nonnull&lt;/code&gt; attribute specifies that some function parameters should be non-null pointers.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;my_memcpy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonnull&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Using &lt;code&gt;nonnull&lt;/code&gt; encodes expectations about values into an explicit contract, which can help catch any &lt;code&gt;NULL&lt;/code&gt; pointer bugs lurking in any calling code. Remember: compile-time errors ≫ run-time errors.&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;noreturn&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;A few standard library functions, such as &lt;code&gt;abort&lt;/code&gt; and &lt;code&gt;exit&lt;/code&gt;, cannot return. GCC knows this automatically. The &lt;code&gt;noreturn&lt;/code&gt; attribute specifies this for any other function that never returns.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;For example, AFNetworking &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking/blob/1.1.0/AFNetworking/AFURLConnectionOperation.m#L157&quot;&gt;uses the &lt;code&gt;noreturn&lt;/code&gt; attribute for its network request thread entry point method&lt;/a&gt;. This method is used when spawning the dedicated network &lt;code&gt;NSThread&lt;/code&gt; to ensure that the detached thread continues execution for the lifetime of the application.&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;pure&lt;/code&gt; / &lt;code&gt;const&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;The &lt;code&gt;pure&lt;/code&gt; attribute specifies that a function has no effects except the return value, such that their return value depends only on the parameters and/or global variables. Such a function can be subject to common subexpression elimination and loop optimization just as an arithmetic operator would be.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;const&lt;/code&gt; attribute specifies that a function does not examine any values except their arguments, and have no effects except the return value. Note that a function that has pointer arguments and examines the data pointed to must not be declared const. Likewise, a function that calls a non-&lt;code&gt;const&lt;/code&gt; function usually must not be &lt;code&gt;const&lt;/code&gt;. It does not make sense for a &lt;code&gt;const&lt;/code&gt; function to return &lt;code&gt;void&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;square&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;pure&lt;/code&gt; and &lt;code&gt;const&lt;/code&gt; are both attributes that invoke a functional programming paradigm in order to allow for significant performance optimizations. &lt;code&gt;const&lt;/code&gt; can be thought as a stricter form of &lt;code&gt;pure&lt;/code&gt; since it doesn&amp;#39;t depend on global values or pointers.&lt;/p&gt;

&lt;p&gt;For example, because the result of a function declared &lt;code&gt;const&lt;/code&gt; does not depend on anything other than the arguments passed in, the result of the function can cache that result and return any time the function is called with that same combination of arguments. (i.e. we know that the square of a number is constant, so we only need to compute it once).&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;unused&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;This attribute, attached to a function, means that the function is meant to be possibly unused. GCC will not produce a warning for this function.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The same effect can be accomplished with the &lt;code&gt;__unused&lt;/code&gt; keyword. Declare this on parameters that are not used in the method implementation. Knowing that little bit of context allows the compiler to make optimizations accordingly. You&amp;#39;re most likely to use &lt;code&gt;__unused&lt;/code&gt; in delegate method implementations, since protocols frequently provide more context than is often necessary, in order to satisfy a large number of potential use cases.&lt;/p&gt;

&lt;h2&gt;LLVM&lt;/h2&gt;

&lt;p&gt;Like many features of GCC, Clang supports &lt;code&gt;__attribute__&lt;/code&gt;, adding its own small set of extensions.&lt;/p&gt;

&lt;p&gt;To check the availability of a particular attribute, you can use the &lt;code&gt;__has_attribute&lt;/code&gt; directive.&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;availability&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;Clang introduces the availability attribute, which can be placed on declarations to describe the lifecycle of that declaration relative to operating system versions. Consider the function declaration for a hypothetical function f:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;availability&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;macosx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;introduced&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deprecated&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obsoleted&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;The &lt;code&gt;availability&lt;/code&gt; attribute states that &lt;code&gt;f&lt;/code&gt; was introduced in Mac OS X 10.4, deprecated in Mac OS X 10.6, and obsoleted in Mac OS X 10.7.&lt;/p&gt;

&lt;p&gt;This information is used by Clang to determine when it is safe to use &lt;code&gt;f&lt;/code&gt;: for example, if Clang is instructed to compile code for Mac OS X 10.5, a call to f() succeeds. If Clang is instructed to compile code for Mac OS X 10.6, the call succeeds but Clang emits a warning specifying that the function is deprecated. Finally, if Clang is instructed to compile code for Mac OS X 10.7, the call fails because &lt;code&gt;f()&lt;/code&gt; is no longer available.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;availability&lt;/code&gt; attribute is a comma-separated list starting with the platform name and then including clauses specifying important milestones in the declaration&amp;#39;s lifetime (in any order) along with additional information.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;introduced&lt;/code&gt;: The first version in which this declaration was introduced.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deprecated&lt;/code&gt;: The first version in which this declaration was deprecated, meaning that users should migrate away from this API.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;obsoleted&lt;/code&gt;: The first version in which this declaration was obsoleted, meaning that it was removed completely and can no longer be used.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;unavailable&lt;/code&gt;: This declaration is never available on this platform.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;message&lt;/code&gt; Additional message text that Clang will provide when emitting a warning or error about use of a deprecated or obsoleted declaration. Useful to direct users to replacement APIs.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Multiple availability attributes can be placed on a declaration, which may correspond to different platforms. Only the availability attribute with the platform corresponding to the target platform will be used; any others will be ignored. If no availability attribute specifies availability for the current target platform, the availability attributes are ignored.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Supported Platforms:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ios&lt;/code&gt;: Apple’s iOS operating system. The minimum deployment target is specified by the &lt;code&gt;-mios-version-min=*version*&lt;/code&gt; or &lt;code&gt;-miphoneos-version-min=*version*&lt;/code&gt; command-line arguments.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;macosx&lt;/code&gt;: Apple’s Mac OS X operating system. The minimum deployment target is specified by the &lt;code&gt;-mmacosx-version-min=*version*&lt;/code&gt; command-line argument.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;code&gt;overloadable&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;Clang provides support for C++ function overloading in C. Function overloading in C is introduced using the &lt;code&gt;overloadable&lt;/code&gt; attribute. For example, one might provide several overloaded versions of a &lt;code&gt;tgsin&lt;/code&gt; function that invokes the appropriate standard function computing the &lt;code&gt;sine&lt;/code&gt; of a value with &lt;code&gt;float&lt;/code&gt;, &lt;code&gt;double&lt;/code&gt;, or &lt;code&gt;long double&lt;/code&gt; precision:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;math.h&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;overloadable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tgsin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sinf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;overloadable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tgsin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;overloadable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tgsin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sinl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that &lt;code&gt;overloadable&lt;/code&gt; only works for functions. You can overload method declarations to some extent by using generic return and parameter types, like &lt;code&gt;id&lt;/code&gt; and &lt;code&gt;void *&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Context is king when it comes to compiler optimizations. By providing constraints on how to interpret your code, you&amp;#39;re increases the chance that the generated code is as efficient as possible. Meet your compiler half-way, and you&amp;#39;ll always be rewarded.&lt;/p&gt;

&lt;p&gt;And &lt;code&gt;__attribute__&lt;/code&gt; isn&amp;#39;t just for the compiler either: The next person to see the code will appreciate the extra context, too. So go the extra mile for the benefit of your collaborator, successor, or just 2-years-from-now-(and-you&amp;#39;ve-forgotten-everything-about–this-code) you.&lt;/p&gt;

&lt;p&gt;Because in the end, the love you take is equal to the love you make.&lt;/p&gt;
</description>
        <pubDate>Mon, 14 Jan 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/__attribute__/</link>
        <guid>http://nshipster.com/__attribute__/</guid>
      </item>
    
      <item>
        <title>nil / Nil / NULL / NSNull</title>
        <description>&lt;p&gt;Understanding the concept of nothingness is as much a philosophical issue as it is a pragmatic one. We are inhabitants of a universe of &lt;em&gt;somethings&lt;/em&gt;, yet reason in a logical universe of existential uncertainties. As a physical manifestation of a logical system, computers are faced with the intractable problem of how to represent &lt;em&gt;nothing&lt;/em&gt; with &lt;em&gt;something&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;In Objective-C, there are several different varieties of &lt;em&gt;nothing&lt;/em&gt;. The reason for this goes back to &lt;a href=&quot;http://nshipster.com/ns_enum-ns_options/&quot;&gt;a common NSHipster refrain&lt;/a&gt;, of how Objective-C bridges the procedural paradigm of C with Smalltalk-inspired object-oriented paradigm.&lt;/p&gt;

&lt;p&gt;C represents &lt;em&gt;nothing&lt;/em&gt; as &lt;code&gt;0&lt;/code&gt; for primitive values, and &lt;code&gt;NULL&lt;/code&gt; for pointers (&lt;a href=&quot;http://c-faq.com/null/nullor0.html&quot;&gt;which is equivalent to &lt;code&gt;0&lt;/code&gt; in a pointer context&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Objective-C builds on C&amp;#39;s representation of &lt;em&gt;nothing&lt;/em&gt; by adding &lt;code&gt;nil&lt;/code&gt;. &lt;code&gt;nil&lt;/code&gt; is an &lt;em&gt;object&lt;/em&gt; pointer to nothing. Although semantically distinct from &lt;code&gt;NULL&lt;/code&gt;, they are technically equivalent to one another.&lt;/p&gt;

&lt;p&gt;On the framework level, Foundation defines &lt;code&gt;NSNull&lt;/code&gt;, which defines a class method, &lt;code&gt;+null&lt;/code&gt;, which returns the singleton &lt;code&gt;NSNull&lt;/code&gt; object. &lt;code&gt;NSNull&lt;/code&gt; is different from &lt;code&gt;nil&lt;/code&gt; or &lt;code&gt;NULL&lt;/code&gt;, in that it is an actual object, rather than a zero value. &lt;/p&gt;

&lt;p&gt;Additionally, in &lt;a href=&quot;https://gist.github.com/4469665&quot;&gt;Foundation/NSObjCRuntime.h&lt;/a&gt;, &lt;code&gt;Nil&lt;/code&gt; is defined as a &lt;em&gt;class&lt;/em&gt; pointer to nothing. This lesser-known title-case cousin of &lt;code&gt;nil&lt;/code&gt; doesn&amp;#39;t show up much very often, but it&amp;#39;s at least worth noting.&lt;/p&gt;

&lt;h2&gt;There&amp;#39;s Something About &lt;code&gt;nil&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Newly-&lt;code&gt;alloc&lt;/code&gt;&amp;#39;d &lt;code&gt;NSObject&lt;/code&gt;s start life with &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html&quot;&gt;their contents set to &lt;code&gt;0&lt;/code&gt;&lt;/a&gt;. This means that all pointers that object has to other objects begin as &lt;code&gt;nil&lt;/code&gt;, so it&amp;#39;s unnecessary to, for instance, set &lt;code&gt;self.(association) = nil&lt;/code&gt; in &lt;code&gt;init&lt;/code&gt; methods.&lt;/p&gt;

&lt;p&gt;Perhaps the most notable behavior of &lt;code&gt;nil&lt;/code&gt;, though, is that it can have messages sent to it. &lt;/p&gt;

&lt;p&gt;In other languages, like C++, this would crash your program, but in Objective-C, invoking a method on &lt;code&gt;nil&lt;/code&gt; returns a zero value. This greatly simplifies expressions, as it obviates the need to check for &lt;code&gt;nil&lt;/code&gt; before doing anything:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// For example, this expression...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Steve&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ...can be simplified to:&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isEqualToString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;steve&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Being aware of how &lt;code&gt;nil&lt;/code&gt; works in Objective-C allows this convenience to be a feature, and not a lurking bug in your application. Make sure to guard against cases where &lt;code&gt;nil&lt;/code&gt; values are unwanted, either by checking and returning early to fail silently, or adding a &lt;code&gt;NSParameterAssert&lt;/code&gt; to throw an exception.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;NSNull&lt;/code&gt;: Something for Nothing&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSNull&lt;/code&gt; is used throughout Foundation and other frameworks to skirt around the limitations of collections like &lt;code&gt;NSArray&lt;/code&gt; and &lt;code&gt;NSDictionary&lt;/code&gt; not being able to contain &lt;code&gt;nil&lt;/code&gt; values. You can think of &lt;code&gt;NSNull&lt;/code&gt; as effectively &lt;a href=&quot;http://en.wikipedia.org/wiki/Object_type_(object-oriented_programming)#Boxing&quot;&gt;boxing&lt;/a&gt; the &lt;code&gt;NULL&lt;/code&gt; or &lt;code&gt;nil&lt;/code&gt; value so that it can be used in collections:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mutableDictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;someKey&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNull&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Sets value of NSNull singleton for `someKey`&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Keys: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableDictionary&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allKeys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @[@&amp;quot;someKey&amp;quot;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;So to recap, here are the four values representing &lt;em&gt;nothing&lt;/em&gt; that every Objective-C programmer should know about:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Symbol&lt;/th&gt;
      &lt;th&gt;Value&lt;/th&gt;
      &lt;th&gt;Meaning&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NULL&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;(void *)0&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;literal null value for C pointers&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;nil&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;(id)0&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;literal null value for Objective-C objects&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;Nil&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;(Class)0&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;literal null value for Objective-C classes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSNull&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;[NSNull null]&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;singleton object used to represent null&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        <pubDate>Mon, 07 Jan 2013 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nil/</link>
        <guid>http://nshipster.com/nil/</guid>
      </item>
    
      <item>
        <title>Reader Submissions -&lt;br/&gt;New Year&#39;s 2013</title>
        <description>&lt;p&gt;In celebration of the forthcoming &lt;code&gt;year++&lt;/code&gt;, I thought it&amp;#39;d be fun to compile a list of some of &lt;em&gt;your&lt;/em&gt; favorite tips and tricks of the trade--to give y&amp;#39;all a chance to show off some of your NSHipster cred.&lt;/p&gt;

&lt;p&gt;Thanks to &lt;a href=&quot;https://github.com/0xced&quot;&gt;Cédric Luthi&lt;/a&gt;, &lt;a href=&quot;https://github.com/jaykz52&quot;&gt;Jason Kozemczak&lt;/a&gt;, &lt;a href=&quot;https://github.com/SlaunchaMan&quot;&gt;Jeff Kelley&lt;/a&gt;, &lt;a href=&quot;https://github.com/joelparsons&quot;&gt;Joel Parsons&lt;/a&gt;, &lt;a href=&quot;https://github.com/MaxGabriel&quot;&gt;Maximilian Tagher&lt;/a&gt;, &lt;a href=&quot;https://github.com/mayoff&quot;&gt;Rob Mayoff&lt;/a&gt;, &lt;a href=&quot;https://github.com/shpakovski&quot;&gt;Vadim Shpakovski&lt;/a&gt;, &amp;amp; &lt;a href=&quot;https://github.com/alextud&quot;&gt;@alextud&lt;/a&gt; for &lt;a href=&quot;https://gist.github.com/4148342&quot;&gt;answering the call&lt;/a&gt; with &lt;em&gt;excellent&lt;/em&gt; submissions.&lt;/p&gt;

&lt;h2&gt;Associated Objects in Categories&lt;/h2&gt;

&lt;p&gt;This first tip is so nice it was mentioned twice, both by &lt;a href=&quot;https://github.com/jaykz52&quot;&gt;Jason Kozemczak&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://github.com/SlaunchaMan&quot;&gt;Jeff Kelley&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Categories are a well-known feature of Objective-C, allowing new methods to be added to existing classes. Much less well known is that with some &lt;code&gt;objc&lt;/code&gt; runtime hacking, you can add new &lt;em&gt;properties&lt;/em&gt; as well. Observe!&lt;/p&gt;

&lt;h3&gt;NSObject+IndieBandName.h&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(IndieBandName)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;indieBandName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;NSObject+IndieBandName.m&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#import &amp;quot;NSObject+Extension.h&amp;quot;&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#import &amp;lt;objc/runtime.h&amp;gt;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IndieBandNameKey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IndieBandNameKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(IndieBandName)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@dynamic&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;indieBandName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;indieBandName&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objc_getAssociatedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IndieBandNameKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setIndieBandName:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;indieBandName&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objc_setAssociatedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IndieBandNameKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;indieBandName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OBJC_ASSOCIATION_RETAIN_NONATOMIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This way, all of your objects can store and retrieve the name of their band, which--by the way--is performing this Wednesday night, and you should totally come.&lt;/p&gt;

&lt;p&gt;While this is a cool trick and all, it should only be used as a method of last resort. Before you go this route, ask yourself if a particular property can&amp;#39;t either be derived from existing values, or should be managed by another class.&lt;/p&gt;

&lt;p&gt;A good example of an associated object is how &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking&quot;&gt;AFNetworking&lt;/a&gt; adds a property for an image request operation in its &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/UIImageView%2BAFNetworking.m#L39&quot;&gt;&lt;code&gt;UIImageView&lt;/code&gt; category&lt;/a&gt;.&lt;/p&gt;

&lt;h2&gt;LLDB View Hierarchy Dump&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/mayoff&quot;&gt;Rob Mayoff&lt;/a&gt; responded with an obscure and powerful incantation to make debugging views a delight. Create &lt;code&gt;.lldbinit&lt;/code&gt; in your home directory, if it doesn&amp;#39;t already exist, and add the following:&lt;/p&gt;

&lt;h3&gt;~/.lldbinit&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;command regex rd &amp;#39;s/^[[:space:]]*$/po [[[UIApplication sharedApplication] keyWindow] recursiveDescription]/&amp;#39; &amp;#39;s/^(.+)$/po [%1 recursiveDescription]/&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now you can get a recursive hierarchy of any view in your iOS application with the LLDB debugger. You can try this for yourself by setting a breakpoint in a view controller, and type &lt;code&gt;rd self.view&lt;/code&gt;. You may be surprised by what&amp;#39;s under the hood with some of the built-in UI controls!&lt;/p&gt;

&lt;h2&gt;LLDB Print Contents of a &lt;code&gt;CGPathRef&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;While we&amp;#39;re on the subject of LLDB, &lt;a href=&quot;https://github.com/mayoff&quot;&gt;Rob Mayoff&lt;/a&gt; sent in a useful incantation for printing out the contents of a &lt;code&gt;CGPathRef&lt;/code&gt; from the debugger:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;p (void)CGPathPrint(pathRef, 0)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you&amp;#39;re doing any kind of complex Core Graphics drawing, be sure to keep this one handy.&lt;/p&gt;

&lt;h2&gt;Use &lt;code&gt;+initialize&lt;/code&gt;, Not &lt;code&gt;+load&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/shpakovski&quot;&gt;Vadim Shpakovski&lt;/a&gt; wrote in with some advice about class loading and initialization. There are two magical class methods in Objective-C: &lt;code&gt;+load&lt;/code&gt; and &lt;code&gt;+initialize&lt;/code&gt;, which are automatically called by virtue of the class being used. The difference between the two methods, however, has significant performance implications for your application.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.mikeash.com/&quot;&gt;Mike Ash&lt;/a&gt; has a &lt;a href=&quot;http://www.mikeash.com/pyblog/friday-qa-2009-05-22-objective-c-class-loading-and-initialization.html&quot;&gt;great explanation of this&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;+load&lt;/code&gt; is invoked as the class is actually loaded, if it implements the method. This happens very early on. If you implement &lt;code&gt;+load&lt;/code&gt; in an application or in a framework that an application links to, &lt;code&gt;+load&lt;/code&gt; will run before &lt;code&gt;main()&lt;/code&gt;. If you implement &lt;code&gt;+load&lt;/code&gt; in a loadable bundle, then it runs during the bundle loading process.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;+initialize&lt;/code&gt; method is invoked in a more sane environment and is usually a better place to put code than &lt;code&gt;+load&lt;/code&gt;. &lt;code&gt;+initialize&lt;/code&gt; is interesting because it&amp;#39;s invoked lazily and may not be invoked at all. When a class first loads, &lt;code&gt;+initialize&lt;/code&gt; is not called. When a message is sent to a class, the runtime first checks to see if &lt;code&gt;+initialize&lt;/code&gt; has been called yet. If not, it calls it before proceeding with the message send.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;tl;dr: Implement &lt;code&gt;+initialize&lt;/code&gt;, not &lt;code&gt;+load&lt;/code&gt;, if you need this automatic behavior.&lt;/strong&gt;&lt;/p&gt;

&lt;h2&gt;Xcode Snippets&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/MaxGabriel&quot;&gt;Maximilian Tagher&lt;/a&gt; gave a shout-out to the benefits of Xcode Snippets.&lt;/p&gt;

&lt;p&gt;Great developers take pride in knowing their tools, and being able to use them to maximum effect. &lt;a href=&quot;https://twitter.com/javisoto/status/285531250373046272&quot;&gt;For better&lt;/a&gt; or &lt;a href=&quot;http://www.textfromxcode.com&quot;&gt;for worse&lt;/a&gt;, this means knowing Xcode like the back of our hand. Verbose as Objective-C is, &amp;quot;do more by typing less&amp;quot; rings especially true as a productivity mantra, and &lt;a href=&quot;http://developer.apple.com/library/mac/#recipes/xcode_help-source_editor/CreatingaCustomCodeSnippet/CreatingaCustomCodeSnippet.html#//apple_ref/doc/uid/TP40009975-CH14-SW1&quot;&gt;Xcode Snippets&lt;/a&gt; are one of the best ways to do this.&lt;/p&gt;

&lt;p&gt;If you&amp;#39;re looking for a place to start, try downloading and forking &lt;a href=&quot;https://github.com/mattt/Xcode-Snippets&quot;&gt;these Xcode Snippets&lt;/a&gt;.&lt;/p&gt;

&lt;h2&gt;Macro for Measuring Execution Time&lt;/h2&gt;

&lt;p&gt;Here&amp;#39;s a helpful macro for easily measuring the elapsed time for executing a particular block of code, sent in from &lt;a href=&quot;https://github.com/alextud&quot;&gt;@alextud&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NS_INLINE&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;MVComputeTimeWithNameAndBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CFTimeInterval&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startTimeInterval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CACurrentMediaTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CFTimeInterval&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nowTimeInterval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CACurrentMediaTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%s - Time Running is: %f&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nowTimeInterval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startTimeInterval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#define MVComputeTime(...) MVComputeTimeWithNameAndBlock(__PRETTY_FUNCTION__, (__VA_ARGS__))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Block Enumeration Methods&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/joelparsons&quot;&gt;Joel Parsons&lt;/a&gt; submitted a great tip about using &lt;code&gt;-enumerateObjectsWithOptions:usingBlock:&lt;/code&gt; in &lt;code&gt;NSArray&lt;/code&gt; and other collection classes. By passing the &lt;code&gt;NSEnumerationConcurrent&lt;/code&gt; option, you can get significant performance benefits over &lt;code&gt;NSFastEnumeration&lt;/code&gt;&amp;#39;s &lt;code&gt;for...in&lt;/code&gt;-style enumeration by executing the block concurrently.&lt;/p&gt;

&lt;p&gt;However, be warned! Not all enumerations lend themselves to concurrent execution, so don&amp;#39;t go around replacing all of your &lt;code&gt;for...in&lt;/code&gt; blocks with &lt;code&gt;NSEnumerationConcurrent&lt;/code&gt; willy-nilly, unless random crashing is something you like in an app.&lt;/p&gt;

&lt;h2&gt;Reverse-Engineered Implementation of &lt;code&gt;NSString&lt;/code&gt; Equality Methods&lt;/h2&gt;

&lt;p&gt;Displaying his characteristic brilliance and familiarity of Cocoa internals &lt;a href=&quot;https://github.com/0xced&quot;&gt;Cédric Luthi&lt;/a&gt; submitted &lt;a href=&quot;https://gist.github.com/2275014&quot;&gt;a reverse-engineered implementation of the &lt;code&gt;NString&lt;/code&gt; equality methods&lt;/a&gt;. Fascinating!&lt;/p&gt;

&lt;h2&gt;Animate &lt;code&gt;NSLayoutConstraint.constant&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;This one goes out to all you fans of &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853&quot;&gt;Cocoa Auto Layout&lt;/a&gt;, from &lt;a href=&quot;https://github.com/shpakovski&quot;&gt;Vadim Shpakovski&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;viewConstraint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;constant&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Constant&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;From&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layoutIfNeeded&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;viewConstraint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;constant&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Constant&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;To&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setNeedsUpdateConstraints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animateWithDuration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConstantAnimationDuration&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animations&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layoutIfNeeded&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Attentive readers may have already noted this, but the code above would make an &lt;em&gt;excellent&lt;/em&gt; Xcode Snippet, by the way.&lt;/p&gt;

&lt;h2&gt;Printing &lt;code&gt;NSCache&lt;/code&gt; Usage&lt;/h2&gt;

&lt;p&gt;Finishing up this batch of tips and tricks is &lt;a href=&quot;https://github.com/0xced&quot;&gt;Cédric Luthi&lt;/a&gt; again, this time unearthing the private method &lt;code&gt;cache_print&lt;/code&gt; as a way to get some visibility into &lt;a href=&quot;http://nshipster.com/nscache/&quot;&gt;&lt;code&gt;NSCache&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;cache_print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;printCache:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cache_print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This code sample has only been tested on iOS, and should only be used for debugging (i.e. take this out before submitting to Apple!).&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Thanks again to everyone for their submissions this time around. We&amp;#39;ll definitely be doing this again, so feel free to send your favorite piece of Objective-C trivia, framework arcana, hidden Xcode feature, or anything else you think is cool to &lt;a href=&quot;https://twitter.com/nshipster&quot;&gt;@NSHipster&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;And thank you, dear reader, for your support of NSHipster over these last wonderful months. We have a lot of insanely great things planned for NSHipster in 2013, and we look forward to being able to share it all with all of you.&lt;/p&gt;
</description>
        <pubDate>Mon, 31 Dec 2012 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/reader-submissions-new-years-2013/</link>
        <guid>http://nshipster.com/reader-submissions-new-years-2013/</guid>
      </item>
    
      <item>
        <title>CGGeometry</title>
        <description>&lt;p&gt;Unless you were a Math Geek or an Ancient Greek, Geometry was probably not your favorite subject in high school. No, chances are that you were that kid in class who dutifully programmed all of the necessary formulæ into your TI-8X calculator.&lt;/p&gt;

&lt;p&gt;So for those of you who spent more time learning TI-BASIC than Euclidean geometry, here&amp;#39;s the cheat-sheet for how geometry works in &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001066&quot;&gt;Quartz 2D&lt;/a&gt;, the drawing system used in iOS and Mac OS X:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;A &lt;code&gt;CGPoint&lt;/code&gt; is a struct that represents a point in a two-dimensional coordinate system. For iOS, the origin is at the top-left, so points move right and down as their &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; values, respectively, increase. OS X, by contrast, is oriented with &lt;code&gt;(0, 0)&lt;/code&gt; in the bottom left, with &lt;code&gt;y&lt;/code&gt; moving up as it increases.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A &lt;code&gt;CGSize&lt;/code&gt; is a struct that represents the dimensions of &lt;code&gt;width&lt;/code&gt; and &lt;code&gt;height&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A &lt;code&gt;CGRect&lt;/code&gt; is a struct with both a &lt;code&gt;CGPoint&lt;/code&gt; (&lt;code&gt;origin&lt;/code&gt;) and a &lt;code&gt;CGSize&lt;/code&gt; (&lt;code&gt;size&lt;/code&gt;), representing a rectangle drawn from its &lt;code&gt;origin&lt;/code&gt; point with the &lt;code&gt;width&lt;/code&gt; and &lt;code&gt;height&lt;/code&gt; of its &lt;code&gt;size&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Because &lt;code&gt;CGRect&lt;/code&gt; is used to represent the &lt;code&gt;frame&lt;/code&gt; of every view drawn on screen, a programmer&amp;#39;s success in graphical programming is contingent on their ability to effectively manipulate rectangle geometry.&lt;/p&gt;

&lt;p&gt;Fortunately for us, Quartz comes with a slew of useful functions to reduce the amount of floating point math we have to do ourselves. As central as view programming is to Cocoa, and as useful as these functions are, however, they remain relatively unknown to most iOS developers.&lt;/p&gt;

&lt;p&gt;This will not stand! Let&amp;#39;s shine some light on the most useful functions and save y&amp;#39;all some typing!&lt;/p&gt;

&lt;hr&gt;

&lt;h2&gt;Transformations&lt;/h2&gt;

&lt;p&gt;First on our list are the geometric transformations. These functions return a &lt;code&gt;CGRect&lt;/code&gt;, which is the result of performing a particular set of operations on the passed rectangle.&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;CGRectOffset&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;CGRectOffset&lt;/code&gt;: Returns a rectangle with an origin that is offset from that of the source rectangle.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGRectOffset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Consider using this anytime you&amp;#39;re changing the origin of a rectangle. Not only can it save a line of code when changing both the horizontal and vertical position, but more importantly, it represents the translation more semantically than manipulating the origin values individually. &lt;/p&gt;

&lt;h3&gt;&lt;code&gt;CGRectInset&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;CGRectInset&lt;/code&gt;: Returns a rectangle that is smaller or larger than the source rectangle, with the same center point.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGRectInset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Want to make a view-within-a-view look good? Give it a nice 10pt padding with &lt;code&gt;CGRectInset&lt;/code&gt;. Keep in mind that the rectangle will be resized around its center by ± &lt;code&gt;dx&lt;/code&gt; on its left and right edge (for a total of &lt;code&gt;2 × dx&lt;/code&gt;), and ± &lt;code&gt;dy&lt;/code&gt; on its top and bottom edge (for a total of &lt;code&gt;2 × dy&lt;/code&gt;). &lt;/p&gt;

&lt;p&gt;If you&amp;#39;re using &lt;code&gt;CGRectInset&lt;/code&gt; as a convenience function for resizing a rectangle, it is common to chain this with &lt;code&gt;CGRectOffset&lt;/code&gt; by passing the result of &lt;code&gt;CGRectInset&lt;/code&gt; as the &lt;code&gt;rect&lt;/code&gt; argument in &lt;code&gt;CGRectOffset&lt;/code&gt;.  &lt;/p&gt;

&lt;h3&gt;&lt;code&gt;CGRectIntegral&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;CGRectIntegral&lt;/code&gt;: Returns the smallest rectangle that results from converting the source rectangle values to integers.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGRectIntegral&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It&amp;#39;s important that &lt;code&gt;CGRect&lt;/code&gt; values all are rounded to the nearest whole point. Fractional values cause the frame to be drawn on a &lt;em&gt;pixel boundary&lt;/em&gt;. Because pixels are atomic units (cannot be subdivided†) a fractional value will cause the drawing to be averaged over the neighboring pixels, which looks blurry.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;CGRectIntegral&lt;/code&gt; will &lt;code&gt;floor&lt;/code&gt; each origin value, and &lt;code&gt;ceil&lt;/code&gt; each size value, which will ensure that your drawing code will crisply align on pixel boundaries.&lt;/p&gt;

&lt;p&gt;As a rule of thumb, if you are performing any operations that could result in fractional point values (e.g. division, &lt;code&gt;CGGetMid[X|Y]&lt;/code&gt;, or &lt;code&gt;CGRectDivide&lt;/code&gt;), use &lt;code&gt;CGRectIntegral&lt;/code&gt; to normalize rectangles to be set as a view frame.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;† Technically, since the coordinate system operates in terms of points, Retina screens, which have 4 pixels for every point, can draw &lt;code&gt;± 0.5f&lt;/code&gt; point values on odd pixels without blurriness. &lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Value Helper Functions&lt;/h2&gt;

&lt;p&gt;These functions provide a shorthand way to calculate interesting dimensional values about a particular &lt;code&gt;CGRect&lt;/code&gt;.&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;CGRectGet[Min|Mid|Max][X|Y]&lt;/code&gt;&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;CGRectGetMinX&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CGRectGetMinY&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CGRectGetMidX&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CGRectGetMidY&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CGRectGetMaxX&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CGRectGetMaxY&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These six functions return the minimum, middle, or maximum &lt;code&gt;x&lt;/code&gt; or &lt;code&gt;y&lt;/code&gt; value for a rectangle, taking the form: &lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGRectGet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Min&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Mid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;These functions will replace code like &lt;code&gt;frame.origin.x + frame.size.width&lt;/code&gt; with cleaner, more semantically expressive equivalents (especially with the mid and max functions).&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;CGRectGet[Width|Height]&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;CGRectGetHeight&lt;/code&gt;: Returns the height of a rectangle.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGRectGetHeight&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;CGRectGetWidth&lt;/code&gt;: Returns the width of a rectangle.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGRectGetWidth&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Much like the previous functions, &lt;code&gt;CGRectGetWidth&lt;/code&gt; &amp;amp; &lt;code&gt;CGRectGetHeight&lt;/code&gt; are often preferable to returning the corresponding member of a &lt;code&gt;CGRect&lt;/code&gt;&amp;#39;s &lt;code&gt;size&lt;/code&gt;. While it&amp;#39;s not extremely competitive in terms of character savings, remember that semantic clarity trumps brevity every time. &lt;/p&gt;

&lt;h2&gt;Identities&lt;/h2&gt;

&lt;p&gt;There are three special rectangle values, each of which have unique properties that are important to know about:&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;CGRectZero&lt;/code&gt;, &lt;code&gt;CGRectNull&lt;/code&gt;, &amp;amp; &lt;code&gt;CGRectInfinite&lt;/code&gt;&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;const CGRect CGRectZero&lt;/code&gt;: A rectangle constant with location (0,0), and width and height of 0. The zero rectangle is equivalent to CGRectMake(0.0f, 0.0f, 0.0f, 0.0f).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;const CGRect CGRectNull&lt;/code&gt;: The null rectangle. This is the rectangle returned when, for example, you intersect two disjoint rectangles. &lt;strong&gt;Note that the null rectangle is not the same as the zero rectangle&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;const CGRect CGRectInfinite&lt;/code&gt;: A rectangle that has infinite extent.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;CGRectZero&lt;/code&gt; is perhaps the most useful of all of the special rectangle values. When initializing subviews, their frames are often initialized to &lt;code&gt;CGRectZero&lt;/code&gt;, deferring their layout to &lt;code&gt;-layoutSubviews&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;CGRectNull&lt;/code&gt; is distinct from &lt;code&gt;CGRectZero&lt;/code&gt;, despite any implied correspondence to &lt;code&gt;NULL&lt;/code&gt; == &lt;code&gt;0&lt;/code&gt;. This value is conceptually similar to &lt;code&gt;NSNotFound&lt;/code&gt;, in that it represents the absence of an expected value. Be aware of what functions can return &lt;code&gt;CGRectNull&lt;/code&gt;, and be prepared to handle it accordingly, by testing with &lt;code&gt;CGRectIsNull&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;CGRectInfinite&lt;/code&gt; is the most exotic of all, and has some of the most interesting properties. It intersects with all points and rectangles, contains all rectangles, and its union with any rectangle is itself. Use &lt;code&gt;CGRectIsInfinite&lt;/code&gt; to check to see if a rectangle is infinite.&lt;/p&gt;

&lt;h2&gt;And Finally...&lt;/h2&gt;

&lt;p&gt;Behold, the most obscure, misunderstood, and useful of the &lt;code&gt;CGGeometry&lt;/code&gt; functions: &lt;code&gt;CGRectDivide&lt;/code&gt;.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;CGRectDivide&lt;/code&gt;&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;CGRectDivide&lt;/code&gt;: Divides a source rectangle into two component rectangles.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGRectDivide&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGRect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remainder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;CGRectEdge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;edge&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;CGRectDivide&lt;/code&gt; divides a rectangle into two components in the following way:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Take a rectangle and choose an &lt;code&gt;edge&lt;/code&gt; (left, right, top, or bottom). &lt;/li&gt;
&lt;li&gt;Measure out an &lt;code&gt;amount&lt;/code&gt; from that edge.&lt;/li&gt;
&lt;li&gt;Everything from the &lt;code&gt;edge&lt;/code&gt; to the measured &lt;code&gt;amount&lt;/code&gt; is stored in the rectangle referenced in the &lt;code&gt;slice&lt;/code&gt; argument.&lt;/li&gt;
&lt;li&gt;The rest of the original rectangle is stored in the &lt;code&gt;remainder&lt;/code&gt; out argument.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;That &lt;code&gt;edge&lt;/code&gt; argument takes a value from the &lt;code&gt;CGRectEdge&lt;/code&gt; enum:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGRectEdge&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CGRectMinXEdge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CGRectMinYEdge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CGRectMaxXEdge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CGRectMaxYEdge&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;CGRectDivide&lt;/code&gt; is perfect for dividing up available space among several views (call it on subsequent &lt;code&gt;remainder&lt;/code&gt; amounts to accommodate more than two views). Give it a try next time you&amp;#39;re manually laying-out a &lt;code&gt;UITableViewCell&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;So what if you didn&amp;#39;t pay attention in Geometry class--this is the real world, and in the real world, you have &lt;code&gt;CGGeometry.h&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Know it well, and you&amp;#39;ll be on your way to discovering great new user interfaces in your apps. Do good enough of a job with that, and you may run into the greatest arithmetic problem of all: adding up all of the money you&amp;#39;ll make with your awesome new app. Mathematical!&lt;/p&gt;
</description>
        <pubDate>Mon, 17 Dec 2012 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/cggeometry/</link>
        <guid>http://nshipster.com/cggeometry/</guid>
      </item>
    
      <item>
        <title>instancetype</title>
        <description>&lt;p&gt;Want to know what&amp;#39;s coming next in Objective-C? &lt;a href=&quot;http://clang.llvm.org/docs/LanguageExtensions.html&quot;&gt;Keep your ear to the ground&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Objective-C is a rapidly evolving language, in a way that you just don&amp;#39;t see in established programming languages. ARC, object literals, subscripting, blocks: in the span of just three years, so much of how we program in Objective-C has been changed (for the better).&lt;/p&gt;

&lt;p&gt;All of this innovation is a result of Apple&amp;#39;s philosophy of vertical integration. Just as Apple&amp;#39;s investment in designing &lt;a href=&quot;http://en.wikipedia.org/wiki/Apple_A4&quot;&gt;its own chipsets&lt;/a&gt; gave them leverage to compete aggressively with their mobile hardware, so too has their investment in &lt;a href=&quot;http://llvm.org&quot;&gt;LLVM&lt;/a&gt; allowed their software to keep pace.&lt;/p&gt;

&lt;p&gt;Clang developments range from the mundane to paradigm-changing, but telling the difference takes practice. Because we&amp;#39;re talking about low-level language features, it&amp;#39;s difficult to understand what implications they may have higher up with API design.&lt;/p&gt;

&lt;p&gt;One such example is &lt;code&gt;instancetype&lt;/code&gt;, the subject of this week&amp;#39;s article.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;In Objective-C, conventions aren&amp;#39;t just a matter of coding best-practices, they are implicit instructions to the compiler.&lt;/p&gt;

&lt;p&gt;For example, &lt;code&gt;alloc&lt;/code&gt; and &lt;code&gt;init&lt;/code&gt; both have return types of &lt;code&gt;id&lt;/code&gt;, yet in Xcode, the compiler makes all of the correct type checks. How is this possible?&lt;/p&gt;

&lt;p&gt;In Cocoa, there is a convention that methods with names like &lt;code&gt;alloc&lt;/code&gt;, or &lt;code&gt;init&lt;/code&gt; always return objects that are an instance of the receiver class. These methods are said to have a &lt;strong&gt;related result type&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Class constructor methods, although they similarly return &lt;code&gt;id&lt;/code&gt;, don&amp;#39;t get the same type-checking benefit, because they don&amp;#39;t follow that naming convention.&lt;/p&gt;

&lt;p&gt;You can try this out for yourself:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mediaPlaybackAllowsAirPlay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ❗ &amp;quot;No visible @interface for `NSArray` declares the selector `mediaPlaybackAllowsAirPlay`&amp;quot;&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mediaPlaybackAllowsAirPlay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// (No error)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Because &lt;code&gt;alloc&lt;/code&gt; and &lt;code&gt;init&lt;/code&gt; follow the naming convention for being a related result type, the correct type check against &lt;code&gt;NSArray&lt;/code&gt; is performed. However, the equivalent class constructor &lt;code&gt;array&lt;/code&gt; does not follow that convention, and is interpreted as &lt;code&gt;id&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;id&lt;/code&gt; is useful for opting-out of type safety, but losing it when you &lt;em&gt;do&lt;/em&gt; want it sucks.&lt;/p&gt;

&lt;p&gt;The alternative, of explicitly declaring the return type (&lt;code&gt;(NSArray *)&lt;/code&gt; in the previous example) is a slight improvement, but is annoying to write, and doesn&amp;#39;t play nicely with subclasses.&lt;/p&gt;

&lt;p&gt;This is where the compiler steps in to resolve this timeless edge case to the Objective-C type system:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;instancetype&lt;/code&gt; is a contextual keyword that can be used as a result type to signal that a method returns a related result type. For example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;personWithName:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;instancetype&lt;/code&gt;, unlike &lt;code&gt;id&lt;/code&gt;, can only be used as the result type in a method declaration.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;With &lt;code&gt;instancetype&lt;/code&gt;, the compiler will correctly infer that the result of &lt;code&gt;+personWithName:&lt;/code&gt; is an instance of a &lt;code&gt;Person&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Look for class constructors in Foundation to start using &lt;code&gt;instancetype&lt;/code&gt; in the near future. New APIs, such as &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewLayoutAttributes_class/Reference/Reference.html&quot;&gt;UICollectionViewLayoutAttributes&lt;/a&gt; are using &lt;code&gt;instancetype&lt;/code&gt; already.&lt;/p&gt;

&lt;h2&gt;Further Implications&lt;/h2&gt;

&lt;p&gt;Language features are particularly interesting because, again, it&amp;#39;s often unclear of what impact they&amp;#39;ll have on higher-level aspects of software design.&lt;/p&gt;

&lt;p&gt;While &lt;code&gt;instancetype&lt;/code&gt; may seem to be a rather mundane, albeit welcome addition to the compiler, it can be used to some rather clever ends.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://twitter.com/jonsterling&quot;&gt;Jonathan Sterling&lt;/a&gt; wrote &lt;a href=&quot;http://www.jonmsterling.com/posts/2012-02-05-typed-collections-with-self-types-in-objective-c.html&quot;&gt;this quite interesting article&lt;/a&gt;, detailing how &lt;code&gt;instancetype&lt;/code&gt; could be used to encode statically-typed collections, without &lt;a href=&quot;http://en.wikipedia.org/wiki/Generic_programming&quot;&gt;generics&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MapCollection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sites&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mapCollection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sites&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http://www.jonmsterling.com/&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;at:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;jon&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sites&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;http://www.nshipster.com/&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;at:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;nshipster&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jonsSite&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sites&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;jon&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// =&amp;gt; http://www.jonmsterling.com/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Statically-typed collections would make APIs more expressive--no longer would a developer be unsure about what kinds of objects are allowed in a collection parameter.&lt;/p&gt;

&lt;p&gt;Whether or not this becomes an accepted convention in Objective-C, it&amp;#39;s fascinating to how a low-level feature like &lt;code&gt;instancetype&lt;/code&gt; can be used to change shape of the language (in this case, making it look more like &lt;a href=&quot;http://en.wikipedia.org/wiki/C_Sharp_(programming_language)&quot;&gt;C#&lt;/a&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;instancetype&lt;/code&gt; is just one of the many language extensions to Objective-C, with more being added with each new release. &lt;/p&gt;

&lt;p&gt;Know it, love it.&lt;/p&gt;

&lt;p&gt;And take it as an example of how paying attention to the low-level details can give you insights into powerful new ways to transform Objective-C.&lt;/p&gt;
</description>
        <pubDate>Mon, 10 Dec 2012 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/instancetype/</link>
        <guid>http://nshipster.com/instancetype/</guid>
      </item>
    
      <item>
        <title>KVC Collection Operators</title>
        <description>&lt;p&gt;Rubyists laugh at Objective-C&amp;#39;s bloated syntax. &lt;/p&gt;

&lt;p&gt;Although we lost a few pounds over the summer with our &lt;a href=&quot;http://nshipster.com/at-compiler-directives/&quot;&gt;sleek new object literals&lt;/a&gt;, those Red-headed bullies still taunt us with their &lt;code&gt;map&lt;/code&gt; one-liners and their fancy &lt;a href=&quot;http://pragdave.pragprog.com/pragdave/2005/11/symbolto_proc.html&quot;&gt;&lt;code&gt;Symbol#to_proc&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Really, a lot of how elegant (or clever) a language is comes down to how well it avoids loops. &lt;code&gt;for&lt;/code&gt;, &lt;code&gt;while&lt;/code&gt;; even &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html&quot;&gt;fast enumeration expressions&lt;/a&gt; are a drag. No matter how you sugar-coat them, loops will be a block of code that does something that is much simpler to describe in natural language.&lt;/p&gt;

&lt;p&gt;&amp;quot;get me the average salary of all of the employees in this array&amp;quot;, versus...&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;totalSalary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Employee&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;employee&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;employees&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;totalSalary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;employee&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;salary&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;doubleValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;averageSalary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;totalSalary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;employees&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Meh. &lt;/p&gt;

&lt;p&gt;Fortunately, &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html&quot;&gt;Key-Value Coding&lt;/a&gt; gives us a much more concise--almost Ruby-like--way to do this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;employees&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;@avg.salary&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html#//apple_ref/doc/uid/20002176-BAJEAIEE&quot;&gt;KVC Collection Operators&lt;/a&gt; allows actions to be performed on a collection using key path notation in &lt;code&gt;valueForKeyPath:&lt;/code&gt;. Any time you see &lt;code&gt;@&lt;/code&gt; in a key path, it denotes a particular aggregate function whose result can be returned or chained, just like any other key path.&lt;/p&gt;

&lt;p&gt;Collection Operators fall into one of three different categories, according to the kind of value they return:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Simple Collection Operators&lt;/strong&gt; return strings, numbers, or dates, depending on the operator.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Object Operators&lt;/strong&gt; return an array.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Array and Set Operators&lt;/strong&gt; return an array or set, depending on the operator.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The best way to understand how these work is to see them in action. Consider a &lt;code&gt;Product&lt;/code&gt; class, and a &lt;code&gt;products&lt;/code&gt; array with the following data:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Product&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;price&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;launchedOn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Key-Value Coding automatically boxes and un-boxes scalars into &lt;code&gt;NSNumber&lt;/code&gt; or &lt;code&gt;NSValue&lt;/code&gt; as necessary to make everything work.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Name&lt;/th&gt;
      &lt;th&gt;Price&lt;/th&gt;
      &lt;th&gt;Launch Date&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;iPhone 5&lt;/td&gt;
      &lt;td&gt;$199&lt;/td&gt;
      &lt;td&gt;September 21, 2012&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;iPad Mini&lt;/td&gt;
      &lt;td&gt;$329&lt;/td&gt;
      &lt;td&gt;November 2, 2012&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MacBook Pro&lt;/td&gt;
      &lt;td&gt;$1699&lt;/td&gt;
      &lt;td&gt;June 11, 2012&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;iMac&lt;/td&gt;
      &lt;td&gt;$1299&lt;/td&gt;
      &lt;td&gt;November 2, 2012&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3&gt;Simple Collection Operators&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@count&lt;/code&gt;: Returns the number of objects in the collection as an &lt;code&gt;NSNumber&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@sum&lt;/code&gt;: Converts each object in the collection to a &lt;code&gt;double&lt;/code&gt;, computes the sum, and returns the sum as an &lt;code&gt;NSNumber&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@avg&lt;/code&gt;: Takes the &lt;code&gt;double&lt;/code&gt; value of each object in the collection, and returns the average value as an &lt;code&gt;NSNumber&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@max&lt;/code&gt;: Determines the maximum value using &lt;code&gt;compare:&lt;/code&gt;. Objects must support comparison with one another for this to work.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@min&lt;/code&gt;: Same as &lt;code&gt;@max&lt;/code&gt;, but returns the minimum value in the collection.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Example&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;products&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;@count&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 4&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;products&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;@sum.price&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 3526.00&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;products&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;@avg.price&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 881.50&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;products&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;@max.price&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 1699.00&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;products&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;@min.launchedOn&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// June 11, 2012&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Pro Tip: To get the aggregate value of an array or set of &lt;code&gt;NSNumber&lt;/code&gt;s, you can simply pass &lt;code&gt;self&lt;/code&gt; as the key path after the operator, e.g. &lt;code&gt;[@[@(1), @(2), @(3)] valueForKeyPath:@&amp;quot;@max.self&amp;quot;]&lt;/code&gt; (/via &lt;a href=&quot;http://twitter.com/davandermobile&quot;&gt;@davandermobile&lt;/a&gt;, citing &lt;a href=&quot;http://objectivesea.tumblr.com/post/34552840247/max-value-nsset-kvc&quot;&gt;Objective Sea&lt;/a&gt;)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;Object Operators&lt;/h3&gt;

&lt;p&gt;Let&amp;#39;s say we have an &lt;code&gt;inventory&lt;/code&gt; array, representing the current stock of our local Apple store (which is running low on iPad Mini, and doesn&amp;#39;t have the new iMac, which hasn&amp;#39;t shipped yet):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inventory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iPhone5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iPhone5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iPhone5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iPadMini&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;macBookPro&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;macBookPro&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@unionOfObjects&lt;/code&gt; / &lt;code&gt;@distinctUnionOfObjects&lt;/code&gt;: Returns an array of the objects in the property specified in the key path to the right of the operator. &lt;code&gt;@distinctUnionOfObjects&lt;/code&gt; removes duplicates, whereas &lt;code&gt;@unionOfObjects&lt;/code&gt; does not.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Example&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inventory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;@unionOfObjects.name&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// &amp;quot;iPhone 5&amp;quot;, &amp;quot;iPhone 5&amp;quot;, &amp;quot;iPhone 5&amp;quot;, &amp;quot;iPad Mini&amp;quot;, &amp;quot;MacBook Pro&amp;quot;, &amp;quot;MacBook Pro&amp;quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inventory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;@distinctUnionOfObjects.name&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// &amp;quot;iPhone 5&amp;quot;, &amp;quot;iPad Mini&amp;quot;, &amp;quot;MacBook Pro&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Array and Set Operators&lt;/h3&gt;

&lt;p&gt;Array and Set Operators are similar to Object Operators, but they work on collections of &lt;code&gt;NSArray&lt;/code&gt; and &lt;code&gt;NSSet&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This would be useful if we were to, for example, compare the inventory of several stores, say &lt;code&gt;appleStoreInventory&lt;/code&gt;, (same as in the previous example) and &lt;code&gt;verizonStoreInventory&lt;/code&gt; (which sells iPhone 5 and iPad Mini, and has both in stock).&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@distinctUnionOfArrays&lt;/code&gt; / &lt;code&gt;@unionOfArrays&lt;/code&gt;: Returns an array containing the combined values of each array in the collection, as specified by the key path to the right of the operator. As you&amp;#39;d expect, the &lt;code&gt;distinct&lt;/code&gt; version removes duplicate values.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@distinctUnionOfSets&lt;/code&gt;: Similar to &lt;code&gt;@distinctUnionOfArrays&lt;/code&gt;, but it expects an &lt;code&gt;NSSet&lt;/code&gt; containing &lt;code&gt;NSSet&lt;/code&gt; objects, and returns an &lt;code&gt;NSSet&lt;/code&gt;. Because sets can&amp;#39;t contain duplicate values anyway, there is only the &lt;code&gt;distinct&lt;/code&gt; operator.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Example&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[@[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;appleStoreInventory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;verizonStoreInventory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;@distinctUnionOfArrays.name&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// &amp;quot;iPhone 5&amp;quot;, &amp;quot;iPad Mini&amp;quot;, &amp;quot;MacBook Pro&amp;quot;  &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;h2&gt;This is Probably a Terrible Idea&lt;/h2&gt;

&lt;p&gt;Curiously, &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html&quot;&gt;Apple&amp;#39;s documentation on KVC collection operators&lt;/a&gt; goes out of its way to make the following point:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: It is not currently possible to define your own collection operators.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This makes sense to spell out, since that&amp;#39;s what most people are thinking about once they see collection operators for the first time. &lt;/p&gt;

&lt;p&gt;However, as it turns out, it &lt;em&gt;is&lt;/em&gt; actually possible, with a little help from our friend, &lt;code&gt;objc/runtime&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://twitter.com/gte&quot;&gt;Guy English&lt;/a&gt; has a &lt;a href=&quot;http://kickingbear.com/blog/archives/9&quot;&gt;pretty amazing post&lt;/a&gt; wherein he &lt;a href=&quot;https://gist.github.com/4196641#file_kb_collection_extensions.m&quot;&gt;swizzles &lt;code&gt;valueForKeyPath:&lt;/code&gt;&lt;/a&gt; to parse a custom-defined &lt;a href=&quot;http://en.wikipedia.org/wiki/Domain-specific_language&quot;&gt;DSL&lt;/a&gt;, which extends the existing offerings to interesting effect:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;names&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;allEmployees&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;[collect].{daysOff&amp;lt;10}.name&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This code would get the names of anyone who has taken fewer than 10 days off (to remind them to take a vacation, no doubt!).&lt;/p&gt;

&lt;p&gt;Or, taken to a ridiculous extreme:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;albumCovers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;records&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueForKeyPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;[collect].{artist like &amp;#39;Bon Iver&amp;#39;}.&amp;lt;NSUnarchiveFromDataTransformerName&amp;gt;.albumCoverImageData&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Eat your heart out, Ruby. This one-liner filters a record collection for artists whose name matches &amp;quot;Bon Iver&amp;quot;, and initializes an &lt;code&gt;NSImage&lt;/code&gt; from the album cover image data of the matching albums.&lt;/p&gt;

&lt;p&gt;Is this a good idea? Probably not. (&lt;code&gt;NSPredicate&lt;/code&gt; is rad, and breaking complicated logic up is under-rated)&lt;/p&gt;

&lt;p&gt;Is this insanely cool? You bet! This clever example has shown a possible direction for future Objective-C DSLs and meta-programming.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;KVC Collection Operators are a must-know for anyone who wants to save a few extra lines of code and look cool in the process. &lt;/p&gt;

&lt;p&gt;While scripting languages like Ruby boast considerably more flexibility in its one-liner capability, perhaps we should take a moment to celebrate the restraint built into Objective-C and Collection Operators. After all, Ruby is hella slow, amiright? &amp;lt;/troll&amp;gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 03 Dec 2012 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/kvc-collection-operators/</link>
        <guid>http://nshipster.com/kvc-collection-operators/</guid>
      </item>
    
      <item>
        <title>NSOrderedSet</title>
        <description>&lt;p&gt;Here&amp;#39;s a question: why isn&amp;#39;t &lt;code&gt;NSOrderedSet&lt;/code&gt; a subclass of &lt;code&gt;NSSet&lt;/code&gt;?&lt;/p&gt;

&lt;p&gt;It seems perfectly logical, after all, for &lt;code&gt;NSOrderedSet&lt;/code&gt;--a class that enforces the same uniqueness constraint of &lt;code&gt;NSSet&lt;/code&gt;--to be a &lt;em&gt;subclass&lt;/em&gt; of &lt;code&gt;NSSet&lt;/code&gt;. It has the same methods as &lt;code&gt;NSSet&lt;/code&gt;, with the addition of some &lt;code&gt;NSArray&lt;/code&gt;-style methods like &lt;code&gt;objectAtIndex:&lt;/code&gt;. By all accounts, it would seem to perfectly satisfy the requirements of the &lt;a href=&quot;http://en.wikipedia.org/wiki/Liskov_substitution_principle&quot;&gt;Liskov substitution principle&lt;/a&gt;, that:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If &lt;code&gt;S&lt;/code&gt; is a subtype of &lt;code&gt;T&lt;/code&gt;, then objects of type &lt;code&gt;T&lt;/code&gt; in a program may be replaced with objects of type &lt;code&gt;S&lt;/code&gt; without altering any of the desirable properties of that program.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So why is &lt;code&gt;NSOrderedSet&lt;/code&gt; a subclass of &lt;code&gt;NSObject&lt;/code&gt; and not &lt;code&gt;NSSet&lt;/code&gt; or even &lt;code&gt;NSArray&lt;/code&gt;?&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mutable / Immutable Class Clusters&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html%23//apple_ref/doc/uid/TP40002974-CH4-SW34&quot;&gt;Class Clusters&lt;/a&gt; are a design pattern at the heart of the Foundation framework; the essence of Objective-C&amp;#39;s simplicity in everyday use.&lt;/p&gt;

&lt;p&gt;But class clusters offer simplicity at the expense of extensibility, which becomes especially tricky when it comes to mutable / immutable class pairs like &lt;code&gt;NSSet&lt;/code&gt; / &lt;code&gt;NSMutableSet&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;As expertly demonstrated by &lt;a href=&quot;http://tomdalling.com&quot;&gt;Tom Dalling&lt;/a&gt; in &lt;a href=&quot;http://stackoverflow.com/questions/11278995/why-doesnt-nsorderedset-inherit-from-nsset&quot;&gt;this Stack Overflow question&lt;/a&gt;, the method &lt;code&gt;-mutableCopy&lt;/code&gt; creates an inconsistency that is inherent to Objective-C&amp;#39;s constraint on single inheritance.&lt;/p&gt;

&lt;p&gt;To start, let&amp;#39;s look at how &lt;code&gt;-mutableCopy&lt;/code&gt; is supposed to work in a class cluster:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;immutable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSMutableSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;immutable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutableCopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// YES&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// YES&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now let&amp;#39;s suppose that &lt;code&gt;NSOrderedSet&lt;/code&gt; was indeed a subclass of &lt;code&gt;NSSet&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// @interface NSOrderedSet : NSSet&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSOrderedSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;immutable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSOrderedSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;orderedSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSMutableOrderedSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;immutable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutableCopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// YES&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// NO (!)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;object data=&quot;http://nshipster.s3.amazonaws.com/nsorderedset-case-1.svg&quot; type=&quot;image/svg+xml&quot;&gt;
  &lt;img src=&quot;http://nshipster.s3.amazonaws.com/nsorderedset-case-1.png&quot; /&gt;
&lt;/object&gt;&lt;/p&gt;

&lt;p&gt;That&amp;#39;s no good... since &lt;code&gt;NSMutableOrderedSet&lt;/code&gt; couldn&amp;#39;t be used as a method parameter of type &lt;code&gt;NSMutableSet&lt;/code&gt;. So what happens if we make &lt;code&gt;NSMutableOrderedSet&lt;/code&gt; a subclass of &lt;code&gt;NSMutableSet&lt;/code&gt; as well?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// @interface NSOrderedSet : NSSet&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// @interface NSMutableOrderedSet : NSMutableSet&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSOrderedSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;immutable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSOrderedSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;orderedSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSMutableOrderedSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;immutable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutableCopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// YES&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// YES&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSOrderedSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// NO (!)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;object data=&quot;http://nshipster.s3.amazonaws.com/nsorderedset-case-2.svg&quot; type=&quot;image/svg+xml&quot;&gt;
  &lt;img src=&quot;http://nshipster.s3.amazonaws.com/nsorderedset-case-2.png&quot; /&gt;
&lt;/object&gt;&lt;/p&gt;

&lt;p&gt;This is perhaps even worse, as now &lt;code&gt;NSMutableOrderedSet&lt;/code&gt; couldn&amp;#39;t be used as a method parameter expecting an &lt;code&gt;NSOrderedSet&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;No matter how we approach it, we can&amp;#39;t stack a mutable / immutable class pair on top of another existing mutable / immutable class pair. It just won&amp;#39;t work in Objective-C.&lt;/p&gt;

&lt;p&gt;Rather than subject ourselves to the perils of &lt;a href=&quot;http://en.wikipedia.org/wiki/Multiple_inheritance&quot;&gt;multiple inheritance&lt;/a&gt;, we could use Protocols to get us out of this pickle (as it does every other time the spectre of multiple inheritance is raised). Indeed, Foundation&amp;#39;s collection classes &lt;em&gt;could&lt;/em&gt; become more aspect-oriented by adding protocols:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSArray : NSObject &amp;lt;NSOrderedCollection&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSSet : NSObject &amp;lt;NSUniqueCollection&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSOrderedSet : NSObject &amp;lt;NSOrderedCollection, NSUniqueCollection&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;However, to reap any benefit from this arrangement, all of the existing APIs would have to be restructured to have parameters accept &lt;code&gt;id &amp;lt;NSOrderedCollection&amp;gt;&lt;/code&gt; instead of &lt;code&gt;NSArray&lt;/code&gt;. But the transition would be painful, and would likely open up a whole can of edge cases... which would mean that it would never be fully adopted... which would mean that there&amp;#39;s less incentive to adopt this approach when defining your own APIs... which are less fun to write because there&amp;#39;s now two incompatible ways to do something instead of one... which...&lt;/p&gt;

&lt;p&gt;...wait, why would we use &lt;code&gt;NSOrderedSet&lt;/code&gt; in the first place, anyway?&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSOrderedSet&lt;/code&gt; was introduced in iOS 5 &amp;amp; Mac OS X 10.7. The only APIs changed to add support for &lt;code&gt;NSOrderedSet&lt;/code&gt;, though, were part of &lt;a href=&quot;http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html&quot;&gt;Core Data&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This was fantastic news for anyone using Core Data at the time, as it solved one of the long-standing annoyances of not having a way to arbitrarily order relationship collections. Previously, you&amp;#39;d have to add a &lt;code&gt;position&lt;/code&gt; attribute, which would be re-calculated every time a collection was modified. There wasn&amp;#39;t a built-in way to validate that your collection positions were unique or that the sequence didn&amp;#39;t have any gaps.&lt;/p&gt;

&lt;p&gt;In this way, &lt;code&gt;NSOrderedSet&lt;/code&gt; is an &lt;em&gt;answer to our &lt;a href=&quot;http://bugreport.apple.com/&quot;&gt;prayers&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Unfortunately, its very existence in Foundation has created something between an attractive nuisance and a red herring for API designers. &lt;/p&gt;

&lt;p&gt;Although it is perfectly suited to that one particular use case in Core Data, &lt;code&gt;NSOrderedSet&lt;/code&gt; is probably not a great choice for the majority of APIs that could potentially use it. In cases where a simple collection of objects is passed as a parameter, a simple &lt;code&gt;NSArray&lt;/code&gt; does the trick--even if there is an implicit understanding that you shouldn&amp;#39;t have duplicate entries. This is even more the case when order matters for a collection parameter--just use &lt;code&gt;NSArray&lt;/code&gt; (there should be code to deal with duplicates in the implementation anyway). If uniqueness does matter, or the semantics of sets makes sense for a particular method, &lt;code&gt;NSSet&lt;/code&gt; has and remains a great choice.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;So, as a general rule: &lt;strong&gt;&lt;code&gt;NSOrderedSet&lt;/code&gt; is useful for intermediary and internal representations, but you probably shouldn&amp;#39;t introduce it as a method parameters unless it&amp;#39;s particularly well-suited to the semantics of the data model.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;If nothing else, &lt;code&gt;NSOrderedSet&lt;/code&gt; illuminates some of the fascinating implications of Foundation&amp;#39;s use of the class cluster design pattern. In doing so, it allows us better understand the trade-off between simplicity and extensibility as we make these choices in our own application designs.&lt;/p&gt;
</description>
        <pubDate>Mon, 26 Nov 2012 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nsorderedset/</link>
        <guid>http://nshipster.com/nsorderedset/</guid>
      </item>
    
      <item>
        <title>NS_ENUM &amp; NS_OPTIONS</title>
        <description>&lt;p&gt;When everything is an object, nothing is.&lt;/p&gt;

&lt;p&gt;So, there are a few ways you could parse that, but for the purposes of this article, this is all to say: sometimes it&amp;#39;s nice to be able to drop down to the C layer of things.&lt;/p&gt;

&lt;p&gt;Yes--that non-objective part of our favorite Smalltalk-inspired hybrid language, C can be a great asset. It&amp;#39;s fast, it&amp;#39;s battle-tested, it&amp;#39;s the very foundation of modern computing. But more than that, C is the escape hatch for when the Object-Oriented paradigm cracks under its own cognitive weight.&lt;/p&gt;

&lt;p&gt;Static functions are nicer than shoe-horned class methods.&lt;br&gt;
Enums are nicer than string constants.&lt;br&gt;
Bitmasks are nicer than arrays of string constants.&lt;br&gt;
Preprocessor directives are nicer than runtime hacks.&lt;/p&gt;

&lt;p&gt;A skilled Objective-C developer is able to gracefully switch between Objective and Procedural paradigms, and use each to their own advantage.&lt;/p&gt;

&lt;p&gt;And on that note, this week&amp;#39;s topic has to do with two simple-but-handy macros: &lt;code&gt;NS_ENUM&lt;/code&gt; and &lt;code&gt;NS_OPTIONS&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Introduced in Foundation with iOS 6 / Mac OS X 10.8, the &lt;code&gt;NS_ENUM&lt;/code&gt; and &lt;code&gt;NS_OPTIONS&lt;/code&gt; macros are the new, preferred way to declare &lt;code&gt;enum&lt;/code&gt; types.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If you&amp;#39;d like to use either macro when targeting a previous version of iOS or OS X, you can simply inline like so:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#ifndef NS_ENUM&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define NS_ENUM(_type, _name) enum _name : _type _name; enum _name : _type&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#endif&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;enum&lt;/code&gt;, or enumerated value types, are the C way to define constants for fixed values, like days of the week, or available styles of table view cells. In an &lt;code&gt;enum&lt;/code&gt; declaration, constants without explicit values will automatically be assigned values sequentially, starting from &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;There are several legal ways that &lt;code&gt;enum&lt;/code&gt;s can be defined. What&amp;#39;s confusing is that there are subtle functional differences between each approach, and without knowing any better, someone is just as likely to use them interchangeably. &lt;/p&gt;

&lt;p&gt;For instance:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleValue1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleValue2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleSubtitle&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...declares integer values, but no type. &lt;/p&gt;

&lt;p&gt;Whereas:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleValue1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleValue2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleSubtitle&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UITableViewCellStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...defines the &lt;code&gt;UITableViewCellStyle&lt;/code&gt; type, suitable for specifying the type of method parameters.&lt;/p&gt;

&lt;p&gt;However, Apple had previously defined all of their &lt;code&gt;enum&lt;/code&gt; types as:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleValue1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleValue2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleSubtitle&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UITableViewCellStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;...which ensures a fixed size for &lt;code&gt;UITableViewCellStyle&lt;/code&gt;, but does nothing to hint the relation between the aforementioned &lt;code&gt;enum&lt;/code&gt; and the new type to the compiler.&lt;/p&gt;

&lt;p&gt;Thankfully, Apple has decided on &amp;quot;One Macro To Rule Them All&amp;quot; with &lt;code&gt;NS_ENUM&lt;/code&gt;.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;NS_ENUM&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Now, &lt;code&gt;UITableViewCellStyle&lt;/code&gt; is declared with:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NS_ENUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UITableViewCellStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleValue1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleValue2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UITableViewCellStyleSubtitle&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The first argument for &lt;code&gt;NS_ENUM&lt;/code&gt; is the type used to store the new type. In a 64-bit environment, &lt;code&gt;UITableViewCellStyle&lt;/code&gt; will be 8 bytes long--same as &lt;code&gt;NSInteger&lt;/code&gt;. Make sure that the specified size can fit all of the defined values, or else an error will be generated. The second argument is the name of the new type (as you probably guessed). Inside the block, the values are defined as usual.&lt;/p&gt;

&lt;p&gt;This approach combines the best of all of the aforementioned approaches, and even provides hints to the compiler for type-checking and &lt;code&gt;switch&lt;/code&gt; statement completeness.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;NS_OPTIONS&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;enum&lt;/code&gt; can also be used to define a &lt;a href=&quot;http://en.wikipedia.org/wiki/Mask_(computing)&quot;&gt;bitmask&lt;/a&gt;. Using a convenient property of binary math, a single integer value can encode a combination of values all at once using the bitwise &lt;code&gt;OR&lt;/code&gt; (&lt;code&gt;|&lt;/code&gt;), and decoded with bitwise &lt;code&gt;AND&lt;/code&gt; (&lt;code&gt;&amp;amp;&lt;/code&gt;). Each subsequent value, rather than automatically being incremented by 1 from 0, are manually given a value with a bit offset: &lt;code&gt;1 &amp;lt;&amp;lt; 0&lt;/code&gt;, &lt;code&gt;1 &amp;lt;&amp;lt; 1&lt;/code&gt;, &lt;code&gt;1 &amp;lt;&amp;lt; 2&lt;/code&gt;, and so on. If you imagine the binary representation of a number, like &lt;code&gt;10110&lt;/code&gt; for 22, each bit can be though to represent a single boolean. In UIKit, for example, &lt;code&gt;UIViewAutoresizing&lt;/code&gt; is a bitmask that can represent any combination of flexible top, bottom, left, and right margins, or width and height. &lt;/p&gt;

&lt;p&gt;Rather than &lt;code&gt;NS_ENUM&lt;/code&gt;, bitmasks should now use the &lt;code&gt;NS_OPTIONS&lt;/code&gt; macro.&lt;/p&gt;

&lt;p&gt;The syntax is exactly the same as &lt;code&gt;NS_ENUM&lt;/code&gt;, but this macro alerts the compiler to how values can be combined with bitmask &lt;code&gt;|&lt;/code&gt;. Again, you must be careful that all of the enumerated values fit within the specified type.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NS_ENUM&lt;/code&gt; and &lt;code&gt;NS_OPTIONS&lt;/code&gt; are handy additions to the Objective-C development experience, and reaffirm the healthy dialectic between its objective and procedural nature. Keep this in mind as you move forward in your own journey to understand the logical tensions that underpin everything around us.&lt;/p&gt;
</description>
        <pubDate>Mon, 19 Nov 2012 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/ns_enum-ns_options/</link>
        <guid>http://nshipster.com/ns_enum-ns_options/</guid>
      </item>
    
      <item>
        <title>NSValueTransformer</title>
        <description>&lt;p&gt;Of all the Foundation classes, &lt;code&gt;NSValueTransformer&lt;/code&gt; is perhaps the one that fared the worst in the shift from OS X to iOS. &lt;/p&gt;

&lt;p&gt;Why? Well, there are two reasons:&lt;/p&gt;

&lt;p&gt;The first and most obvious reason is that &lt;code&gt;NSValueTransformer&lt;/code&gt; was mainly used in AppKit with Cocoa bindings. Here, they could automatically transform values from one property to another without the need of intermediary glue code, like for negating a boolean, or checking whether a value was &lt;code&gt;nil&lt;/code&gt;. iOS, of course, doesn&amp;#39;t have bindings.&lt;/p&gt;

&lt;p&gt;The second reason has less to do with iOS than the Objective-C runtime itself. With the introduction of blocks, it got a whole lot easier to pass behavior between objects--significantly easier than, say &lt;code&gt;NSValueTransformer&lt;/code&gt; or &lt;code&gt;NSInvocation&lt;/code&gt;. So even if iOS were to get bindings tomorrow, it&amp;#39;s uncertain as to whether &lt;code&gt;NSValueTransformer&lt;/code&gt; would play as significant a role this time around.&lt;/p&gt;

&lt;p&gt;But you know what? &lt;code&gt;NSValueTransformer&lt;/code&gt; is ripe for a comeback. With a little bit of re-tooling and some recontextualization, this blast from the past could be the next big thing in your application.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSValueTransformer&lt;/code&gt; is an abstract class that transforms one value into another. A transformation specifies what kinds of input values can be handled, and can even supports reversible transformations, where applicable.&lt;/p&gt;

&lt;p&gt;A typical implementation would look something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ClassNameTransformer&lt;/span&gt;: &lt;span class=&quot;nc&quot;&gt;NSValueTransformer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark -&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ClassNameTransformer&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transformedValueClass&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;allowsReverseTransformation&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transformedValue:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSStringFromClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;NSValueTransformer&lt;/code&gt; is rarely initialized directly. Instead, it follows a pattern familiar to fans of &lt;code&gt;NSPersistentStore&lt;/code&gt; or &lt;code&gt;NSURLProtocol&lt;/code&gt;, where a class is registered, and instances are created from a manager--except in this case, you register the &lt;em&gt;instance&lt;/em&gt; to act as a singleton (with a particular name):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ClassNameTransformerName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;ClassNameTransformer&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Set the value transformer&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSValueTransformer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setValueTransformer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClassNameTransformer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClassNameTransformerName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Get the value transformer&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSValueTransformer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;valueTransformer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSValueTransformer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valueTransformerForName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClassNameTransformerName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Typically, the singleton instance would be registered in the &lt;code&gt;+initialize&lt;/code&gt; method of the value transformer subclass, so it could be used without further setup.&lt;/p&gt;

&lt;p&gt;Now, at this point, you probably realize &lt;code&gt;NSValueTransformer&lt;/code&gt;&amp;#39;s fatal flaw: it&amp;#39;s a pain in the ass to set up! Create a class, implement a handful of simple methods, define a constant, &lt;em&gt;and&lt;/em&gt; register it in an &lt;code&gt;+initialize&lt;/code&gt; method? No thanks.&lt;/p&gt;

&lt;p&gt;In this age of blocks, we want--nay, &lt;em&gt;demand&lt;/em&gt;--a way to declare functionality in one (albeit gigantic) line of code.&lt;/p&gt;

&lt;p&gt;Nothing &lt;a href=&quot;https://github.com/mattt/TransformerKit/blob/master/TransformerKit/NSValueTransformer%2BTransformerKit.m#L36&quot;&gt;a little metaprogramming&lt;/a&gt; can&amp;#39;t fix. Behold:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TKCapitalizedStringTransformerName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;TKCapitalizedStringTransformerName&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSValueTransformer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;registerValueTransformerWithName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TKCapitalizedStringTransformerName&lt;/span&gt; 
           &lt;span class=&quot;n&quot;&gt;transformedValueClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; 
&lt;span class=&quot;nl&quot;&gt;returningTransformedValueWithBlock:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;capitalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Not to break the 4th wall or anything, but in the middle of writing this article, I was compelled to see what could be done to improve the experience of &lt;code&gt;NSValueTransformer&lt;/code&gt;. What I came up with was &lt;a href=&quot;https://github.com/mattt/TransformerKit&quot;&gt;TransformerKit&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The entire library is based on some objc runtime hackery in an &lt;code&gt;NSValueTransformer&lt;/code&gt; category. Also included with this category are a number of convenient examples, like string case transformers (i.e. &lt;code&gt;CamelCase&lt;/code&gt;, &lt;code&gt;llamaCase&lt;/code&gt;, &lt;code&gt;snake_case&lt;/code&gt;, and &lt;code&gt;train-case&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;Now with its sexy new getup, we start to form a better understanding of where this could be useful:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSValueTransformers&lt;/code&gt; are the ideal way to represent an ordered chain of fixed transformations. For instance, an app interfacing with a legacy system might transform user input through a succession of string transformations (trim whitespace, remove diacritics, and then capitalize letters) before sending it off to the mainframe.&lt;/li&gt;
&lt;li&gt;Unlike blocks, &lt;code&gt;NSValueTransformer&lt;/code&gt; encapsulates reversible transformations. Let&amp;#39;s say you were wanted to map keys from a REST API representation into a Model object; you could create a reversible transformation that converted &lt;code&gt;snake_case&lt;/code&gt; to &lt;code&gt;llamaCase&lt;/code&gt; when initializing, and &lt;code&gt;llamaCase&lt;/code&gt; to &lt;code&gt;snake_case&lt;/code&gt; when serializing back to the server.&lt;/li&gt;
&lt;li&gt;Another advantage over blocks is that &lt;code&gt;NSValueTransformer&lt;/code&gt; subclasses can expose new properties that could be used to configure behavior in a particular way. Access to &lt;code&gt;ivars&lt;/code&gt; also make it easier to cleanly memoize results, or do any necessary book-keeping along the way.&lt;/li&gt;
&lt;li&gt;Lest we forget, &lt;code&gt;NSValueTransformer&lt;/code&gt; can be used with Core Data, as a way to encode and decode compound data types from blob fields. It seems to have fallen out of fashion over the years, but serializing simple collections in this way, for example, is an excellent strategy for information that isn&amp;#39;t well-modeled as its own entity. Just don&amp;#39;t serialize images to a database this way--that&amp;#39;s generally a Bad Idea™. &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And the list goes on.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSValueTransformer&lt;/code&gt;, far from a vestige of AppKit, remains Foundation&amp;#39;s purest connection to that fundamental concept of computation: input goes in, output comes out.&lt;/p&gt;

&lt;p&gt;Although it hasn&amp;#39;t aged very well on its own, a little modernization restores &lt;code&gt;NSValueTransformer&lt;/code&gt; to that highest esteem of NSHipsterdom: the solution that we didn&amp;#39;t know we needed, but was there all along.&lt;/p&gt;
</description>
        <pubDate>Mon, 12 Nov 2012 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nsvaluetransformer/</link>
        <guid>http://nshipster.com/nsvaluetransformer/</guid>
      </item>
    
      <item>
        <title>NSURLProtocol</title>
        <description>&lt;p&gt;iOS is all about networking--whether it&amp;#39;s reading or writing state to and from the server, offloading computation to a distributed system, or loading remote images, audio, and video from the cloud.&lt;/p&gt;

&lt;p&gt;Because of this, Foundation&amp;#39;s &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i&quot;&gt;URL Loading System&lt;/a&gt; is something that every iOS developer would do well to buddy up with.&lt;/p&gt;

&lt;p&gt;When given the choice, applications should adopt the highest-level framework possible for what needs to be done. So, if that task is communicating over &lt;code&gt;http://&lt;/code&gt;, &lt;code&gt;https://&lt;/code&gt; or &lt;code&gt;ftp://&lt;/code&gt;, then &lt;code&gt;NSURLConnection&lt;/code&gt; and friends are a clear choice. Apple&amp;#39;s networking classes cover the essentials for modern Objective-C application development, from URL and cache management to authentication &amp;amp; cookie storage:&lt;/p&gt;

&lt;figure id=&quot;url-loading-system&quot;&gt;
  &lt;figcaption&gt;The URL Loading System&lt;/figcaption&gt;
  &lt;table&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;&lt;strong&gt;URL Loading&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSURLConnection&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;NSURLRequest&lt;/td&gt;
        &lt;td&gt;NSMutableURLRequest&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;NSURLResponse&lt;/td&gt;
        &lt;td&gt;NSHTTPURLResponse&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;&lt;strong&gt;Cache Management&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSURLCache&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSCacheURLRequest&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSCachedURLResponse&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;&lt;strong&gt;Authentication &amp;amp; Credentials&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSURLCredential&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSURLCredentialStorage&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSURLAuthenticationChallenge&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSURLProtectionSpace&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;&lt;strong&gt;Cookie Storage&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSHTTPCookie&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSHTTPCookieStorage&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;&lt;strong&gt;Protocol Support&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td colspan=&quot;2&quot;&gt;NSURLProtocol&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/figure&gt;

&lt;p&gt;Although there&amp;#39;s a lot to the URL Loading System, it&amp;#39;s designed in a way that hides the underlying complexity, with hooks to provide configuration when needed. Any request going through &lt;code&gt;NSURLConnection&lt;/code&gt; is intercepted by other parts of the system along the way, allowing for things like cached responses being transparently loaded from disk when available.&lt;/p&gt;

&lt;p&gt;Which brings us to this week&amp;#39;s topic: &lt;code&gt;NSURLProtocol&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSURLProtocol&lt;/code&gt; is both the most obscure and the most powerful part of the URL Loading System. It&amp;#39;s an abstract class that allows subclasses to define the URL loading behavior of new or existing schemes.&lt;/p&gt;

&lt;p&gt;If you aren&amp;#39;t already &lt;code&gt;mindblown.gif&lt;/code&gt;, here are some examples of what this can be used for, &lt;em&gt;without changing anything else about how requests are loaded&lt;/em&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/5572258/ios-webview-remote-html-with-local-image-files&quot;&gt;Intercepting HTTP requests to serve images locally from the app bundle resources, if available&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.infinite-loop.dk/blog/2011/09/using-nsurlprotocol-for-injecting-test-data/&quot;&gt;Mocking and stubbing HTTP responses for testing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Normalizing headers and parameters of outgoing requests&lt;/li&gt;
&lt;li&gt;Signing outgoing streaming media requests&lt;/li&gt;
&lt;li&gt;Creating a proxy server for a local data transformation service with a URL request interface&lt;/li&gt;
&lt;li&gt;Deliberately sending malformed &amp;amp; illegal response data to test the robustness of the application&lt;/li&gt;
&lt;li&gt;Filtering sensitive information from requests or responses&lt;/li&gt;
&lt;li&gt;Implementing an &lt;code&gt;NSURLConnection&lt;/code&gt;-compatible interface to an existing protocol.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Again, it&amp;#39;s important to reiterate that the whole point of &lt;code&gt;NSURLProtocol&lt;/code&gt; is that you can change everything about the loading behavior of your application without doing anything differently with how your application communicates to the network.&lt;/p&gt;

&lt;p&gt;Or, put another way: &lt;code&gt;NSURLProtocol&lt;/code&gt; is an Apple-sanctioned man-in-the-middle attack.&lt;/p&gt;

&lt;h2&gt;Subclassing NSURLProtocol&lt;/h2&gt;

&lt;p&gt;As mentioned previously, &lt;code&gt;NSURLProtocol&lt;/code&gt; is an abstract class, which means it will be subclassed rather than used directly.&lt;/p&gt;

&lt;h3&gt;Determining if a Subclass Can Handle a Request&lt;/h3&gt;

&lt;p&gt;The first task of an &lt;code&gt;NSURLProtocol&lt;/code&gt; subclass is to define what requests to handle. For example, if you want to serve bundle resources when available, it would only want to respond to requests that matched the name of an existing resource.&lt;/p&gt;

&lt;p&gt;This logic is specified in &lt;code&gt;+canInitWithRequest:&lt;/code&gt;. If &lt;code&gt;YES&lt;/code&gt;, the specified request is handled. If &lt;code&gt;NO&lt;/code&gt;, it&amp;#39;s passed down the line to the next URL Protocol.&lt;/p&gt;

&lt;h3&gt;Providing a Canonical Version of a Request&lt;/h3&gt;

&lt;p&gt;If you wanted to modify a request in any particular way, &lt;code&gt;+canonicalRequestForRequest:&lt;/code&gt; is your opportunity. It&amp;#39;s up to each subclass to determine what &amp;quot;canonical&amp;quot; means, but the gist is that a protocol should ensure that a request has only one canonical form (although many different requests may normalize into the same canonical form).&lt;/p&gt;

&lt;h3&gt;Getting and Setting Properties on Requests&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;NSURLProtocol&lt;/code&gt; provides methods that allow you to add, retrieve, and remove arbitrary metadata to a request object--without the need for a private category or swizzling:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;+propertyForKey:inRequest:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+setProperty:forKey:inRequest:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+removePropertyForKey:inRequest:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This is especially important for subclasses created to interact with protocols that have information not already provided by &lt;code&gt;NSURLRequest&lt;/code&gt;. It can also be useful as a way to pass state between other methods in your implementation.&lt;/p&gt;

&lt;h3&gt;Loading Requests&lt;/h3&gt;

&lt;p&gt;The most important methods in your subclass are &lt;code&gt;-startLoading&lt;/code&gt; and &lt;code&gt;-stopLoading&lt;/code&gt;. What goes into either of these methods is entirely dependent on what your subclass is trying to accomplish, but there is one commonality: communicating with the protocol client.&lt;/p&gt;

&lt;p&gt;Each instance of a &lt;code&gt;NSURLProtocol&lt;/code&gt; subclass has a &lt;code&gt;client&lt;/code&gt; property, which is the object that is communicating with the URL Loading system. It&amp;#39;s not &lt;code&gt;NSURLConnection&lt;/code&gt;, but the object does conform to a protocol that should look familiar to anyone who has implemented &lt;code&gt;NSURLConnectionDelegate&lt;/code&gt;&lt;/p&gt;

&lt;h4&gt;&lt;code&gt;&amp;lt;NSURLProtocolClient&amp;gt;&lt;/code&gt;&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-URLProtocol:cachedResponseIsValid:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-URLProtocol:didCancelAuthenticationChallenge:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-URLProtocol:didFailWithError:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-URLProtocol:didLoadData:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-URLProtocol:didReceiveAuthenticationChallenge:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-URLProtocol:didReceiveResponse:cacheStoragePolicy:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-URLProtocol:wasRedirectedToRequest:redirectResponse:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-URLProtocolDidFinishLoading:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In your implementation of &lt;code&gt;-startLoading&lt;/code&gt; and &lt;code&gt;-stopLoading&lt;/code&gt;, you will need to send each delegate method to your &lt;code&gt;client&lt;/code&gt; when appropriate. For something simple, this may mean sending several in rapid succession, but it&amp;#39;s important nonetheless. &lt;/p&gt;

&lt;h3&gt;Registering the Subclass with the URL Loading System&lt;/h3&gt;

&lt;p&gt;Finally, in order to actually use an &lt;code&gt;NSURLProtocol&lt;/code&gt; subclass, it needs to be registered into the URL Loading System. &lt;/p&gt;

&lt;p&gt;When a request is loaded, each registered protocol is asked &amp;quot;hey, can you handle this request?&amp;quot;. The first one to respond with &lt;code&gt;YES&lt;/code&gt; with &lt;code&gt;+canInitWithRequest:&lt;/code&gt; gets to handle the request. URL protocols are consulted in reverse order of when they were registered, so by calling &lt;code&gt;[NSURLProtocol registerClass:[MyURLProtocol class]];&lt;/code&gt; in &lt;code&gt;-application:didFinishLoadingWithOptions:&lt;/code&gt;, your protocol will have priority over any of the built-in protocols.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Like the URL Loading System that contains it, &lt;code&gt;NSURLProtocol&lt;/code&gt; is incredibly powerful, and can be used in exceedingly clever ways. As a relatively obscure class, we&amp;#39;ve only just started to mine its potential for how we can use it to make our code cleaner, faster, and more robust.&lt;/p&gt;

&lt;p&gt;So go forth and hack! I can&amp;#39;t wait to see what y&amp;#39;all come up with!&lt;/p&gt;
</description>
        <pubDate>Mon, 05 Nov 2012 00:00:00 -0800</pubDate>
        <link>http://nshipster.com/nsurlprotocol/</link>
        <guid>http://nshipster.com/nsurlprotocol/</guid>
      </item>
    
      <item>
        <title>UILocalizedIndexedCollation</title>
        <description>&lt;p&gt;UITableView starts to become unwieldy once it gets to a few hundred rows. If users are reduced to frantically scratching at the screen like a &lt;a href=&quot;http://www.youtube.com/watch?v=CdEBgZ5Y46U&quot;&gt;cat playing Fruit Ninja&lt;/a&gt; in order to get at what they want... you may want to rethink your UI approach.&lt;/p&gt;

&lt;p&gt;So, what are your options?&lt;/p&gt;

&lt;p&gt;Well, you could organize your data into a hierarchy, which could dramatically reduce the number of rows displayed on each screen in fashion, based on its &lt;a href=&quot;http://en.wikipedia.org/wiki/Branching_factor&quot;&gt;branching factor&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You could also add a &lt;code&gt;UISearchBar&lt;/code&gt; to the top of your table view, allowing the user to filter on keywords to get exactly what they&amp;#39;re looking for (or--perhaps more importantly--determine that what they seek doesn&amp;#39;t exist in the first place).&lt;/p&gt;

&lt;p&gt;There is also a third approach, which is generally under-utilized in iOS applications: &lt;strong&gt;section index titles&lt;/strong&gt;. These are the vertically flowing letters found along the right side of table views in your Address Book contacts list or Music library:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/uilocalizedindexedcollation-example.png&quot; alt=&quot;Section Index Titles Example&quot;&gt;&lt;/p&gt;

&lt;p&gt;As the user scrolls their finger down the list, the table view jumps to the corresponding section. Even the most tiresome table view is rendered significantly more usable as a result.&lt;/p&gt;

&lt;p&gt;Section index titles can be enabled by implementing the following &lt;code&gt;UITableViewDataSource&lt;/code&gt; delegate methods:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;-sectionIndexTitlesForTableView:&lt;/code&gt; - Returns an array of the section index titles to be displayed along the right hand side of the table view, such as the alphabetical list &amp;quot;A...Z&amp;quot; + &amp;quot;#&amp;quot;. Section index titles are short--generally limited to 2 Unicode characters.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;-tableView:sectionForSectionIndexTitle:atIndex:&lt;/code&gt; - Returns the section index that the table view should jump to when the user touches a particular section index title.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;As longtime readers of NSHipster doubtless have already guessed, the process of generating that alphabetical list is not something you would want to have to generate yourself. What it means to something to be alphabetically sorted, or even what is meant by an &amp;quot;alphabet&amp;quot; varies wildly across different locales.&lt;/p&gt;

&lt;p&gt;Coming to our rescue is &lt;code&gt;UILocalizedIndexedCollation&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;UILocalizedIndexedCollation&lt;/code&gt; is a class that helps to organize data in table views with section index titles in a locale-aware manner. Rather than creating the object directly, a shared instance corresponding to the current locale supported by your application is accessed, with &lt;code&gt;UILocalizedIndexedCollation +currentCollation&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The first task for &lt;code&gt;UILocalizedIndexedCollation&lt;/code&gt; is to determine what section index titles to display for the current locale, which are can be read from the &lt;code&gt;sectionIndexTitles&lt;/code&gt; property.&lt;/p&gt;

&lt;p&gt;To give you a better idea of how section index titles vary between locales:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;In order to see these for yourself, you&amp;#39;ll need to explicitly add the desired locales to your Project Localizations list.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Locale&lt;/th&gt;
      &lt;th&gt;Section Index Titles&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;en_US&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, #&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ja_JP&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, あ, か, さ, た, な, は, ま, や, ら, わ, #&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;sv_SE&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, Å, Ä, Ö, #&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ko_KO&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, ㄱ, ㄴ, ㄷ, ㄹ, ㅁ, ㅂ, ㅅ, ㅇ, ㅈ, ㅊ, ㅋ, ㅌ, ㅍ, ㅎ, #&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ar_SA&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, آ, ب, ت, ث, ج, ح, خ, د, ذ, ر, ز, س, ش, ص, ض, ط, ظ, ع, غ, ف, ق, ك, ل, م, ن, ه, و, ي, #&lt;/tt&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Aren&amp;#39;t you glad you don&amp;#39;t have to do this yourself?&lt;/p&gt;

&lt;p&gt;So with the list of section titles laid out before you, the next step is to determine what section each object should be assigned to. This is accomplished with &lt;code&gt;-sectionForObject:collationStringSelector:&lt;/code&gt;. This method returns the &lt;code&gt;NSInteger&lt;/code&gt; index corresponding to the string value of the object when performing the specified selector. This selector might be something like &lt;code&gt;localizedName&lt;/code&gt;, &lt;code&gt;title&lt;/code&gt;, or even just &lt;code&gt;description&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;So, as it stands, your table view data source has a NSArray property corresponding to the number of sections in the table view, with each element of the array containing an array representing each row in the section. Since collation was handled by &lt;code&gt;UILocalizedIndexedCollation&lt;/code&gt;, it makes sense for it to sort the rows in each section as well. &lt;code&gt;– sortedArrayFromArray:collationStringSelector:&lt;/code&gt; does this in similar fashion to &lt;code&gt;-sectionForObject:collationStringSelector:&lt;/code&gt;, by sorting the objects in the section by their respective localized title.&lt;/p&gt;

&lt;p&gt;Finally, the table view should implement &lt;code&gt;-tableView:sectionForSectionIndexTitle:atIndex:&lt;/code&gt;, so that touching a section index title jumps to the corresponding section in the table view. &lt;code&gt;UILocalizedIndexedCollation -sectionForSectionIndexTitleAtIndex:&lt;/code&gt; does the trick.&lt;/p&gt;

&lt;p&gt;All told, here&amp;#39;s what a typical table view data source implementation looks like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setObjects:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;objects&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;SEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localizedTitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sectionTitlesCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UILocalizedIndexedCollation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentCollation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sectionTitles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableSections&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithCapacity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sectionTitlesCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sectionTitlesCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableSections&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sectionNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UILocalizedIndexedCollation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentCollation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sectionForObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;collationStringSelector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableSections&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sectionNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sectionTitlesCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objectsForSection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableSections&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableSections&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;replaceObjectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;withObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UILocalizedIndexedCollation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentCollation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sortedArrayFromArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objectsForSection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;collationStringSelector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sections&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutableSections&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tableView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reloadData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tableView:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITableView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tableView&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;titleForHeaderInSection:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;section&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UILocalizedIndexedCollation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentCollation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sectionTitles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;section&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sectionIndexTitlesForTableView:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITableView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tableView&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UILocalizedIndexedCollation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentCollation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sectionIndexTitles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tableView:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITableView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tableView&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;sectionForSectionIndexTitle:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;title&lt;/span&gt;
               &lt;span class=&quot;nl&quot;&gt;atIndex:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;index&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UILocalizedIndexedCollation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentCollation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sectionForSectionIndexTitleAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;UITableViewIndexSearch&lt;/h2&gt;

&lt;p&gt;There is one special section index title worth mentioning, and that&amp;#39;s &lt;code&gt;UITableViewIndexSearch&lt;/code&gt;. It&amp;#39;s a common pattern to have both a search bar and section indexes. In equal parts convenience and visual consistency, a search icon is often included as the first section index title, which can be touched to bring up the &lt;code&gt;UISearchBar&lt;/code&gt; in the header of the table view.&lt;/p&gt;

&lt;p&gt;To include the search icon in your table view, you would simply prepend the &lt;code&gt;NSString&lt;/code&gt; constant &lt;code&gt;UITableViewIndexSearch&lt;/code&gt; to the return value of &lt;code&gt;-sectionIndexTitlesForTableView:&lt;/code&gt;, and adjust &lt;code&gt;-tableView:sectionForSectionIndexTitle:atIndex:&lt;/code&gt; to account for the single element shift.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;So remember, NSHipsters one and all: if you see an excessively long table view, kill it with fire!&lt;/p&gt;

&lt;p&gt;...which is to say, refactor your content with some combination of hierarchies, a search bar, and section indexes. And when implementing section index titles, take advantage of &lt;code&gt;UILocalizedIndexedCollation&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Together, we can put an end to scroll view-induced repetitive stress injuries, and spend more time enjoying the finer things in life, like watching videos of pets playing with iPads.&lt;/p&gt;
</description>
        <pubDate>Mon, 29 Oct 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/uilocalizedindexedcollation/</link>
        <guid>http://nshipster.com/uilocalizedindexedcollation/</guid>
      </item>
    
      <item>
        <title>NSLinguisticTagger</title>
        <description>&lt;p&gt;&lt;code&gt;NSLinguisticTagger&lt;/code&gt; is a veritable Swiss Army Knife of linguistic functionality, with the ability to &lt;a href=&quot;http://en.wikipedia.org/wiki/Tokenization&quot;&gt;tokenize&lt;/a&gt; natural language strings into words, determine their part-of-speech &amp;amp; &lt;a href=&quot;http://en.wikipedia.org/wiki/Word_stem&quot;&gt;stem&lt;/a&gt;, extract names of people, places, &amp;amp; organizations, and tell you the languages &amp;amp; respective &lt;a href=&quot;http://en.wikipedia.org/wiki/Writing_system&quot;&gt;writing system&lt;/a&gt; used in the string.&lt;/p&gt;

&lt;p&gt;For most of us, this is far more power than we know what to do with. But perhaps this is just for lack sufficient opportunity to try. After all, almost every application deals with natural language in one way or another--perhaps &lt;code&gt;NSLinguisticTagger&lt;/code&gt; could add a new level of polish, or enable brand new features entirely. &lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Introduced with iOS 5, &lt;code&gt;NSLinguisticTagger&lt;/code&gt; is a contemporary to Siri, raising speculation that it was a byproduct of the personal assistant&amp;#39;s development.&lt;/p&gt;

&lt;p&gt;Consider a typical question we might ask Siri:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What is the weather in San Francisco?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Computers are a long ways off from &amp;quot;understanding&amp;quot; this question literally, but with a few simple tricks, we can do a reasonable job understanding the &lt;em&gt;intention&lt;/em&gt; of the question:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;What is the weather in San Francisco?&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLinguisticTaggerOptions&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLinguisticTaggerOmitWhitespace&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLinguisticTaggerOmitPunctuation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLinguisticTaggerJoinNames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLinguisticTagger&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tagger&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLinguisticTagger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithTagSchemes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLinguisticTagger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;availableTagSchemesForLanguage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;en&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tagger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tagger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enumerateTagsInRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scheme&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLinguisticTagSchemeNameTypeOrLexicalClass&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;usingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tokenRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sentenceRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;substringWithRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tokenRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This code would print the following:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What: &lt;em&gt;Pronoun&lt;/em&gt;&lt;br&gt;
is: &lt;em&gt;Verb&lt;/em&gt;&lt;br&gt;
the: &lt;em&gt;Determiner&lt;/em&gt;&lt;br&gt;
weather: &lt;em&gt;Noun&lt;/em&gt;&lt;br&gt;
in: &lt;em&gt;Preposition&lt;/em&gt;&lt;br&gt;
San Francisco: &lt;em&gt;PlaceName&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;If we filter on nouns, verbs, and place name, we get &lt;code&gt;[is, weather, San Francisco]&lt;/code&gt;. &lt;/p&gt;

&lt;p&gt;Just based on this alone, or perhaps in conjunction with something like the &lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/LatentSemanticMapping/Reference/LatentSemanticMapping_header_reference/Reference/reference.html&quot;&gt;Latent Semantic Mapping&lt;/a&gt; framework, we can conclude that a reasonable course of action would be to make an API request to determine the current weather conditions in San Francisco.&lt;/p&gt;

&lt;h2&gt;Tagging Schemes&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSLinguisticTagger&lt;/code&gt; can be configured to tag different kinds of information by specifying any of the following tagging schemes:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTagSchemeTokenType&lt;/code&gt;: Classifies tokens according to their broad type: word, punctuation, whitespace, etc.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTagSchemeLexicalClass&lt;/code&gt;: Classifies tokens according to class: part of speech for words, type of punctuation or whitespace, etc.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTagSchemeNameType&lt;/code&gt;: Classifies tokens as to whether they are part of named entities of various types or not.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTagSchemeNameTypeOrLexicalClass&lt;/code&gt;: Follows &lt;code&gt;NSLinguisticTagSchemeNameType&lt;/code&gt; for names, and &lt;code&gt;NSLinguisticTagSchemeLexicalClass&lt;/code&gt; for all other tokens.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Here&amp;#39;s a list of the various token types associated with each scheme (&lt;code&gt;NSLinguisticTagSchemeNameTypeOrLexicalClass&lt;/code&gt;, as the name implies, is the union between &lt;code&gt;NSLinguisticTagSchemeNameType&lt;/code&gt; &amp;amp; &lt;code&gt;NSLinguisticTagSchemeLexicalClass&lt;/code&gt;):&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;tt&gt;NSLinguisticTagSchemeTokenType&lt;/tt&gt;&lt;/th&gt;
      &lt;th&gt;&lt;tt&gt;NSLinguisticTagSchemeLexicalClass&lt;/tt&gt;&lt;/th&gt;
      &lt;th&gt;&lt;tt&gt;NSLinguisticTagSchemeNameType&lt;/tt&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagWord&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagPunctuation&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagWhitespace&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagOther&lt;/tt&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagNoun&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagVerb&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagAdjective&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagAdverb&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagPronoun&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagDeterminer&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagParticle&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagPreposition&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagNumber&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagConjunction&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagInterjection&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagClassifier&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagIdiom&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagOtherWord&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagSentenceTerminator&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagOpenQuote&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagCloseQuote&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagOpenParenthesis&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagCloseParenthesis&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagWordJoiner&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagDash&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagOtherPunctuation&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagParagraphBreak&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagOtherWhitespace&lt;/tt&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagPersonalName&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagPlaceName&lt;/tt&gt;&lt;/li&gt;
          &lt;li&gt;&lt;tt&gt;NSLinguisticTagOrganizationName&lt;/tt&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;So for basic tokenization, use &lt;code&gt;NSLinguisticTagSchemeTokenType&lt;/code&gt;, which will allow you to distinguish between words and whitespace or punctuation. For information like part-of-speech, or differentiation between different parts of speech, &lt;code&gt;NSLinguisticTagSchemeLexicalClass&lt;/code&gt; is your new bicycle.&lt;/p&gt;

&lt;p&gt;Continuing with the tagging schemes:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTagSchemeLemma&lt;/code&gt;: This tag scheme supplies a stem forms of the words, if known.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTagSchemeLanguage&lt;/code&gt;: Tags tokens according to their script. The tag values will be standard language abbreviations such as &lt;code&gt;&amp;quot;en&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;fr&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;de&amp;quot;&lt;/code&gt;, etc., as used with the &lt;code&gt;NSOrthography&lt;/code&gt; class. &lt;em&gt;Note that the tagger generally attempts to determine the language of text at the level of an entire sentence or paragraph, rather than word by word.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTagSchemeScript&lt;/code&gt;: Tags tokens according to their script. The tag values will be standard script abbreviations such as &lt;code&gt;&amp;quot;Latn&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Cyrl&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Jpan&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Hans&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Hant&amp;quot;&lt;/code&gt;, etc.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;As demonstrated in the example above, first you initialize an &lt;code&gt;NSLinguisticTagger&lt;/code&gt; with an array of all of the different schemes that you wish to use, and then assign or enumerate each of the tags after specifying the tagger&amp;#39;s input string.&lt;/p&gt;

&lt;h2&gt;Tagging Options&lt;/h2&gt;

&lt;p&gt;In addition to the available tagging schemes, there are several options you can pass to &lt;code&gt;NSLinguisticTagger&lt;/code&gt; (combined with bitwise OR &lt;code&gt;|&lt;/code&gt;) to slightly change its behavior:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTaggerOmitWords&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTaggerOmitPunctuation&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTaggerOmitWhitespace&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTaggerOmitOther&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Each of these options omit the broad categories of tags described. For example, &lt;code&gt;NSLinguisticTagSchemeLexicalClass&lt;/code&gt;, which distinguishes between many different kinds of punctuation, all of those would be omitted with &lt;code&gt;NSLinguisticTaggerOmitPunctuation&lt;/code&gt;. This is preferable to manually filtering these tag types in enumeration blocks or with predicates.&lt;/p&gt;

&lt;p&gt;The last option is specific to &lt;code&gt;NSLinguisticTagSchemeNameType&lt;/code&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSLinguisticTaggerJoinNames&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;By default, each token in a name is treated as separate instances. In many circumstances, it makes sense to treat names like &amp;quot;San Francisco&amp;quot; as a single token, rather than two separate tokens. Passing this token makes this so.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Natural language is woefully under-utilized in user interface design on mobile devices. When implemented effectively, a single utterance from the user can achieve the equivalent of a handful of touch interactions, in a fraction of the time.&lt;/p&gt;

&lt;p&gt;Sure, it&amp;#39;s not easy, but if we spent a fraction of the time we use to make our visual interfaces pixel-perfect, we could completely re-imagine how users best interact with apps and devices. And with &lt;code&gt;NSLinguisticTagger&lt;/code&gt;, it&amp;#39;s never been easier to get started.&lt;/p&gt;
</description>
        <pubDate>Mon, 22 Oct 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nslinguistictagger/</link>
        <guid>http://nshipster.com/nslinguistictagger/</guid>
      </item>
    
      <item>
        <title>AddressBookUI</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/AddressBookUI/Reference/AddressBookUI_Framework/_index.html&quot;&gt;Address Book UI&lt;/a&gt; is an iOS framework for displaying, selecting, editing, and creating contacts in a user&amp;#39;s Address Book. Similar to the &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MessageUI_Framework_Reference/_index.html&quot;&gt;Message UI&lt;/a&gt; framework, Address Book UI contains a number of controllers that can be presented modally, to provide common system functionality in a uniform interface.&lt;/p&gt;

&lt;p&gt;To use the framework, add both &lt;code&gt;AddressBook.framework&lt;/code&gt; and &lt;code&gt;AddressBookUI.framework&lt;/code&gt; to your project, under the &amp;quot;Link Binary With Libraries&amp;quot; build phase.&lt;/p&gt;

&lt;p&gt;At first glance, it would seem that there&amp;#39;s nothing really remarkable about the Address Book UI framework.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Actually, in iOS 6, there are some &lt;em&gt;fascinating&lt;/em&gt; inter-process shenanigans going on behind the scenes with modal controllers like &lt;code&gt;MFMailComposeViewController&lt;/code&gt; and &lt;code&gt;ABNewPersonViewController&lt;/code&gt;. Ole Begemann has an &lt;a href=&quot;http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/&quot;&gt;excellent write-up on Remote View Controllers in iOS 6&lt;/a&gt; that&amp;#39;s definitely worth a read.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;However, tucked away from the rest of the controllers and protocols, there&amp;#39;s a single Address Book UI function that&amp;#39;s astoundingly useful:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;ABCreateStringWithAddressDictionary()&lt;/code&gt; - Returns a localized, formatted address string from components.&lt;/p&gt;

&lt;p&gt;The first argument for the function is a dictionary containing the address components, keyed by string constants:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;kABPersonAddressStreetKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kABPersonAddressCityKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kABPersonAddressStateKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kABPersonAddressZIPKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kABPersonAddressCountryKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kABPersonAddressCountryCodeKey&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;kABPersonAddressCountryCodeKey&lt;/code&gt; is an especially important attribute, as it determines which locale used to format the address string. If you are unsure of the country code, or one isn&amp;#39;t provided with your particular data set, &lt;code&gt;NSLocale&lt;/code&gt; may be able to help you out: &lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableAddressComponents&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocale&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithIdentifier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;en_US&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocaleCountryCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kABPersonAddressCountryCodeKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The second argument is a boolean flag, &lt;code&gt;addCountryName&lt;/code&gt;. When &lt;code&gt;YES&lt;/code&gt;, the name of the country corresponding to the specified country code will be automatically appended to the address. This should only used when the country code is known.&lt;/p&gt;

&lt;p&gt;Nowhere else in all of the other frameworks is this functionality provided. It&amp;#39;s not part of &lt;a href=&quot;http://nshipster.com/nslocale/&quot;&gt;&lt;code&gt;NSLocale&lt;/code&gt;&lt;/a&gt;, or even Map Kit or Core Location. For all of the care and attention to detail that Apple puts into localization, it&amp;#39;s surprising that such an important task is relegated to the corners of an obscure, somewhat-unrelated framework.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Unfortunately, Address Book UI is not available in Mac OS X, and it would appear that there&amp;#39;s no equivalent function provided on this platform.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;For you see, address formats vary greatly across different regions. For example, addresses in the United States take the form:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;Street Address
City State ZIP
Country
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Whereas addresses in Japan follow a different convention:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;Postal Code
Prefecture Municipality
Street Address
Country
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is at least as jarring a difference in localization as &lt;a href=&quot;http://en.wikipedia.org/wiki/Decimal_mark#Hindu.E2.80.93Arabic_numeral_system&quot;&gt;swapping periods for commas the radix point&lt;/a&gt;, so make sure to use this function anytime you&amp;#39;re displaying an address from its components.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;One great way to take advantage of localized address book formatting would be to check out &lt;a href=&quot;https://github.com/mattt/FormatterKit&quot;&gt;FormatterKit&lt;/a&gt;, which added &lt;code&gt;TTTAddressFormatter&lt;/code&gt; in its 1.1 release.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 15 Oct 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/addressbookui/</link>
        <guid>http://nshipster.com/addressbookui/</guid>
      </item>
    
      <item>
        <title>@</title>
        <description>&lt;p&gt;Birdwatchers refer to it as (and I swear I&amp;#39;m not making this up) &lt;a href=&quot;http://en.wikipedia.org/wiki/Jizz_(birding)&quot;&gt;&amp;quot;Jizz&amp;quot;&lt;/a&gt;: those indefinable characteristics unique to a particular kind of thing.&lt;/p&gt;

&lt;p&gt;This term can be appropriated to describe how seasoned individuals might distinguish &lt;a href=&quot;http://www.rust-lang.org&quot;&gt;Rust&lt;/a&gt; from &lt;a href=&quot;http://golang.org&quot;&gt;Go&lt;/a&gt;, or &lt;a href=&quot;http://www.ruby-lang.org&quot;&gt;Ruby&lt;/a&gt; from &lt;a href=&quot;http://elixir-lang.org&quot;&gt;Elixir&lt;/a&gt; at a glance.&lt;/p&gt;

&lt;p&gt;Some just stick out like sore thumbs:&lt;/p&gt;

&lt;p&gt;Perl, with all of its short variable names with special characters, reads like &lt;a href=&quot;http://imgur.com/WyG2D&quot;&gt;Q*bert swearing&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Lisp, whose profusion of parentheses is best captured by &lt;a href=&quot;http://discuss.fogcreek.com/joelonsoftware3/default.asp?cmd=show&amp;amp;ixPost=94232&amp;amp;ixReplies=38&quot;&gt;that old joke&lt;/a&gt; about the Russians in the 1980&amp;#39;s proving that they had stolen the source code of some SDI missile interceptor code by showing the last page:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;                )))
              ) )
            ))) ) ))
           )))))
          )))
        ))
      )))) ))
    )))) ))
  )))
)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So if we were to go code-watching for the elusive Objective-C species, what would we look for? That&amp;#39;s right:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Square brackets&lt;/li&gt;
&lt;li&gt;Ridiculously-long method names&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@&lt;/code&gt;&amp;#39;s&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;@&lt;/code&gt;, or &amp;quot;at&amp;quot; sign compiler directives, are as central to understanding Objective-C&amp;#39;s gestalt as its ancestry and underlying mechanisms. It&amp;#39;s the sugary glue that allows Objective-C to be such a powerful, expressive language, and yet still compile all the way down to C.&lt;/p&gt;

&lt;p&gt;Its uses are varied and disparate, to the point that the only accurate way to describe what &lt;code&gt;@&lt;/code&gt; means by itself is &amp;quot;shorthand for something to do with Objective-C&amp;quot;. They cover a broad range in usefulness and obscurity, from staples like &lt;code&gt;@interface&lt;/code&gt; and &lt;code&gt;@implementation&lt;/code&gt; to ones you could go your whole career without running into, like &lt;code&gt;@defs&lt;/code&gt; and &lt;code&gt;@compatibility_alias&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;But to anyone aspiring to be an NSHipster, intimate familiarity with &lt;code&gt;@&lt;/code&gt; directives is tantamount to a music lover&amp;#39;s ability to enumerate the entire Beatles catalog in chronological order (and most importantly, having unreasonably strong opinions about each of them).&lt;/p&gt;

&lt;h2&gt;Interface &amp;amp; Implementation&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;@interface&lt;/code&gt; and &lt;code&gt;@implementation&lt;/code&gt; are the first things you learn about when you start Objective-C:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@interface&lt;/code&gt;...&lt;code&gt;@end&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@implementation&lt;/code&gt;...&lt;code&gt;@end&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;What you don&amp;#39;t learn about until later on, are categories and class extensions.&lt;/p&gt;

&lt;p&gt;Categories allow you to extend the behavior of existing classes by adding new class or instance methods. As a convention, categories are defined in their own &lt;code&gt;.{h,m}&lt;/code&gt; files, like so:&lt;/p&gt;

&lt;h4&gt;MyObject+CategoryName.h&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyObject&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(CategoryName)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;barWithBaz&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;MyObject+CategoryName.m&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyObject&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;(CategoryName)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;barWithBaz&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baz&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Categories are particularly useful for convenience methods on standard framework classes (just don&amp;#39;t go overboard with your utility functions).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Pro Tip: Rather than littering your code with random, arbitrary color values, create an &lt;code&gt;NSColor&lt;/code&gt; / &lt;code&gt;UIColor&lt;/code&gt; color palette category that defines class methods like &lt;code&gt;+appNameDarkGrayColor&lt;/code&gt;. You can then add a semantic layer on top of that by creating method aliases like &lt;code&gt;+appNameTextColor&lt;/code&gt;, which returns &lt;code&gt;+appNameDarkGrayColor&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Extensions look like categories, but omit the category name. These are typically declared before an &lt;code&gt;@implementation&lt;/code&gt; to specify a private interface, and even override properties declared in the interface:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyObject&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readwrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyObject&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@synthesize&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Properties&lt;/h3&gt;

&lt;p&gt;Property directives are likewise concepts learned early on:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@property&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@synthesize&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@dynamic&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;One interesting note with properties is that as of Xcode 4.4, it is no longer necessary to explicitly synthesize properties. Properties declared in an &lt;code&gt;@interface&lt;/code&gt; are automatically synthesized (with leading underscore ivar name, i.e. &lt;code&gt;@synthesize propertyName = _propertyName&lt;/code&gt;) in the implementation.&lt;/p&gt;

&lt;h3&gt;Forward Class Declarations&lt;/h3&gt;

&lt;p&gt;Occasionally, &lt;code&gt;@interface&lt;/code&gt; declarations will reference an external class in a property or as a parameter type. Rather than adding &lt;code&gt;#import&lt;/code&gt; statements for each class, it&amp;#39;s good practice to use forward class declarations in the header, and import them in the implementation.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@class&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Shorter compile times, less chance of cyclical references; you should definitely get in the habit of doing this if you aren&amp;#39;t already.&lt;/p&gt;

&lt;h3&gt;Instance Variable Visibility&lt;/h3&gt;

&lt;p&gt;It&amp;#39;s a matter of general convention that classes provide state and mutating interfaces through properties and methods, rather than directly exposing ivars.&lt;/p&gt;

&lt;p&gt;Although ARC makes working with ivars much safer by taking care of memory management, the aforementioned automatic property synthesis removes the one place where ivars would otherwise be declared.&lt;/p&gt;

&lt;p&gt;Nonetheless, in cases where ivars &lt;em&gt;are&lt;/em&gt; directly manipulated, there are the following visibility directives:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@public&lt;/code&gt;: instance variable can be read and written to directly, using the notation &lt;code&gt;person-&amp;gt;age = 32&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@package&lt;/code&gt;: instance variable is public, except outside of the framework in which it is specified (64-bit architectures only)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@protected&lt;/code&gt;: instance variable is only accessible to its class and derived classes&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@private&lt;/code&gt;: instance variable is only accessible to its class&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;@public&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;@private&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;salary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Protocols&lt;/h2&gt;

&lt;p&gt;There&amp;#39;s a distinct point early in an Objective-C programmer&amp;#39;s evolution, when she realizes that she can define her own protocols.&lt;/p&gt;

&lt;p&gt;The beauty of protocols is that they allow programmers to design contracts that can be adopted outside of a class hierarchy. It&amp;#39;s the egalitarian mantra at the heart of the American Dream: that it doesn&amp;#39;t matter who you are, or where you come from: anyone can achieve anything if they work hard enough.&lt;/p&gt;

&lt;p&gt;...or at least that&amp;#39;s idea, right?&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@protocol&lt;/code&gt;...&lt;code&gt;@end&lt;/code&gt;: Defines a set of methods to be implemented by any class  conforming to the protocol, as if they were added to the interface of that class.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Architectural stability and expressiveness without the burden of coupling--protocols are awesome.&lt;/p&gt;

&lt;h3&gt;Requirement Options&lt;/h3&gt;

&lt;p&gt;You can further tailor a protocol by specifying methods as required or optional. Optional methods are stubbed in the interface, so as to be auto-completed in Xcode, but do not generate a warning if the method is not implemented. Protocol methods are required by default.&lt;/p&gt;

&lt;p&gt;The syntax for &lt;code&gt;@required&lt;/code&gt; and &lt;code&gt;@optional&lt;/code&gt; follows that of the visibility macros:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CustomControlDelegate&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;control&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CustomControl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;control&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;didSucceedWithResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@optional&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;control&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CustomControl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;control&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;didFailWithError&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Exception Handling&lt;/h2&gt;

&lt;p&gt;Objective-C communicates unexpected state primarily through &lt;code&gt;NSError&lt;/code&gt;. Whereas other languages would use exception handling for this, Objective-C relegates exceptions to truly exceptional behavior, including programmer error.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;@&lt;/code&gt; directives are used for the traditional convention of &lt;code&gt;try/catch/finally&lt;/code&gt; blocks:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// attempt to execute the following statements&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// if an exception is raised, or explicitly thrown...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;@throw&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exception&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSException&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// ...handle the exception here&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;@finally&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// always execute this at the end of either the @try or @catch block&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cleanup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Literals&lt;/h2&gt;

&lt;p&gt;Literals are shorthand notation for specifying fixed values. Literals are more
-or-less directly correlated with programmer happiness. By this measure, Objective-C has long been a language of programmer misery.&lt;/p&gt;

&lt;h3&gt;Object Literals&lt;/h3&gt;

&lt;p&gt;Until recently, Objective-C only had literals for &lt;code&gt;NSString&lt;/code&gt;. But with the release of the &lt;a href=&quot;http://clang.llvm.org/docs/ObjectiveCLiterals.html&quot;&gt;Apple LLVM 4.0 compiler&lt;/a&gt;, literals for &lt;code&gt;NSNumber&lt;/code&gt;, &lt;code&gt;NSArray&lt;/code&gt; and &lt;code&gt;NSDictionary&lt;/code&gt; were added, with much rejoicing.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@&amp;quot;&amp;quot;&lt;/code&gt;: Returns an &lt;code&gt;NSString&lt;/code&gt; object initialized with the Unicode content inside the quotation marks.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@42&lt;/code&gt;, &lt;code&gt;@3.14&lt;/code&gt;, &lt;code&gt;@YES&lt;/code&gt;, &lt;code&gt;@&amp;#39;Z&amp;#39;&lt;/code&gt;: Returns an &lt;code&gt;NSNumber&lt;/code&gt; object initialized with pertinent class constructor, such that &lt;code&gt;@42&lt;/code&gt; → &lt;code&gt;[NSNumber numberWithInteger:42]&lt;/code&gt;, or &lt;code&gt;@YES&lt;/code&gt; → &lt;code&gt;[NSNumber numberWithBool:YES]&lt;/code&gt;. Supports the use of suffixes to further specify type, like &lt;code&gt;@42U&lt;/code&gt; → &lt;code&gt;[NSNumber numberWithUnsignedInt:42U]&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@[]&lt;/code&gt;: Returns an &lt;code&gt;NSArray&lt;/code&gt; object initialized with the comma-delimited list of objects as its contents. It uses +arrayWithObjects:count: class constructor method, which is a more precise alternative to the more familiar &lt;code&gt;+arrayWithObjects:&lt;/code&gt;. For example, &lt;code&gt;@[@&amp;quot;A&amp;quot;, @NO, @2.718]&lt;/code&gt; → &lt;code&gt;id objects[] = {@&amp;quot;A&amp;quot;, @NO, @2.718}; [NSArray arrayWithObjects:objects count:3]&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@{}&lt;/code&gt;: Returns an &lt;code&gt;NSDictionary&lt;/code&gt; object initialized with the specified key-value pairs as its contents, in the format: &lt;code&gt;@{@&amp;quot;someKey&amp;quot; : @&amp;quot;theValue&amp;quot;}&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@()&lt;/code&gt;: Dynamically evaluates the boxed expression and returns the appropriate object literal based on its value (i.e. &lt;code&gt;NSString&lt;/code&gt; for &lt;code&gt;const char*&lt;/code&gt;, &lt;code&gt;NSNumber&lt;/code&gt; for &lt;code&gt;int&lt;/code&gt;, etc.). This is also the designated way to use number literals with &lt;code&gt;enum&lt;/code&gt; values.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Objective-C Literals&lt;/h3&gt;

&lt;p&gt;Selectors and protocols can be passed as method parameters. &lt;code&gt;@selector()&lt;/code&gt; and &lt;code&gt;@protocol()&lt;/code&gt; serve as pseudo-literal directives that return a pointer to a particular selector (&lt;code&gt;SEL&lt;/code&gt;) or protocol (&lt;code&gt;Protocol *&lt;/code&gt;).&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@selector()&lt;/code&gt;: Returns an &lt;code&gt;SEL&lt;/code&gt; pointer to a selector with the specified name. Used in methods like &lt;code&gt;-performSelector:withObject:&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@protocol()&lt;/code&gt;: Returns a &lt;code&gt;Protocol *&lt;/code&gt; pointer to the protocol with the specified name. Used in methods like &lt;code&gt;-conformsToProtocol:&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;C Literals&lt;/h3&gt;

&lt;p&gt;Literals can also work the other way around, transforming Objective-C objects into C values. These directives in particular allow us to peek underneath the Objective-C veil, to begin to understand what&amp;#39;s really going on.&lt;/p&gt;

&lt;p&gt;Did you know that all Objective-C classes and objects are just glorified &lt;code&gt;struct&lt;/code&gt;s? Or that the entire identity of an object hinges on a single &lt;code&gt;isa&lt;/code&gt; field in that &lt;code&gt;struct&lt;/code&gt;?&lt;/p&gt;

&lt;p&gt;For most of us, at least most of the time, coming into this knowledge is but an academic exercise. But for anyone venturing into low-level optimizations, this is simply the jumping-off point.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@encode()&lt;/code&gt;: Returns the &lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html&quot;&gt;type encoding&lt;/a&gt; of a type. This type value can be used as the first argument encode in &lt;code&gt;NSCoder -encodeValueOfObjCType:at&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@defs()&lt;/code&gt;: Returns the layout of an Objective-C class. For example, to declare a struct with the same fields as an &lt;code&gt;NSObject&lt;/code&gt;, you would simply do:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;defs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Ed. As pointed out by readers &lt;a href=&quot;http://twitter.com/secboffin&quot;&gt;@secboffin&lt;/a&gt; &amp;amp; &lt;a href=&quot;http://twitter.com/ameaijou&quot;&gt;@ameaijou&lt;/a&gt;, &lt;code&gt;@defs&lt;/code&gt; is unavailable in the modern Objective-C runtime.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Optimizations&lt;/h2&gt;

&lt;p&gt;There are some &lt;code&gt;@&lt;/code&gt; compiler directives specifically purposed for providing shortcuts for common optimizations.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@autoreleasepool{}&lt;/code&gt;: If your code contains a tight loop that creates lots of temporary objects, you can use the &lt;code&gt;@autoreleasepool&lt;/code&gt; directive to optimize for these short-lived, locally-scoped objects by being more aggressive about how they&amp;#39;re deallocated. &lt;code&gt;@autoreleasepool&lt;/code&gt; replaces and improves upon the old &lt;code&gt;NSAutoreleasePool&lt;/code&gt;, which is significantly slower, and unavailable with ARC.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@synchronized(){}&lt;/code&gt;: This directive offers a convenient way to guarantee the safe execution of a particular block within a specified context (usually &lt;code&gt;self&lt;/code&gt;). Locking in this way is expensive, however, so for classes aiming for a particular level of thread safety, a dedicated &lt;code&gt;NSLock&lt;/code&gt; property or the use of low-level locking functions like &lt;code&gt;OSAtomicCompareAndSwap32(3)&lt;/code&gt; are recommended.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Compatibility&lt;/h2&gt;

&lt;p&gt;In case all of the previous directives were old hat for you, there&amp;#39;s a strong likelihood that you didn&amp;#39;t know about this one:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@compatibility_alias&lt;/code&gt;: Allows existing classes to be aliased by a different name.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For example &lt;a href=&quot;https://github.com/steipete/PSTCollectionView&quot;&gt;PSTCollectionView&lt;/a&gt; uses &lt;code&gt;@compatibility_alias&lt;/code&gt; to significantly improve the experience of using the backwards-compatible, drop-in replacement for &lt;a href=&quot;http://nshipster.com/uicollectionview/&quot;&gt;UICollectionView&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// Allows code to just use UICollectionView as if it would be available on iOS SDK 5.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// http://developer.apple.    com/legacy/mac/library/#documentation/DeveloperTools/gcc-3.   3/gcc/compatibility_005falias.html&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#if __IPHONE_OS_VERSION_MAX_ALLOWED &amp;lt; 60000&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compatibility_alias&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UICollectionViewController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PSTCollectionViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compatibility_alias&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UICollectionView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PSTCollectionView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compatibility_alias&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UICollectionReusableView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PSTCollectionReusableView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compatibility_alias&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UICollectionViewCell&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PSTCollectionViewCell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compatibility_alias&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UICollectionViewLayout&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PSTCollectionViewLayout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compatibility_alias&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UICollectionViewFlowLayout&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PSTCollectionViewFlowLayout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compatibility_alias&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UICollectionViewLayoutAttributes&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;PSTCollectionViewLayoutAttributes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UICollectionViewDataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PSTCollectionViewDataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UICollectionViewDelegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PSTCollectionViewDelegate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#endif&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Using this clever combination of macros, a developer can develop with &lt;code&gt;UICollectionView&lt;/code&gt; by including &lt;code&gt;PSTCollectionView&lt;/code&gt;--without worrying about the deployment target of the final project. As a drop-in replacement, the same code works more-or-less identically on iOS 6 as it does on iOS 4.3.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;So to review:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Interfaces &amp;amp; Implementation&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@interface&lt;/code&gt;...&lt;code&gt;@end&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@implementation&lt;/code&gt;...&lt;code&gt;@end&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@class&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Instance Variable Visibility&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@public&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@package&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@protected&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@private&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Properties&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@property&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@synthesize&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@dynamic&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Protocols&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@protocol&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@required&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@optional&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Exception Handling&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@try&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@catch&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@finally&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@throw&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Object Literals&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@&amp;quot;&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@42&lt;/code&gt;, &lt;code&gt;@3.14&lt;/code&gt;, &lt;code&gt;@YES&lt;/code&gt;, &lt;code&gt;@&amp;#39;Z&amp;#39;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@[]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@{}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Objective-C Literals&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@selector()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@protocol()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;C Literals&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@encode()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@defs()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Optimizations&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@autoreleasepool{}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@synchronized{}&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Compatibility&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@compatibility_alias&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Thus concludes this exhaustive rundown of the many faces of &lt;code&gt;@&lt;/code&gt;. It&amp;#39;s a versatile, power-packed character, that embodies the underlying design and mechanisms of the language.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This should be a complete list, but there&amp;#39;s always a chance that some new or long-forgotten ones slipped between the cracks. If you know of any &lt;code&gt;@&lt;/code&gt; directives that were left out, be sure to let &lt;a href=&quot;https://twitter.com/nshipster&quot;&gt;@NSHipster&lt;/a&gt; know.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 08 Oct 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/at-compiler-directives/</link>
        <guid>http://nshipster.com/at-compiler-directives/</guid>
      </item>
    
      <item>
        <title>#pragma</title>
        <description>&lt;p&gt;&lt;code&gt;#pragma&lt;/code&gt; declarations are a mark of craftsmanship in Objective-C. Although originally used to make source code compatible between different compilers, the Xcode-savvy coder uses &lt;code&gt;#pragma&lt;/code&gt; declarations to very different ends.&lt;/p&gt;

&lt;p&gt;In this modern context, &lt;code&gt;#pragma&lt;/code&gt; skirts the line between comment and code. As a preprocessor directive, &lt;code&gt;#pragma&lt;/code&gt; evaluates at compile-time. But unlike other macros, such as &lt;code&gt;#ifdef...#endif&lt;/code&gt;, the way &lt;code&gt;#pragma&lt;/code&gt; is used will not change the runtime behavior of your application. Instead, &lt;code&gt;#pragma&lt;/code&gt; declarations are used by Xcode to accomplish two primary tasks: organizing code and inhibiting compiler warnings.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;In addition to the &lt;code&gt;#pragma&lt;/code&gt; syntax, both &lt;a href=&quot;http://gcc.gnu.org/onlinedocs/cpp/Pragmas.html&quot;&gt;GCC&lt;/a&gt; and &lt;a href=&quot;http://clang.llvm.org/docs/UsersManual.html#controlling-diagnostics-via-pragmas&quot;&gt;Clang&lt;/a&gt; have added the C99 &lt;code&gt;_Pragma&lt;/code&gt; operator.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Organizing Your Code&lt;/h2&gt;

&lt;p&gt;Code organization is a matter of hygiene. How you structure your code is a reflection on you and your work. A lack of convention and internal consistency indicates either carelessness or incompetence--and worse, makes a project difficult to maintain and collaborate on.&lt;/p&gt;

&lt;p&gt;Good habits start with &lt;code&gt;#pragma mark&lt;/code&gt;. Like so:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ViewController&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark - UIViewController&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;viewDidLoad&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark - IBAction&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;IBAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cancel:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sender&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark - UITableViewDataSource&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tableView:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITableView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tableView&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;numberOfRowsInSection:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark - UITableViewDelegate&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tableView:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITableView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tableView&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;didSelectRowAtIndexPath:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSIndexPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;indexPath&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Use &lt;code&gt;#pragma mark&lt;/code&gt; in your &lt;code&gt;@implementation&lt;/code&gt; to divide code into logical sections. Not only do these sections make it easier to read through the code itself, but it also adds visual cues to the Xcode source navigator (&lt;code&gt;#pragma mark&lt;/code&gt; declarations starting with a dash (&lt;code&gt;-&lt;/code&gt;) are preceded with a horizontal divider).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/pragma-xcode-sections.png&quot; alt=&quot;Xcode Sections&quot;&gt;&lt;/p&gt;

&lt;p&gt;If your class conforms to any &lt;code&gt;@protocols&lt;/code&gt;, start by grouping all of the methods within each protocol together, and adding a &lt;code&gt;#pragma mark&lt;/code&gt; header with the name of that protocol. Another good convention is to group subclassed methods according to their respective superclass. For example, an &lt;code&gt;NSInputStream&lt;/code&gt; subclass should have a group marked &lt;code&gt;NSInputStream&lt;/code&gt;, followed by a group marked &lt;code&gt;NSStream&lt;/code&gt;. Things like &lt;code&gt;IBAction&lt;/code&gt; outlets, or methods corresponding to target / action, notification, or KVO selectors probably deserve their own sections as well.&lt;/p&gt;

&lt;p&gt;Your code should be clean enough to eat off of. So take the time to leave your &lt;code&gt;.m&lt;/code&gt; files better than how you found them.&lt;/p&gt;

&lt;h2&gt;Inhibiting Warnings&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;#pragma mark&lt;/code&gt; is pretty mainstream. On the other hand, &lt;code&gt;#pragma&lt;/code&gt; declarations to inhibit warnings from the compiler &amp;amp; static analyzer--now that&amp;#39;s pretty fresh.&lt;/p&gt;

&lt;p&gt;You know what&amp;#39;s even more annoying than poorly-formatted code? Code that generates warnings. Especially 3rd-party code. There are few things as irksome as that one vendor library that takes forever to compile, and finishes with 200+ warnings. Even shipping code with 1 warning is in poor form.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Pro tip: Try setting the &lt;code&gt;-Weverything&lt;/code&gt; flag and checking the &amp;quot;Treat Warnings as Errors&amp;quot; box your build settings. This turns on Hard Mode in Xcode.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;But sometimes there&amp;#39;s no avoiding compiler warnings. Deprecation notices and retain-cycle false positives are two common situations where this might happen. In those rare cases where you are &lt;em&gt;absolutely&lt;/em&gt; certain that a particular compiler or static analyzer warning should be inhibited, &lt;code&gt;#pragma&lt;/code&gt; comes to the rescue:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// completionBlock is manually nilled out in AFURLConnectionOperation to break the retain cycle.&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma clang diagnostic push&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma clang diagnostic ignored &amp;quot;-Warc-retain-cycles&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;completionBlock&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma clang diagnostic pop&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This code sample &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPRequestOperation.m#L247&quot;&gt;from AFNetworking&lt;/a&gt; (contributed by &lt;a href=&quot;https://github.com/steipete&quot;&gt;Peter Steinberger&lt;/a&gt;) is an example of an otherwise unavoidable warning from the static analyzer. Clang notices a strong reference to &lt;code&gt;self&lt;/code&gt; within the block, and warns about a possible &lt;a href=&quot;http://www.quora.com/What-is-a-retain-cycle&quot;&gt;retain cycle&lt;/a&gt;. However, the &lt;code&gt;super&lt;/code&gt; implementation of &lt;code&gt;setCompletionBlock&lt;/code&gt; takes care of this by &lt;code&gt;nil&lt;/code&gt;-ing out the strong reference after the completion block is finished.&lt;/p&gt;

&lt;p&gt;Fortunately, Clang provides a convenient way to get around all of this. Using &lt;code&gt;#pragma clang diagnostic push/pop&lt;/code&gt;, you can tell the compiler to ignore certain warnings, &lt;em&gt;only&lt;/em&gt; for a particular section of code (the original diagnostic settings are restored with the final &lt;code&gt;pop&lt;/code&gt;).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;You can read more about the LLVM&amp;#39;s use of &lt;code&gt;#pragma&lt;/code&gt; in the &lt;a href=&quot;http://clang.llvm.org/docs/UsersManual.html#diagnostics_pragmas&quot;&gt;Clang Compiler User&amp;#39;s Manual&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Just don&amp;#39;t use this as a way to sweep legitimate warnings under the rug--that will only come back to bite you later.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;So there you go: two ways you can markedly improve your code using &lt;code&gt;#pragma&lt;/code&gt; declarations.&lt;/p&gt;

&lt;p&gt;Like the thrift store 8-track player you turned into that lamp in the foyer, &lt;code&gt;#pragma&lt;/code&gt; remains a curious vestige of the past: Once the secret language of compilers, now re-purposed to better-communicate intent to other programmers. How delightfully vintage!&lt;/p&gt;
</description>
        <pubDate>Mon, 01 Oct 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/pragma/</link>
        <guid>http://nshipster.com/pragma/</guid>
      </item>
    
      <item>
        <title>UICollectionView</title>
        <description>&lt;p&gt;&lt;code&gt;UICollectionView&lt;/code&gt; is the new &lt;code&gt;UITableView&lt;/code&gt;. It&amp;#39;s that important.&lt;/p&gt;

&lt;p&gt;This is not to say that collection views are in any way unknown or obscure--anyone who went to any of the WWDC sessions about it, or got to play with in the iOS 6 beta already know what&amp;#39;s up. &lt;/p&gt;

&lt;p&gt;Remember, being an NSHipster isn&amp;#39;t just about knowing obscure gems in the rough. Sometimes, it&amp;#39;s about knowing about up-and-comers before they become popular and sell out. So before everybody else finds out for themselves, here&amp;#39;s the skinny on the next big thing:&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;UICollectionView&lt;/code&gt; takes the familiar patterns of &lt;code&gt;UITableView&lt;/code&gt; and generalizes them to make any layout possible (and, in many cases, trivial).&lt;/p&gt;

&lt;p&gt;Like &lt;code&gt;UITableView&lt;/code&gt;, &lt;code&gt;UICollectionView&lt;/code&gt; is a &lt;code&gt;UIScrollView&lt;/code&gt; subclass that manages a collection of ordered items. Items are managed by a &lt;em&gt;data source&lt;/em&gt;, which provides a representative cell view at a particular index path.&lt;/p&gt;

&lt;p&gt;Unlike &lt;code&gt;UITableView&lt;/code&gt;, however, &lt;code&gt;UICollectionView&lt;/code&gt; is not constrained to a vertical, single-column layout. Instead, a collection view has a &lt;em&gt;layout&lt;/em&gt; object, which determines the position of each subview, similar to a data source in some respects. More on that later.&lt;/p&gt;

&lt;h3&gt;Cell Views&lt;/h3&gt;

&lt;p&gt;In another departure from the old-school table view way of doing things, the process of recycling views has been significantly improved. &lt;/p&gt;

&lt;p&gt;In &lt;code&gt;-tableView:cellForRowAtIndexPath:&lt;/code&gt;, a developer had to invoke the familiar incantation:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;UITableViewCell&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tableView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dequeueReusableCellWithIdentifier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITableViewCell&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reuseIdentifier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;UICollectionView&lt;/code&gt; thankfully does away with this. &lt;code&gt;-dequeueReusableCellWithReuseIdentifier:forIndexPath:&lt;/code&gt; is guaranteed to return a valid object, by creating a new cell if there are no cells to reuse. Simply register a &lt;code&gt;UICollectionReusableView&lt;/code&gt; subclass for a particular reuse identifier, and everything will work automatically. Thankfully, this behavior has been backported to &lt;code&gt;UITableView&lt;/code&gt; as well with iOS 6.&lt;/p&gt;

&lt;h3&gt;Supplementary Views&lt;/h3&gt;

&lt;p&gt;Because collection views aren&amp;#39;t relegated to any particular structure, the convention of &amp;quot;header&amp;quot; and &amp;quot;footer&amp;quot; views isn&amp;#39;t really applicable. So in its place, collection views have &lt;em&gt;supplementary views&lt;/em&gt;, which can be associated with each cell.&lt;/p&gt;

&lt;p&gt;Each cell can have multiple supplementary views associated with it--one for each named &amp;quot;kind&amp;quot;. As such, headers and footers are just the beginning of what can be done with supplementary views. &lt;/p&gt;

&lt;p&gt;The whole point is that with supplementary views, even the most complex layout can be accomplished without compromising the semantic integrity of cells. &lt;code&gt;UITableView&lt;/code&gt; hacks are to &lt;a href=&quot;http://en.wikipedia.org/wiki/Spacer_GIF&quot;&gt;&lt;code&gt;spacer.gif&lt;/code&gt;&lt;/a&gt; as &lt;code&gt;UICollectionView&lt;/code&gt; cells are to &lt;a href=&quot;http://en.wikipedia.org/wiki/Semantic_HTML&quot;&gt;semantic HTML&lt;/a&gt;.&lt;/p&gt;

&lt;h3&gt;Decoration Views&lt;/h3&gt;

&lt;p&gt;In addition to cell views and supplementary views, collections also have &lt;em&gt;decoration views&lt;/em&gt;. A decoration view, as the name implies, is something that without a functional purpose... other than to perhaps &lt;a href=&quot;http://skeu.it&quot;&gt;spurn the hatred of anti-skeuomorphic zealots&lt;/a&gt; across the interwebs. But really, if you&amp;#39;re resigned to imbue your virtual book collection app with immaculately-textured wood-grained shelves, it might as well be easy to do, &lt;em&gt;right&lt;/em&gt;?&lt;/p&gt;

&lt;p&gt;One thing to remember about decoration views is that they are entirely managed by the layout, unlike cell or supplementary views, which are under the jurisdiction of the collection view data source.&lt;/p&gt;

&lt;h2&gt;Layouts and Layout Attributes&lt;/h2&gt;

&lt;p&gt;Layouts are at the heart of what makes &lt;code&gt;UICollectionView&lt;/code&gt; so magical. Think of them as the CSS to your semantic HTML of collection cells from before.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;UICollectionViewLayout&lt;/code&gt; is an abstract base class for positioning cell views and their supplementary and decoration views. But rather than subclass this directly, most applications will opt to use or subclass &lt;code&gt;UICollectionViewFlowLayout&lt;/code&gt;. Flow layouts cover the broad class of layouts with some notion of linearity, whether that&amp;#39;s a single row or column or a grid. &lt;/p&gt;

&lt;p&gt;Until you&amp;#39;re comfortable enough to understand the limitations of flow layouts, it&amp;#39;s generally a safe bet to just start with that. &lt;/p&gt;

&lt;p&gt;Each cell view, supplemental view, and decoration view have layout attributes. To get an idea of how flexible layouts are, look no further than the properties of an &lt;code&gt;UICollectionViewLayoutAttributes&lt;/code&gt; object:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;frame&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;center&lt;/code&gt;&lt;br&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;size&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;transform3D&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;alpha&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;zIndex&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hidden&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Attributes are specified by the kind of delegate methods you might expect:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-layoutAttributesForItemAtIndexPath:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-layoutAttributesForSupplementaryViewOfKind:atIndexPath:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-layoutAttributesForDecorationViewOfKind:atIndexPath:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;What&amp;#39;s &lt;em&gt;extremely&lt;/em&gt; cool is this method here:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-layoutAttributesForElementsInRect:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Using this, you could, for example, fade out items as they approach the edge of the screen. Or, since all of the layout attribute properties are automatically animated, you could create a poor-man&amp;#39;s &lt;a href=&quot;http://en.wikipedia.org/wiki/Cover_Flow&quot;&gt;cover flow&lt;/a&gt; layout in just a couple lines of code with the right set of 3D transforms.&lt;/p&gt;

&lt;p&gt;In fact, collection views can even swap out layouts wholesale, allowing views to transition seamlessly between different modes--all without changing the underlying data.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Since the introduction of the iPad, there has been a subtle, yet lingering tension between the original UI paradigms of the iPhone, and the demands of this newer, larger form factor. With the iPhone 5 here, and a rumored &amp;quot;iPad mini&amp;quot; on the way, this tension could have threatened to fracture the entire platform, had it not been for &lt;code&gt;UICollectionView&lt;/code&gt; (as well as Auto-Layout).&lt;/p&gt;

&lt;p&gt;There are a million ways Apple could (or could not) have provided this kind of functionality, but they really knocked it out of the park with how they designed everything.&lt;/p&gt;

&lt;p&gt;The clean, logical separation between data source and layout; the clear division between cell, supplementary, and decoration views; the extensive set of layout attributes that are automatically animated... a lot of care and wisdom has been put together with these APIs. &lt;/p&gt;

&lt;p&gt;As a result, the entire landscape of iOS apps will be forever changed. With collection views, the aesthetic shift that was kicked off with the iPad will explode into an entire re-definition of how we expect apps to look and behave.&lt;/p&gt;

&lt;p&gt;Everyone may not be hip to collection views quite yet, but now you&amp;#39;ll be able to say that you knew about them before they were cool.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Lest you think you have to hold off for iOS 6 adoption to catch up in order to use collection views in your app, here&amp;#39;s some great news:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/steipete&quot;&gt;Peter Steinberger&lt;/a&gt; has released &lt;a href=&quot;https://github.com/steipete/PSTCollectionView&quot;&gt;PSTCollectionView&lt;/a&gt;, a &lt;em&gt;100% API-compatible replacement for &lt;code&gt;UICollectionView&lt;/code&gt; that supports iOS 4.3+&lt;/em&gt;. Check it out!&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 24 Sep 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/uicollectionview/</link>
        <guid>http://nshipster.com/uicollectionview/</guid>
      </item>
    
      <item>
        <title>NSCharacterSet</title>
        <description>&lt;p&gt;As mentioned &lt;a href=&quot;http://nshipster.com/cfstringtransform/&quot;&gt;previously&lt;/a&gt;, Foundation boasts one of the best, most complete implementations of strings around.&lt;/p&gt;

&lt;p&gt;But a string implementation is only as good as the programmer who wields it. So this week, we&amp;#39;re going to explore some common uses--and misuses--of an important part of the Foundation string ecosystem: &lt;code&gt;NSCharacterSet&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;blockquote&gt;
&lt;p&gt;If you&amp;#39;re fuzzy on what character encodings are (or even if you have a pretty good working knowledge), you should take this opportunity to read / re-read / skim and read later Joel Spolsky&amp;#39;s classic essay &lt;a href=&quot;http://www.joelonsoftware.com/articles/Unicode.html&quot;&gt;&amp;quot;The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)&amp;quot;&lt;/a&gt;. Having that fresh in your mind will give you a much better appreciation of everything we&amp;#39;re about to cover.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;NSCharacterSet&lt;/code&gt; and its mutable counterpart, &lt;code&gt;NSMutableCharacterSet&lt;/code&gt;, provide an object-oriented way of representing sets of Unicode characters. It&amp;#39;s most often used with &lt;code&gt;NSString&lt;/code&gt; &amp;amp; &lt;code&gt;NSScanner&lt;/code&gt; to filter, remove, or split on different kinds of characters. To give you an idea of what those kinds of characters can be, take a look at the class methods provided by &lt;code&gt;NSCharacterSet&lt;/code&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;alphanumericCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;capitalizedLetterCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;controlCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;decimalDigitCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;decomposableCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;illegalCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;letterCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lowercaseLetterCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;newlineCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nonBaseCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;punctuationCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;symbolCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;uppercaseLetterCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;whitespaceAndNewlineCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;whitespaceCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Contrary to what its name might suggest, &lt;code&gt;NSCharacterSet&lt;/code&gt; has &lt;em&gt;nothing&lt;/em&gt; to do with &lt;code&gt;NSSet&lt;/code&gt;. &lt;/p&gt;

&lt;p&gt;However, &lt;code&gt;NSCharacterSet&lt;/code&gt; &lt;em&gt;does&lt;/em&gt; have quite a bit in common with &lt;code&gt;NSIndexSet&lt;/code&gt;, conceptually if not also in its underlying implementation. &lt;code&gt;NSIndexSet&lt;/code&gt;, covered &lt;a href=&quot;http://nshipster.com/nsindexset/&quot;&gt;previously&lt;/a&gt;, represents a sorted collection of unique unsigned integers. Unicode characters are likewise unique unsigned integers that roughly correspond to some orthographic representation. Thus, a character set like &lt;code&gt;NSCharacterSet +lowercaseCharacterSet&lt;/code&gt; is analogous to the &lt;code&gt;NSIndexSet&lt;/code&gt; of the integers 97 to 122.&lt;/p&gt;

&lt;p&gt;Now that we&amp;#39;re comfortable with the basic concepts of &lt;code&gt;NSCharacterSet&lt;/code&gt;, let&amp;#39;s see some of those patterns and anti-patterns:&lt;/p&gt;

&lt;h2&gt;Stripping Whitespace&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSString -stringByTrimmingCharactersInSet:&lt;/code&gt; is a method you should know by heart. It&amp;#39;s most often passed &lt;code&gt;NSCharacterSet +whitespaceCharacterSet&lt;/code&gt; or &lt;code&gt;+whitespaceAndNewlineCharacterSet&lt;/code&gt; in order to remove the leading and trailing whitespace of string input.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s important to note that this method &lt;em&gt;only&lt;/em&gt; strips the &lt;em&gt;first&lt;/em&gt; and &lt;em&gt;last&lt;/em&gt; contiguous sequences of characters in the specified set. That is to say, if you want to remove excess whitespace between words, you need to go a step further.&lt;/p&gt;

&lt;h2&gt;Squashing Whitespace&lt;/h2&gt;

&lt;p&gt;So let&amp;#39;s say you do want to get rid of excessive inter-word spacing for that string you just stripped of whitespace. Here&amp;#39;s a really easy way to do that:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Lorem    ipsum dolar   sit  amet.&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringByTrimmingCharactersInSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCharacterSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;whitespaceCharacterSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;componentsSeparatedByCharactersInSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCharacterSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;whitespaceCharacterSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filteredArrayUsingPredicate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPredicate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predicateWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;self &amp;lt;&amp;gt; &amp;#39;&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;componentsJoinedByString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;First, trim the string of leading and trailing whitespace. Next, use &lt;code&gt;NSString -componentsSeparatedByCharactersInSet:&lt;/code&gt; to split on the remaining whitespace to create an &lt;code&gt;NSArray&lt;/code&gt;. Next, filter out the blank string components with an &lt;code&gt;NSPredicate&lt;/code&gt;. Finally, use &lt;code&gt;NSArray -componentsJoinedByString:&lt;/code&gt; to re-join the components with a single space. Note that this only works for languages like English that delimit words with whitespace.&lt;/p&gt;

&lt;p&gt;And now for the anti-patterns. Take a gander at &lt;a href=&quot;http://stackoverflow.com/questions/758212/how-can-i-strip-all-the-whitespaces-from-a-string-in-objective-c&quot;&gt;the answers to this question on StackOverflow&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;At the time of writing, the correct answer ranks second by number of votes, with 58 up and 2 down. The top answer edges it out with 84 up and 24 down.&lt;/p&gt;

&lt;p&gt;Now, it&amp;#39;s not uncommon for the top-voted / accepted answer to not be the correct one, but this question may set records for number of completely distinct answers (10), and number of unique, completely incorrect answers (9).&lt;/p&gt;

&lt;p&gt;Without further ado, here are the 9 &lt;em&gt;incorrect&lt;/em&gt; answers:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&amp;quot;Use &lt;code&gt;stringByTrimmingCharactersInSet&lt;/code&gt;&amp;quot; - &lt;em&gt;Only strips the leading and trailing whitespace, as you know.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&amp;quot;Replace &amp;#39; &amp;#39; with &amp;#39;&amp;#39;&amp;quot; - &lt;em&gt;This removes &lt;strong&gt;all&lt;/strong&gt; of the spaces. Swing and a miss.&lt;/em&gt; &lt;/li&gt;
&lt;li&gt;&amp;quot;Use a regular expression&amp;quot; - &lt;em&gt;Kinda works, except it doesn&amp;#39;t handle leading and trailing whitespace. A regular expression is overkill anyway.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&amp;quot;Use Regexp Lite&amp;quot; - &lt;em&gt;No seriously, regular expressions are completely unnecessary. And it&amp;#39;s definitely not worth the external dependency.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&amp;quot;Use OgreKit&amp;quot; - &lt;em&gt;Ditto any other third-party regexp library.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&amp;quot;Split the string into components, iterate over them to find components with non-zero length, and then re-combine&amp;quot; - &lt;em&gt;So close, but &lt;code&gt;componentsSeparatedByCharactersInSet:&lt;/code&gt; already makes the iteration unnecessary.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&amp;quot;Replace two-space strings with single-space strings in a while loop&amp;quot; - &lt;em&gt;Wrong and oh-so computationally wasteful&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;&amp;quot;Manually iterate over each &lt;code&gt;unichar&lt;/code&gt; in the string and use &lt;code&gt;NSCharacterSet -characterIsMember:&lt;/code&gt;&amp;quot; - &lt;em&gt;Shows a surprising level of sophistication for missing the method that does this in the standard library.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&amp;quot;Find and remove all of the tabs&amp;quot; - &lt;em&gt;Thanks all the same, but who said anything about tabs?&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I don&amp;#39;t mean to rag on any of the answerers personally--this is all to point out how many ways there are to approach these kinds of tasks, and how many of those ways are totally wrong.&lt;/p&gt;

&lt;h2&gt;String Tokenization&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Do not use &lt;code&gt;NSCharacterSet&lt;/code&gt; to tokenize strings.&lt;/strong&gt;&lt;br&gt;
&lt;strong&gt;Use &lt;code&gt;CFStringTokenizer&lt;/code&gt; instead.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You can be forgiven for using &lt;code&gt;componentsSeparatedByCharactersInSet:&lt;/code&gt; to clean up user input, but do this for anything more complex, and you&amp;#39;ll be in a world of pain.&lt;/p&gt;

&lt;p&gt;Why? Well, remember that bit about languages not always having whitespace word boundaries? As it turns out, those languages are rather widely used. Just Chinese and Japanese--#1 and #9 in terms of number of speakers, respectively--alone account for 16% of the world population, or well over a billion people.&lt;/p&gt;

&lt;p&gt;...and even for languages that do have whitespace word boundaries, tokenization has some obscure edge cases, particularly with compound words and punctuation.&lt;/p&gt;

&lt;p&gt;This is all to say: use &lt;code&gt;CFStringTokenizer&lt;/code&gt; (or &lt;code&gt;enumerateSubstringsInRange:options:usingBlock:&lt;/code&gt;) if you ever intend to split a string by words in any meaningful way.&lt;/p&gt;

&lt;h2&gt;Parse Data From Strings&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSScanner&lt;/code&gt; is a class that helps to parse data out of arbitrary or semi-structured strings. When you create a scanner for a string, you can specify a set of characters to skip, thus preventing any of those characters from somehow being included in the values parsed from the string.&lt;/p&gt;

&lt;p&gt;For example, let&amp;#39;s say you have a string that parses opening hours in the following form:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text language-text&quot; data-lang=&quot;text&quot;&gt;Mon-Thurs:  8:00 - 18:00
Fri:        7:00 - 17:00
Sat-Sun:    10:00 - 15:00
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You might &lt;code&gt;enumerateLinesUsingBlock:&lt;/code&gt; and parse with an &lt;code&gt;NSScanner&lt;/code&gt; like so:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSMutableCharacterSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;skippedCharacters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableCharacterSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;punctuationCharacterSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;skippedCharacters&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;formUnionWithCharacterSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCharacterSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;whitespaceCharacterSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hours&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enumerateLinesUsingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSScanner&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSScanner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scannerWithString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setCharactersToBeSkipped&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;skippedCharacters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startDay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endDay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startHour&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startMinute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endHour&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endMinute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanCharactersFromSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCharacterSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letterCharacterSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intoString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startDay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanCharactersFromSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCharacterSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letterCharacterSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intoString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endDay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanInteger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startHour&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanInteger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startMinute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanInteger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endHour&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanInteger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endMinute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We first construct an &lt;code&gt;NSMutableCharacterSet&lt;/code&gt; from the union of whitespace and punctuation characters. Telling &lt;code&gt;NSScanner&lt;/code&gt; to skip these characters greatly reduces the logic necessary to parse values from the string. &lt;/p&gt;

&lt;p&gt;&lt;code&gt;scanCharactersFromSet:&lt;/code&gt; with the letters character set captures the start and (optional) end day of the week for each entry. &lt;code&gt;scanInteger&lt;/code&gt; similarly captures the next contiguous integer value.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSCharacterSet&lt;/code&gt; and &lt;code&gt;NSScanner&lt;/code&gt; allow you to code quickly and confidently. They&amp;#39;re really a great combination, those two.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSCharacterSet&lt;/code&gt; is but one piece to the Foundation string ecosystem, and perhaps the most misused and misunderstood of them all. By keeping these patterns and anti-patterns in mind, however, not only will you be able to do useful things like manage whitespace and scan information from strings, but--more importantly--you&amp;#39;ll be able to avoid all of the wrong ways to do it.&lt;/p&gt;

&lt;p&gt;And if not being wrong isn&amp;#39;t the most important thing about being an NSHipster, then I don&amp;#39;t want to be right!&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Ed. Speaking of (not) being wrong, the original version of this article contained errors in both code samples. These have since been corrected.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 17 Sep 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nscharacterset/</link>
        <guid>http://nshipster.com/nscharacterset/</guid>
      </item>
    
      <item>
        <title>UIAccessibility</title>
        <description>&lt;blockquote&gt;
&lt;p&gt;We all want to help one another, human beings are like that.&lt;br&gt;
- &lt;a href=&quot;http://en.wikiquote.org/wiki/Charlie_Chaplin&quot;&gt;Charlie Chaplin&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You know what I wish everyone would copy from Apple? Their assistive technologies.&lt;/p&gt;

&lt;p&gt;iPhones and iPads--magical as they are--become downright &lt;em&gt;life-changing&lt;/em&gt; for individuals with disabilities and their families because of Apple&amp;#39;s commitment to accessibility. Look no further than the &lt;a href=&quot;http://www.youtube.com/watch?v=MbP_pxR5cMk&quot;&gt;WWDC 2012 Introduction Video&lt;/a&gt;, which opens with Per Busch, a blind man who walks the woods of Kassel, Germany with the aid of &lt;a href=&quot;http://www.ariadnegps.eu&quot;&gt;Ariadne GPS&lt;/a&gt;. It&amp;#39;s a lovely reminder of the kind of impact our work can have on others.&lt;/p&gt;

&lt;p&gt;Accessibility, like &lt;a href=&quot;http://nshipster.com/nslocale/&quot;&gt;internationalization&lt;/a&gt;, is one of those topics that&amp;#39;s difficult to get developers excited about. But as you know, NSHipster is &lt;em&gt;all about&lt;/em&gt; getting developers excited about this kind of stuff. Let&amp;#39;s get started: &lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;UIAccessibility&lt;/code&gt; is an informal protocol in &lt;code&gt;UIKit&lt;/code&gt; that provides accessibility information about user interface elements. This information is used by VoiceOver and other assistive technologies to help users with disabilities interact with your application.&lt;/p&gt;

&lt;p&gt;All of the standard views and controls in UIKit implement &lt;code&gt;UIAccessibility&lt;/code&gt;, so applications are accessible by default. As a result, the task of improving the accessibility of your application is one of minor adjustments rather than wholesale re-implementation.&lt;/p&gt;

&lt;p&gt;Here&amp;#39;s a list of all of the properties in &lt;code&gt;UIAccessibility&lt;/code&gt;: &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;accessibilityLabel&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;accessibilityHint&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;accessibilityValue&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;accessibilityLanguage&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;accessibilityTraits&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;accessibilityFrame&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;accessibilityActivationPoint&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;accessibilityElementsHidden&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;accessibilityViewIsModal&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Enabling Accessibility&lt;/h2&gt;

&lt;p&gt;Before we go any further, take a couple minutes to play with VoiceOver, and understand how accessibility information is conveyed to the user. Open the Settings app, tap General, scroll to the bottom and tap Accessibility. In Accessibility, you&amp;#39;ll see settings for assistive technologies grouped by category: Vision, Hearing, Learning, and Physical &amp;amp; Motor.&lt;/p&gt;

&lt;p&gt;Tap VoiceOver, and then tap the VoiceOver switch to turn it on. An alert will pop up telling you that enabling VoiceOver changes the way you control your device. Dismiss the alert, and now VoiceOver is now enabled on your device. &lt;/p&gt;

&lt;p&gt;Don&amp;#39;t Panic--unlike setting your device to another language, there&amp;#39;s no real risk of not being able to figure out how to turn VoiceOver off.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/uiaccessibility-voiceover.png&quot; alt=&quot;VoiceOver Settings&quot;&gt;&lt;/p&gt;

&lt;p&gt;Using the device in VoiceOver mode is a bit different than you&amp;#39;re used to:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Tap once to select an item&lt;/li&gt;
&lt;li&gt;Double-Tap to activate the selected item&lt;/li&gt;
&lt;li&gt;Swipe with three fingers to scroll&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Press the Home button and start exploring!&lt;/p&gt;

&lt;p&gt;You&amp;#39;ll notice that all of the stock Apple apps--Messages, Calendar, Weather--each is fully-usable in VoiceOver mode. Heck, &lt;em&gt;even Camera is usable&lt;/em&gt;, with &lt;a href=&quot;http://svan.ca/blog/2012/blind/&quot;&gt;VoiceOver telling you where faces are in your camera&amp;#39;s viewport&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;By contrast (perhaps), try some of the apps you&amp;#39;ve downloaded from the App Store. You may be surprised that some (but certainly not all) of the most visually-stunning apps, with all of their custom controls and interactions are completely unusable in this mode.&lt;/p&gt;

&lt;p&gt;So now that you have an idea of what you&amp;#39;re working with, let&amp;#39;s talk about implementation:&lt;/p&gt;

&lt;h2&gt;Label &amp;amp; Hint&lt;/h2&gt;

&lt;p&gt;If there was just one thing you could do to improve the accessibility of your app, paying attention to accessibility labels and hints of UI elements would be it.&lt;/p&gt;

&lt;p&gt;Accessibility labels and hints tell VoiceOver what to say when selecting user interface elements. This information should be helpful, but concise. &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;accessibilityLabel&lt;/code&gt;&lt;/strong&gt; identifies a user interface element. Every accessible view and control &lt;em&gt;must&lt;/em&gt; supply a label.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;accessibilityHint&lt;/code&gt;&lt;/strong&gt; describes the results of interacting with a user interface element. A hint should be supplied &lt;em&gt;only&lt;/em&gt; if the result of an interaction is not obvious from the element&amp;#39;s label.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iPhoneAccessibility/Making_Application_Accessible/Making_Application_Accessible.html&quot;&gt;Accessibility Programming Guide&lt;/a&gt; provides the following guidelines for labels and hints:&lt;/p&gt;

&lt;blockquote&gt;
&lt;h3&gt;Guidelines for Creating Labels&lt;/h3&gt;

&lt;p&gt;If you provide a custom control or view, or if you display a custom icon in a standard control or view, you need to provide a label that:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Very briefly describes the element.&lt;/strong&gt; Ideally, the label consists of a single word, such as Add, Play, Delete, Search, Favorites, or Volume.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Does not include the type of the control or view.&lt;/strong&gt; The type information is contained in the traits attribute of the element and should never be repeated in the label.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Begins with a capitalized word.&lt;/strong&gt; This helps VoiceOver read the label with the appropriate inflection.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Does not end with a period.&lt;/strong&gt; The label is not a sentence and therefore should not end with a period.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Is localized.&lt;/strong&gt; Be sure to make your application available to as wide an audience as possible by localizing all strings, including accessibility attribute strings. In general, VoiceOver speaks in the language that the user specifies in International settings.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Guidelines for Creating Hints&lt;/h3&gt;

&lt;p&gt;The hint attribute describes the results of performing an action on a control or view. You should provide a hint only when the results of an action are not obvious from the element’s label.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Very briefly describes the results.&lt;/strong&gt; Even though few controls and views need hints, strive to make the hints you do need to provide as brief as possible. Doing so decreases the amount of time users must spend listening before they can use the element.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Begins with a verb and omits the subject.&lt;/strong&gt; Be sure to use the third-person singular declarative form of a verb, such as “Plays,” and not the imperative, such as “Play.” You want to avoid using the imperative, because using it can make the hint sound like a command.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Begins with a capitalized word and ends with a period.&lt;/strong&gt; Even though a hint is a phrase, not a sentence, ending the hint with a period helps VoiceOver speak it with the appropriate inflection.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Does not include the name of the action or gesture.&lt;/strong&gt; A hint does not tell users how to perform the action, it tells users what will happen when that action occurs.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Does not include the name of the control or view.&lt;/strong&gt; The user gets this information from the label attribute, so you should not repeat it in the hint.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Is localized&lt;/strong&gt;. As with accessibility labels, hints should be available in the user’s preferred language.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Traits&lt;/h2&gt;

&lt;p&gt;If you are using custom controls, or have taken liberties with non-standard use of a standard control, you should make sure to specify the correct accessibility traits.&lt;/p&gt;

&lt;p&gt;Accessibility traits describe a set of traits that characterize how a control behaves or should be treated. Examples include distinctions like:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Button&lt;/li&gt;
&lt;li&gt;Link&lt;/li&gt;
&lt;li&gt;Search Field&lt;/li&gt;
&lt;li&gt;Keyboard Key&lt;/li&gt;
&lt;li&gt;Static Text&lt;/li&gt;
&lt;li&gt;Image&lt;/li&gt;
&lt;li&gt;Plays Sound&lt;/li&gt;
&lt;li&gt;Selected&lt;/li&gt;
&lt;li&gt;Summary Element&lt;/li&gt;
&lt;li&gt;Updates Frequently&lt;/li&gt;
&lt;li&gt;Causes Page Turn&lt;/li&gt;
&lt;li&gt;Not Enabled&lt;/li&gt;
&lt;li&gt;None&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The &lt;code&gt;accessibilityTraits&lt;/code&gt; property takes a bitmask of &lt;code&gt;UIAccessibilityTraits&lt;/code&gt; values, which can be combined in ways specified in the documentation.&lt;/p&gt;

&lt;p&gt;For example, if a custom button control displays an image and plays a sound when tapped, you should define the traits for &amp;quot;Button&amp;quot;, &amp;quot;Image&amp;quot;, and &amp;quot;Plays Sound&amp;quot;. Or, if you were to use a &lt;code&gt;UISlider&lt;/code&gt; for purely decorative purposes, you should set the &amp;quot;Not Enabled&amp;quot; trait.&lt;/p&gt;

&lt;h2&gt;Frame &amp;amp; Activation Point&lt;/h2&gt;

&lt;p&gt;As a general rule, the cleverness of a custom UI element is directly proportional to how gnarly its implementation is. Overlapping &amp;amp; invisible views, table view hacks, first responder shenanigans: sometimes it&amp;#39;s better not to ask how something works.&lt;/p&gt;

&lt;p&gt;However, when it comes to accessibility, it&amp;#39;s important to set the record straight. &lt;/p&gt;

&lt;p&gt;&lt;code&gt;accessibilityFrame&lt;/code&gt; and &lt;code&gt;accessibilityActivationPoint&lt;/code&gt; are used to define the accessible portions and locations of UI elements, without changing their outward appearance.&lt;/p&gt;

&lt;p&gt;As you try out your app in VoiceOver mode, try interacting with all of the elements on each screen. If the selection target is not what you expected, you can use &lt;code&gt;accessibilityFrame&lt;/code&gt; and &lt;code&gt;accessibilityActivationPoint&lt;/code&gt; to adjust accordingly.&lt;/p&gt;

&lt;h2&gt;Value&lt;/h2&gt;

&lt;p&gt;Accessibility value corresponds to the content of a user interface element. For a label, the value is its text. For a &lt;code&gt;UISlider&lt;/code&gt;, it&amp;#39;s the current numeric value represented by the control.&lt;/p&gt;

&lt;p&gt;Want to know a quick way to improve the accessibility of your table views? Try setting the &lt;code&gt;accessibilityValue&lt;/code&gt; property for cells to be a localized summary of the cell&amp;#39;s content. For example, if you had a table view that showed status updates, you might set the &lt;code&gt;accessibilityLabel&lt;/code&gt; to &amp;quot;Update from #{User Name}&amp;quot;, and the &lt;code&gt;accessibilityValue&lt;/code&gt; to the content of that status update. &lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Apple has done a great service to humanity in making accessibility a first-class citizen in its hardware and software. You&amp;#39;re missing out on some of the best engineering, design, and technical writing that Apple has ever done if you ignore &lt;code&gt;UIAccessibility&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Do yourself a favor and read the &lt;em&gt;excellent&lt;/em&gt; &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iPhoneAccessibility/Introduction/Introduction.html&quot;&gt;Accessibility Programming Guide for iOS&lt;/a&gt;. It only takes an hour or two to get the hang of everything. &lt;/p&gt;

&lt;p&gt;Who knows? You may end up changing someone&amp;#39;s life because of it.&lt;/p&gt;
</description>
        <pubDate>Mon, 10 Sep 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/uiaccessibility/</link>
        <guid>http://nshipster.com/uiaccessibility/</guid>
      </item>
    
      <item>
        <title>NSLocale</title>
        <description>&lt;p&gt;Internationalization is like flossing: everyone knows they should do it, but probably don&amp;#39;t. &lt;/p&gt;

&lt;p&gt;And like any habit, it becomes second-nature with practice, to the point that you couldn&amp;#39;t imagine &lt;em&gt;not&lt;/em&gt; doing it. All it takes is for someone to show you the way. &lt;/p&gt;

&lt;p&gt;Let NSHipster be your dental hygienist Virgil through these foreign lands.. without all of the lecturing about tooth decay (promsies!)&lt;/p&gt;

&lt;h2&gt;i18n versus l10n&lt;/h2&gt;

&lt;p&gt;As is necessary in any discussion about Internationalization (i18n) or Localization (l10n), we must take some time to differentiate the two:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Localization&lt;/strong&gt; is the process of adapting your application for a specific market, or &lt;em&gt;locale&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Internationalization&lt;/strong&gt; is the process of preparing your app to be localized. &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Internationalization is a necessary, but not sufficient condition for localization, and will be the focus of this article. Localization, which involves the translation of text and assets into a particular language, will be covered in a future edition of NSHipster.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;What makes internationalization difficult is having to think outside of your cultural context. All of the assumptions you have about the way things are supposed to work must be acknowledged and reconsidered. You have to fight the urge to write off things that may seem trivial, like sorting and collation, and empathize with the pain and confusion even minor differences may cause.&lt;/p&gt;

&lt;p&gt;Fortunately for us, we don&amp;#39;t have to do this alone. Meet &lt;code&gt;NSLocale&lt;/code&gt;:&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;NSLocale&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSLocale&lt;/code&gt; is a Foundation class that encapsulates all of the conventions about language and culture for a particular locale. A locale encompasses all of the linguistic and cultural norms of a particular group of people, including:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Language&lt;/li&gt;
&lt;li&gt;Keyboards&lt;/li&gt;
&lt;li&gt;Number, Date, and Time Formats&lt;/li&gt;
&lt;li&gt;Currency&lt;/li&gt;
&lt;li&gt;Collation and Sorting&lt;/li&gt;
&lt;li&gt;Use of Symbols, Colors, and Iconography&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Each locale corresponds to a &lt;em&gt;locale identifier&lt;/em&gt;, such as &lt;code&gt;en_US&lt;/code&gt;, &lt;code&gt;fr_FR&lt;/code&gt;, &lt;code&gt;ja_JP&lt;/code&gt;, and &lt;code&gt;en_GB&lt;/code&gt;, which include a language code (e.g. &lt;code&gt;en&lt;/code&gt; for English) and a region code (e.g. &lt;code&gt;US&lt;/code&gt; for United States). &lt;/p&gt;

&lt;p&gt;Locale identifiers can encode more explicit preferences about currency, calendar system, or number formats, such as in the case of &lt;code&gt;de_DE@collation=phonebook,currency=DDM&lt;/code&gt;, which specifies German spoken in Germany, using &lt;a href=&quot;http://developer.mimer.com/charts/german_phonebook.htm&quot;&gt;phonebook collation&lt;/a&gt;, and using the pre-Euro &lt;a href=&quot;http://en.wikipedia.org/wiki/Deutsche_Mark&quot;&gt;Deutsche Mark&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Users can change their locale settings in the &amp;quot;Language &amp;amp; Text&amp;quot; (or &amp;quot;International&amp;quot; on older versions of OS X) System Preferences on the Mac, or &amp;quot;General &amp;gt; International&amp;quot; in iOS Settings.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/nslocale-international-system-preferences.png&quot; alt=&quot;Language &amp;amp; Text System Preferences&quot;&gt;&lt;/p&gt;

&lt;h2&gt;Formatting Dates &amp;amp; Numbers&lt;/h2&gt;

&lt;p&gt;Although &lt;code&gt;NSLocale&lt;/code&gt; encapsulates a rich set of domain-specific information, its typical usage is rather understated. &lt;/p&gt;

&lt;p&gt;If there&amp;#39;s just one thing you should learn about &lt;code&gt;NSLocale&lt;/code&gt;, it&amp;#39;s that you should always pass &lt;code&gt;[NSLocale currentLocale]&lt;/code&gt; into your &lt;code&gt;NSDateFormatter&lt;/code&gt; and &lt;code&gt;NSNumberFormatter&lt;/code&gt; instances. Doing this will ensure that dates, numbers, and currencies will be formatted according to the localization preferences of the user.&lt;/p&gt;

&lt;p&gt;Actually, make that a meta lesson about locales: always use &lt;code&gt;NSDateFormatter&lt;/code&gt; and &lt;code&gt;NSNumberFormatter&lt;/code&gt; when displaying anything to do with dates or numbers, respectively.&lt;/p&gt;

&lt;p&gt;But let&amp;#39;s get back to some of the cool features of &lt;code&gt;NSLocale&lt;/code&gt; itself, shall we?&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;-objectForKey:&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSLocale&lt;/code&gt; typifies Foundation&amp;#39;s obsession with domain-specific pedantry, and nowhere is this more visible than in &lt;code&gt;-objectForKey:&lt;/code&gt;. Cue the list of available constants:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSLocaleIdentifier&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleLanguageCode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleCountryCode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleScriptCode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleVariantCode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleExemplarCharacterSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleCalendar&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleCollationIdentifier&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleUsesMetricSystem&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleMeasurementSystem&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleDecimalSeparator&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleGroupingSeparator&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleCurrencySymbol&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleCurrencyCode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleCollatorIdentifier&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleQuotationBeginDelimiterKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleQuotationEndDelimiterKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleAlternateQuotationBeginDelimiterKey&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSLocaleAlternateQuotationEndDelimiterKey&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;While this all may seem like fairly esoteric stuff, you may be surprised by the number of opportunities your application has to use this information to make for a better user experience. &lt;/p&gt;

&lt;p&gt;It&amp;#39;s the small things, like knowing that quotation marks vary between locales:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;English: “I can eat glass, it doesn&amp;#39;t harm me.”&lt;br&gt;
German: „Ich kann Glas essen, das tut mir nicht weh.“&lt;br&gt;
Japanese:「私はガラスを食べられます。それは私を傷つけません。」  &lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So if you were building a component that added quotations around arbitrary text, you should use &lt;code&gt;NSLocaleQuotationBeginDelimiterKey&lt;/code&gt; and &lt;code&gt;NSLocaleAlternateQuotationEndDelimiterKey&lt;/code&gt; rather than assuming &lt;code&gt;@&amp;quot;\&amp;quot;&amp;quot;&lt;/code&gt; for English quotation marks.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;-displayNameForKey:value:&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Another impressive, albeit mostly-useless method is &lt;code&gt;-displayNameForKey:value:&lt;/code&gt;, which can return the display name of a locale identifier (&lt;code&gt;NSLocaleIdentifier&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSLocale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frLocale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocale&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithLocaleIdentifier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;fr_FR&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;fr_FR: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frLocale&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;displayNameForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocaleIdentifier&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;fr_FR&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;en_US: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frLocale&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;displayNameForKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocaleIdentifier&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;en_US&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;fr&lt;em&gt;FR: français (France)&lt;br&gt;
en&lt;/em&gt;US: anglais (États-Unis)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You should use this method any time you need to display information about the user&amp;#39;s current locale, or any alternative locales available to them, like in this screen from the Settings app:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nshipster.s3.amazonaws.com/nslocale-languages-settings.png&quot; alt=&quot;Languages Settings&quot;&gt;&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;+preferredLanguages&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;One final method worth mentioning is &lt;code&gt;NSLocale +preferredLanguages&lt;/code&gt;, which returns an array of &lt;a href=&quot;http://tools.ietf.org/html/bcp47&quot;&gt;IETF BCP 47 language identifier&lt;/a&gt; strings, in order of user preference.&lt;/p&gt;

&lt;p&gt;An app that communicates with a web server can use these values to define the &lt;code&gt;Accept-Language&lt;/code&gt; HTTP header, such that the server has the option to return localized resources:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSMutableURLRequest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSLocale&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preferredLanguages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;componentsJoinedByString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forHTTPHeaderField&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Accept-Language&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Even if your server doesn&amp;#39;t yet localize its resources, putting this in place now will allow you to flip the switch when the time comes, without having to push an update to the client. Neat!&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Internationalization is often considered to be an un-sexy topic in programming--just another chore that most projects don&amp;#39;t have to worry about. In actuality, designing software for other locales is a valuable exercise (and not just for the economic benefits of expanding your software into other markets). &lt;/p&gt;

&lt;p&gt;One of the greatest joys and challenges in programming is in designing systems that can withstand change. The only way designs can survive this level of change is to identify and refactor assumptions about the system that may not always hold. In this way, internationalization represents the greatest challenge, making us question everything about our cultural identity. And in doing so, we become not just better programmers, but better people, too.&lt;/p&gt;

&lt;p&gt;So go and be a better person: make &lt;code&gt;NSLocale&lt;/code&gt; part of your daily ritual.&lt;/p&gt;
</description>
        <pubDate>Mon, 03 Sep 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nslocale/</link>
        <guid>http://nshipster.com/nslocale/</guid>
      </item>
    
      <item>
        <title>CFBag</title>
        <description>&lt;p&gt;Objective-C is a language caught between two worlds. &lt;/p&gt;

&lt;p&gt;On one side, it follows the thoughtful, object-oriented philosophy of &lt;a href=&quot;http://en.wikipedia.org/wiki/Smalltalk&quot;&gt;Smalltalk&lt;/a&gt;, which brings ideas like message sending and named parameters. On the other, are the inescapable vestiges of &lt;a href=&quot;http://en.wikipedia.org/wiki/C_(programming_language)&quot;&gt;C&lt;/a&gt;, which brings it power and a dash of chaos.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s an identity crisis borne out through an ever-increasing prevalence of the &lt;code&gt;@&lt;/code&gt; symbol.&lt;/p&gt;

&lt;p&gt;This is also seen in the relationship between the Foundation and Core Foundation, particularly with the toll-free bridged collection class clusters: &lt;code&gt;NSArray&lt;/code&gt; / &lt;code&gt;CFArray&lt;/code&gt;, &lt;code&gt;NSDictionary&lt;/code&gt; / &lt;code&gt;CFDictionary&lt;/code&gt;, &lt;code&gt;NSSet&lt;/code&gt; / &lt;code&gt;CFSet&lt;/code&gt;. These collections can be passed back and forth between C functions and Objective-C methods without conversion. A leak in the abstraction, but a useful way to optimize the most critical parts of an application nonetheless.&lt;/p&gt;

&lt;p&gt;However, toll-free bridging is the exception when it comes to collection classes in Foundation and Core Foundation:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Foundation&lt;/th&gt;
      &lt;th&gt;Core Foundation&lt;/th&gt;
      &lt;th&gt;Toll-Free Bridged&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSArray&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;CFArray&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;
      &lt;td&gt;✓&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSCountedSet&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;CFBag&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;em&gt;N/A&lt;/em&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;CFBinaryHeap&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;em&gt;N/A&lt;/em&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;CFBitVector&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSDictionary&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;CFDictionary&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;
      &lt;td&gt;✓&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSIndexSet&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;N/A&lt;/em&gt;&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSMapTable&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;N/A&lt;/em&gt;&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSOrderedSet&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;N/A&lt;/em&gt;&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSPointerArray&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;N/A&lt;/em&gt;&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSPointerFunctions&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;N/A&lt;/em&gt;&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;NSSet&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;
      &lt;td&gt;&lt;tt&gt;CFSet&lt;/tt&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/td&gt;
      &lt;td&gt;✓&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td colspan=&quot;3&quot;&gt;&lt;sup&gt;*&lt;/sup&gt; Indicates Mutable Counterpart&lt;/td&gt; 
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;p&gt;Take a look at the second row, with &lt;code&gt;NSCountedSet&lt;/code&gt; and &lt;code&gt;CFBag&lt;/code&gt;. Notice that unlike the other Foundation / Core Foundation correspondence, these two are not toll-free bridged. No real explanation for this is provided in the documentation, aside from it being acknowledged in the &lt;code&gt;NSCountedSet&lt;/code&gt; documentation. My guess is that it has something to do with &lt;code&gt;NSCountedSet&lt;/code&gt; not having a mutable counterpart, and thus breaking the class cluster pattern seen in &lt;code&gt;NSArray&lt;/code&gt;, et al.&lt;/p&gt;

&lt;h2&gt;Bags, in the Abstract&lt;/h2&gt;

&lt;p&gt;In the &lt;a href=&quot;http://en.wikipedia.org/wiki/Collection_(abstract_data_type)&quot;&gt;pantheon of collection data types&lt;/a&gt; in computer science, bag doesn&amp;#39;t really have the same clout as lists, sets, associative arrays, trees, graphs, or priority queues. &lt;/p&gt;

&lt;p&gt;In fact, it&amp;#39;s pretty obscure. You&amp;#39;ve probably never heard of it.&lt;/p&gt;

&lt;p&gt;A bag, or &lt;a href=&quot;http://en.wikipedia.org/wiki/Multiset&quot;&gt;multiset&lt;/a&gt; is a variant of a set, where members can appear more than once. A count is associated with each unique member of the collection, representing the number of times it has been added. Like with sets, order does not matter.&lt;/p&gt;

&lt;p&gt;Its practical applications are... limited, but you&amp;#39;ll know one when it comes up. Tallying votes in a general election? Simulating homework problems an intro probability class? Implementing a game of Yahtzee? Bag is your new bicycle!&lt;/p&gt;

&lt;h2&gt;Working with &lt;code&gt;CFMutableBag&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;As an implementation of the bag data type, &lt;code&gt;CFBag&lt;/code&gt; and its mutable counterpart, &lt;code&gt;CFMutableBag&lt;/code&gt;, are pretty slick. &lt;/p&gt;

&lt;p&gt;Although it lacks the object-oriented convenience of &lt;code&gt;NSCountedSet&lt;/code&gt;, it makes up for it with a number of ways to customize its behavior. When &lt;code&gt;CFBag&lt;/code&gt; is created, it can be initialized with a number of callbacks, defined by the &lt;code&gt;CFBagCallBacks&lt;/code&gt; struct, which specify the way values are inserted, removed, and compared:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFBagCallBacks&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFIndex&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFBagRetainCallBack&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;retain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFBagReleaseCallBack&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;release&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFBagCopyDescriptionCallBack&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copyDescription&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFBagEqualCallBack&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;equal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;CFBagHashCallBack&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFBagCallBacks&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFBagCallBacks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;retain&lt;/code&gt;: callback used to retain values as they&amp;#39;re added to the collection&lt;/li&gt;
&lt;li&gt;&lt;code&gt;release&lt;/code&gt;: callback used to release values as they&amp;#39;re removed from the collection&lt;/li&gt;
&lt;li&gt;&lt;code&gt;copyDescription&lt;/code&gt;: callback used to create a string description of each value in the collection&lt;/li&gt;
&lt;li&gt;&lt;code&gt;equal&lt;/code&gt;: callback used to compare values in the collection for equality&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hash&lt;/code&gt;: callback used to compute hash codes for values in the collection&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For example, if you were implementing a vote tallying application, you could specify a normalizing function for &lt;code&gt;retain&lt;/code&gt; to ensure that votes for mixed-case or misspelled names went to the right candidate, or ensure that the &amp;quot;correct&amp;quot; candidate is shown to be the winner when all the votes are in, with &lt;code&gt;equal&lt;/code&gt; callback. &lt;/p&gt;

&lt;p&gt;&lt;code&gt;CFMutableBag&lt;/code&gt; also has &lt;code&gt;CFBagApplyFunction&lt;/code&gt;, which has the ability to transform values over the collection, like if you wanted to smooth out vote counts, or something like that.&lt;/p&gt;

&lt;p&gt;So in closing, if you need to rig an election, &lt;code&gt;CFBag&lt;/code&gt; is your best bet.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;But seriously, &lt;code&gt;CFBag&lt;/code&gt;, useful in its own right, serves as a reminder of the hidden gems to be found within the standard frameworks and libraries--indeed what is at the very heart of being an NSHipster. &lt;/p&gt;

&lt;p&gt;Also, &lt;code&gt;CFBinaryHeap&lt;/code&gt;? &lt;code&gt;NSPointerFunctions&lt;/code&gt;? &lt;code&gt;NSMapTable&lt;/code&gt;? Surely, you&amp;#39;ll be seeing more of these in future editions.&lt;/p&gt;
</description>
        <pubDate>Mon, 27 Aug 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/cfbag/</link>
        <guid>http://nshipster.com/cfbag/</guid>
      </item>
    
      <item>
        <title>NSOperation</title>
        <description>&lt;p&gt;Everyone knows that the secret to making an app snappy and responsive is to offload computation to be done asynchronously in the background. &lt;/p&gt;

&lt;p&gt;The modern Objective-C developer has two options in this respect: &lt;a href=&quot;http://en.wikipedia.org/wiki/Grand_Central_Dispatch&quot;&gt;Grand Central Dispatch&lt;/a&gt; or &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html&quot;&gt;&lt;code&gt;NSOperation&lt;/code&gt;&lt;/a&gt;. Since GCD has gone pretty mainstream, let&amp;#39;s focus on the latter, object-oriented approach.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSOperation&lt;/code&gt; represents a single unit of computation. It&amp;#39;s an abstract class that gives subclasses a useful, thread-safe way to model aspects like state, priority, dependencies, and cancellation. Or, if subclassing isn&amp;#39;t your cup of tea, there&amp;#39;s always &lt;code&gt;NSBlockOperation&lt;/code&gt;, a concrete subclass that wraps block in operations.&lt;/p&gt;

&lt;p&gt;Examples of tasks that lend themselves well to &lt;code&gt;NSOperation&lt;/code&gt; include &lt;a href=&quot;https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFURLConnectionOperation.h&quot;&gt;network requests&lt;/a&gt;, image resizing, linguistic processing, or any other repeatable, structured, long-running task that returns processed data.&lt;/p&gt;

&lt;p&gt;But simply wrapping computation into an object doesn&amp;#39;t do much without a little oversight. That&amp;#39;s where &lt;code&gt;NSOperationQueue&lt;/code&gt; comes in.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSOperationQueue&lt;/code&gt; regulates the concurrent execution of operations. It acts as a priority queue, such that operations are executed in a roughly First-In-First-Out manner, with higher-priority (&lt;code&gt;NSOperation -queuePriority&lt;/code&gt;) ones getting to jump ahead of lower-priority ones. &lt;code&gt;NSOperationQueue&lt;/code&gt; also executes operations concurrently, with the option to limit the maximum number to be executed simultaneously (&lt;code&gt;maxConcurrentOperationCount&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;To kick off an &lt;code&gt;NSOperation&lt;/code&gt;, you can either call &lt;code&gt;-start&lt;/code&gt;, or add it to an &lt;code&gt;NSOperationQueue&lt;/code&gt;, which will automatically start the operation when it reaches the front of the queue.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s go through the different parts of &lt;code&gt;NSOperation&lt;/code&gt;, describing how they&amp;#39;re used and how to implement them in subclasses:&lt;/p&gt;

&lt;h2&gt;State&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSOperation&lt;/code&gt; encodes a rather elegant state machine to describe the execution of an operation:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;isReady&lt;/code&gt; → &lt;code&gt;isExecuting&lt;/code&gt; → &lt;code&gt;isFinished&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In lieu of an explicit &lt;code&gt;state&lt;/code&gt; property, state is determined implicitly by KVO notifications on those keypaths. That is, when an operation is ready to be executed, it sends a KVO notification for the &lt;code&gt;isReady&lt;/code&gt; keypath, whose corresponding property would then return &lt;code&gt;YES&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Each property must be mutually exclusive from one-another in order to encode a consistent state:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;isReady&lt;/code&gt;: Returns &lt;code&gt;YES&lt;/code&gt; to indicate that the operation is ready to execute, or &lt;code&gt;NO&lt;/code&gt; if there are still unfinished initialization steps on which it is dependent.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;isExecuting&lt;/code&gt;: Returns &lt;code&gt;YES&lt;/code&gt; if the operation is currently working on its task, or &lt;code&gt;NO&lt;/code&gt; otherwise.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;isFinished&lt;/code&gt; Returns &lt;code&gt;YES&lt;/code&gt; if the operation&amp;#39;s task finished execution successfully, or if the operation was cancelled. An &lt;code&gt;NSOperationQueue&lt;/code&gt; does not dequeue an operation until &lt;code&gt;isFinished&lt;/code&gt; changes to &lt;code&gt;YES&lt;/code&gt;, so it is critical to implement this correctly so as to avoid deadlock.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Cancellation&lt;/h2&gt;

&lt;p&gt;It may be useful to cancel operations early to prevent needless work from being performed. Reasons for cancellation may include explicit user action, or a failure in a dependent operation.&lt;/p&gt;

&lt;p&gt;Similar to execution state, &lt;code&gt;NSOperation&lt;/code&gt; communicates changes in cancellation state through KVO on the &lt;code&gt;isCancelled&lt;/code&gt; keypath. When an operation responds to the &lt;code&gt;-cancel&lt;/code&gt; command, it should clean up any internal details and arrive in an appropriate final state as quickly as possible. Specifically, the values for both &lt;code&gt;isCancelled&lt;/code&gt; and &lt;code&gt;isFinished&lt;/code&gt; need to become &lt;code&gt;YES&lt;/code&gt;, and the value of &lt;code&gt;isExecuting&lt;/code&gt; to &lt;code&gt;NO&lt;/code&gt;. &lt;/p&gt;

&lt;p&gt;One thing to definitely watch out for are the spelling peculiarities around the word &amp;quot;cancel&amp;quot;. Although spelling varies across dialects, when it comes to &lt;code&gt;NSOperation&lt;/code&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cancel&lt;/code&gt;: use one L for the method (verb)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;isCancelled&lt;/code&gt;: use two L&amp;#39;s for the property (adjective)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Priority&lt;/h2&gt;

&lt;p&gt;All operations may not be equally important. Setting the &lt;code&gt;queuePriority&lt;/code&gt; property will promote or defer an operation in an &lt;code&gt;NSOperationQueue&lt;/code&gt; according to the following ranking:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSOperationQueuePriorityVeryHigh&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSOperationQueuePriorityHigh&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSOperationQueuePriorityNormal&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSOperationQueuePriorityLow&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSOperationQueuePriorityVeryLow&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Additionally, operations may specify a &lt;code&gt;threadPriority&lt;/code&gt; value, which is a value between &lt;code&gt;0.0&lt;/code&gt; and &lt;code&gt;1.0&lt;/code&gt;, with &lt;code&gt;1.0&lt;/code&gt; representing the highest priority. Whereas &lt;code&gt;queuePriority&lt;/code&gt; determine the order in which operations are started, &lt;code&gt;threadPriority&lt;/code&gt; specifies the allocation of computation once an operation has been started. But as with most threading details, if you don&amp;#39;t know what it does, you probably didn&amp;#39;t need to know about it anyway.&lt;/p&gt;

&lt;h2&gt;Dependencies&lt;/h2&gt;

&lt;p&gt;Depending on the complexity of your application, it may make sense to divide up large tasks into a series of composable sub-tasks. You can do that using &lt;code&gt;NSOperation&lt;/code&gt; dependencies.&lt;/p&gt;

&lt;p&gt;For example, to describe the process of downloading and resizing an image from a server, you would probably want to divide up the networking into one operation, and resizing into another (perhaps to reuse the networking operation to download other resources, or reuse the resizing operation for images already on-disk). However, an image can&amp;#39;t be resized until its  downloaded. Therefore, we say that the networking operation is a &lt;em&gt;dependency&lt;/em&gt; of the resizing operation, and must be finished before the resizing operation can be started. Expressed in code:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resizingOperation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addDependency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;networkingOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operationQueue&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addOperation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;networkingOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operationQueue&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addOperation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resizingOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;An operation will not be started until all of its dependencies return &lt;code&gt;YES&lt;/code&gt; to &lt;code&gt;isFinished&lt;/code&gt;. It&amp;#39;s important to remember to add all of the operations involved in a dependency graph to the operation queue, lest there be a gap somewhere along the way.&lt;/p&gt;

&lt;p&gt;Also, make sure not to accidentally create a dependency cycle, such that A depends on B, and B depends on A, for example. This will create deadlock and sadness.&lt;/p&gt;

&lt;h2&gt;&lt;code&gt;completionBlock&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;One useful feature that was added in the blocks renaissance of iOS 4 and Snow Leopard was the &lt;code&gt;completionBlock&lt;/code&gt; property.&lt;/p&gt;

&lt;p&gt;When an &lt;code&gt;NSOperation&lt;/code&gt; finishes, it will execute its &lt;code&gt;completionBlock&lt;/code&gt; exactly once. This provides a really nice way to customize the behavior of an operation when used in a model, or view controller. For example, you could set a completion block on a network operation block to do something with the response data from the server once its finished loading.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSOperation&lt;/code&gt; remains an essential tool in the modern Objective-C programmers bag of tricks. Whereas GCD is ideal for in-line asynchronous processing, &lt;code&gt;NSOperation&lt;/code&gt; provides a more comprehensive, object-oriented model of computation, which is ideal for encapsulating all of the data around structured, repeatable tasks in an application. Add it to your next project and bring delight not only to your user, but yourself as well!&lt;/p&gt;
</description>
        <pubDate>Mon, 20 Aug 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nsoperation/</link>
        <guid>http://nshipster.com/nsoperation/</guid>
      </item>
    
      <item>
        <title>NSIncrementalStore</title>
        <description>&lt;p&gt;Even for a blog dedicated to obscure APIs, &lt;code&gt;NSIncrementalStore&lt;/code&gt; brings a new meaning to the word &amp;quot;obscure&amp;quot;. &lt;/p&gt;

&lt;p&gt;It was introduced in iOS 5, with no more fanfare than the requisite entry in the SDK changelog.&lt;/p&gt;

&lt;p&gt;Its &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/IncrementalStorePG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010706&quot;&gt;programming guide&lt;/a&gt; weighs in at a paltry 82 words, making it the shortest by an order of magnitude.&lt;/p&gt;

&lt;p&gt;If it weren&amp;#39;t for an offhand remark during &lt;a href=&quot;https://deimos.apple.com/WebObjects/Core.woa/BrowsePrivately/adc.apple.com.8266478284.08266478290.8365294535?i=2068798830&quot;&gt;WWDC 2011 Session 303&lt;/a&gt;, it may have gone completely unnoticed.&lt;/p&gt;

&lt;p&gt;And yet, &lt;code&gt;NSIncrementalStore&lt;/code&gt; is arguably the most important thing to come out of iOS 5.&lt;/p&gt;

&lt;h2&gt;At Last, A Foothold Into Core Data&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSIncrementalStore&lt;/code&gt; is an abstract subclass of &lt;code&gt;NSPersistentStore&lt;/code&gt; designed to &amp;quot;create persistent stores which load and save data incrementally, allowing for the management of large and/or shared datasets&amp;quot;. And while that may not sound like much, consider that nearly all of the database adapters we rely on load incrementally from large, shared data stores. What we have here is a goddamned miracle.&lt;/p&gt;

&lt;p&gt;For those of you not as well-versed in Core Data, here&amp;#39;s some background: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html&quot;&gt;Core Data&lt;/a&gt; is Apple&amp;#39;s framework for object relational mapping. It&amp;#39;s used in at least half of all of the first-party apps on Mac and iOS, as well as thousands of other third-party apps. Core Data is complex, but that&amp;#39;s because it solves complex problems, covering a decades-worth of one-offs and edge cases.&lt;/p&gt;

&lt;p&gt;This is all to say that Core Data is something you should probably use in your application.&lt;/p&gt;

&lt;p&gt;Persistent stores in Core Data are comparable to database adapters in other ORMs, such as &lt;a href=&quot;http://ar.rubyonrails.org&quot;&gt;Active Record&lt;/a&gt;. They respond to changes within &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html&quot;&gt;managed object contexts&lt;/a&gt; and handle &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html&quot;&gt;fetch requests&lt;/a&gt; by reading and writing data to some persistence layer. For most applications, that persistent layer has been a local SQLite database.&lt;/p&gt;

&lt;p&gt;With &lt;code&gt;NSIncrementalStore&lt;/code&gt;, developers now have a sanctioned, reasonable means to create a store that connects to whatever underlying backend you like--and rather simply, too. All it takes is to implement a few required methods:&lt;/p&gt;

&lt;h2&gt;Implementing an NSIncrementalStore Subclass&lt;/h2&gt;

&lt;h3&gt;&lt;code&gt;+type&lt;/code&gt; and &lt;code&gt;+initialize&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;NSPersistentStore&lt;/code&gt; instances are not created directly. Instead, they follow a factory pattern similar to &lt;code&gt;NSURLProtocol&lt;/code&gt; or &lt;code&gt;NSValueTransformer&lt;/code&gt;, in that they register their classes with the &lt;code&gt;NSPersistentStoreCoordinator&lt;/code&gt;, which then constructs persistent store instances as necessary when &lt;code&gt;-addPersistentStoreWithType:configuration:URL:options:error:&lt;/code&gt; is called. The registered persistent store classes are identified by a unique &amp;quot;store type&amp;quot; string (&lt;code&gt;NSStringFromClass&lt;/code&gt; is sufficient, but you could be pedantic by specifying a string that follows the convention of ending in &lt;code&gt;-Type&lt;/code&gt;, like &lt;code&gt;NSSQLiteStoreType&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;&lt;code&gt;+initialize&lt;/code&gt; is automatically called the first time a class is loaded, so this is a good place to register with &lt;code&gt;NSPersistentStoreCoordinator&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSPersistentStoreCoordinator&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;registerStoreClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forStoreType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSStringFromClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code&gt;-loadMetadata:&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;loadMetadata:&lt;/code&gt; is where the incremental store has a chance to configure itself. There is, however, a bit of Kabuki theater boilerplate that&amp;#39;s necessary to get everything set up. Specifically, you need to set a UUID for the store, as well as the store type. Here&amp;#39;s what that looks like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableMetadata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableMetadata&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSProcessInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;processInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;globallyUniqueString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSStoreUUIDKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableMetadata&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSStoreTypeKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setMetadata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutableMetadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code&gt;-executeRequest:withContext:error:&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;Here&amp;#39;s where things get interesting, from an implementation standpoint. (And where it all goes to hell, from an API design standpoint) &lt;/p&gt;

&lt;p&gt;&lt;code&gt;executeRequest:withContext:error:&lt;/code&gt; passes an &lt;code&gt;NSPersistentStoreRequest&lt;/code&gt;, an &lt;code&gt;NSManagedObjectContext&lt;/code&gt; and an &lt;code&gt;NSError&lt;/code&gt; pointer.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;NSPersistentStoreRequest&lt;/code&gt;&amp;#39;s role here is as a sort of abstract subclass. The request parameter will either be of type &lt;code&gt;NSFetchRequestType&lt;/code&gt; or an &lt;code&gt;NSSaveRequestType&lt;/code&gt;. If it has a &lt;em&gt;fetch&lt;/em&gt; request type, the request parameter will actually be an instance of &lt;code&gt;NSFetchRequest&lt;/code&gt;, which is a subclass of &lt;code&gt;NSPersistentStoreRequest&lt;/code&gt;. Likewise, if it has a &lt;em&gt;save&lt;/em&gt; request type, it will be an instance of &lt;code&gt;NSSaveChangesRequest&lt;/code&gt; (this article was originally mistaken by stating that there was no such a class).&lt;/p&gt;

&lt;p&gt;This method requires very specific and very different return values depending on the request parameter (and the &lt;code&gt;resultType&lt;/code&gt;, if it&amp;#39;s an &lt;code&gt;NSFetchRequest&lt;/code&gt;). The only way to explain it is to run through all of the possibilities:&lt;/p&gt;

&lt;h4&gt;Request Type: &lt;code&gt;NSFetchRequestType&lt;/code&gt;&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Result Type: &lt;code&gt;NSManagedObjectResultType&lt;/code&gt;, &lt;code&gt;NSManagedObjectIDResultType&lt;/code&gt;, or &lt;code&gt;NSDictionaryResultType&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Return&lt;/strong&gt;: &lt;code&gt;NSArray&lt;/code&gt; of objects matching request&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;Result Type: &lt;code&gt;NSCountResultType&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Return&lt;/strong&gt;: &lt;del&gt;&lt;tt&gt;NSNumber&lt;/tt&gt;&lt;/del&gt;&lt;ins&gt;&lt;tt&gt;NSArray&lt;/tt&gt; containing one &lt;tt&gt;NSNumber&lt;/tt&gt; of count of objects matching request&lt;/ins&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4&gt;Request Type: &lt;code&gt;NSSaveRequestType&lt;/code&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Return&lt;/strong&gt;: Empty &lt;code&gt;NSArray&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So, one method to do all read &lt;em&gt;and&lt;/em&gt; write operations with a persistence backend. At least all of the heavy lifting goes to the same place, right?&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;-newValuesForObjectWithID:withContext:error:&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;This method is called when an object faults, or has its values refreshed by the managed object context. &lt;/p&gt;

&lt;p&gt;It returns an &lt;code&gt;NSIncrementalStoreNode&lt;/code&gt;, which is a container for the ID and current values for a particular managed object. The node should include all of the attributes, as well as the managed object IDs of any to-one relationships. There is also a &lt;code&gt;version&lt;/code&gt; property of the node that can be used to determine the current state of an object, but this may not be applicable to all storage implementations.&lt;/p&gt;

&lt;p&gt;If an object with the specified &lt;code&gt;objectID&lt;/code&gt; cannot be found, this method should return &lt;code&gt;nil&lt;/code&gt;.&lt;/p&gt;

&lt;h3&gt;&lt;code&gt;-newValueForRelationship:forObjectWithID: withContext:error:&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;This one is called when a relationship needs to be refreshed, either from a fault or by the managed object context. &lt;/p&gt;

&lt;p&gt;Unlike the previous method, the return value will be just the current value for a single relationship. The expected return type depends on the nature of the relationship:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;to-one&lt;/strong&gt;: &lt;code&gt;NSManagedObjectID&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;to-many&lt;/strong&gt;: &lt;code&gt;NSSet&lt;/code&gt; or &lt;code&gt;NSOrderedSet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;non-existent&lt;/strong&gt;: &lt;code&gt;nil&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;code&gt;-obtainPermanentIDsForObjects:error:&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;Finally, this method is called before &lt;code&gt;executeRequest:withContext:error:&lt;/code&gt; with a save request, where permanent IDs should be assigned to newly-inserted objects. As you might expect, the array of permanent IDs should match up with the array of objects passed into this method.&lt;/p&gt;

&lt;p&gt;This usually corresponds with a write to the persistence layer, such as an &lt;code&gt;INSERT&lt;/code&gt; statement in SQL. If, for example, the row corresponding to the object had an auto-incrementing &lt;code&gt;id&lt;/code&gt; column, you could generate an objectID with:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newObjectIDForEntity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;referenceObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numberWithUnsignedInteger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rowID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Roll Your Own Core Data Backend&lt;/h2&gt;

&lt;p&gt;Going through all of the necessary methods to override in an &lt;code&gt;NSIncrementalStore&lt;/code&gt; subclass, you may have found your mind racing with ideas about how you might implement a SQL or NoSQL store, or maybe something new altogether.&lt;/p&gt;

&lt;p&gt;What makes &lt;code&gt;NSIncrementalStore&lt;/code&gt; so exciting is that you &lt;em&gt;can&lt;/em&gt; build a store on your favorite technology, and drop that into any existing Core Data stack with little to no additional configuration.&lt;/p&gt;

&lt;p&gt;So imagine if, instead SQL or NoSQL, we wrote a Core Data store that connected to a webservice. Allow me to introduce &lt;a href=&quot;https://github.com/AFNetworking/AFIncrementalStore&quot;&gt;AFIncrementalStore&lt;/a&gt;.&lt;/p&gt;

&lt;h2&gt;AFIncrementalStore: The Holy Grail of Client-Server Applications?&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/AFNetworking/AFIncrementalStore&quot;&gt;&lt;code&gt;AFIncrementalStore&lt;/code&gt;&lt;/a&gt; is an NSIncrementalStore subclass that uses &lt;a href=&quot;https://github.com/afnetworking/afnetworking&quot;&gt;AFNetworking&lt;/a&gt; to automatically request resources as properties and relationships are needed.&lt;/p&gt;

&lt;p&gt;What this means is that you can now write apps that communicate with a webservice &lt;em&gt;without exposing any of the details about the underlying API&lt;/em&gt;. Any time a fetch request is made or an attribute or relationship faults, an asynchronous network request will fetch that information from the webservice.&lt;/p&gt;

&lt;p&gt;Since the store abstracts all of the implementation details of the API away, you can write expressive fetch requests and object relationships from the start. No matter how bad or incomplete an API may be, you can change all of that mapping independently of the business logic of the client.&lt;/p&gt;

&lt;p&gt;Perhaps the best part is that all of this is possible in &lt;strong&gt;just under 300 LOC&lt;/strong&gt;. No need to subclass &lt;code&gt;NSManagedObject&lt;/code&gt; or add obtrusive categories on &lt;code&gt;NSManagedObjectContext&lt;/code&gt;--it just works.&lt;/p&gt;

&lt;p&gt;Even though &lt;code&gt;NSIncrementalStore&lt;/code&gt; has been around since iOS 5, we&amp;#39;re still a long way from even beginning to realize its full potential. The future is insanely bright, so you best don your aviators, grab an iced latte and start coding something amazing.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;In the spirit of full disclosure, &lt;code&gt;NSIncrementalStore&lt;/code&gt; was brought to my attention by &lt;a href=&quot;http://sealedabstract.com/code/nsincrementalstore-the-future-of-web-services-in-ios-mac-os-x/&quot;&gt;this blog post by Drew Crawford&lt;/a&gt;. I caught wind of it around the time iOS 5 originally came out, but like everyone else, I paid it no mind.&lt;/p&gt;

&lt;p&gt;Also, &lt;code&gt;AFIncrementalStore&lt;/code&gt; is a project of mine, which is offered as one of only a few examples of an &lt;code&gt;NSIncrementalStore&lt;/code&gt; subclass available. I don&amp;#39;t mean to use NSHipster as a platform to promote my own code, but I thought this to be a particularly salient example.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 13 Aug 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nsincrementalstore/</link>
        <guid>http://nshipster.com/nsincrementalstore/</guid>
      </item>
    
      <item>
        <title>CFStringTransform</title>
        <description>&lt;p&gt;There are two indicators that tell you everything you need to know about how nice a language is to use:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;API Consistency&lt;/li&gt;
&lt;li&gt;Quality of String Implementation&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;code&gt;NSString&lt;/code&gt; is the crown jewel of Foundation. In an age where other languages &lt;em&gt;still&lt;/em&gt; struggle to handle Unicode correctly, &lt;code&gt;NSString&lt;/code&gt; is especially impressive. Not content to &lt;em&gt;just work&lt;/em&gt; with whatever is thrown at it, &lt;code&gt;NSString&lt;/code&gt; can parse strings into linguistic tags, determine the dominant language of the content, and convert between every string encoding imaginable. It&amp;#39;s unfairly good.&lt;/p&gt;

&lt;p&gt;But as powerful as &lt;code&gt;NSString&lt;/code&gt; / &lt;code&gt;NSMutableString&lt;/code&gt; are, one would be remiss not to mention their &lt;a href=&quot;http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html&quot;&gt;toll-free bridged&lt;/a&gt; cousin, &lt;code&gt;CFMutableString&lt;/code&gt;—or more specifically, &lt;code&gt;CFStringTransform&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;As denoted by the &lt;code&gt;CF&lt;/code&gt; prefix, &lt;code&gt;CFStringTransform&lt;/code&gt; is part of Core Foundation. The function takes the following arguments, and returns a &lt;code&gt;Boolean&lt;/code&gt; for whether or not the transform was successful:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;string&lt;/code&gt;: The string to be transformed. Since this argument is a &lt;code&gt;CFMutableStringRef&lt;/code&gt;, an &lt;code&gt;NSMutableString&lt;/code&gt; can be passed using toll-free bridging cast.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;range&lt;/code&gt;: The range of the string over which the transformation should be applied. This argument is a &lt;code&gt;CFRange&lt;/code&gt;, rather than an &lt;code&gt;NSRange&lt;/code&gt; value.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;transform&lt;/code&gt;: The transformation to apply. This argument takes an &lt;a href=&quot;http://userguide.icu-project.org/transforms/general&quot;&gt;ICU transform string&lt;/a&gt;, including any one of the string constants described below.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;reverse&lt;/code&gt;: Whether to run the transformation in reverse, where applicable.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;CFStringTransform&lt;/code&gt; covers a lot of ground with its &lt;code&gt;transform&lt;/code&gt; argument. Here&amp;#39;s a rundown of what it can do:&lt;/p&gt;

&lt;h2&gt;Strip Accents and Diacritics&lt;/h2&gt;

&lt;p&gt;Énġlišh långuãge lẳcks iñterêßţing diaçrïtičş. As such, it can be useful to normalize extended Latin characters into ASCII-friendly representations. Rid any string of its squiggly bits using the &lt;code&gt;kCFStringTransformStripCombiningMarks&lt;/code&gt; transformation.&lt;/p&gt;

&lt;h2&gt;Name Unicode Characters&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;kCFStringTransformToUnicodeName&lt;/code&gt; allows you to determine the Unicode standard name for special characters, including Emoji. For instance, &amp;quot;🐑💨✨&amp;quot; is transformed into &amp;quot;{SHEEP} {DASH SYMBOL} {SPARKLES}&amp;quot;, and &amp;quot;🐷&amp;quot; becomes &amp;quot;{PIG FACE}&amp;quot;.&lt;/p&gt;

&lt;h2&gt;Transliterate Between Orthographies&lt;/h2&gt;

&lt;p&gt;With the notable exception of English (and its delightful spelling inconsistencies), writing systems generally encode speech sounds into a consistent written representation. European languages generally use the Latin alphabet (with a few added diacritics), Russian uses Cyrillic, Japanese uses Hiragana &amp;amp; Katakana, and Thai, Korean, &amp;amp; Arabic each have their own scripts.&lt;/p&gt;

&lt;p&gt;Although each language has a particular inventory of sounds, some of which other languages may lack, the overlap across all of the major writing systems is remarkably high—enough so that one can rather effectively &lt;a href=&quot;http://en.wikipedia.org/wiki/Transliteration&quot;&gt;transliterate&lt;/a&gt; (not to be confused with &lt;a href=&quot;http://en.wikipedia.org/wiki/Translation&quot;&gt;translation&lt;/a&gt;) from one script to another.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;CFStringTransform&lt;/code&gt; can transliterate back and forth between Latin and Arabic, Cyrillic, Greek, Korean (Hangul), Hebrew, Japanese (Hiragana &amp;amp; Katakana), Mandarin Chinese, and Thai.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Transformation&lt;/th&gt;
      &lt;th&gt;Input&lt;/th&gt;
      &lt;th&gt;Output&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;kCFStringTransformLatinArabic&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;mrḥbạ&lt;/td&gt;
      &lt;td&gt;مرحبا&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;kCFStringTransformLatinCyrillic&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;privet&lt;/td&gt;
      &lt;td&gt;привет&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;kCFStringTransformLatinGreek&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;geiá sou&lt;/td&gt;
      &lt;td&gt;γειά σου&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;kCFStringTransformLatinHangul&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;annyeonghaseyo&lt;/td&gt;
      &lt;td&gt;안녕하세요&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;kCFStringTransformLatinHebrew&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;şlwm&lt;/td&gt;
      &lt;td&gt;שלום&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;kCFStringTransformLatinHiragana&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;hiragana&lt;/td&gt;
      &lt;td&gt;ひらがな&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;kCFStringTransformLatinKatakana&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;katakana&lt;/td&gt;
      &lt;td&gt;カタカナ&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;kCFStringTransformLatinThai&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;s̄wạs̄dī&lt;/td&gt;
      &lt;td&gt;สวัสดี&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;kCFStringTransformHiraganaKatakana&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;にほんご&lt;/td&gt;
      &lt;td&gt;ニホンゴ&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;kCFStringTransformMandarinLatin&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;中文&lt;/td&gt;
      &lt;td&gt;zhōng wén&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
&lt;p&gt;And that&amp;#39;s only using the constants defined in Core Foundation! By passing an &lt;a href=&quot;http://userguide.icu-project.org/transforms/general#TOC-ICU-Transliterators&quot;&gt;ICU transform&lt;/a&gt; directly, &lt;code&gt;CFStringTransform&lt;/code&gt; can transliterate between Latin and Arabic, Armenian, Bopomofo, Cyrillic, Georgian, Greek, Han, Hangul, Hebrew, Hiragana, Indic ( Devanagari, Gujarati, Gurmukhi, Kannada, Malayalam, Oriya, Tamil, &amp;amp; Telegu), Jamo, Katakana, Syriac, Thaana, &amp;amp; Thai.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Normalize User-Generated Content&lt;/h2&gt;

&lt;p&gt;One of the more practical applications for string transformation is to normalize unpredictable user input. Even if your application doesn&amp;#39;t specifically deal with other languages, you should be able to intelligently process anything the user types into your app.&lt;/p&gt;

&lt;p&gt;For example, let&amp;#39;s say you want to build a searchable index of movies on the device, which includes greetings from around the world:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;First, apply the &lt;code&gt;kCFStringTransformToLatin&lt;/code&gt; transform to transliterate all non-English text into a Latin alphabetic representation.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Hello! こんにちは! สวัสดี! مرحبا! 您好! →&lt;br&gt;
Hello! kon&amp;#39;nichiha! s̄wạs̄dī! mrḥbạ! nín hǎo!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;Next, apply the &lt;code&gt;kCFStringTransformStripCombiningMarks&lt;/code&gt; transform to remove any diacritics or accents.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Hello! kon&amp;#39;nichiha! s̄wạs̄dī! mrḥbạ! nín hǎo! →&lt;br&gt;
Hello! kon&amp;#39;nichiha! swasdi! mrhba! nin hao!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;Finally, downcase the text with &lt;code&gt;CFStringLowercase&lt;/code&gt;, and split the text into tokens with &lt;a href=&quot;https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFStringTokenizerRef/Reference/reference.html&quot;&gt;&lt;code&gt;CFStringTokenizer&lt;/code&gt;&lt;/a&gt; to use as an index for the text.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;(hello, kon&amp;#39;nichiha, swasdi, mrhba, nin, hao)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;By applying the same set of transformations on search text entered by the user, you have a universal way to search regardless of either the language of the search string or content!&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;CFStringTransform&lt;/code&gt; can be an insanely powerful way to bend language to your will. And it&amp;#39;s but one of many powerful features that await you if you&amp;#39;re brave enough to explore outside of Objective-C&amp;#39;s warm OO embrace.&lt;/p&gt;
</description>
        <pubDate>Mon, 06 Aug 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/cfstringtransform/</link>
        <guid>http://nshipster.com/cfstringtransform/</guid>
      </item>
    
      <item>
        <title>NSDateComponents</title>
        <description>&lt;p&gt;&lt;code&gt;NSDateComponents&lt;/code&gt; serves an important role in Foundation&amp;#39;s date and time APIs. By itself, it&amp;#39;s nothing impressive—just a container for information about a date (its month, year, day of month, week of year, or whether that month is a leap month). However, combined with &lt;code&gt;NSCalendar&lt;/code&gt;, &lt;code&gt;NSDateComponents&lt;/code&gt; becomes a remarkably convenient interchange format for calendar calculations.&lt;/p&gt;

&lt;p&gt;Whereas dates represent a particular moment in time, date components depend on which calendar system is being used to represent them. Very often, this will differ wildly from what many of us may be used to with the &lt;a href=&quot;http://en.wikipedia.org/wiki/Gregorian_calendar&quot;&gt;Gregorian Calendar&lt;/a&gt;. For example, the &lt;a href=&quot;http://en.wikipedia.org/wiki/Islamic_calendar&quot;&gt;Islamic Calendar&lt;/a&gt; has 354 or 355 days in a year, whereas the &lt;a href=&quot;http://en.wikipedia.org/wiki/Buddhist_calendar&quot;&gt;Buddhist calendar&lt;/a&gt; may have 354, 355, 384, or 385 days, depending on the year.&lt;/p&gt;

&lt;h2&gt;Extracting Components From Dates&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSDateComponents&lt;/code&gt; can be initialized and manipulated manually, but most often, they&amp;#39;re extracted from a specified date, using &lt;code&gt;NSCalendar -components:fromDate:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSCalendar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calendar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCalendar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentCalendar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calendar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDayCalendarUnit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSMonthCalendarUnit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fromDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;components&lt;/code&gt; parameter is a &lt;a href=&quot;http://en.wikipedia.org/wiki/Bitmask&quot;&gt;bitmask&lt;/a&gt; of the date component values to retrieve, with many to choose from:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSEraCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSYearCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMonthCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSDayCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSHourCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSMinuteCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSSecondCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSWeekCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSWeekdayCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSWeekdayOrdinalCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSQuarterCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSWeekOfMonthCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSWeekOfYearCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSYearForWeekOfYearCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSCalendarCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSTimeZoneCalendarUnit&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Since it would be expensive to compute all of the possible values, specify only the components that will be used in subsequent calculations (joining with &lt;code&gt;|&lt;/code&gt;, the bitwise &lt;code&gt;OR&lt;/code&gt; operator).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;Relative Date Calculations&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;NSDateComponents&lt;/code&gt; objects can be used to do relative date calculations. To determining the date yesterday, next week, or 5 hours and 30 minutes from now, use &lt;code&gt;NSCalendar -dateByAddingComponents:toDate:options:&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSCalendar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calendar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCalendar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentCalendar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSDateComponents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateComponents&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setWeek&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setHour&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;1 week and twelve hours from now: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calendar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dateByAddingComponents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;toDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Creating Dates from Components&lt;/h2&gt;

&lt;p&gt;Perhaps the most powerful feature of &lt;code&gt;NSDateComponents&lt;/code&gt;, however, is the ability to go the opposite direction—creating an &lt;code&gt;NSDate&lt;/code&gt; object from components. &lt;code&gt;NSCalendar -dateFromComponents:&lt;/code&gt; is the method used for this purpose:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSCalendar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calendar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCalendar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentCalendar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSDateComponents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateComponents&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setYear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1987&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setMonth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setDay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setHour&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setMinute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setSecond&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;Awesome time: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calendar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dateFromComponents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;What&amp;#39;s particularly interesting about this approach is that a date can be determined by information other than the normal month/day/year approach. So long as a date can be uniquely determined from the provided information, you&amp;#39;ll get a result. For example, specifying the year 2013, and the 316th day of the year would return an &lt;code&gt;NSDate&lt;/code&gt; for 11/12/2013 at midnight (because no time was specified, all time components default to 0).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Note that passing inconsistent components will either result in some information being discarded, or &lt;code&gt;nil&lt;/code&gt; being returned.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSDateComponents&lt;/code&gt; and its relationship to &lt;code&gt;NSCalendar&lt;/code&gt; highlight the distinct advantage having a pedantically-engineered framework like Foundation at your disposal. You may not be doing calendar calculations every day, but when the time comes, knowing how to use &lt;code&gt;NSDateComponents&lt;/code&gt; will save you eons of frustration.&lt;/p&gt;
</description>
        <pubDate>Tue, 31 Jul 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nsdatecomponents/</link>
        <guid>http://nshipster.com/nsdatecomponents/</guid>
      </item>
    
      <item>
        <title>NSSortDescriptor</title>
        <description>&lt;p&gt;Sorting: it&amp;#39;s the mainstay of Computer Science 101 exams and whiteboarding interview questions. But when was the last time you actually needed to know how to implement Quicksort yourself? &lt;/p&gt;

&lt;p&gt;When making apps, sorting is just something you can assume to be fast, and utility is a function of convenience and clarity of intention. And when it comes to that, you&amp;#39;d be hard-pressed to find a better implementation than Foundation&amp;#39;s &lt;code&gt;NSSortDescriptor&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSSortDescriptor&lt;/code&gt; objects are constructed with the following parameters:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;key&lt;/code&gt;: for a given collection, the key for the corresponding value to be sorted on for each object in the collection.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ascending&lt;/code&gt;: a boolean specifying whether the collection should be sorted in ascending (&lt;code&gt;YES&lt;/code&gt;) or descending (&lt;code&gt;NO&lt;/code&gt;) order.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;There is an optional third parameter that relates to how the sorted values are compared to one another. By default, this is a simple equality check, but this behavior can be changed by passing either a &lt;code&gt;selector&lt;/code&gt; (&lt;code&gt;SEL&lt;/code&gt;) or &lt;code&gt;comparator&lt;/code&gt; (&lt;code&gt;NSComparator&lt;/code&gt;). &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Any time you&amp;#39;re sorting user-facing strings, be sure to pass the selector &lt;code&gt;localizedStandardCompare:&lt;/code&gt;, which will sort according to the language rules of the current locale (locales may differ on ordering of case, diacritics, and so forth).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Collection classes like &lt;code&gt;NSArray&lt;/code&gt; and &lt;code&gt;NSSet&lt;/code&gt; have methods to return sorted arrays of the objects that take an array of &lt;code&gt;sortDescriptors&lt;/code&gt;. Sort descriptors are applied in order, so that if two elements happen to be tied for a particular sorting criteria, the tie is broken by any subsequent descriptors.&lt;/p&gt;

&lt;p&gt;To put that into more practical terms, consider a &lt;code&gt;Person&lt;/code&gt; class with properties for &lt;code&gt;firstName&lt;/code&gt; &amp;amp; &lt;code&gt;lastName&lt;/code&gt; of type &lt;code&gt;NSString *&lt;/code&gt;, and &lt;code&gt;age&lt;/code&gt;, which is an &lt;code&gt;NSUInteger&lt;/code&gt;. &lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; : &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;%@ %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Given the following dataset:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;tt&gt;index&lt;/tt&gt;&lt;/th&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;th&gt;3&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;firstName&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;Alice&lt;/td&gt;
      &lt;td&gt;Bob&lt;/td&gt;
      &lt;td&gt;Charlie&lt;/td&gt;
      &lt;td&gt;Quentin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;lastName&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;Smith&lt;/td&gt;
      &lt;td&gt;Jones&lt;/td&gt;
      &lt;td&gt;Smith&lt;/td&gt;
      &lt;td&gt;Alberts&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;tt&gt;age&lt;/tt&gt;&lt;/td&gt;
      &lt;td&gt;24&lt;/td&gt;
      &lt;td&gt;27&lt;/td&gt;
      &lt;td&gt;33&lt;/td&gt;
      &lt;td&gt;31&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Here are some of the different ways they can be sorted by combinations of &lt;code&gt;NSSortDescriptor&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;objective-c language-objective-c&quot; data-lang=&quot;objective-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Alice&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Bob&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Charlie&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Quentin&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Smith&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Jones&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Smith&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&amp;quot;Alberts&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ages&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@33&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@31&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstNames&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enumerateObjectsUsingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstNames&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastNames&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ages&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSSortDescriptor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstNameSortDescriptor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSortDescriptor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sortDescriptorWithKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;firstName&amp;quot;&lt;/span&gt; 
  &lt;span class=&quot;n&quot;&gt;ascending&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt; 
  &lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localizedStandardCompare&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSSortDescriptor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastNameSortDescriptor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSortDescriptor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sortDescriptorWithKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;lastName&amp;quot;&lt;/span&gt; 
  &lt;span class=&quot;n&quot;&gt;ascending&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt; 
  &lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localizedStandardCompare&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSSortDescriptor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ageSortDescriptor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSortDescriptor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sortDescriptorWithKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;age&amp;quot;&lt;/span&gt; 
  &lt;span class=&quot;n&quot;&gt;ascending&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;By age: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sortedArrayUsingDescriptors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ageSortDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// &amp;quot;Charlie Smith&amp;quot;, &amp;quot;Quentin Alberts&amp;quot;, &amp;quot;Bob Jones&amp;quot;, &amp;quot;Alice Smith&amp;quot;&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;By first name: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sortedArrayUsingDescriptors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstNameSortDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// &amp;quot;Alice Smith&amp;quot;, &amp;quot;Bob Jones&amp;quot;, &amp;quot;Charlie Smith&amp;quot;, &amp;quot;Quentin Alberts&amp;quot;&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&amp;quot;By last name, first name: %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sortedArrayUsingDescriptors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastNameSortDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstNameSortDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// &amp;quot;Quentin Alberts&amp;quot;, &amp;quot;Bob Jones&amp;quot;, &amp;quot;Alice Smith&amp;quot;, &amp;quot;Charlie Smith&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

&lt;p&gt;&lt;code&gt;NSSortDescriptor&lt;/code&gt; can be found throughout Foundation and other system frameworks, playing an especially prominent role in Core Data. Anytime your own classes need to define sort ordering, follow the convention of specifying a &lt;code&gt;sortDescriptors&lt;/code&gt; parameter as appropriate.&lt;/p&gt;

&lt;p&gt;Because, in reality, sorting should be thought of in terms of business logic, not mathematical formulas and map-reduce functions. In this respect, &lt;code&gt;NSSortDescriptor&lt;/code&gt; is a slam dunk, and will have you pining for it anytime you venture out of Objective-C and Cocoa.&lt;/p&gt;
</description>
        <pubDate>Tue, 24 Jul 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nssortdescriptor/</link>
        <guid>http://nshipster.com/nssortdescriptor/</guid>
      </item>
    
      <item>
        <title>NSCache</title>
        <description>&lt;p&gt;Poor &lt;code&gt;NSCache&lt;/code&gt;, always being overshadowed by &lt;code&gt;NSMutableDictionary&lt;/code&gt;. It&amp;#39;s as if no one knew how it provides all of that garbage collection behavior that developers take great pains to re-implement themselves.&lt;/p&gt;

&lt;p&gt;That&amp;#39;s right: &lt;code&gt;NSCache&lt;/code&gt; is basically just an &lt;code&gt;NSMutableDictionary&lt;/code&gt; that automatically evicts objects in order to free up space in memory as needed. No need to respond to memory warnings or contrive a cache-clearing timer mechanism. The only other difference is that keys aren&amp;#39;t copied as they are in an &lt;code&gt;NSMutableDictionary&lt;/code&gt;, which is actually to its advantage (no need for keys to conform to &lt;code&gt;&amp;lt;NSCopying&amp;gt;&lt;/code&gt;). &lt;/p&gt;

&lt;p&gt;If developers only knew...&lt;/p&gt;

&lt;p&gt;But you&amp;#39;re not like other devs, right? You won&amp;#39;t overlook &lt;code&gt;NSCache&lt;/code&gt;, &lt;em&gt;will you&lt;/em&gt;?&lt;/p&gt;

&lt;p&gt;That&amp;#39;s not to say that there aren&amp;#39;t a few warts and inexplicable caveats—far from it. &lt;code&gt;NSCache&lt;/code&gt; is kind of a hot mess.&lt;/p&gt;

&lt;p&gt;Take &lt;code&gt;setObject:forKey:cost:&lt;/code&gt;, for example. It&amp;#39;s the same &lt;code&gt;setObject:forKey:&lt;/code&gt; method as before, but with this &lt;code&gt;cost&lt;/code&gt; parameter. What is that, you ask? Well, even the documentation isn&amp;#39;t quite sure:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The cost value is used to compute a sum encompassing the costs of all the objects in the cache. When memory is limited or when the total cost of the cache eclipses the maximum allowed total cost, the cache could begin an eviction process to remove some of its elements.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Alright, so far so good...&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;However, this eviction process is not in a guaranteed order. As a consequence, if you try to manipulate the cost values to achieve some specific behavior, the consequences could be detrimental to your program. &lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Huh? So what&amp;#39;s the point, then?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Typically, the obvious cost is the size of the value in bytes. If that information is not readily available, you should not go through the trouble of trying to compute it, as doing so will drive up the cost of using the cache.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So wait, what&amp;#39;s a &lt;em&gt;non-obvious&lt;/em&gt; cost value? Any guidelines for what a memory limit should be? How about an order of magnitude, even? &amp;quot;Arbitrarily guess wrong and suffer bad performance&amp;quot; doesn&amp;#39;t sound so compelling...&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Pass in 0 for the cost value if you otherwise have nothing useful to pass, or simply use the setObject:forKey: method, which does not require a cost value to be passed in.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Read: don&amp;#39;t use this method unless you work at Apple and know the original author personally.&lt;/p&gt;

&lt;p&gt;There&amp;#39;s also a whole part about controlling whether objects are automatically evicted with &lt;code&gt;evictsObjectsWithDiscardedContent&lt;/code&gt; &amp;amp; &lt;code&gt;&amp;lt;NSDiscardableContent&amp;gt;&lt;/code&gt;, but it will probably just cause you more problems.&lt;/p&gt;

&lt;p&gt;Despite all of this, developers should be using &lt;code&gt;NSCache&lt;/code&gt; a lot more than they currently are. Anything in your project that you call a &amp;quot;cache&amp;quot;, but isn&amp;#39;t &lt;code&gt;NSCache&lt;/code&gt; would be prime candidates for replacement. But if you do, just be sure to stick to the classics: &lt;code&gt;objectForKey:&lt;/code&gt;, &lt;code&gt;setObject:forKey:&lt;/code&gt; &amp;amp; &lt;code&gt;removeObjectForKey:&lt;/code&gt;.&lt;/p&gt;
</description>
        <pubDate>Sat, 14 Jul 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nscache/</link>
        <guid>http://nshipster.com/nscache/</guid>
      </item>
    
      <item>
        <title>NSIndexSet</title>
        <description>&lt;p&gt;&lt;code&gt;NSIndexSet&lt;/code&gt; (and its mutable counterpart, &lt;code&gt;NSMutableIndexSet&lt;/code&gt;) is a sorted collection of unique unsigned integers. Think of it like an &lt;code&gt;NSRange&lt;/code&gt; that supports non-contiguous series. It has wicked fast operations for finding indexes in ranges or set intersections, and comes with all of the convenience methods you&amp;#39;d expect in a Foundation collection class.&lt;/p&gt;

&lt;p&gt;You&amp;#39;ll find &lt;code&gt;NSIndexSet&lt;/code&gt; used throughout the Foundation framework. Anytime a method gets multiple elements from a sorted collection, such as an array or a table view&amp;#39;s data source, you can be sure that an &lt;code&gt;NSIndexSet&lt;/code&gt; parameter will be somewhere in the mix.&lt;/p&gt;

&lt;p&gt;If you look hard enough, you may start to find aspects of your data model that could be represented with &lt;code&gt;NSIndexSet&lt;/code&gt;. For example AFNetworking uses an index set to represent HTTP response status codes: the user defines a set of &amp;quot;acceptable&amp;quot; codes (in the &lt;code&gt;2XX&lt;/code&gt; range, by default), and the response is checked by using &lt;code&gt;containsIndex:&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Here are a few more ideas to get you thinking in terms of index sets:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Have a list of user preferences, and want to store which ones are switched on or off? Use a single &lt;code&gt;NSIndexSet&lt;/code&gt; in combination with an &lt;code&gt;enum&lt;/code&gt; &lt;code&gt;typedef&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Filtering a list of items by a set of composable conditions? Ditch the &lt;code&gt;NSPredicate&lt;/code&gt;; instead, cache the indexes of objects that fulfill each condition, and then get the union or intersection of those indexes as conditions are added and removed.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Overall, &lt;code&gt;NSIndexSet&lt;/code&gt; is a solid class. A fair bit nerdier than its collection class siblings, but it has its place. At the very least, it&amp;#39;s a prime example of the great functionality that you find by paying attention to what Foundation uses in its own APIs.&lt;/p&gt;
</description>
        <pubDate>Sat, 07 Jul 2012 00:00:00 -0700</pubDate>
        <link>http://nshipster.com/nsindexset/</link>
        <guid>http://nshipster.com/nsindexset/</guid>
      </item>
    
  </channel>
</rss>
