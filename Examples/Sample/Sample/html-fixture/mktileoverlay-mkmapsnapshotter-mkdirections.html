<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>
      MKTileOverlay,MKMapSnapshotter &amp;MKDirections : NSHipster
    </title>
    <meta name="description" content=
    "NSHipster is a journal of the overlooked bits in Objective-C and Cocoa. Updated weekly.">
    <meta name="author" content="Mattt Thompson">
    <meta name="revisit-after" content="3 days">
    <meta name="viewport" content="width=device-width">
    <link rel="license" href=
    "http://creativecommons.org/licenses/by-nc/3.0/">
    <link rel="alternate" hreflang="en-us" href=
    "http://nshipster.com">
    <link rel="alternate" hreflang="zh-Hans" href=
    "http://nshipster.cn">
    <link rel="alternate" hreflang="x-default" href=
    "http://nshipster.com">
    <link rel="alternate" type="application/rss+xml" title="RSS"
    href="http://nshipster.com/feed.xml">
    <link rel="stylesheet" href="/css/screen.css" type="text/css">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@NSHipster">
    <meta name="twitter:creator" content="@mattt">
    <meta name="twitter:title" content=
    "MKTileOverlay,&lt;br/&gt;MKMapSnapshotter &amp;&lt;br/&gt;MKDirections">
    <meta name="twitter:description" content=
    "Unless you work with MKMapView. on a regular basis, the last you may have heard about the current state of cartography on iOS may not have been under the cheeriest of circumstances. Therefore, it may come as a surprise maps on iOS have gotten quite a bit better in the intervening releases. Quite good, in fact.">
    <meta content="NSHipster" property="og:site_name">
    <meta content=
    "MKTileOverlay,&lt;br/&gt;MKMapSnapshotter &amp;&lt;br/&gt;MKDirections"
    property="og:title">
    <meta content=
    "http://nshipster.com/mktileoverlay-mkmapsnapshotter-mkdirections/"
    property="og:url">
    <meta content=
    "Unless you work with MKMapView. on a regular basis, the last you may have heard about the current state of cartography on iOS may not have been under the cheeriest of circumstances. Therefore, it may come as a surprise maps on iOS have gotten quite a bit better in the intervening releases. Quite good, in fact."
    property="og:description">
    <meta property="st:title" content=
    "MKTileOverlay,&lt;br/&gt;MKMapSnapshotter &amp;&lt;br/&gt;MKDirections">
    <meta property="st:type" content="article">
    <script type="text/javascript">
var _sf_startpt=(new Date()).getTime()
    </script>
    <script onload="try{Typekit.load();}catch(e){}" src=
    "//use.typekit.net/agk0bgp.js" type="text/javascript">
</script>
  </head>
  <body>
    <div role="container">
      <header role="banner">
        <h1 id="logo">
          <a href="/"><acronym title="NeXTSTEP/Sun">NS</acronym>
          <strong>Hipster</strong> <img id="moustache" src=
          "//cdn.nshipster.com/images/moustache.svg" width="200"
          height="150" data-author=
          "http://thenounproject.com/bnhw"></a>
        </h1>
        <form>
          <input type="text" id="st-search-input" class=
          "st-search-input">
        </form>
      </header>
      <div id="main" role="main">
        <article>
          <header>
            <h1>
              <a href=
              "/mktileoverlay-mkmapsnapshotter-mkdirections/">MKTile​Overlay,<br>
              MKMap​Snapshotter &amp;<br>
              MKDirections</a>
            </h1>
            <h2>
              Written by <a href="http://mattt.me/">Mattt
              Thompson</a> on <time pubdate=
              "2014-02-03 00:00:00 -0800">Feb 3<span>rd</span>,
              2014</time>
            </h2>
          </header>
          <div class="content" data-swiftype-index="true">
            <p>
              Unless you work with <code>MKMapView</code> on a
              regular basis, the last you may have heard about the
              current state of cartography on iOS may not have been
              <a href=
              "http://www.apple.com/letter-from-tim-cook-on-maps/">under
              the cheeriest of circumstances</a>. Even now, years
              after the ire of armchair usability experts has moved
              on to iOS 7's distinct "look and feel", the phrase
              "Apple Maps" still does not inspire confidence in the
              average developer.
            </p>
            <p>
              Therefore, it may come as a surprise maps on iOS have
              gotten quite a bit better in the intervening
              releases. Quite good, in fact—especially with the new
              mapping APIs introduced in iOS 7. These new APIs not
              only expose the advanced presentational functionality
              seen in Maps, but provide workarounds for MapKit's
              limitations.
            </p>
            <p>
              This week on NSHipster, we'll introduce
              <code>MKTileOverlay</code>,
              <code>MKMapSnapshotter</code>, and
              <code>MKDirections</code>: three new MapKit APIs
              introduced in iOS 7 that unlock a new world of
              possibilities.
            </p>
            <hr>
            <h2>
              MKTileOverlay
            </h2>
            <p>
              Don't like the default Apple Maps tiles? <a href=
              "https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKTileOverlay_class/Reference/Reference.html">
              <code>MKTileOverlay</code></a> allows you to
              seamlessly swap out to another tile set in just a few
              lines of code.
            </p>
            <blockquote>
              <p>
                Just like <a href=
                "http://www.openstreetmap.org">OpenStreetMap</a>
                and <a href="https://maps.google.com">Google
                Maps</a>, MKTileOverlay uses <a href=
                "http://en.wikipedia.org/wiki/Mercator_projection#The_spherical_model">
                spherical mercator projection (EPSG:3857)</a>.
              </p>
            </blockquote>
            <h3>
              Setting Custom Map View Tile Overlay
            </h3>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="k">static</span> <span class=
"n">NSString</span> <span class="o">*</span> <span class=
"k">const</span> <span class="n">template</span> <span class=
"o">=</span> <span class=
"s">@"http://tile.openstreetmap.org/{z}/{x}/{y}.png"</span><span class="p">;</span>

<span class="n">MKTileOverlay</span> <span class=
"o">*</span><span class="n">overlay</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">MKTileOverlay</span> <span class="n">alloc</span><span class=
"p">]</span> <span class="n">initWithURLTemplate</span><span class=
"o">:</span><span class="n">template</span><span class=
"p">];</span>
<span class="n">overlay</span><span class="p">.</span><span class=
"n">canReplaceMapContent</span> <span class=
"o">=</span> <span class="nb">YES</span><span class="p">;</span>

<span class="p">[</span><span class="n">self</span><span class=
"p">.</span><span class="n">mapView</span> <span class=
"n">addOverlay</span><span class="o">:</span><span class=
"n">overlay</span>
                   <span class="nl">level:</span><span class=
"n">MKOverlayLevelAboveLabels</span><span class="p">];</span>
</code>
</pre>
            </div>
            <p>
              MKTileOverlay is initialized with a URL template
              string, with the <code>x</code> &amp; <code>y</code>
              tile coordinates within the specified zoom level.
              <a href=
              "https://www.mapbox.com/developers/guide/">MapBox has
              a great explanation for this scheme is used to
              generate tiles</a>:
            </p>
            <blockquote>
              <p>
                Each tile has a z coordinate describing its zoom
                level and x and y coordinates describing its
                position within a square grid for that zoom level.
                Hence, the very first tile in the web map system is
                at 0/0/0.
              </p>
            </blockquote>
            <table style=
            "display:block;width:256px;margin:10px auto">
              <tr>
                <td style=
                "background-image:url(https://a.tiles.mapbox.com/v3/examples.map-9ijuk24y/0/0/0.png);width:256px;height:256px;padding:0;border:1px #fff solid;">
                <span style=
                "text-align:center;display:block">0/0/0</span>
                </td>
              </tr>
            </table>
            <blockquote>
              <p>
                Zoom level 0 covers the entire globe. The very next
                zoom level divides z0 into four equal squares such
                that 1/0/0 and 1/1/0 cover the northern hemisphere
                while 1/0/1 and 1/1/1 cover the southern
                hemisphere.
              </p>
            </blockquote>
            <table style=
            "display:block;width:514px;margin:10px auto;">
              <tr>
                <td style=
                "background-image:url(https://a.tiles.mapbox.com/v3/examples.map-9ijuk24y/1/0/0.png);width:256px;height:256px;padding:0;border:1px #fff solid;">
                <span style=
                "text-align:center;display:block">1/0/0</span>
                </td>
                <td style=
                "background-image:url(https://a.tiles.mapbox.com/v3/examples.map-9ijuk24y/1/1/0.png);width:256px;height:256px;padding:0;border:1px #fff solid;">
                <span style=
                "text-align:center;display:block">1/1/0</span>
                </td>
              </tr>
              <tr>
                <td style=
                "background-image:url(https://a.tiles.mapbox.com/v3/examples.map-9ijuk24y/1/0/1.png);width:256px;height:256px;padding:0;border:1px #fff solid;">
                <span style=
                "text-align:center;display:block">1/0/1</span>
                </td>
                <td style=
                "background-image:url(https://a.tiles.mapbox.com/v3/examples.map-9ijuk24y/1/1/1.png);width:256px;height:256px;padding:0;border:1px #fff solid;">
                <span style=
                "text-align:center;display:block">1/1/1</span>
                </td>
              </tr>
            </table>
            <blockquote>
              <p>
                Zoom levels are related to each other by powers of
                four - <code>z0</code> contains 1 tile,
                <code>z1</code> contains 4 tiles, <code>z2</code>
                contains 16, and so on. Because of this exponential
                relationship the amount of detail increases at
                every zoom level but so does the amount of
                bandwidth and storage required to serve up tiles.
                For example, a map at <code>z15</code> – about when
                city building footprints first become visible –
                requires about 1.1 billion tiles to cover the
                entire world. At <code>z17</code>, just two zoom
                levels greater, the world requires 17 billion
                tiles.
              </p>
            </blockquote>
            <p>
              After setting <code>canReplaceMapContent</code> to
              <code>YES</code>, the overlay is added to the
              <code>MKMapView</code>.
            </p>
            <p>
              In the map view's delegate,
              <code>mapView:rendererForOverlay:</code> is
              implemented simply to return a new
              <code>MKTileOverlayRenderer</code> instance when
              called for the <code>MKTileOverlay</code> overlay.
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class=
"cp">#pragma mark - MKMapViewDelegate</span>

<span class="k">-</span> <span class="p">(</span><span class=
"n">MKOverlayRenderer</span> <span class="o">*</span><span class=
"p">)</span><span class="nf">mapView:</span><span class=
"p">(</span><span class="n">MKMapView</span> <span class=
"o">*</span><span class="p">)</span><span class="nv">mapView</span>
            <span class="nl">rendererForOverlay:</span><span class=
"p">(</span><span class="kt">id</span> <span class=
"o">&lt;</span><span class="n">MKOverlay</span><span class=
"o">&gt;</span><span class="p">)</span><span class=
"nv">overlay</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">([</span><span class=
"n">overlay</span> <span class="n">isKindOfClass</span><span class=
"o">:</span><span class="p">[</span><span class=
"n">MKTileOverlay</span> <span class="n">class</span><span class=
"p">]])</span> <span class="p">{</span>
        <span class="k">return</span> <span class=
"p">[[</span><span class=
"n">MKTileOverlayRenderer</span> <span class=
"n">alloc</span><span class="p">]</span> <span class=
"n">initWithTileOverlay</span><span class="o">:</span><span class=
"n">overlay</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class=
"nb">nil</span><span class="p">;</span>
<span class="p">}</span>
</code>
</pre>
            </div>
            <blockquote>
              <p>
                Speaking of <a href=
                "https://www.mapbox.com">MapBox</a>, <a href=
                "https://github.com/incanus">Justin R. Miller</a>
                maintains <a href=
                "https://www.mapbox.com/mbxmapkit/">MBXMapKit</a>,
                a MapBox-enabled drop-in replacement for
                <code>MKMapView</code>. It's the easiest way to get
                up-and-running with this world-class mapping
                service, and highly recommended for anyone looking
                to make an impact with maps in their next release.
              </p>
            </blockquote>
            <h3>
              Implementing Custom Behavior with MKTileOverlay
              Subclass
            </h3>
            <p>
              If you need to accommodate a different tile
              coordinate scheme with your server, or want to add
              in-memory or offline caching, this can be done by
              subclassing <code>MKTileOverlay</code> and overriding
              <code>-URLForTilePath:</code> and
              <code>-loadTileAtPath:result:</code>:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="k">@interface</span> <span class=
"nc">XXTileOverlay</span> : <span class="nc">MKTileOverlay</span>
<span class="k">@property</span> <span class=
"n">NSCache</span> <span class="o">*</span><span class=
"n">cache</span><span class="p">;</span>
<span class="k">@property</span> <span class=
"n">NSOperationQueue</span> <span class="o">*</span><span class=
"n">operationQueue</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class=
"nc">XXTileOverlay</span>

<span class="k">-</span> <span class="p">(</span><span class=
"n">NSURL</span> <span class="o">*</span><span class=
"p">)</span><span class="nf">URLForTilePath:</span><span class=
"p">(</span><span class="n">MKTileOverlayPath</span><span class=
"p">)</span><span class="nv">path</span> <span class="p">{</span>
    <span class="k">return</span> <span class=
"p">[</span><span class="n">NSURL</span> <span class=
"n">URLWithString</span><span class="o">:</span><span class=
"p">[</span><span class="n">NSString</span> <span class=
"n">stringWithFormat</span><span class="o">:</span><span class=
"s">@"http://tile.example.com/%d/%d/%d"</span><span class=
"p">,</span> <span class="n">path</span><span class=
"p">.</span><span class="n">z</span><span class=
"p">,</span> <span class="n">path</span><span class=
"p">.</span><span class="n">x</span><span class=
"p">,</span> <span class="n">path</span><span class=
"p">.</span><span class="n">y</span><span class="p">]];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class=
"kt">void</span><span class="p">)</span><span class=
"nf">loadTileAtPath:</span><span class="p">(</span><span class=
"n">MKTileOverlayPath</span><span class="p">)</span><span class=
"nv">path</span>
                <span class="nl">result:</span><span class=
"p">(</span><span class="kt">void</span> <span class=
"p">(</span><span class="o">^</span><span class=
"p">)(</span><span class="n">NSData</span> <span class=
"o">*</span><span class="n">data</span><span class=
"p">,</span> <span class="n">NSError</span> <span class=
"o">*</span><span class="n">error</span><span class=
"p">))</span><span class="nv">result</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class=
"o">!</span><span class="n">result</span><span class=
"p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">NSData</span> <span class=
"o">*</span><span class="n">cachedData</span> <span class=
"o">=</span> <span class="p">[</span><span class=
"n">self</span><span class="p">.</span><span class=
"n">cache</span> <span class="n">objectForKey</span><span class=
"o">:</span><span class="p">[</span><span class=
"n">self</span> <span class="n">URLForTilePath</span><span class=
"o">:</span><span class="n">path</span><span class="p">]];</span>
    <span class="k">if</span> <span class="p">(</span><span class=
"n">cachedData</span><span class="p">)</span> <span class=
"p">{</span>
        <span class="n">result</span><span class=
"p">(</span><span class="n">cachedData</span><span class=
"p">,</span> <span class="nb">nil</span><span class="p">);</span>
    <span class="p">}</span> <span class=
"k">else</span> <span class="p">{</span>
        <span class="n">NSURLRequest</span> <span class=
"o">*</span><span class="n">request</span> <span class=
"o">=</span> <span class="p">[</span><span class=
"n">NSURLRequest</span> <span class=
"n">requestWithURL</span><span class="o">:</span><span class=
"p">[</span><span class="n">self</span> <span class=
"n">URLForTilePath</span><span class="o">:</span><span class=
"n">path</span><span class="p">]];</span>
        <span class="p">[</span><span class=
"n">NSURLConnection</span> <span class=
"n">sendAsynchronousRequest</span><span class=
"o">:</span><span class="n">request</span> <span class=
"n">queue</span><span class="o">:</span><span class=
"n">self</span><span class="p">.</span><span class=
"n">operationQueue</span> <span class=
"n">completionHandler</span><span class="o">:^</span><span class=
"p">(</span><span class="n">NSURLResponse</span> <span class=
"o">*</span><span class="n">response</span><span class=
"p">,</span> <span class="n">NSData</span> <span class=
"o">*</span><span class="n">data</span><span class=
"p">,</span> <span class="n">NSError</span> <span class=
"o">*</span><span class="n">connectionError</span><span class=
"p">)</span> <span class="p">{</span>
            <span class="n">result</span><span class=
"p">(</span><span class="n">data</span><span class=
"p">,</span> <span class="n">connectionError</span><span class=
"p">);</span>
        <span class="p">}];</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">@end</span>
</code>
</pre>
            </div>
            <h2>
              MKMapSnapshotter
            </h2>
            <p>
              Another addition to iOS 7 was <a href=
              "https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapSnapshotter_class/Reference/Reference.html">
              <code>MKMapSnapshotter</code></a>, which formalizes
              the process of creating an image representation of a
              map view. Previously, this would involve playing fast
              and loose with the <code>UIGraphicsContext</code>,
              but now images can reliably be created for any
              particular region and perspective.
            </p>
            <blockquote>
              <p>
                See <a href=
                "https://developer.apple.com/wwdc/videos/?id=309">WWDC
                2013 Session 309: "Putting Map Kit in
                Perspective"</a> for additional information on how
                and when to use <code>MKMapSnapshotter</code>.
              </p>
            </blockquote>
            <h3>
              Creating a Map View Snapshot
            </h3>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class=
"n">MKMapSnapshotOptions</span> <span class=
"o">*</span><span class="n">options</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">MKMapSnapshotOptions</span> <span class=
"n">alloc</span><span class="p">]</span> <span class=
"n">init</span><span class="p">];</span>
<span class="n">options</span><span class="p">.</span><span class=
"n">region</span> <span class="o">=</span> <span class=
"n">self</span><span class="p">.</span><span class=
"n">mapView</span><span class="p">.</span><span class=
"n">region</span><span class="p">;</span>
<span class="n">options</span><span class="p">.</span><span class=
"n">size</span> <span class="o">=</span> <span class=
"n">self</span><span class="p">.</span><span class=
"n">mapView</span><span class="p">.</span><span class=
"n">frame</span><span class="p">.</span><span class=
"n">size</span><span class="p">;</span>
<span class="n">options</span><span class="p">.</span><span class=
"n">scale</span> <span class="o">=</span> <span class=
"p">[[</span><span class="n">UIScreen</span> <span class=
"n">mainScreen</span><span class="p">]</span> <span class=
"n">scale</span><span class="p">];</span>

<span class="n">NSURL</span> <span class="o">*</span><span class=
"n">fileURL</span> <span class="o">=</span> <span class=
"p">[</span><span class="n">NSURL</span> <span class=
"n">fileURLWithPath</span><span class="o">:</span><span class=
"s">@"path/to/snapshot.png"</span><span class="p">];</span>

<span class="n">MKMapSnapshotter</span> <span class=
"o">*</span><span class="n">snapshotter</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">MKMapSnapshotter</span> <span class=
"n">alloc</span><span class="p">]</span> <span class=
"n">initWithOptions</span><span class="o">:</span><span class=
"n">options</span><span class="p">];</span>
<span class="p">[</span><span class=
"n">snapshotter</span> <span class=
"n">startWithCompletionHandler</span><span class=
"o">:^</span><span class="p">(</span><span class=
"n">MKMapSnapshot</span> <span class="o">*</span><span class=
"n">snapshot</span><span class="p">,</span> <span class=
"n">NSError</span> <span class="o">*</span><span class=
"n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class=
"n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class=
"p">(</span><span class="s">@"[Error] %@"</span><span class=
"p">,</span> <span class="n">error</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">UIImage</span> <span class=
"o">*</span><span class="n">image</span> <span class=
"o">=</span> <span class="n">snapshot</span><span class=
"p">.</span><span class="n">image</span><span class="p">;</span>
    <span class="n">NSData</span> <span class=
"o">*</span><span class="n">data</span> <span class=
"o">=</span> <span class=
"n">UIImagePNGRepresentation</span><span class=
"p">(</span><span class="n">image</span><span class="p">);</span>
    <span class="p">[</span><span class=
"n">data</span> <span class="n">writeToURL</span><span class=
"o">:</span><span class="n">fileURL</span> <span class=
"n">atomically</span><span class="o">:</span><span class=
"nb">YES</span><span class="p">];</span>
<span class="p">}];</span>
</code>
</pre>
            </div>
            <p>
              First, an <code>MKMapSnapshotOptions</code> object is
              created, which is used to specify the region, size,
              scale, and <a href=
              "https://developer.apple.com/library/mac/documentation/MapKit/Reference/MKMapCamera_class/Reference/Reference.html">
              camera</a> used to render the map image.
            </p>
            <p>
              Then, these options are passed to a new
              <code>MKMapSnapshotter</code> instance, which
              asynchronously creates an image with
              <code>-startWithCompletionHandler:</code>. In this
              example, a PNG representation of the image is written
              to disk.
            </p>
            <h3>
              Drawing Annotations on Map View Snapshot
            </h3>
            <p>
              However, this only draws the map for the specified
              region; annotations are rendered separately.
            </p>
            <p>
              Including annotations—or indeed, any additional
              information to the map snapshot—can be done by
              dropping down into Core Graphics:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="p">[</span><span class=
"n">snapshotter</span> <span class=
"n">startWithQueue</span><span class="o">:</span><span class=
"n">dispatch_get_global_queue</span><span class=
"p">(</span><span class=
"n">DISPATCH_QUEUE_PRIORITY_DEFAULT</span><span class=
"p">,</span> <span class="mi">0</span><span class="p">)</span>
              <span class=
"nl">completionHandler:</span><span class="o">^</span><span class=
"p">(</span><span class="n">MKMapSnapshot</span> <span class=
"o">*</span><span class="n">snapshot</span><span class=
"p">,</span> <span class="n">NSError</span> <span class=
"o">*</span><span class="n">error</span><span class=
"p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class=
"p">(</span><span class="n">error</span><span class=
"p">)</span> <span class="p">{</span>
          <span class="n">NSLog</span><span class=
"p">(</span><span class="s">@"[Error] %@"</span><span class=
"p">,</span> <span class="n">error</span><span class="p">);</span>
          <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="n">MKAnnotationView</span> <span class=
"o">*</span><span class="n">pin</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">MKPinAnnotationView</span> <span class=
"n">alloc</span><span class="p">]</span> <span class=
"n">initWithAnnotation</span><span class="o">:</span><span class=
"nb">nil</span> <span class="n">reuseIdentifier</span><span class=
"o">:</span><span class="nb">nil</span><span class="p">];</span>

      <span class="n">UIImage</span> <span class=
"o">*</span><span class="n">image</span> <span class=
"o">=</span> <span class="n">snapshot</span><span class=
"p">.</span><span class="n">image</span><span class="p">;</span>
      <span class=
"n">UIGraphicsBeginImageContextWithOptions</span><span class=
"p">(</span><span class="n">image</span><span class=
"p">.</span><span class="n">size</span><span class=
"p">,</span> <span class="nb">YES</span><span class=
"p">,</span> <span class="n">image</span><span class=
"p">.</span><span class="n">scale</span><span class="p">);</span>
      <span class="p">{</span>
          <span class="p">[</span><span class=
"n">image</span> <span class="n">drawAtPoint</span><span class=
"o">:</span><span class="n">CGPointMake</span><span class=
"p">(</span><span class="mf">0.0f</span><span class=
"p">,</span> <span class="mf">0.0f</span><span class="p">)];</span>

          <span class="n">CGRect</span> <span class=
"n">rect</span> <span class="o">=</span> <span class=
"n">CGRectMake</span><span class="p">(</span><span class=
"mf">0.0f</span><span class="p">,</span> <span class=
"mf">0.0f</span><span class="p">,</span> <span class=
"n">image</span><span class="p">.</span><span class=
"n">size</span><span class="p">.</span><span class=
"n">width</span><span class="p">,</span> <span class=
"n">image</span><span class="p">.</span><span class=
"n">size</span><span class="p">.</span><span class=
"n">height</span><span class="p">);</span>
          <span class="k">for</span> <span class=
"p">(</span><span class="kt">id</span> <span class=
"o">&lt;</span><span class="n">MKAnnotation</span><span class=
"o">&gt;</span> <span class="n">annotation</span> <span class=
"k">in</span> <span class="n">self</span><span class=
"p">.</span><span class="n">mapView</span><span class=
"p">.</span><span class="n">annotations</span><span class=
"p">)</span> <span class="p">{</span>
              <span class="n">CGPoint</span> <span class=
"n">point</span> <span class="o">=</span> <span class=
"p">[</span><span class="n">snapshot</span> <span class=
"n">pointForCoordinate</span><span class="o">:</span><span class=
"n">annotation</span><span class="p">.</span><span class=
"n">coordinate</span><span class="p">];</span>
              <span class="k">if</span> <span class=
"p">(</span><span class="n">CGRectContainsPoint</span><span class=
"p">(</span><span class="n">rect</span><span class=
"p">,</span> <span class="n">point</span><span class=
"p">))</span> <span class="p">{</span>
                  <span class="n">point</span><span class=
"p">.</span><span class="n">x</span> <span class=
"o">=</span> <span class="n">point</span><span class=
"p">.</span><span class="n">x</span> <span class=
"o">+</span> <span class="n">pin</span><span class=
"p">.</span><span class="n">centerOffset</span><span class=
"p">.</span><span class="n">x</span> <span class="o">-</span>
                                <span class=
"p">(</span><span class="n">pin</span><span class=
"p">.</span><span class="n">bounds</span><span class=
"p">.</span><span class="n">size</span><span class=
"p">.</span><span class="n">width</span> <span class=
"o">/</span> <span class="mf">2.0f</span><span class="p">);</span>
                  <span class="n">point</span><span class=
"p">.</span><span class="n">y</span> <span class=
"o">=</span> <span class="n">point</span><span class=
"p">.</span><span class="n">y</span> <span class=
"o">+</span> <span class="n">pin</span><span class=
"p">.</span><span class="n">centerOffset</span><span class=
"p">.</span><span class="n">y</span> <span class="o">-</span>
                                <span class=
"p">(</span><span class="n">pin</span><span class=
"p">.</span><span class="n">bounds</span><span class=
"p">.</span><span class="n">size</span><span class=
"p">.</span><span class="n">height</span> <span class=
"o">/</span> <span class="mf">2.0f</span><span class="p">);</span>
                  <span class="p">[</span><span class=
"n">pin</span><span class="p">.</span><span class=
"n">image</span> <span class="n">drawAtPoint</span><span class=
"o">:</span><span class="n">point</span><span class="p">];</span>
              <span class="p">}</span>
          <span class="p">}</span>

          <span class="n">UIImage</span> <span class=
"o">*</span><span class="n">compositeImage</span> <span class=
"o">=</span> <span class=
"n">UIGraphicsGetImageFromCurrentImageContext</span><span class=
"p">();</span>
          <span class="n">NSData</span> <span class=
"o">*</span><span class="n">data</span> <span class=
"o">=</span> <span class=
"n">UIImagePNGRepresentation</span><span class=
"p">(</span><span class="n">compositeImage</span><span class=
"p">);</span>
          <span class="p">[</span><span class=
"n">data</span> <span class="n">writeToURL</span><span class=
"o">:</span><span class="n">fileURL</span> <span class=
"n">atomically</span><span class="o">:</span><span class=
"nb">YES</span><span class="p">];</span>
      <span class="p">}</span>
      <span class="n">UIGraphicsEndImageContext</span><span class=
"p">();</span>
<span class="p">}];</span>
</code>
</pre>
            </div>
            <h2>
              MKDirections
            </h2>
            <p>
              The final iOS 7 addition to MapKit that we'll discuss
              is <a href=
              "https://developer.apple.com/library/mac/documentation/MapKit/Reference/MKDirections_class/Reference/Reference.html">
              <code>MKDirections</code></a>.
            </p>
            <blockquote>
              <p>
                <code>MKDirections</code>' spiritual predecessor
                (of sorts), <a href=
                "https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKLocalSearch/Reference/Reference.html">
                <code>MKLocalSearch</code></a> was discussed in
                <a href="http://nshipster.com/mklocalsearch/">a
                previous NSHipster article</a>
              </p>
            </blockquote>
            <p>
              As its name implies, <code>MKDirections</code>
              fetches routes between two waypoints. A
              <code>MKDirectionsRequest</code> object is
              initialized with a <code>source</code> and
              <code>destination</code>, and is then passed into an
              <code>MKDirections</code> object, which can calculate
              several possible routes and estimated travel times.
            </p>
            <p>
              It does so asynchronously, with
              <code>calculateDirectionsWithCompletionHandler:</code>,
              which returns either an
              <code>MKDirectionsResponse</code> object or an
              <code>NSError</code> describing why the directions
              request failed. An <code>MKDirectionsResponse</code>
              object contains an array of <code>routes</code>:
              <code>MKRoute</code> objects with an array of
              <code>MKRouteStep</code> <code>steps</code> objects,
              a polyline shape that can be drawn on the map, and
              other information like estimated travel distance and
              any travel advisories in effect.
            </p>
            <p>
              Building on the previous example, here is how
              <code>MKDirections</code> might be used to create an
              array of images representing each step in a
              calculated route between two points (which might then
              be pasted into an email or cached on disk):
            </p>
            <h3>
              Getting Snapshots for each Step of Directions on a
              Map View
            </h3>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="n">NSMutableArray</span> <span class=
"o">*</span><span class="n">mutableStepImages</span> <span class=
"o">=</span> <span class="p">[</span><span class=
"n">NSMutableArray</span> <span class="n">array</span><span class=
"p">];</span>

<span class="n">MKDirectionsRequest</span> <span class=
"o">*</span><span class="n">request</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">MKDirectionsRequest</span> <span class=
"n">alloc</span><span class="p">]</span> <span class=
"n">init</span><span class="p">];</span>
<span class="n">request</span><span class="p">.</span><span class=
"n">source</span> <span class="o">=</span> <span class=
"p">[</span><span class="n">MKMapItem</span> <span class=
"n">mapItemForCurrentLocation</span><span class="p">];</span>
<span class="n">request</span><span class="p">.</span><span class=
"n">destination</span> <span class="o">=</span> <span class=
"nb">nil</span><span class="p">;</span><span class=
"c1">//...;</span>

<span class="n">MKDirections</span> <span class=
"o">*</span><span class="n">directions</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">MKDirections</span> <span class="n">alloc</span><span class=
"p">]</span> <span class="n">initWithRequest</span><span class=
"o">:</span><span class="n">request</span><span class="p">];</span>
<span class="p">[</span><span class=
"n">directions</span> <span class=
"n">calculateDirectionsWithCompletionHandler</span><span class=
"o">:^</span><span class="p">(</span><span class=
"n">MKDirectionsResponse</span> <span class=
"o">*</span><span class="n">response</span><span class=
"p">,</span> <span class="n">NSError</span> <span class=
"o">*</span><span class="n">error</span><span class=
"p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class=
"n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class=
"p">(</span><span class="s">@"[Error] %@"</span><span class=
"p">,</span> <span class="n">error</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">MKRoute</span> <span class=
"o">*</span><span class="n">route</span> <span class=
"o">=</span> <span class="p">[</span><span class=
"n">response</span><span class="p">.</span><span class=
"n">routes</span> <span class="n">firstObject</span><span class=
"p">];</span>
    <span class="k">for</span> <span class="p">(</span><span class=
"n">MKRouteStep</span> <span class="o">*</span><span class=
"n">step</span> <span class="k">in</span> <span class=
"n">route</span><span class="p">.</span><span class=
"n">steps</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">[</span><span class=
"n">snapshotter</span> <span class=
"n">startWithCompletionHandler</span><span class=
"o">:^</span><span class="p">(</span><span class=
"n">MKMapSnapshot</span> <span class="o">*</span><span class=
"n">snapshot</span><span class="p">,</span> <span class=
"n">NSError</span> <span class="o">*</span><span class=
"n">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class=
"p">(</span><span class="n">error</span><span class=
"p">)</span> <span class="p">{</span>
                <span class="n">NSLog</span><span class=
"p">(</span><span class="s">@"[Error] %@"</span><span class=
"p">,</span> <span class="n">error</span><span class="p">);</span>
                <span class="k">return</span><span class=
"p">;</span>
            <span class="p">}</span>

            <span class="n">UIImage</span> <span class=
"o">*</span><span class="n">image</span> <span class=
"o">=</span> <span class="n">snapshot</span><span class=
"p">.</span><span class="n">image</span><span class="p">;</span>
            <span class=
"n">UIGraphicsBeginImageContextWithOptions</span><span class=
"p">(</span><span class="n">image</span><span class=
"p">.</span><span class="n">size</span><span class=
"p">,</span> <span class="nb">YES</span><span class=
"p">,</span> <span class="n">image</span><span class=
"p">.</span><span class="n">scale</span><span class="p">);</span>
            <span class="p">{</span>
                <span class="p">[</span><span class=
"n">image</span> <span class="n">drawAtPoint</span><span class=
"o">:</span><span class="n">CGPointMake</span><span class=
"p">(</span><span class="mf">0.0f</span><span class=
"p">,</span> <span class="mf">0.0f</span><span class="p">)];</span>

                <span class="n">CGContextRef</span> <span class=
"n">c</span> <span class="o">=</span> <span class=
"n">UIGraphicsGetCurrentContext</span><span class="p">();</span>
                <span class=
"n">MKPolylineRenderer</span> <span class="o">*</span><span class=
"n">polylineRenderer</span> <span class="o">=</span> <span class=
"p">[[</span><span class="n">MKPolylineRenderer</span> <span class=
"n">alloc</span><span class="p">]</span> <span class=
"n">initWithPolyline</span><span class="o">:</span><span class=
"n">step</span><span class="p">.</span><span class=
"n">polyline</span><span class="p">];</span>
                <span class="k">if</span> <span class=
"p">(</span><span class="n">polylineRenderer</span><span class=
"p">.</span><span class="n">path</span><span class=
"p">)</span> <span class="p">{</span>
                    <span class="p">[</span><span class=
"n">polylineRenderer</span> <span class=
"n">applyStrokePropertiesToContext</span><span class=
"o">:</span><span class="n">c</span> <span class=
"n">atZoomScale</span><span class="o">:</span><span class=
"mf">1.0f</span><span class="p">];</span>
                    <span class=
"n">CGContextAddPath</span><span class="p">(</span><span class=
"n">c</span><span class="p">,</span> <span class=
"n">polylineRenderer</span><span class="p">.</span><span class=
"n">path</span><span class="p">);</span>
                    <span class=
"n">CGContextStrokePath</span><span class="p">(</span><span class=
"n">c</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="n">CGRect</span> <span class=
"n">rect</span> <span class="o">=</span> <span class=
"n">CGRectMake</span><span class="p">(</span><span class=
"mf">0.0f</span><span class="p">,</span> <span class=
"mf">0.0f</span><span class="p">,</span> <span class=
"n">image</span><span class="p">.</span><span class=
"n">size</span><span class="p">.</span><span class=
"n">width</span><span class="p">,</span> <span class=
"n">image</span><span class="p">.</span><span class=
"n">size</span><span class="p">.</span><span class=
"n">height</span><span class="p">);</span>
                <span class="k">for</span> <span class=
"p">(</span><span class="n">MKMapItem</span> <span class=
"o">*</span><span class="n">mapItem</span> <span class=
"k">in</span> <span class="p">@[</span><span class=
"n">response</span><span class="p">.</span><span class=
"n">source</span><span class="p">,</span> <span class=
"n">response</span><span class="p">.</span><span class=
"n">destination</span><span class="p">])</span> <span class=
"p">{</span>
                    <span class="n">CGPoint</span> <span class=
"n">point</span> <span class="o">=</span> <span class=
"p">[</span><span class="n">snapshot</span> <span class=
"n">pointForCoordinate</span><span class="o">:</span><span class=
"n">mapItem</span><span class="p">.</span><span class=
"n">placemark</span><span class="p">.</span><span class=
"n">location</span><span class="p">.</span><span class=
"n">coordinate</span><span class="p">];</span>
                    <span class="k">if</span> <span class=
"p">(</span><span class="n">CGRectContainsPoint</span><span class=
"p">(</span><span class="n">rect</span><span class=
"p">,</span> <span class="n">point</span><span class=
"p">))</span> <span class="p">{</span>
                        <span class=
"n">MKPinAnnotationView</span> <span class="o">*</span><span class=
"n">pin</span> <span class="o">=</span> <span class=
"p">[[</span><span class=
"n">MKPinAnnotationView</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">initWithAnnotation</span><span class="o">:</span><span class="nb">nil</span> <span class="n">reuseIdentifier</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
                        <span class="n">pin</span><span class=
"p">.</span><span class="n">pinColor</span> <span class=
"o">=</span> <span class="p">[</span><span class=
"n">mapItem</span> <span class="n">isEqual</span><span class=
"o">:</span><span class="n">response</span><span class=
"p">.</span><span class="n">source</span><span class=
"p">]</span> <span class="o">?</span> <span class=
"n">MKPinAnnotationColorGreen</span> <span class=
"o">:</span> <span class=
"n">MKPinAnnotationColorRed</span><span class="p">;</span>

                        <span class="n">point</span><span class=
"p">.</span><span class="n">x</span> <span class=
"o">=</span> <span class="n">point</span><span class=
"p">.</span><span class="n">x</span> <span class=
"o">+</span> <span class="n">pin</span><span class=
"p">.</span><span class="n">centerOffset</span><span class=
"p">.</span><span class="n">x</span> <span class="o">-</span>
                            <span class="p">(</span><span class=
"n">pin</span><span class="p">.</span><span class=
"n">bounds</span><span class="p">.</span><span class=
"n">size</span><span class="p">.</span><span class=
"n">width</span> <span class="o">/</span> <span class=
"mf">2.0f</span><span class="p">);</span>
                        <span class="n">point</span><span class=
"p">.</span><span class="n">y</span> <span class=
"o">=</span> <span class="n">point</span><span class=
"p">.</span><span class="n">y</span> <span class=
"o">+</span> <span class="n">pin</span><span class=
"p">.</span><span class="n">centerOffset</span><span class=
"p">.</span><span class="n">y</span> <span class="o">-</span>
                            <span class="p">(</span><span class=
"n">pin</span><span class="p">.</span><span class=
"n">bounds</span><span class="p">.</span><span class=
"n">size</span><span class="p">.</span><span class=
"n">height</span> <span class="o">/</span> <span class=
"mf">2.0f</span><span class="p">);</span>
                        <span class="p">[</span><span class=
"n">pin</span><span class="p">.</span><span class=
"n">image</span> <span class="n">drawAtPoint</span><span class=
"o">:</span><span class="n">point</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="n">UIImage</span> <span class=
"o">*</span><span class="n">stepImage</span> <span class=
"o">=</span> <span class=
"n">UIGraphicsGetImageFromCurrentImageContext</span><span class=
"p">();</span>
                <span class="p">[</span><span class=
"n">mutableStepImages</span> <span class=
"n">addObject</span><span class="o">:</span><span class=
"n">stepImage</span><span class="p">];</span>
            <span class="p">}</span>
            <span class=
"n">UIGraphicsEndImageContext</span><span class="p">();</span>
        <span class="p">}];</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code>
</pre>
            </div>
            <hr>
            <p>
              As the tools used to map the world around us become
              increasingly sophisticated and ubiquitous, we become
              ever more capable of uncovering and communicating
              connections we create between ideas and the spaces
              they inhabit. With the introduction of several new
              MapKit APIs, iOS 7 took great strides to expand on
              what's possible. Although (perhaps unfairly)
              overshadowed by the mistakes of the past, MapKit is,
              and remains an extremely capable framework, worthy of
              further investigation.
            </p>
          </div>
          <aside>
            <a href="https://twitter.com/share" class=
            "twitter-share-button" data-url=
            "http://nshipster.com/mktileoverlay-mkmapsnapshotter-mkdirections/"
            data-via="NSHipster" data-size="large">Tweet</a>
            <script type="text/javascript">
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
            </script>
          </aside>
          <footer id="book" class="promotion">
            <a href="https://gum.co/cfhipsterref"></a>
            <div id="cfhipsterref-cover"></div>
            <div>
              <hgroup>
                <h1>
                  <a href=
                  "https://gum.co/cfhipsterref">CFHipsterRef:
                  Low-Level Programming on<br>
                  iOS &amp; Mac OS X</a>
                </h1>
                <h2>
                  Available May 27th, 2014
                </h2>
              </hgroup>
              <p>
                Perfect for intermediate and expert developers
                wanting to take a deeper dive into advanced topics,
                <em>CFHipsterRef: Low-Level Programming on iOS
                &amp; Mac OS X</em> covers the core technologies
                powering Cocoa, Objective-C, and the operating
                system itself, including Core Bluetooth,
                Accelerate, and the Objective-C runtime.
              </p><button onclick=
              "javascript:window.location.href='https://gum.co/cfhipsterref'">Pre-Order
              Now</button>
            </div>
          </footer>
        </article>
      </div>
      <footer role="contentinfo">
        <section class="credits colophon">
          <p>
            Created by <a href="http://mattt.me">Mattt
            Thompson</a>, and released under a <a href=
            "http://creativecommons.org/licenses/by-nc/3.0/" rel=
            "license">Creative Commons BY-NC License</a>. <a href=
            "https://plus.google.com/106751358503565042647?rel=author"
            style="display: none;"></a>
          </p>
          <p>
            Articles also available in <a href=
            "http://nshipster.cn" hreflang="zh-Hans">中文</a>.
          </p>
        </section>
        <aside class="links">
          <a href="https://github.com/NSHipster/articles/issues"
          class="icon-github" title="Pull Requests Welcome"
          aria-hidden="true"></a> <a href="/feed.xml" class=
          "icon-feed" title="RSS" aria-hidden="true"></a>
        </aside>
        <section class="archive" role="navigation">
          <div>
            <h2>
              Foundation
            </h2>
            <ul>
              <li>
                <a href="/nsurl/">NSURL /<br>
                NSURLComponents</a>
              </li>
              <li>
                <a href=
                "/nstemporarydirectory/">NSTemporaryDirectory /<br>
                NSItemReplacementDirectory /<br>
                mktemp(3)</a>
              </li>
              <li>
                <a href="/nsrange/">NSRange</a>
              </li>
              <li>
                <a href=
                "/nsnotification-and-nsnotificationcenter/">NSNotification
                &amp;<br>
                NSNotificationCenter</a>
              </li>
              <li>
                <a href="/nsfilemanager/">NSFileManager</a>
              </li>
              <li>
                <a href="/nsformatter/">NSFormatter</a>
              </li>
              <li>
                <a href="/nserror/">NSError</a>
              </li>
              <li>
                <a href="/key-value-observing/">Key-Value
                Observing</a>
              </li>
              <li>
                <a href="/nshashtable-and-nsmaptable/">NSHashTable
                &amp;<br>
                NSMapTable</a>
              </li>
              <li>
                <a href="/nspredicate/">NSPredicate</a>
              </li>
              <li>
                <a href="/nsexpression/">NSExpression</a>
              </li>
              <li>
                <a href="/enumerators/">NSFastEnumeration /<br>
                NSEnumerator /<br>
                -enumerateObjectsUsingBlock:</a>
              </li>
              <li>
                <a href="/uuid-udid-unique-identifier/">NSUUID
                /<br>
                CFUUIDRef /<br>
                UIDevice -uniqueIdentifier /<br>
                -identifierForVendor</a>
              </li>
              <li>
                <a href="/nsdatadetector/">NSDataDetector</a>
              </li>
              <li>
                <a href="/nscoding/">NSCoding / NSKeyedArchiver</a>
              </li>
              <li>
                <a href="/nssecurecoding/">NSSecureCoding</a>
              </li>
              <li>
                <a href=
                "/nsassertionhandler/">NSAssertionHandler</a>
              </li>
              <li>
                <a href="/nsurlcache/">NSURLCache</a>
              </li>
              <li>
                <a href="/nsvalue/">NSValue</a>
              </li>
              <li>
                <a href="/nslocalizedstring/">NSLocalizedString</a>
              </li>
              <li>
                <a href="/instancetype/">instancetype</a>
              </li>
              <li>
                <a href="/kvc-collection-operators/">KVC Collection
                Operators</a>
              </li>
              <li>
                <a href="/nsorderedset/">NSOrderedSet</a>
              </li>
              <li>
                <a href="/ns_enum-ns_options/">NS_ENUM &amp;
                NS_OPTIONS</a>
              </li>
              <li>
                <a href=
                "/nsvaluetransformer/">NSValueTransformer</a>
              </li>
              <li>
                <a href="/nsurlprotocol/">NSURLProtocol</a>
              </li>
              <li>
                <a href=
                "/nslinguistictagger/">NSLinguisticTagger</a>
              </li>
              <li>
                <a href="/nscharacterset/">NSCharacterSet</a>
              </li>
              <li>
                <a href="/nslocale/">NSLocale</a>
              </li>
              <li>
                <a href="/nsoperation/">NSOperation</a>
              </li>
              <li>
                <a href=
                "/nsincrementalstore/">NSIncrementalStore</a>
              </li>
              <li>
                <a href="/nsdatecomponents/">NSDateComponents</a>
              </li>
              <li>
                <a href="/nssortdescriptor/">NSSortDescriptor</a>
              </li>
              <li>
                <a href="/nscache/">NSCache</a>
              </li>
              <li>
                <a href="/nsindexset/">NSIndexSet</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              CoreFoundation
            </h2>
            <ul>
              <li>
                <a href="/cfbag/">CFBag</a>
              </li>
              <li>
                <a href="/cfstringtransform/">CFStringTransform</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              CoreGraphics
            </h2>
            <ul>
              <li>
                <a href="/cggeometry/">CGGeometry</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              UIKit
            </h2>
            <ul>
              <li>
                <a href=
                "/launch-options/">UIApplicationDelegate<br>
                launchOptions</a>
              </li>
              <li>
                <a href="/uimenucontroller/">UIMenuController</a>
              </li>
              <li>
                <a href="/uiappearance/">UIAppearance</a>
              </li>
              <li>
                <a href=
                "/uilocalizedindexedcollation/">UILocalizedIndexedCollation</a>
              </li>
              <li>
                <a href="/uicollectionview/">UICollectionView</a>
              </li>
              <li>
                <a href="/uiaccessibility/">UIAccessibility</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Objective-C
            </h2>
            <ul>
              <li>
                <a href="/namespacing/">Namespacing</a>
              </li>
              <li>
                <a href="/extended-file-attributes/">Extended File
                Attributes</a>
              </li>
              <li>
                <a href="/equality/">Equality</a>
              </li>
              <li>
                <a href="/random/">rand(3) / random(3) /
                arc4random(3) / et al.</a>
              </li>
              <li>
                <a href="/object-subscripting/">Object
                Subscripting</a>
              </li>
              <li>
                <a href="/bool/">BOOL / bool / Boolean /
                NSCFBoolean</a>
              </li>
              <li>
                <a href="/c-storage-classes/">C Storage Classes</a>
              </li>
              <li>
                <a href="/type-encodings/">Type Encodings</a>
              </li>
              <li>
                <a href="/__attribute__/">__attribute__</a>
              </li>
              <li>
                <a href="/nil/">nil / Nil / NULL / NSNull</a>
              </li>
              <li>
                <a href="/at-compiler-directives/">@</a>
              </li>
              <li>
                <a href="/pragma/">#pragma</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Open Source
            </h2>
            <ul>
              <li>
                <a href="/xctool/">xctool</a>
              </li>
              <li>
                <a href="/afnetworking-2/">AFNetworking 2.0</a>
              </li>
              <li>
                <a href="/core-data-libraries-and-utilities/">Core
                Data Libraries &amp; Utilities</a>
              </li>
              <li>
                <a href="/gpuimage/">GPUImage</a>
              </li>
              <li>
                <a href="/reactivecocoa/">ReactiveCocoa</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Testing
            </h2>
            <ul>
              <li>
                <a href="/unit-testing/">Unit Testing</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Miscellanea
            </h2>
            <ul>
              <li>
                <a href=
                "/avspeechsynthesizer/">AVSpeechSynthesizer</a>
              </li>
              <li>
                <a href="/empathy/">Empathy</a>
              </li>
              <li>
                <a href=
                "/dictionary-services/">UIReferenceLibraryViewController
                /<br>
                DCSDictionaryRef/<br>
                /usr/share/dict/words</a>
              </li>
              <li>
                <a href="/method-swizzling/">Method Swizzling</a>
              </li>
              <li>
                <a href="/associated-objects/">Associated
                Objects</a>
              </li>
              <li>
                <a href=
                "/mktileoverlay-mkmapsnapshotter-mkdirections/">MKTileOverlay,<br>
                MKMapSnapshotter &amp;<br>
                MKDirections</a>
              </li>
              <li>
                <a href="/stewardship/">Stewardship</a>
              </li>
              <li>
                <a href="/colophon/">Colophon</a>
              </li>
              <li>
                <a href="/new-years-2014/">Reader Submissions -<br>
                New Year's 2014</a>
              </li>
              <li>
                <a href="/multipeer-connectivity/">Multipeer
                Connectivity</a>
              </li>
              <li>
                <a href="/nshipster-quiz-4/">NSHipster Quiz #4</a>
              </li>
              <li>
                <a href=
                "/launch-arguments-and-environment-variables/">Launch
                Arguments &amp;<br>
                Environment Variables</a>
              </li>
              <li>
                <a href="/xcode-key-bindings-and-gestures/">Xcode
                Key Bindings &amp; Gestures</a>
              </li>
              <li>
                <a href="/ios7/">iOS 7</a>
              </li>
              <li>
                <a href="/network-link-conditioner/">Network Link
                Conditioner</a>
              </li>
              <li>
                <a href="/xcode-snippets/">Xcode Snippets</a>
              </li>
              <li>
                <a href="/documentation/">Documentation</a>
              </li>
              <li>
                <a href="/nshipster-quiz-3/">NSHipster Quiz #3</a>
              </li>
              <li>
                <a href="/nshipster-quiz-2/">NSHipster Quiz #2</a>
              </li>
              <li>
                <a href="/mklocalsearch/">MKLocalSearch</a>
              </li>
              <li>
                <a href="/nshipster-quiz-1/">NSHipster Quiz #1</a>
              </li>
              <li>
                <a href="/icloud/">iCloud</a>
              </li>
              <li>
                <a href="/search-kit/">Search Kit</a>
              </li>
              <li>
                <a href="/backrow/">Back Row</a>
              </li>
              <li>
                <a href=
                "/reader-submissions-new-years-2013/">Reader
                Submissions -<br>
                New Year's 2013</a>
              </li>
              <li>
                <a href="/addressbookui/">AddressBookUI</a>
              </li>
            </ul>
          </div>
        </section>
      </footer>
    </div><script type="text/javascript">
var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
    </script><script type="text/javascript">
var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', '510be6d4108d7b438800005f');
      t.src = '//secure.gaug.es/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();
    </script>
  </body>
</html>
