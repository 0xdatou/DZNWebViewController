<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>
      UIApplicationDelegatelaunchOptions : NSHipster
    </title>
    <meta name="description" content=
    "NSHipster is a journal of the overlooked bits in Objective-C and Cocoa. Updated weekly.">
    <meta name="author" content="Mattt Thompson">
    <meta name="revisit-after" content="3 days">
    <meta name="viewport" content="width=device-width">
    <link rel="license" href=
    "http://creativecommons.org/licenses/by-nc/3.0/">
    <link rel="alternate" hreflang="en-us" href=
    "http://nshipster.com">
    <link rel="alternate" hreflang="zh-Hans" href=
    "http://nshipster.cn">
    <link rel="alternate" hreflang="x-default" href=
    "http://nshipster.com">
    <link rel="alternate" type="application/rss+xml" title="RSS"
    href="http://nshipster.com/feed.xml">
    <link rel="stylesheet" href="/css/screen.css" type="text/css">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@NSHipster">
    <meta name="twitter:creator" content="@mattt">
    <meta name="twitter:title" content=
    "UIApplicationDelegate&lt;br/&gt;launchOptions">
    <meta name="twitter:description" content=
    "AppDelegate is the dumping ground for functionality in iOS.">
    <meta content="NSHipster" property="og:site_name">
    <meta content="UIApplicationDelegate&lt;br/&gt;launchOptions"
    property="og:title">
    <meta content="http://nshipster.com/launch-options/" property=
    "og:url">
    <meta content=
    "AppDelegate is the dumping ground for functionality in iOS."
    property="og:description">
    <meta property="st:title" content=
    "UIApplicationDelegate&lt;br/&gt;launchOptions">
    <meta property="st:type" content="article">
    <script type="text/javascript">
var _sf_startpt=(new Date()).getTime()
    </script>
    <script onload="try{Typekit.load();}catch(e){}" src=
    "//use.typekit.net/agk0bgp.js" type="text/javascript">
</script>
  </head>
  <body>
    <div role="container">
      <header role="banner">
        <h1 id="logo">
          <a href="/"><acronym title="NeXTSTEP/Sun">NS</acronym>
          <strong>Hipster</strong> <img id="moustache" src=
          "//cdn.nshipster.com/images/moustache.svg" width="200"
          height="150" data-author=
          "http://thenounproject.com/bnhw"></a>
        </h1>
        <form>
          <input type="text" id="st-search-input" class=
          "st-search-input">
        </form>
      </header>
      <div id="main" role="main">
        <article>
          <header>
            <h1>
              <a href="/launch-options/">UIApplication​Delegate<br>
              launch​Options</a>
            </h1>
            <h2>
              Written by <a href="http://mattt.me/">Mattt
              Thompson</a> on <time pubdate=
              "2013-12-16 00:00:00 -0800">Dec 16<span>th</span>,
              2013</time>
            </h2>
          </header>
          <div class="content" data-swiftype-index="true">
            <p>
              AppDelegate is the dumping ground for functionality
              in iOS.
            </p>
            <p>
              Application lifecycle management? URL routing?
              Notifications? Core Data incantations? Invasive and
              monolithic 3rd-party SDK initialization? Random
              functionality that doesn't seem to fit anywhere else?
              Just stash it in <code>AppDelegate.m</code>!
            </p>
            <p>
              And of all of the crowded, over-loaded parts in
              AppDelegate,
              <code>-application:didFinishLaunchingWithOptions:</code>
              is the most congested of all.
            </p>
            <p>
              For many developers, the <code>launchOptions</code>
              parameter is akin to the <code>String[] args</code>
              argument of a Java <code>main</code> method—something
              ignored in the rush to building an application.
              Hiding in plain sight, <code>launchOptions</code>
              contains a wealth of keyed knowledge that speaks to
              the multitude of ways an app can be launched on iOS.
            </p>
            <p>
              This week, all will be revealed in this NSHipster
              tell-all about the least understood parameter of the
              most important method in UIKit:
              <code>launchOptions</code>.
            </p>
            <hr>
            <p>
              Every app begins with <code>UIApplicationDelegate
              -application:didFinishLaunchingWithOptions:</code>
              (or more accurately,
              <code>-application:willFinishLaunchingWithOptions:</code>,
              when implemented). It is called by the application to
              notify its delegate that the launch process is
              finishing, and nearly ready to run.
            </p>
            <p>
              An app launches when its icon is tapped on <a href=
              "http://en.wikipedia.org/wiki/SpringBoard">Springboard</a>,
              but there are several other occasions in which an app
              can be launched. For example, an app registered for a
              custom URL scheme, such as <code>twitter://</code>,
              could be launched as a result of opening a URL. An
              app could also be launched in response to a push
              notification, or a significant change in device
              location.
            </p>
            <p>
              Determining why and how an app launched is the
              responsibility of the <code>launchOptions</code>
              parameter. Like a <code>userInfo</code> dictionary,
              <code>-application:didFinishLaunchingWithOptions:</code>
              can get information for particular named keys in
              <code>launchOptions</code>.
            </p>
            <blockquote>
              <p>
                Many of these keys are also available in the
                <code>UIApplicationDidFinishLaunchingNotification</code>
                notification posted on application launch. Check
                the docs for additional details.
              </p>
            </blockquote>
            <p>
              Numerous as they are, <code>launchOptions</code> keys
              can be more easily understood when organized into
              groups, corresponding to why the app was launched:
            </p>
            <h2>
              Opening from URL
            </h2>
            <p>
              Apps can launch other apps by passing URLs:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="p">[[</span><span class=
"n">UIApplication</span> <span class=
"n">sharedApplication</span><span class="p">]</span> <span class=
"n">openURL</span><span class="o">:</span><span class=
"p">[</span><span class="n">NSURL</span> <span class=
"n">URLWithString</span><span class="o">:</span><span class=
"s">@"app://..."</span><span class="p">]];</span>
</code>
</pre>
            </div>
            <p>
              For example, an <code>http://</code> URL would open
              in Safari, a <code>mailto://</code> URL would open in
              Mail, and a <code>tel://</code> URL would open in
              Phone.
            </p>
            <p>
              In these circumstances, the
              <code>UIApplicationLaunchOptionsURLKey</code> key
              would be populated in <code>launchOptions</code>.
            </p>
            <blockquote>
              <ul>
                <li>
                  <code>UIApplicationLaunchOptionsURLKey</code>:
                  Indicates that the app was launched in order to
                  open a URL. The value of this key is an
                  <code>NSURL</code> object containing the URL to
                  open.
                </li>
              </ul>
            </blockquote>
            <p>
              An app can also be launched through URLs with
              additional system information. When an app is
              launched from an
              <code>UIDocumentInteractionController</code> or via
              AirDrop, the following keys are set in
              <code>launchOptions</code>:
            </p>
            <blockquote>
              <ul>
                <li>
                  <code>UIApplicationLaunchOptionsSourceApplicationKey</code>:
                  Identifies the app that requested the launch of
                  your app. The value of this key is an
                  <code>NSString</code> object that represents the
                  bundle ID of the app that made the request
                </li>
                <li>
                  <code>UIApplicationLaunchOptionsAnnotationKey</code>:
                  Indicates that custom data was provided by the
                  app that requested the opening of the URL. The
                  value of this key is a property-list object
                  containing the custom data.
                </li>
              </ul>
            </blockquote>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="n">NSURL</span> <span class=
"o">*</span><span class="n">fileURL</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">NSBundle</span> <span class="n">mainBundle</span><span class=
"p">]</span> <span class="n">URLForResource</span><span class=
"o">:</span><span class="s">@"Document"</span> <span class=
"n">withExtension</span><span class="o">:</span><span class=
"s">@"pdf"</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class=
"n">fileURL</span><span class="p">)</span> <span class="p">{</span>
    <span class=
"n">UIDocumentInteractionController</span> <span class=
"o">*</span><span class=
"n">documentInteractionController</span> <span class=
"o">=</span> <span class="p">[</span><span class=
"n">UIDocumentInteractionController</span> <span class=
"n">interactionControllerWithURL</span><span class=
"o">:</span><span class="n">fileURL</span><span class="p">];</span>
    <span class=
"n">documentInteractionController</span><span class="p">.</span><span class="n">annotation</span> <span class="o">=</span> <span class="p">@{</span><span class="s">@"foo"</span><span class="o">:</span> <span class="s">@"bar"</span><span class="p">};</span>
    <span class="p">[</span><span class=
"n">documentInteractionController</span> <span class=
"n">setDelegate</span><span class="o">:</span><span class=
"n">self</span><span class="p">];</span>
    <span class="p">[</span><span class=
"n">documentInteractionController</span> <span class=
"n">presentPreviewAnimated</span><span class=
"o">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="p">}</span>
</code>
</pre>
            </div>
            <h2>
              Responding to Notification
            </h2>
            <p>
              Not to be confused with <a href=
              "http://nshipster.com/nsnotification-and-nsnotificationcenter/">
              <code>NSNotification</code></a>, apps can be sent
              remote or local notifications.
            </p>
            <h3>
              Remote Notification
            </h3>
            <p>
              Introduced in iOS 3, remote, or "push" notifications
              are one of the defining features of the mobile
              platform.
            </p>
            <p>
              To register for remote notifications,
              <code>registerForRemoteNotificationTypes:</code> is
              called in
              <code>application:didFinishLaunchingWithOptions:</code>.
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="p">[</span><span class=
"n">application</span> <span class=
"n">registerForRemoteNotificationTypes</span><span class=
"o">:</span>
    <span class=
"n">UIRemoteNotificationTypeBadge</span> <span class="o">|</span>
    <span class=
"n">UIRemoteNotificationTypeSound</span> <span class="o">|</span>
    <span class=
"n">UIRemoteNotificationTypeAlert</span><span class="p">];</span>
</code>
</pre>
            </div>
            <p>
              ...which, if successful, calls
              <code>-application:didRegisterForRemoteNotificationsWithDeviceToken:</code>.
              Once the device has been successfully registered, it
              can receive push notifications at any time.
            </p>
            <p>
              If an app receives a notification while in the
              foreground, its delegate will call
              <code>application:didReceiveRemoteNotification:</code>.
              However, if the app is launched, perhaps by swiping
              the alert in notification center,
              <code>application:didFinishLaunchingWithOptions:</code>
              is called with the
              <code>UIApplicationLaunchOptionsRemoteNotificationKey</code>
              launch option:
            </p>
            <blockquote>
              <ul>
                <li>
                  <code>UIApplicationLaunchOptionsRemoteNotificationKey</code>:
                  Indicates that a remote notification is available
                  for the app to process. The value of this key is
                  an <code>NSDictionary</code> containing the
                  payload of the remote notification. &gt; -
                  <code>alert</code>: Either a string for the alert
                  message or a dictionary with two keys:
                  <code>body</code> and <code>show-view</code>.
                  &gt; - <code>badge</code>: A number indicating
                  the quantity of data items to download from the
                  provider. This number is to be displayed on the
                  app icon. The absence of a badge property
                  indicates that any number currently badging the
                  icon should be removed. &gt; -
                  <code>sound</code>: The name of a sound file in
                  the app bundle to play as an alert sound. If
                  “default” is specified, the default sound should
                  be played.
                </li>
              </ul>
            </blockquote>
            <p>
              Since this introduces two separate code paths for
              notification handling, a common approach is to have
              <code>application:didFinishLaunchingWithOptions:</code>
              manually call
              <code>application:didReceiveRemoteNotification:</code>:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="k">-</span> <span class=
"p">(</span><span class="kt">BOOL</span><span class=
"p">)</span><span class="nf">application:</span><span class=
"p">(</span><span class="n">UIApplication</span> <span class=
"o">*</span><span class="p">)</span><span class=
"nv">application</span>
<span class="nl">didFinishLaunchingWithOptions:</span><span class=
"p">(</span><span class="n">NSDictionary</span> <span class=
"o">*</span><span class="p">)</span><span class=
"nv">launchOptions</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">if</span> <span class="p">(</span><span class=
"n">launchOptions</span><span class="p">[</span><span class=
"n">UIApplicationLaunchOptionsRemoteNotificationKey</span><span class="p">])</span> <span class="p">{</span>
        <span class="p">[</span><span class=
"n">self</span> <span class="n">application</span><span class=
"o">:</span><span class="n">application</span> <span class=
"n">didReceiveRemoteNotification</span><span class=
"o">:</span><span class="n">launchOptions</span><span class=
"p">[</span><span class=
"n">UIApplicationLaunchOptionsRemoteNotificationKey</span><span class="p">]];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code>
</pre>
            </div>
            <h3>
              Local Notification
            </h3>
            <p>
              <a href=
              "https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1">
              Local notifications</a> were added in iOS 4, and to
              this day, are still surprisingly misunderstood.
            </p>
            <p>
              Apps can schedule <code>UILocalNotification</code>s
              to trigger at some future time or interval. If the
              app is active in the foreground at that time, the app
              calls
              <code>-application:didReceiveLocalNotification:</code>
              on its delegate. However, if the app is not active,
              the notification will be posted to Notification
              Center.
            </p>
            <p>
              Unlike remote notifications,
              <code>UIApplication</code> delegate provides a
              unified code path for handling local notifications.
              If an app is launched through a local notification,
              it calls
              <code>-application:didFinishLaunchingWithOptions:</code>
              followed by
              <code>-application:didReceiveLocalNotification:</code>
              (that is, there is no need to call it from
              <code>-application:didFinishLaunchingWithOptions:</code>
              like remote notifications).
            </p>
            <p>
              A local notification populates the launch options on
              <code>UIApplicationLaunchOptionsLocalNotificationKey</code>,
              which contains a payload with the same structure as a
              remote notification:
            </p>
            <ul>
              <li>
                <code>UIApplicationLaunchOptionsLocalNotificationKey</code>:
                Indicates that a local notification is available
                for the app to process. The value of this key is an
                <code>NSDictionary</code> containing the payload of
                the local notification.
              </li>
            </ul>
            <p>
              In the case where it is desirable to show an alert
              for a local notification delivered when the app is
              active in the foreground, and otherwise wouldn't
              provide a visual indication, here's how one might use
              the information from <code>UILocalNotification</code>
              to do it manually:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="p">@</span><span class=
"n">import</span> <span class="n">AVFoundation</span><span class=
"p">;</span>

<span class="k">@interface</span> <span class=
"nc">AppDelegate</span> <span class="p">()</span>
<span class="k">@property</span> <span class=
"p">(</span><span class="n">readwrite</span><span class=
"p">,</span> <span class="n">nonatomic</span><span class=
"p">,</span> <span class="n">assign</span><span class=
"p">)</span> <span class="n">SystemSoundID</span> <span class=
"n">localNotificationSound</span><span class="p">;</span>
<span class="k">@end</span>
</code>
</pre>
            </div>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="k">-</span> <span class=
"p">(</span><span class="kt">void</span><span class=
"p">)</span><span class="nf">application:</span><span class=
"p">(</span><span class="n">UIApplication</span> <span class=
"o">*</span><span class="p">)</span><span class=
"nv">application</span>
<span class="nl">didReceiveLocalNotification:</span><span class=
"p">(</span><span class="n">UILocalNotification</span> <span class=
"o">*</span><span class="p">)</span><span class=
"nv">notification</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class=
"n">application</span><span class="p">.</span><span class=
"n">applicationState</span> <span class="o">==</span> <span class=
"n">UIApplicationStateActive</span><span class=
"p">)</span> <span class="p">{</span>
        <span class="n">UIAlertView</span> <span class=
"o">*</span><span class="n">alertView</span> <span class=
"o">=</span>
            <span class="p">[[</span><span class=
"n">UIAlertView</span> <span class="n">alloc</span><span class=
"p">]</span> <span class="n">initWithTitle</span><span class=
"o">:</span><span class="n">notification</span><span class=
"p">.</span><span class="n">alertAction</span>
                                       <span class=
"nl">message:</span><span class="n">notification</span><span class=
"p">.</span><span class="n">alertBody</span>
                                      <span class=
"nl">delegate:</span><span class="nb">nil</span>
                             <span class=
"nl">cancelButtonTitle:</span><span class=
"n">NSLocalizedString</span><span class="p">(</span><span class=
"s">@"OK"</span><span class="p">,</span> <span class=
"nb">nil</span><span class="p">)</span>
                             <span class=
"nl">otherButtonTitles:</span><span class=
"nb">nil</span><span class="p">];</span>

        <span class="k">if</span> <span class=
"p">(</span><span class="o">!</span><span class=
"n">self</span><span class="p">.</span><span class=
"n">localNotificationSound</span><span class=
"p">)</span> <span class="p">{</span>
            <span class="n">NSURL</span> <span class=
"o">*</span><span class="n">soundURL</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">NSBundle</span> <span class="n">mainBundle</span><span class=
"p">]</span> <span class="n">URLForResource</span><span class=
"o">:</span><span class="s">@"Sosumi"</span>
                                                      <span class=
"nl">withExtension:</span><span class="s">@"wav"</span><span class=
"p">];</span>
            <span class=
"n">AudioServicesCreateSystemSoundID</span><span class=
"p">((</span><span class="n">__bridge</span> <span class=
"n">CFURLRef</span><span class="p">)</span><span class=
"n">soundURL</span><span class="p">,</span> <span class=
"o">&amp;</span><span class=
"n">_localNotificationSound</span><span class="p">);</span>
        <span class="p">}</span>
        <span class=
"n">AudioServicesPlaySystemSound</span><span class=
"p">(</span><span class="n">self</span><span class=
"p">.</span><span class=
"n">localNotificationSound</span><span class="p">);</span>

        <span class="p">[</span><span class=
"n">alertView</span> <span class="n">show</span><span class=
"p">];</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class=
"kt">void</span><span class="p">)</span><span class=
"nf">applicationWillTerminate:</span><span class=
"p">(</span><span class="n">UIApplication</span> <span class=
"o">*</span><span class="p">)</span><span class=
"nv">application</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class=
"n">self</span><span class="p">.</span><span class=
"n">localNotificationSound</span><span class=
"p">)</span> <span class="p">{</span>
        <span class=
"n">AudioServicesDisposeSystemSoundID</span><span class=
"p">(</span><span class="n">self</span><span class=
"p">.</span><span class=
"n">localNotificationSound</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code>
</pre>
            </div>
            <h2>
              Location Event
            </h2>
            <p>
              Building the next great geomobilelocalsocial check-in
              photo app? Well, you're about 4 years late to the
              party.
            </p>
            <p>
              But fear not! With iOS region monitoring, your app
              can be launched on location events:
            </p>
            <blockquote>
              <ul>
                <li>
                  <code>UIApplicationLaunchOptionsLocationKey</code>:
                  Indicates that the app was launched in response
                  to an incoming location event. The value of this
                  key is an <code>NSNumber</code> object containing
                  a Boolean value. You should use the presence of
                  this key as a signal to create a
                  <code>CLLocationManager</code> object and start
                  location services again. Location data is
                  delivered only to the location manager delegate
                  and not using this key.
                </li>
              </ul>
            </blockquote>
            <p>
              Here's an example of how an app might go about
              monitoring for significant location change to
              determine launch behavior:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="p">@</span><span class=
"n">import</span> <span class="n">CoreLocation</span><span class=
"p">;</span>

<span class="k">@interface</span> <span class=
"nc">AppDelegate</span> <span class="p">()</span> <span class=
"o">&lt;</span><span class=
"n">CLLocationManagerDelegate</span><span class="o">&gt;</span>
<span class="k">@property</span> <span class=
"p">(</span><span class="n">readwrite</span><span class=
"p">,</span> <span class="n">nonatomic</span><span class=
"p">,</span> <span class="n">strong</span><span class=
"p">)</span> <span class="n">CLLocationManager</span> <span class=
"o">*</span><span class="n">locationManager</span><span class=
"p">;</span>
<span class="k">@end</span>
</code>
</pre>
            </div>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="k">-</span> <span class=
"p">(</span><span class="kt">BOOL</span><span class=
"p">)</span><span class="nf">application:</span><span class=
"p">(</span><span class="n">UIApplication</span> <span class=
"o">*</span><span class="p">)</span><span class=
"nv">application</span>
<span class="nl">didFinishLaunchingWithOptions:</span><span class=
"p">(</span><span class="n">NSDictionary</span> <span class=
"o">*</span><span class="p">)</span><span class=
"nv">launchOptions</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">if</span> <span class="p">(</span><span class=
"o">!</span><span class="p">[</span><span class=
"n">CLLocationManager</span> <span class=
"n">locationServicesEnabled</span><span class=
"p">])</span> <span class="p">{</span>
        <span class="p">[[[</span><span class=
"n">UIAlertView</span> <span class="n">alloc</span><span class=
"p">]</span> <span class="n">initWithTitle</span><span class=
"o">:</span><span class="n">NSLocalizedString</span><span class=
"p">(</span><span class=
"s">@"Location Services Disabled"</span><span class=
"p">,</span> <span class="nb">nil</span><span class="p">)</span>
                                    <span class=
"nl">message:</span><span class=
"n">NSLocalizedString</span><span class="p">(</span><span class=
"s">@"You currently have all location services for this device disabled. If you proceed, you will be asked to confirm whether location services should be reenabled."</span><span class="p">,</span> <span class="nb">nil</span><span class="p">)</span>
                                   <span class=
"nl">delegate:</span><span class="nb">nil</span>
                          <span class=
"nl">cancelButtonTitle:</span><span class=
"n">NSLocalizedString</span><span class="p">(</span><span class=
"s">@"OK"</span><span class="p">,</span> <span class=
"nb">nil</span><span class="p">)</span>
                          <span class=
"nl">otherButtonTitles:</span><span class=
"nb">nil</span><span class="p">]</span> <span class=
"n">show</span><span class="p">];</span>
    <span class="p">}</span> <span class=
"k">else</span> <span class="p">{</span>
        <span class="n">self</span><span class=
"p">.</span><span class="n">locationManager</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">CLLocationManager</span> <span class=
"n">alloc</span><span class="p">]</span> <span class=
"n">init</span><span class="p">];</span>
        <span class="n">self</span><span class=
"p">.</span><span class="n">locationManager</span><span class=
"p">.</span><span class="n">delegate</span> <span class=
"o">=</span> <span class="n">self</span><span class="p">;</span>
        <span class="p">[</span><span class=
"n">self</span><span class="p">.</span><span class=
"n">locationManager</span> <span class=
"n">startMonitoringSignificantLocationChanges</span><span class=
"p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class=
"n">launchOptions</span><span class="p">[</span><span class=
"n">UIApplicationLaunchOptionsLocationKey</span><span class=
"p">])</span> <span class="p">{</span>
        <span class="p">[</span><span class=
"n">self</span><span class="p">.</span><span class=
"n">locationManager</span> <span class=
"n">startUpdatingLocation</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code>
</pre>
            </div>
            <h2>
              Newsstand
            </h2>
            <p>
              <em>All of the Newsstand developers in the house: say
              "Yeah!"</em>
            </p>
            <p>
              <em><code>crickets.aiff</code></em>
            </p>
            <p>
              Well alright, then.
            </p>
            <p>
              Newsstand can launch when newly-downloaded assets are
              available.
            </p>
            <p>
              This is how you register:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="p">[</span><span class=
"n">application</span> <span class=
"n">registerForRemoteNotificationTypes</span><span class=
"o">:</span>
    <span class=
"n">UIRemoteNotificationTypeNewsstandContentAvailability</span><span class="p">];</span>
</code>
</pre>
            </div>
            <p>
              And this is the key to look out for in
              <code>launchOptions</code>:
            </p>
            <blockquote>
              <ul>
                <li>
                  <code>UIApplicationLaunchOptionsNewsstandDownloadsKey</code>:
                  Indicates that newly downloaded Newsstand assets
                  are available for your app. The value of this key
                  is an array of string identifiers that identify
                  the <code>NKAssetDownload</code> objects
                  corresponding to the assets. Although you can use
                  the identifiers for cross-checking purposes, you
                  should obtain the definitive array of
                  <code>NKAssetDownload</code> objects
                  (representing asset downloads in progress or in
                  error) through the downloadingAssets property of
                  the <code>NKLibrary</code> object representing
                  the Newsstand app’s library.
                </li>
              </ul>
            </blockquote>
            <p>
              Not too much more to say about that.
            </p>
            <h2>
              Bluetooth
            </h2>
            <p>
              iOS 7 introduced functionality that allows apps to be
              relaunched by Bluetooth peripherals.
            </p>
            <p>
              If an app launches, instantiates a
              <code>CBCentralManager</code> or
              <code>CBPeripheralManager</code> with a particular
              identifier, and connects to other Bluetooth
              peripherals, the app can be re-launched by certain
              actions from the Bluetooth system. Depending on
              whether it was a central or peripheral manager that
              was notified, one of the following keys will be
              passed into <code>launchOptions</code>:
            </p>
            <blockquote>
              <ul>
                <li>
                  <code>UIApplicationLaunchOptionsBluetoothCentralsKey</code>:
                  Indicates that the app previously had one or more
                  <code>CBCentralManager</code> objects and was
                  relaunched by the Bluetooth system to continue
                  actions associated with those objects. The value
                  of this key is an <code>NSArray</code> object
                  containing one or more <code>NSString</code>
                  objects. Each string in the array represents the
                  restoration identifier for a central manager
                  object.
                </li>
                <li>
                  <code>UIApplicationLaunchOptionsBluetoothPeripheralsKey</code>:
                  Indicates that the app previously had one or more
                  <code>CBPeripheralManager</code> objects and was
                  relaunched by the Bluetooth system to continue
                  actions associated with those objects. The value
                  of this key is an <code>NSArray</code> object
                  containing one or more <code>NSString</code>
                  objects. Each string in the array represents the
                  restoration identifier for a peripheral manager
                  object.
                </li>
              </ul>
            </blockquote>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="p">@</span><span class=
"n">import</span> <span class="n">CoreBluetooth</span><span class=
"p">;</span>

<span class="k">@interface</span> <span class=
"nc">AppDelegate</span> <span class="p">()</span> <span class=
"o">&lt;</span><span class=
"n">CBCentralManagerDelegate</span><span class="o">&gt;</span>
<span class="k">@property</span> <span class=
"p">(</span><span class="n">readwrite</span><span class=
"p">,</span> <span class="n">nonatomic</span><span class=
"p">,</span> <span class="n">strong</span><span class=
"p">)</span> <span class="n">CBCentralManager</span> <span class=
"o">*</span><span class="n">centralManager</span><span class=
"p">;</span>
<span class="k">@end</span>
</code>
</pre>
            </div>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="n">self</span><span class=
"p">.</span><span class="n">centralManager</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">CBCentralManager</span> <span class=
"n">alloc</span><span class="p">]</span> <span class=
"n">initWithDelegate</span><span class="o">:</span><span class=
"n">self</span> <span class="n">queue</span><span class=
"o">:</span><span class="nb">nil</span> <span class=
"n">options</span><span class="o">:</span><span class=
"p">@{</span><span class=
"n">CBCentralManagerOptionRestoreIdentifierKey</span><span class=
"o">:</span><span class="p">(</span><span class=
"n">launchOptions</span><span class="p">[</span><span class=
"n">UIApplicationLaunchOptionsBluetoothCentralsKey</span><span class="p">]</span> <span class="o">?:</span> <span class="p">[[</span><span class="n">NSUUID</span> <span class="n">UUID</span><span class="p">]</span> <span class="n">UUIDString</span><span class="p">])}];</span>

<span class="k">if</span> <span class="p">(</span><span class=
"n">self</span><span class="p">.</span><span class=
"n">centralManager</span><span class="p">.</span><span class=
"n">state</span> <span class="o">==</span> <span class=
"n">CBCentralManagerStatePoweredOn</span><span class=
"p">)</span> <span class="p">{</span>
    <span class="k">static</span> <span class=
"n">NSString</span> <span class="o">*</span> <span class=
"k">const</span> <span class="n">UID</span> <span class=
"o">=</span> <span class=
"s">@"7C13BAA0-A5D4-4624-9397-15BF67161B1C"</span><span class=
"p">;</span> <span class="c1">// generated with `$ uuidgen`</span>
    <span class="n">NSArray</span> <span class=
"o">*</span><span class="n">services</span> <span class=
"o">=</span> <span class="p">@[[</span><span class=
"n">CBUUID</span> <span class="n">UUIDWithString</span><span class=
"o">:</span><span class="n">UID</span><span class="p">]];</span>
    <span class="n">NSDictionary</span> <span class=
"o">*</span><span class="n">scanOptions</span> <span class=
"o">=</span> <span class="p">@{</span><span class=
"n">CBCentralManagerScanOptionAllowDuplicatesKey</span><span class=
"o">:</span><span class="p">@</span><span class=
"nb">YES</span><span class="p">};</span>
    <span class="p">[</span><span class="n">self</span><span class=
"p">.</span><span class="n">centralManager</span> <span class=
"n">scanForPeripheralsWithServices</span><span class=
"o">:</span><span class="n">services</span> <span class=
"n">options</span><span class="o">:</span><span class=
"n">scanOptions</span><span class="p">];</span>
<span class="p">}</span>
</code>
</pre>
            </div>
            <hr>
            <p>
              Keeping track of all of the various ways and means of
              application launching can be exhausting. So it's
              fortunate that any given app will probably only have
              to handle one or two of these possibilities.
            </p>
            <p>
              Knowing what's possible is often what it takes to
              launch an app from concept to implementation, so bear
              in mind all of your options when the next great idea
              springs to mind.
            </p>
          </div>
          <aside>
            <a href="https://twitter.com/share" class=
            "twitter-share-button" data-url=
            "http://nshipster.com/launch-options/" data-via=
            "NSHipster" data-size="large">Tweet</a> <script type=
            "text/javascript">
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
            </script>
          </aside>
          <footer id="book" class="promotion">
            <a href="https://gum.co/cfhipsterref"></a>
            <div id="cfhipsterref-cover"></div>
            <div>
              <hgroup>
                <h1>
                  <a href=
                  "https://gum.co/cfhipsterref">CFHipsterRef:
                  Low-Level Programming on<br>
                  iOS &amp; Mac OS X</a>
                </h1>
                <h2>
                  Available May 27th, 2014
                </h2>
              </hgroup>
              <p>
                Perfect for intermediate and expert developers
                wanting to take a deeper dive into advanced topics,
                <em>CFHipsterRef: Low-Level Programming on iOS
                &amp; Mac OS X</em> covers the core technologies
                powering Cocoa, Objective-C, and the operating
                system itself, including Core Bluetooth,
                Accelerate, and the Objective-C runtime.
              </p><button onclick=
              "javascript:window.location.href='https://gum.co/cfhipsterref'">Pre-Order
              Now</button>
            </div>
          </footer>
        </article>
      </div>
      <footer role="contentinfo">
        <section class="credits colophon">
          <p>
            Created by <a href="http://mattt.me">Mattt
            Thompson</a>, and released under a <a href=
            "http://creativecommons.org/licenses/by-nc/3.0/" rel=
            "license">Creative Commons BY-NC License</a>. <a href=
            "https://plus.google.com/106751358503565042647?rel=author"
            style="display: none;"></a>
          </p>
          <p>
            Articles also available in <a href=
            "http://nshipster.cn" hreflang="zh-Hans">中文</a>.
          </p>
        </section>
        <aside class="links">
          <a href="https://github.com/NSHipster/articles/issues"
          class="icon-github" title="Pull Requests Welcome"
          aria-hidden="true"></a> <a href="/feed.xml" class=
          "icon-feed" title="RSS" aria-hidden="true"></a>
        </aside>
        <section class="archive" role="navigation">
          <div>
            <h2>
              Foundation
            </h2>
            <ul>
              <li>
                <a href="/nsurl/">NSURL /<br>
                NSURLComponents</a>
              </li>
              <li>
                <a href=
                "/nstemporarydirectory/">NSTemporaryDirectory /<br>
                NSItemReplacementDirectory /<br>
                mktemp(3)</a>
              </li>
              <li>
                <a href="/nsrange/">NSRange</a>
              </li>
              <li>
                <a href=
                "/nsnotification-and-nsnotificationcenter/">NSNotification
                &amp;<br>
                NSNotificationCenter</a>
              </li>
              <li>
                <a href="/nsfilemanager/">NSFileManager</a>
              </li>
              <li>
                <a href="/nsformatter/">NSFormatter</a>
              </li>
              <li>
                <a href="/nserror/">NSError</a>
              </li>
              <li>
                <a href="/key-value-observing/">Key-Value
                Observing</a>
              </li>
              <li>
                <a href="/nshashtable-and-nsmaptable/">NSHashTable
                &amp;<br>
                NSMapTable</a>
              </li>
              <li>
                <a href="/nspredicate/">NSPredicate</a>
              </li>
              <li>
                <a href="/nsexpression/">NSExpression</a>
              </li>
              <li>
                <a href="/enumerators/">NSFastEnumeration /<br>
                NSEnumerator /<br>
                -enumerateObjectsUsingBlock:</a>
              </li>
              <li>
                <a href="/uuid-udid-unique-identifier/">NSUUID
                /<br>
                CFUUIDRef /<br>
                UIDevice -uniqueIdentifier /<br>
                -identifierForVendor</a>
              </li>
              <li>
                <a href="/nsdatadetector/">NSDataDetector</a>
              </li>
              <li>
                <a href="/nscoding/">NSCoding / NSKeyedArchiver</a>
              </li>
              <li>
                <a href="/nssecurecoding/">NSSecureCoding</a>
              </li>
              <li>
                <a href=
                "/nsassertionhandler/">NSAssertionHandler</a>
              </li>
              <li>
                <a href="/nsurlcache/">NSURLCache</a>
              </li>
              <li>
                <a href="/nsvalue/">NSValue</a>
              </li>
              <li>
                <a href="/nslocalizedstring/">NSLocalizedString</a>
              </li>
              <li>
                <a href="/instancetype/">instancetype</a>
              </li>
              <li>
                <a href="/kvc-collection-operators/">KVC Collection
                Operators</a>
              </li>
              <li>
                <a href="/nsorderedset/">NSOrderedSet</a>
              </li>
              <li>
                <a href="/ns_enum-ns_options/">NS_ENUM &amp;
                NS_OPTIONS</a>
              </li>
              <li>
                <a href=
                "/nsvaluetransformer/">NSValueTransformer</a>
              </li>
              <li>
                <a href="/nsurlprotocol/">NSURLProtocol</a>
              </li>
              <li>
                <a href=
                "/nslinguistictagger/">NSLinguisticTagger</a>
              </li>
              <li>
                <a href="/nscharacterset/">NSCharacterSet</a>
              </li>
              <li>
                <a href="/nslocale/">NSLocale</a>
              </li>
              <li>
                <a href="/nsoperation/">NSOperation</a>
              </li>
              <li>
                <a href=
                "/nsincrementalstore/">NSIncrementalStore</a>
              </li>
              <li>
                <a href="/nsdatecomponents/">NSDateComponents</a>
              </li>
              <li>
                <a href="/nssortdescriptor/">NSSortDescriptor</a>
              </li>
              <li>
                <a href="/nscache/">NSCache</a>
              </li>
              <li>
                <a href="/nsindexset/">NSIndexSet</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              CoreFoundation
            </h2>
            <ul>
              <li>
                <a href="/cfbag/">CFBag</a>
              </li>
              <li>
                <a href="/cfstringtransform/">CFStringTransform</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              CoreGraphics
            </h2>
            <ul>
              <li>
                <a href="/cggeometry/">CGGeometry</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              UIKit
            </h2>
            <ul>
              <li>
                <a href=
                "/launch-options/">UIApplicationDelegate<br>
                launchOptions</a>
              </li>
              <li>
                <a href="/uimenucontroller/">UIMenuController</a>
              </li>
              <li>
                <a href="/uiappearance/">UIAppearance</a>
              </li>
              <li>
                <a href=
                "/uilocalizedindexedcollation/">UILocalizedIndexedCollation</a>
              </li>
              <li>
                <a href="/uicollectionview/">UICollectionView</a>
              </li>
              <li>
                <a href="/uiaccessibility/">UIAccessibility</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Objective-C
            </h2>
            <ul>
              <li>
                <a href="/namespacing/">Namespacing</a>
              </li>
              <li>
                <a href="/extended-file-attributes/">Extended File
                Attributes</a>
              </li>
              <li>
                <a href="/equality/">Equality</a>
              </li>
              <li>
                <a href="/random/">rand(3) / random(3) /
                arc4random(3) / et al.</a>
              </li>
              <li>
                <a href="/object-subscripting/">Object
                Subscripting</a>
              </li>
              <li>
                <a href="/bool/">BOOL / bool / Boolean /
                NSCFBoolean</a>
              </li>
              <li>
                <a href="/c-storage-classes/">C Storage Classes</a>
              </li>
              <li>
                <a href="/type-encodings/">Type Encodings</a>
              </li>
              <li>
                <a href="/__attribute__/">__attribute__</a>
              </li>
              <li>
                <a href="/nil/">nil / Nil / NULL / NSNull</a>
              </li>
              <li>
                <a href="/at-compiler-directives/">@</a>
              </li>
              <li>
                <a href="/pragma/">#pragma</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Open Source
            </h2>
            <ul>
              <li>
                <a href="/xctool/">xctool</a>
              </li>
              <li>
                <a href="/afnetworking-2/">AFNetworking 2.0</a>
              </li>
              <li>
                <a href="/core-data-libraries-and-utilities/">Core
                Data Libraries &amp; Utilities</a>
              </li>
              <li>
                <a href="/gpuimage/">GPUImage</a>
              </li>
              <li>
                <a href="/reactivecocoa/">ReactiveCocoa</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Testing
            </h2>
            <ul>
              <li>
                <a href="/unit-testing/">Unit Testing</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Miscellanea
            </h2>
            <ul>
              <li>
                <a href=
                "/avspeechsynthesizer/">AVSpeechSynthesizer</a>
              </li>
              <li>
                <a href="/empathy/">Empathy</a>
              </li>
              <li>
                <a href=
                "/dictionary-services/">UIReferenceLibraryViewController
                /<br>
                DCSDictionaryRef/<br>
                /usr/share/dict/words</a>
              </li>
              <li>
                <a href="/method-swizzling/">Method Swizzling</a>
              </li>
              <li>
                <a href="/associated-objects/">Associated
                Objects</a>
              </li>
              <li>
                <a href=
                "/mktileoverlay-mkmapsnapshotter-mkdirections/">MKTileOverlay,<br>
                MKMapSnapshotter &amp;<br>
                MKDirections</a>
              </li>
              <li>
                <a href="/stewardship/">Stewardship</a>
              </li>
              <li>
                <a href="/colophon/">Colophon</a>
              </li>
              <li>
                <a href="/new-years-2014/">Reader Submissions -<br>
                New Year's 2014</a>
              </li>
              <li>
                <a href="/multipeer-connectivity/">Multipeer
                Connectivity</a>
              </li>
              <li>
                <a href="/nshipster-quiz-4/">NSHipster Quiz #4</a>
              </li>
              <li>
                <a href=
                "/launch-arguments-and-environment-variables/">Launch
                Arguments &amp;<br>
                Environment Variables</a>
              </li>
              <li>
                <a href="/xcode-key-bindings-and-gestures/">Xcode
                Key Bindings &amp; Gestures</a>
              </li>
              <li>
                <a href="/ios7/">iOS 7</a>
              </li>
              <li>
                <a href="/network-link-conditioner/">Network Link
                Conditioner</a>
              </li>
              <li>
                <a href="/xcode-snippets/">Xcode Snippets</a>
              </li>
              <li>
                <a href="/documentation/">Documentation</a>
              </li>
              <li>
                <a href="/nshipster-quiz-3/">NSHipster Quiz #3</a>
              </li>
              <li>
                <a href="/nshipster-quiz-2/">NSHipster Quiz #2</a>
              </li>
              <li>
                <a href="/mklocalsearch/">MKLocalSearch</a>
              </li>
              <li>
                <a href="/nshipster-quiz-1/">NSHipster Quiz #1</a>
              </li>
              <li>
                <a href="/icloud/">iCloud</a>
              </li>
              <li>
                <a href="/search-kit/">Search Kit</a>
              </li>
              <li>
                <a href="/backrow/">Back Row</a>
              </li>
              <li>
                <a href=
                "/reader-submissions-new-years-2013/">Reader
                Submissions -<br>
                New Year's 2013</a>
              </li>
              <li>
                <a href="/addressbookui/">AddressBookUI</a>
              </li>
            </ul>
          </div>
        </section>
      </footer>
    </div><script type="text/javascript">
var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
    </script><script type="text/javascript">
var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', '510be6d4108d7b438800005f');
      t.src = '//secure.gaug.es/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();
    </script>
  </body>
</html>
